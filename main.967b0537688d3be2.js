"use strict";var KJ=Object.defineProperty,QJ=Object.defineProperties,JJ=Object.getOwnPropertyDescriptors,Vj=Object.getOwnPropertySymbols,XJ=Object.prototype.hasOwnProperty,eX=Object.prototype.propertyIsEnumerable,Bj=(st,Ce,L)=>Ce in st?KJ(st,Ce,{enumerable:!0,configurable:!0,writable:!0,value:L}):st[Ce]=L,jj=(st,Ce)=>{for(var L in Ce||(Ce={}))XJ.call(Ce,L)&&Bj(st,L,Ce[L]);if(Vj)for(var L of Vj(Ce))eX.call(Ce,L)&&Bj(st,L,Ce[L]);return st},Hj=(st,Ce)=>QJ(st,JJ(Ce));(self.webpackChunkshasic_front=self.webpackChunkshasic_front||[]).push([[179],{2011:(st,Ce,L)=>{L.d(Ce,{Dh:()=>ue,GT:()=>be,cc:()=>Re,hO:()=>Ke,on:()=>z,pX:()=>ae,xv:()=>fe});var s=L(5e3),ne=L(127),V=L(5813);st=L.hmd(st);const he=["ngOnDestroy"],ae=(Se,Qe,nt,xe={})=>new Proxy(Se,{get:(Ie,Te)=>nt.runOutsideAngular(()=>{var qe;if(Se[Te])return(null===(qe=null==xe?void 0:xe.spy)||void 0===qe?void 0:qe.get)&&xe.spy.get(Te,Se[Te]),Se[Te];if(he.indexOf(Te)>-1)return()=>{};const Ze=Qe.toPromise().then($=>{const De=$&&$[Te];return"function"==typeof De?De.bind($):De&&De.then?De.then(J=>nt.run(()=>J)):nt.run(()=>De)});return new Proxy(()=>{},{get:($,De)=>Ze[De],apply:($,De,J)=>Ze.then(le=>{var ie;const we=le&&le(...J);return(null===(ie=null==xe?void 0:xe.spy)||void 0===ie?void 0:ie.apply)&&xe.spy.apply(Te,J,we),we})})})}),be=(Se,Qe)=>{Qe.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(xe=>{Object.defineProperty(Se.prototype,xe,Object.getOwnPropertyDescriptor(nt.prototype||nt,xe))})})};class oe{constructor(Qe){return Qe}}const ue=new s.OlP("angularfire2.app.options"),fe=new s.OlP("angularfire2.app.name");function z(Se,Qe,nt){const Ie="object"==typeof nt&&nt||{};Ie.name=Ie.name||"string"==typeof nt&&nt||"[DEFAULT]";const qe=ne.Z.apps.filter(Ze=>Ze&&Ze.name===Ie.name)[0]||Qe.runOutsideAngular(()=>ne.Z.initializeApp(Se,Ie));try{JSON.stringify(Se)!==JSON.stringify(qe.options)&&G("error",`${qe.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ze){}return new oe(qe)}const G=(Se,...Qe)=>{(0,s.X6Q)()&&"undefined"!=typeof console&&console[Se](...Qe)},se={provide:oe,useFactory:z,deps:[ue,s.R0b,[new s.FiY,fe]]};let Ke=(()=>{class Se{constructor(nt){ne.Z.registerVersion("angularfire",V.q4.full,"core"),ne.Z.registerVersion("angularfire",V.q4.full,"app-compat"),ne.Z.registerVersion("angular",s.q4F.full,nt.toString())}static initializeApp(nt,xe){return{ngModule:Se,providers:[{provide:ue,useValue:nt},{provide:fe,useValue:xe}]}}}return Se.\u0275fac=function(nt){return new(nt||Se)(s.LFG(s.Lbi))},Se.\u0275mod=s.oAB({type:Se}),Se.\u0275inj=s.cJS({providers:[se]}),Se})();function Re(Se,Qe,nt,xe,Ie){const[,Te,qe]=globalThis.\u0275AngularfireInstanceCache.find(Ze=>Ze[0]===Se)||[];if(Te)return function Fe(Se,Qe){try{return Se.toString()===Qe.toString()}catch(nt){return Se===Qe}}(Ie,qe)||(me("error",`${Qe} was already initialized on the ${nt} Firebase App with different settings.${He?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:Ie,was:qe})),Te;{const Ze=xe();return globalThis.\u0275AngularfireInstanceCache.push([Se,Ze,Ie]),Ze}}const He=!!st.hot,me=(Se,...Qe)=>{(0,s.X6Q)()&&"undefined"!=typeof console&&console[Se](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(st,Ce,L)=>{L.d(Ce,{q4:()=>Jr,iC:()=>Mo,fc:()=>es,HU:()=>sp,vb:()=>vh,JM:()=>Cy});var s=L(5e3),ne=L(5867),V=L(5861),he=L(9681),ae=L(2090),be=L(4859),oe=L(1877),ue=L(8766);const fe="@firebase/installations",z="0.5.9",se=`w:${z}`,Ke="FIS_v2",Qe=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(T){return T instanceof ae.ZR&&T.code.includes("request-failed")}function xe({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Ie(T){return{token:T.token,requestStatus:2,expiresIn:le(T.expiresIn),creationTime:Date.now()}}function Te(T,S){return qe.apply(this,arguments)}function qe(){return(qe=(0,V.Z)(function*(T,S){const j=(yield S.json()).error;return Qe.create("request-failed",{requestName:T,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function Ze({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function $(T,{refreshToken:S}){const P=Ze(T);return P.append("Authorization",function ie(T){return`${Ke} ${T}`}(S)),P}function De(T){return J.apply(this,arguments)}function J(){return(J=(0,V.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function le(T){return Number(T.replace("s","000"))}function we(T,S){return de.apply(this,arguments)}function de(){return(de=(0,V.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:P}){const j=xe(T),ee=Ze(T),ce=S.getImmediate({optional:!0});if(ce){const It=yield ce.getHeartbeatsHeader();It&&ee.append("x-firebase-client",It)}const Ge={method:"POST",headers:ee,body:JSON.stringify({fid:P,authVersion:Ke,appId:T.appId,sdkVersion:se})},Et=yield De(()=>fetch(j,Ge));if(Et.ok){const It=yield Et.json();return{fid:It.fid||P,registrationStatus:2,refreshToken:It.refreshToken,authToken:Ie(It.authToken)}}throw yield Te("Create Installation",Et)})).apply(this,arguments)}function Le(T){return new Promise(S=>{setTimeout(S,T)})}const nn=/^[cdef][\w-]{21}$/;function rt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const P=function pn(T){return function pt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return nn.test(P)?P:""}catch(T){return""}}function Zn(T){return`${T.appName}!${T.appId}`}const vn=new Map;function an(T,S){const P=Zn(T);$t(P,S),function ps(T,S){const P=function Tr(){return!Ei&&"BroadcastChannel"in self&&(Ei=new BroadcastChannel("[Firebase] FID Change"),Ei.onmessage=T=>{$t(T.data.key,T.data.fid)}),Ei}();P&&P.postMessage({key:T,fid:S}),function zr(){0===vn.size&&Ei&&(Ei.close(),Ei=null)}()}(P,S)}function $t(T,S){const P=vn.get(T);if(P)for(const j of P)j(S)}let Ei=null;const ui="firebase-installations-store";let ms=null;function yt(){return ms||(ms=(0,ue.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(ui)}})),ms}function Ii(T,S){return jn.apply(this,arguments)}function jn(){return(jn=(0,V.Z)(function*(T,S){const P=Zn(T),ee=(yield yt()).transaction(ui,"readwrite"),ce=ee.objectStore(ui),Ne=yield ce.get(P);return yield ce.put(S,P),yield ee.done,(!Ne||Ne.fid!==S.fid)&&an(T,S.fid),S})).apply(this,arguments)}function Gn(T){return _o.apply(this,arguments)}function _o(){return(_o=(0,V.Z)(function*(T){const S=Zn(T),j=(yield yt()).transaction(ui,"readwrite");yield j.objectStore(ui).delete(S),yield j.done})).apply(this,arguments)}function di(T,S){return lr.apply(this,arguments)}function lr(){return(lr=(0,V.Z)(function*(T,S){const P=Zn(T),ee=(yield yt()).transaction(ui,"readwrite"),ce=ee.objectStore(ui),Ne=yield ce.get(P),Ge=S(Ne);return void 0===Ge?yield ce.delete(P):yield ce.put(Ge,P),yield ee.done,Ge&&(!Ne||Ne.fid!==Ge.fid)&&an(T,Ge.fid),Ge})).apply(this,arguments)}function $n(T){return Di.apply(this,arguments)}function Di(){return(Di=(0,V.Z)(function*(T){let S;const P=yield di(T.appConfig,j=>{const ee=Qo(j),ce=rn(T,ee);return S=ce.registrationPromise,ce.installationEntry});return""===P.fid?{installationEntry:yield S}:{installationEntry:P,registrationPromise:S}})).apply(this,arguments)}function Qo(T){return Jo(T||{fid:rt(),registrationStatus:0})}function rn(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Qe.create("app-offline"))};const P={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},j=function ct(T,S){return Ct.apply(this,arguments)}(T,P);return{installationEntry:P,registrationPromise:j}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Sr(T)}:{installationEntry:S}}function Ct(){return(Ct=(0,V.Z)(function*(T,S){try{const P=yield we(T,S);return Ii(T.appConfig,P)}catch(P){throw nt(P)&&409===P.customData.serverCode?yield Gn(T.appConfig):yield Ii(T.appConfig,{fid:S.fid,registrationStatus:0}),P}})).apply(this,arguments)}function Sr(T){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,V.Z)(function*(T){let S=yield Yt(T.appConfig);for(;1===S.registrationStatus;)yield Le(100),S=yield Yt(T.appConfig);if(0===S.registrationStatus){const{installationEntry:P,registrationPromise:j}=yield $n(T);return j||P}return S})).apply(this,arguments)}function Yt(T){return di(T,S=>{if(!S)throw Qe.create("installation-not-found");return Jo(S)})}function Jo(T){return function Ar(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function xr(T,S){return H.apply(this,arguments)}function H(){return(H=(0,V.Z)(function*({appConfig:T,heartbeatServiceProvider:S},P){const j=W(T,P),ee=$(T,P),ce=S.getImmediate({optional:!0});if(ce){const It=yield ce.getHeartbeatsHeader();It&&ee.append("x-firebase-client",It)}const Ge={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:se,appId:T.appId}})},Et=yield De(()=>fetch(j,Ge));if(Et.ok)return Ie(yield Et.json());throw yield Te("Generate Auth Token",Et)})).apply(this,arguments)}function W(T,{fid:S}){return`${xe(T)}/${S}/authTokens:generate`}function K(T){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,V.Z)(function*(T,S=!1){let P;const j=yield di(T.appConfig,ce=>{if(!At(ce))throw Qe.create("not-registered");const Ne=ce.authToken;if(!S&&An(Ne))return ce;if(1===Ne.requestStatus)return P=Y(T,S),ce;{if(!navigator.onLine)throw Qe.create("app-offline");const Ge=rr(ce);return P=ot(T,Ge),Ge}});return P?yield P:j.authToken})).apply(this,arguments)}function Y(T,S){return re.apply(this,arguments)}function re(){return(re=(0,V.Z)(function*(T,S){let P=yield Pe(T.appConfig);for(;1===P.authToken.requestStatus;)yield Le(100),P=yield Pe(T.appConfig);const j=P.authToken;return 0===j.requestStatus?K(T,S):j})).apply(this,arguments)}function Pe(T){return di(T,S=>{if(!At(S))throw Qe.create("not-registered");return function Yr(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function ot(T,S){return mt.apply(this,arguments)}function mt(){return(mt=(0,V.Z)(function*(T,S){try{const P=yield xr(T,S),j=Object.assign(Object.assign({},S),{authToken:P});return yield Ii(T.appConfig,j),P}catch(P){if(!nt(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const j=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Ii(T.appConfig,j)}else yield Gn(T.appConfig);throw P}})).apply(this,arguments)}function At(T){return void 0!==T&&2===T.registrationStatus}function An(T){return 2===T.requestStatus&&!function Tt(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function rr(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function El(){return(El=(0,V.Z)(function*(T){const S=T,{installationEntry:P,registrationPromise:j}=yield $n(S);return j?j.catch(console.error):K(S).catch(console.error),P.fid})).apply(this,arguments)}function Il(){return(Il=(0,V.Z)(function*(T,S=!1){const P=T;return yield ir(P),(yield K(P,S)).token})).apply(this,arguments)}function ir(T){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,V.Z)(function*(T){const{registrationPromise:S}=yield $n(T);S&&(yield S)})).apply(this,arguments)}function Fa(T){return Qe.create("missing-app-config-values",{valueName:T})}const fi="installations",ft=T=>{const S=T.getProvider("app").getImmediate(),P=function pr(T){if(!T||!T.options)throw Fa("App Configuration");if(!T.name)throw Fa("App Name");const S=["projectId","apiKey","appId"];for(const P of S)if(!T.options[P])throw Fa(P);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:P,heartbeatServiceProvider:(0,he._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},yn=T=>{const S=T.getProvider("app").getImmediate(),P=(0,he._getProvider)(S,fi).getImmediate();return{getId:()=>function Ec(T){return El.apply(this,arguments)}(P),getToken:ee=>function Ic(T){return Il.apply(this,arguments)}(P,ee)}};(function pi(){(0,he._registerComponent)(new be.wA(fi,ft,"PUBLIC")),(0,he._registerComponent)(new be.wA("installations-internal",yn,"PRIVATE"))})(),(0,he.registerVersion)(fe,z),(0,he.registerVersion)(fe,z,"esm2017");const _s="@firebase/remote-config",zn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ym{constructor(S,P,j,ee){this.client=S,this.storage=P,this.storageCache=j,this.logger=ee}isCachedDataFresh(S,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-P,ee=j<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ee}.`),ee}fetch(S){var P=this;return(0,V.Z)(function*(){const[j,ee]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(ee&&P.isCachedDataFresh(S.cacheMaxAgeMillis,j))return ee;S.eTag=ee&&ee.eTag;const ce=yield P.client.fetch(S),Ne=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&Ne.push(P.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(Ne),ce})()}}function Kd(T=navigator){return T.languages&&T.languages[0]||T.language}class kr{constructor(S,P,j,ee,ce,Ne){this.firebaseInstallations=S,this.sdkVersion=P,this.namespace=j,this.projectId=ee,this.apiKey=ce,this.appId=Ne}fetch(S){var P=this;return(0,V.Z)(function*(){const[j,ee]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,Ge={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Et={sdk_version:P.sdkVersion,app_instance_id:j,app_instance_id_token:ee,app_id:P.appId,language_code:Kd()},It={method:"POST",headers:Ge,body:JSON.stringify(Et)},Wt=fetch(Ne,It),Dt=new Promise((ei,wr)=>{S.signal.addEventListener(()=>{const wh=new Error("The operation was aborted.");wh.name="AbortError",wr(wh)})});let yr;try{yield Promise.race([Wt,Dt]),yr=yield Wt}catch(ei){let wr="fetch-client-network";throw"AbortError"===ei.name&&(wr="fetch-timeout"),zn.create(wr,{originalErrorMessage:ei.message})}let br=yr.status;const Ro=yr.headers.get("ETag")||void 0;let _i,Xr;if(200===yr.status){let ei;try{ei=yield yr.json()}catch(wr){throw zn.create("fetch-client-parse",{originalErrorMessage:wr.message})}_i=ei.entries,Xr=ei.state}if("INSTANCE_STATE_UNSPECIFIED"===Xr?br=500:"NO_CHANGE"===Xr?br=304:("NO_TEMPLATE"===Xr||"EMPTY_CONFIG"===Xr)&&(_i={}),304!==br&&200!==br)throw zn.create("fetch-status",{httpStatus:br});return{status:br,eTag:Ro,config:_i}})()}}class bm{constructor(S,P){this.client=S,this.storage=P}fetch(S){var P=this;return(0,V.Z)(function*(){const j=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(S,j)})()}attemptFetch(S,{throttleEndTimeMillis:P,backoffCount:j}){var ee=this;return(0,V.Z)(function*(){yield function wo(T,S){return new Promise((P,j)=>{const ee=Math.max(S-Date.now(),0),ce=setTimeout(P,ee);T.addEventListener(()=>{clearTimeout(ce),j(zn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,P);try{const ce=yield ee.client.fetch(S);return yield ee.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function Qd(T){if(!(T instanceof ae.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ce))throw ce;const Ne={throttleEndTimeMillis:Date.now()+(0,ae.$s)(j),backoffCount:j+1};return yield ee.storage.setThrottleMetadata(Ne),ee.attemptFetch(S,Ne)}})()}}class Jd{constructor(S,P,j,ee,ce){this.app=S,this._client=P,this._storageCache=j,this._storage=ee,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ru(T,S){const P=T.target.error||void 0;return zn.create(S,{originalErrorMessage:P&&P.message})}const Co="app_namespace_store";class Im{constructor(S,P,j,ee=function Em(){return new Promise((T,S)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=j=>{S(Ru(j,"storage-open"))},P.onsuccess=j=>{T(j.target.result)},P.onupgradeneeded=j=>{0===j.oldVersion&&j.target.result.createObjectStore(Co,{keyPath:"compositeKey"})}}catch(P){S(zn.create("storage-open",{originalErrorMessage:P}))}})}()){this.appId=S,this.appName=P,this.namespace=j,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var P=this;return(0,V.Z)(function*(){const j=yield P.openDbPromise;return new Promise((ee,ce)=>{const Ge=j.transaction([Co],"readonly").objectStore(Co),Et=P.createCompositeKey(S);try{const It=Ge.get(Et);It.onerror=Wt=>{ce(Ru(Wt,"storage-get"))},It.onsuccess=Wt=>{const Dt=Wt.target.result;ee(Dt?Dt.value:void 0)}}catch(It){ce(zn.create("storage-get",{originalErrorMessage:It&&It.message}))}})})()}set(S,P){var j=this;return(0,V.Z)(function*(){const ee=yield j.openDbPromise;return new Promise((ce,Ne)=>{const Et=ee.transaction([Co],"readwrite").objectStore(Co),It=j.createCompositeKey(S);try{const Wt=Et.put({compositeKey:It,value:P});Wt.onerror=Dt=>{Ne(Ru(Dt,"storage-set"))},Wt.onsuccess=()=>{ce()}}catch(Wt){Ne(zn.create("storage-set",{originalErrorMessage:Wt&&Wt.message}))}})})()}delete(S){var P=this;return(0,V.Z)(function*(){const j=yield P.openDbPromise;return new Promise((ee,ce)=>{const Ge=j.transaction([Co],"readwrite").objectStore(Co),Et=P.createCompositeKey(S);try{const It=Ge.delete(Et);It.onerror=Wt=>{ce(Ru(Wt,"storage-delete"))},It.onsuccess=()=>{ee()}}catch(It){ce(zn.create("storage-delete",{originalErrorMessage:It&&It.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class eh{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,V.Z)(function*(){const P=S.storage.getLastFetchStatus(),j=S.storage.getLastSuccessfulFetchTimestampMillis(),ee=S.storage.getActiveConfig(),ce=yield P;ce&&(S.lastFetchStatus=ce);const Ne=yield j;Ne&&(S.lastSuccessfulFetchTimestampMillis=Ne);const Ge=yield ee;Ge&&(S.activeConfig=Ge)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Ac(){return th.apply(this,arguments)}function th(){return(th=(0,V.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(T){return!1}})).apply(this,arguments)}!function Ua(){(0,he._registerComponent)(new be.wA("remote-config",function T(S,{instanceIdentifier:P}){const j=S.getProvider("app").getImmediate(),ee=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw zn.create("registration-window");if(!(0,ae.hl)())throw zn.create("indexed-db-unavailable");const{projectId:ce,apiKey:Ne,appId:Ge}=j.options;if(!ce)throw zn.create("registration-project-id");if(!Ne)throw zn.create("registration-api-key");if(!Ge)throw zn.create("registration-app-id");const Et=new Im(Ge,j.name,P=P||"firebase"),It=new eh(Et),Wt=new oe.Yd(_s);Wt.logLevel=oe.in.ERROR;const Dt=new kr(ee,he.SDK_VERSION,P,ce,Ne,Ge),yr=new bm(Dt,Et),br=new ym(yr,Et,It,Wt),Ro=new Jd(j,br,It,Et,Wt);return function En(T){const S=(0,ae.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Ro),Ro},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(_s,"0.3.8"),(0,he.registerVersion)(_s,"0.3.8","esm2017")}();const nh="/firebase-messaging-sw.js",Rr="/firebase-cloud-messaging-push-scope",ta="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Va="google.c.a.c_id",xc="google.c.a.c_l",Wf="google.c.a.ts",Al="google.c.a.e";var Ba=(()=>{return(T=Ba||(Ba={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",Ba;var T})();function Kr(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rh(T){const P=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(P),ee=new Uint8Array(j.length);for(let ce=0;ce<j.length;++ce)ee[ce]=j.charCodeAt(ce);return ee}const Pr="fcm_token_details_db",Ai="fcm_token_object_Store";function Pu(T){return ih.apply(this,arguments)}function ih(){return ih=(0,V.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(Pr))return null;let S=null;return(yield(0,ue.X3)(Pr,5,{upgrade:(j=(0,V.Z)(function*(ee,ce,Ne,Ge){var Et;if(ce<2||!ee.objectStoreNames.contains(Ai))return;const It=Ge.objectStore(Ai),Wt=yield It.index("fcmSenderId").get(T);if(yield It.clear(),Wt)if(2===ce){const Dt=Wt;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;S={token:Dt.fcmToken,createTime:null!==(Et=Dt.createTime)&&void 0!==Et?Et:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:Kr(Dt.vapidKey)}}}else if(3===ce){const Dt=Wt;S={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Kr(Dt.auth),p256dh:Kr(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Kr(Dt.vapidKey)}}}else if(4===ce){const Dt=Wt;S={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Kr(Dt.auth),p256dh:Kr(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Kr(Dt.vapidKey)}}}}),function(ce,Ne,Ge,Et){return j.apply(this,arguments)})})).close(),yield(0,ue.Lj)(Pr),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),Ou(S)?S:null;var j}),ih.apply(this,arguments)}function Ou(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Cs="firebase-messaging-store";let Kf=null;function bn(){return Kf||(Kf=(0,ue.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Cs)}})),Kf}function xl(T){return ra.apply(this,arguments)}function ra(){return(ra=(0,V.Z)(function*(T){const S=mr(T),j=yield(yield bn()).transaction(Cs).objectStore(Cs).get(S);if(j)return j;{const ee=yield Pu(T.appConfig.senderId);if(ee)return yield un(T,ee),ee}})).apply(this,arguments)}function un(T,S){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,V.Z)(function*(T,S){const P=mr(T),ee=(yield bn()).transaction(Cs,"readwrite");return yield ee.objectStore(Cs).put(S,P),yield ee.done,S})).apply(this,arguments)}function Mc(T){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,V.Z)(function*(T){const S=mr(T),j=(yield bn()).transaction(Cs,"readwrite");yield j.objectStore(Cs).delete(S),yield j.done})).apply(this,arguments)}function mr({appConfig:T}){return T.appId}const Nn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Es(T,S){return _r.apply(this,arguments)}function _r(){return(_r=(0,V.Z)(function*(T,S){const P=yield qa(T),j=Za(S),ee={method:"POST",headers:P,body:JSON.stringify(j)};let ce;try{ce=yield(yield fetch(Is(T.appConfig),ee)).json()}catch(Ne){throw Nn.create("token-subscribe-failed",{errorInfo:Ne})}if(ce.error)throw Nn.create("token-subscribe-failed",{errorInfo:ce.error.message});if(!ce.token)throw Nn.create("token-subscribe-no-token");return ce.token})).apply(this,arguments)}function ia(T,S){return Us.apply(this,arguments)}function Us(){return(Us=(0,V.Z)(function*(T,S){const P=yield qa(T),j=Za(S.subscriptionOptions),ee={method:"PATCH",headers:P,body:JSON.stringify(j)};let ce;try{ce=yield(yield fetch(`${Is(T.appConfig)}/${S.token}`,ee)).json()}catch(Ne){throw Nn.create("token-update-failed",{errorInfo:Ne})}if(ce.error)throw Nn.create("token-update-failed",{errorInfo:ce.error.message});if(!ce.token)throw Nn.create("token-update-no-token");return ce.token})).apply(this,arguments)}function kl(T,S){return $i.apply(this,arguments)}function $i(){return($i=(0,V.Z)(function*(T,S){const j={method:"DELETE",headers:yield qa(T)};try{const ce=yield(yield fetch(`${Is(T.appConfig)}/${S}`,j)).json();if(ce.error)throw Nn.create("token-unsubscribe-failed",{errorInfo:ce.error.message})}catch(ee){throw Nn.create("token-unsubscribe-failed",{errorInfo:ee})}})).apply(this,arguments)}function Is({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function qa(T){return _t.apply(this,arguments)}function _t(){return(_t=(0,V.Z)(function*({appConfig:T,installations:S}){const P=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function Za({p256dh:T,auth:S,endpoint:P,vapidKey:j}){const ee={web:{endpoint:P,auth:S,p256dh:T}};return j!==ta&&(ee.web.applicationPubKey=j),ee}const kc=6048e5;function Rl(T){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,V.Z)(function*(T){const S=yield Mn(T.swRegistration,T.vapidKey),P={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:Kr(S.getKey("auth")),p256dh:Kr(S.getKey("p256dh"))},j=yield xl(T.firebaseDependencies);if(j){if(sa(j.subscriptionOptions,P))return Date.now()>=j.createTime+kc?Vu(T,{token:j.token,createTime:Date.now(),subscriptionOptions:P}):j.token;try{yield kl(T.firebaseDependencies,j.token)}catch(ee){console.warn(ee)}return qt(T.firebaseDependencies,P)}return qt(T.firebaseDependencies,P)})).apply(this,arguments)}function Pl(T){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,V.Z)(function*(T){const S=yield xl(T.firebaseDependencies);S&&(yield kl(T.firebaseDependencies,S.token),yield Mc(T.firebaseDependencies));const P=yield T.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function Vu(T,S){return Me.apply(this,arguments)}function Me(){return(Me=(0,V.Z)(function*(T,S){try{const P=yield ia(T.firebaseDependencies,S),j=Object.assign(Object.assign({},S),{token:P,createTime:Date.now()});return yield un(T.firebaseDependencies,j),P}catch(P){throw yield Pl(T),P}})).apply(this,arguments)}function qt(T,S){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,V.Z)(function*(T,S){const j={token:yield Es(T,S),createTime:Date.now(),subscriptionOptions:S};return yield un(T,j),j.token})).apply(this,arguments)}function Mn(T,S){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,V.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:rh(S)})})).apply(this,arguments)}function sa(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function xi(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Ol(T,S){if(!S.notification)return;T.notification={};const P=S.notification.title;P&&(T.notification.title=P);const j=S.notification.body;j&&(T.notification.body=j);const ee=S.notification.image;ee&&(T.notification.image=ee)}(S,T),function Bu(T,S){!S.data||(T.data=S.data)}(S,T),function Dm(T,S){if(!S.fcmOptions)return;T.fcmOptions={};const P=S.fcmOptions.link;P&&(T.fcmOptions.link=P);const j=S.fcmOptions.analytics_label;j&&(T.fcmOptions.analyticsLabel=j)}(S,T),S}function Pc(T){return"object"==typeof T&&!!T&&Va in T}function Nl(T,S){const P=[];for(let j=0;j<T.length;j++)P.push(T.charAt(j)),j<S.length&&P.push(S.charAt(j));return P.join("")}function Yn(T){return Nn.create("missing-app-config-values",{valueName:T})}Nl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Nl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Vs{constructor(S,P,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function Oc(T){if(!T||!T.options)throw Yn("App Configuration Object");if(!T.name)throw Yn("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:P}=T;for(const j of S)if(!P[j])throw Yn(j);return{appName:T.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ee,installations:P,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Fl(T){return Io.apply(this,arguments)}function Io(){return(Io=(0,V.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(nh,{scope:Rr}),T.swRegistration.update().catch(()=>{})}catch(S){throw Nn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function zi(T,S){return ju.apply(this,arguments)}function ju(){return(ju=(0,V.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield Fl(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Nn.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function Nc(T,S){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,V.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=ta)})).apply(this,arguments)}function Ll(){return(Ll=(0,V.Z)(function*(T,S){if(!navigator)throw Nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nn.create("permission-blocked");return yield Nc(T,null==S?void 0:S.vapidKey),yield zi(T,null==S?void 0:S.serviceWorkerRegistration),Rl(T)})).apply(this,arguments)}function oa(T,S,P){return qu.apply(this,arguments)}function qu(){return(qu=(0,V.Z)(function*(T,S,P){const j=Ul(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:P[Va],message_name:P[xc],message_time:P[Wf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ul(T){switch(T){case Ba.NOTIFICATION_CLICKED:return"notification_open";case Ba.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Zu(){return(Zu=(0,V.Z)(function*(T,S){const P=S.data;if(!P.isFirebaseMessaging)return;T.onMessageHandler&&P.messageType===Ba.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(xi(P)):T.onMessageHandler.next(xi(P)));const j=P.data;Pc(j)&&"1"===j[Al]&&(yield oa(T,P.messageType,j))})).apply(this,arguments)}const $a="@firebase/messaging",sh=T=>{const S=new Vs(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function Tm(T,S){return Zu.apply(this,arguments)}(S,P)),S},za=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:j=>function Fc(T,S){return Ll.apply(this,arguments)}(S,j)}};function Ya(){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,V.Z)(function*(){try{yield(0,ae.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function oh(){(0,he._registerComponent)(new be.wA("messaging",sh,"PUBLIC")),(0,he._registerComponent)(new be.wA("messaging-internal",za,"PRIVATE")),(0,he.registerVersion)($a,"0.9.13"),(0,he.registerVersion)($a,"0.9.13","esm2017")}();const ah="analytics",Sm="firebase_id",Bs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wa="https://www.googletagmanager.com/gtag/js",ur=new oe.Yd("@firebase/analytics");function Xf(T){return Promise.all(T.map(S=>S.catch(P=>P)))}function aa(T,S){const P=document.createElement("script");P.src=`${Wa}?l=${T}&id=${S}`,P.async=!0,document.head.appendChild(P)}function ch(T,S,P,j,ee,ce){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,V.Z)(function*(T,S,P,j,ee,ce){const Ne=j[ee];try{if(Ne)yield S[Ne];else{const Et=(yield Xf(P)).find(It=>It.measurementId===ee);Et&&(yield S[Et.appId])}}catch(Ge){ur.error(Ge)}T("config",ee,ce)})).apply(this,arguments)}function la(T,S,P,j,ee){return Do.apply(this,arguments)}function Do(){return(Do=(0,V.Z)(function*(T,S,P,j,ee){try{let ce=[];if(ee&&ee.send_to){let Ne=ee.send_to;Array.isArray(Ne)||(Ne=[Ne]);const Ge=yield Xf(P);for(const Et of Ne){const It=Ge.find(Dt=>Dt.measurementId===Et),Wt=It&&S[It.appId];if(!Wt){ce=[];break}ce.push(Wt)}}0===ce.length&&(ce=Object.values(S)),yield Promise.all(ce),T("event",j,ee||{})}catch(ce){ur.error(ce)}})).apply(this,arguments)}function Tn(){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes(Wa))return S;return null}const Nr=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Vc=new class Yi{constructor(S={},P=1e3){this.throttleMetadata=S,this.intervalMillis=P}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,P){this.throttleMetadata[S]=P}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function dh(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function dr(T){return js.apply(this,arguments)}function js(){return(js=(0,V.Z)(function*(T){var S;const{appId:P,apiKey:j}=T,ee={method:"GET",headers:dh(j)},ce=Bs.replace("{app-id}",P),Ne=yield fetch(ce,ee);if(200!==Ne.status&&304!==Ne.status){let Ge="";try{const Et=yield Ne.json();(null===(S=Et.error)||void 0===S?void 0:S.message)&&(Ge=Et.error.message)}catch(Et){}throw Nr.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:Ge})}return Ne.json()})).apply(this,arguments)}function Mt(T){return ut.apply(this,arguments)}function ut(){return(ut=(0,V.Z)(function*(T,S=Vc,P){const{appId:j,apiKey:ee,measurementId:ce}=T.options;if(!j)throw Nr.create("no-app-id");if(!ee){if(ce)return{measurementId:ce,appId:j};throw Nr.create("no-api-key")}const Ne=S.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new fh;return setTimeout((0,V.Z)(function*(){Ge.abort()}),void 0!==P?P:6e4),ca({appId:j,apiKey:ee,measurementId:ce},Ne,Ge,S)})).apply(this,arguments)}function ca(T,S,P){return hh.apply(this,arguments)}function hh(){return(hh=(0,V.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:P},j,ee=Vc){const{appId:ce,measurementId:Ne}=T;try{yield Ka(j,S)}catch(Ge){if(Ne)return ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:ce,measurementId:Ne};throw Ge}try{const Ge=yield dr(T);return ee.deleteThrottleMetadata(ce),Ge}catch(Ge){if(!$u(Ge)){if(ee.deleteThrottleMetadata(ce),Ne)return ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:ce,measurementId:Ne};throw Ge}const Et=503===Number(Ge.customData.httpStatus)?(0,ae.$s)(P,ee.intervalMillis,30):(0,ae.$s)(P,ee.intervalMillis),It={throttleEndTimeMillis:Date.now()+Et,backoffCount:P+1};return ee.setThrottleMetadata(ce,It),ur.debug(`Calling attemptFetch again in ${Et} millis`),ca(T,It,j,ee)}})).apply(this,arguments)}function Ka(T,S){return new Promise((P,j)=>{const ee=Math.max(S-Date.now(),0),ce=setTimeout(P,ee);T.addEventListener(()=>{clearTimeout(ce),j(Nr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function $u(T){if(!(T instanceof ae.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class fh{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function zu(){return gi.apply(this,arguments)}function gi(){return(gi=(0,V.Z)(function*(){if(!(0,ae.hl)())return ur.warn(Nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(T){return ur.warn(Nr.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function Qa(){return(Qa=(0,V.Z)(function*(T,S,P,j,ee,ce,Ne){var Ge;const Et=Mt(T);Et.then(br=>{P[br.measurementId]=br.appId,T.options.measurementId&&br.measurementId!==T.options.measurementId&&ur.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${br.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(br=>ur.error(br)),S.push(Et);const It=zu().then(br=>{if(br)return j.getId()}),[Wt,Dt]=yield Promise.all([Et,It]);Tn()||aa(ce,Wt.measurementId),ee("js",new Date);const yr=null!==(Ge=null==Ne?void 0:Ne.config)&&void 0!==Ge?Ge:{};return yr.origin="firebase",yr.update=!0,null!=Dt&&(yr[Sm]=Dt),ee("config",Wt.measurementId,yr),Wt.measurementId})).apply(this,arguments)}class Hs{constructor(S){this.app=S}_delete(){return delete Fr[this.app.options.appId],Promise.resolve()}}let Fr={},ph=[];const Hl={};let Bc,Pn,Qr="dataLayer",Wi=!1;function ep(T,S,P){!function Zt(){const T=[];if((0,ae.ru)()&&T.push("This is a browser extension environment."),(0,ae.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((j,ee)=>`(${ee+1}) ${j}`).join(" "),P=Nr.create("invalid-analytics-context",{errorInfo:S});ur.warn(P.message)}}();const j=T.options.appId;if(!j)throw Nr.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Nr.create("no-api-key");ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Fr[j])throw Nr.create("already-exists",{id:j});if(!Wi){!function Lc(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(Qr);const{wrappedGtag:ce,gtagCore:Ne}=function Am(T,S,P,j,ee){let ce=function(...Ne){window[j].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(ce=window[ee]),window[ee]=function Gu(T,S,P,j){function ce(){return(ce=(0,V.Z)(function*(Ne,Ge,Et){try{"event"===Ne?yield la(T,S,P,Ge,Et):"config"===Ne?yield ch(T,S,P,j,Ge,Et):T("set",Ge)}catch(It){ur.error(It)}})).apply(this,arguments)}return function ee(Ne,Ge,Et){return ce.apply(this,arguments)}}(ce,T,S,P),{gtagCore:ce,wrappedGtag:window[ee]}}(Fr,ph,Hl,Qr,"gtag");Pn=ce,Bc=Ne,Wi=!0}return Fr[j]=function vr(T,S,P,j,ee,ce,Ne){return Qa.apply(this,arguments)}(T,ph,Hl,S,Bc,Qr,P),new Hs(T)}function ql(){return(ql=(0,V.Z)(function*(T,S,P,j,ee){if(ee&&ee.global)T("event",P,j);else{const ce=yield S;T("event",P,Object.assign(Object.assign({},j),{send_to:ce}))}})).apply(this,arguments)}function xm(){return jc.apply(this,arguments)}function jc(){return(jc=(0,V.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(T){return!1}})).apply(this,arguments)}const mh="@firebase/analytics";!function _h(){(0,he._registerComponent)(new be.wA(ah,(S,{options:P})=>ep(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,he._registerComponent)(new be.wA("analytics-internal",function T(S){try{const P=S.getProvider(ah).getImmediate();return{logEvent:(j,ee,ce)=>function np(T,S,P,j){T=(0,ae.m9)(T),function To(T,S,P,j,ee){return ql.apply(this,arguments)}(Pn,Fr[T.app.options.appId],S,P,j).catch(ee=>ur.error(ee))}(P,j,ee,ce)}}catch(P){throw Nr.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,he.registerVersion)(mh,"0.7.9"),(0,he.registerVersion)(mh,"0.7.9","esm2017")}();var Ao=L(4408),Fn=L(7565);const Lr=new class Hc extends Fn.v{}(class rp extends Ao.o{constructor(S,P){super(S,P),this.scheduler=S,this.work=P}schedule(S,P=0){return P>0?super.schedule(S,P):(this.delay=P,this.state=S,this.scheduler.flush(this),this)}execute(S,P){return P>0||this.closed?super.execute(S,P):this._execute(S,P)}requestAsyncId(S,P,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(S,P,j):S.flush(this)}});var qc=L(4986),Ki=L(8505),Ri=L(5363),Qi=L(9468);const Jr=new s.GfV("7.3.0"),qs="__angularfire_symbol__analyticsIsSupportedValue",Zs="__angularfire_symbol__analyticsIsSupported",fa="__angularfire_symbol__remoteConfigIsSupportedValue",Ji="__angularfire_symbol__remoteConfigIsSupported",Zc="__angularfire_symbol__messagingIsSupportedValue",ip="__angularfire_symbol__messagingIsSupported";function Cy(T,S,P){if(S){if(1===S.length)return S[0];const ce=S.filter(Ne=>Ne.app===P);if(1===ce.length)return ce[0]}return P.container.getProvider(T).getImmediate({optional:!0})}globalThis[Zs]||(globalThis[Zs]=xm().then(T=>globalThis[qs]=T).catch(()=>globalThis[qs]=!1)),globalThis[ip]||(globalThis[ip]=Ya().then(T=>globalThis[Zc]=T).catch(()=>globalThis[Zc]=!1)),globalThis[Ji]||(globalThis[Ji]=Ac().then(T=>globalThis[fa]=T).catch(()=>globalThis[fa]=!1));const vh=(T,S)=>{const P=S?[S]:(0,ne.C6)(),j=[];return P.forEach(ee=>{ee.container.getProvider(T).instances.forEach(Ne=>{j.includes(Ne)||j.push(Ne)})}),j};function Gs(){}class yh{constructor(S,P=Lr){this.zone=S,this.delegate=P}now(){return this.delegate.now()}schedule(S,P,j){const ee=this.zone;return this.delegate.schedule(function(Ne){ee.runGuarded(()=>{S.apply(this,[Ne])})},P,j)}}class Ju{constructor(S){this.zone=S,this.task=null}call(S,P){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gs,{},Gs,Gs)),P.pipe((0,Ki.b)({next:j,complete:j,error:j})).subscribe(S).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let sp=(()=>{class T{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new yh(Zone.current)),this.insideAngular=P.run(()=>new yh(Zone.current,qc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(P){return new(P||T)(s.LFG(s.R0b))},T.\u0275prov=s.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Pi(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function es(T){return T.pipe((0,Ri.Q)(Pi().outsideAngular))}function Mo(T){return Pi(),function ko(T){return function(P){return(P=P.lift(new Ju(T.ngZone))).pipe((0,Qi.R)(T.outsideAngular),(0,Ri.Q)(T.insideAngular))}}(Pi())(T)}},2090:(st,Ce,L)=>{L.d(Ce,{$s:()=>Yt,BH:()=>Ke,DV:()=>on,Dv:()=>_o,G6:()=>Ze,GJ:()=>an,L:()=>ue,LL:()=>de,Mn:()=>Te,Pz:()=>Gt,Sg:()=>Re,UG:()=>me,UI:()=>ps,US:()=>be,Wj:()=>$n,Yr:()=>qe,ZB:()=>G,ZR:()=>we,b$:()=>nt,cI:()=>nn,d:()=>xe,dS:()=>Qo,eu:()=>De,g5:()=>V,gK:()=>di,gQ:()=>ui,h$:()=>oe,hl:()=>$,hu:()=>ne,jU:()=>Se,lb:()=>Di,m9:()=>xr,ne:()=>ms,p$:()=>z,pd:()=>mo,r3:()=>$r,ru:()=>Qe,tV:()=>fe,uI:()=>He,ug:()=>rn,vZ:()=>Ei,w1:()=>Ie,w9:()=>vn,xO:()=>zr,xb:()=>$t,z$:()=>Fe,zI:()=>J,zd:()=>gs});const ne=function(H,W){if(!H)throw V(W)},V=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},he=function(H){const W=[];let K=0;for(let Ae=0;Ae<H.length;Ae++){let Y=H.charCodeAt(Ae);Y<128?W[K++]=Y:Y<2048?(W[K++]=Y>>6|192,W[K++]=63&Y|128):55296==(64512&Y)&&Ae+1<H.length&&56320==(64512&H.charCodeAt(Ae+1))?(Y=65536+((1023&Y)<<10)+(1023&H.charCodeAt(++Ae)),W[K++]=Y>>18|240,W[K++]=Y>>12&63|128,W[K++]=Y>>6&63|128,W[K++]=63&Y|128):(W[K++]=Y>>12|224,W[K++]=Y>>6&63|128,W[K++]=63&Y|128)}return W},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,W){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ae=[];for(let Y=0;Y<H.length;Y+=3){const re=H[Y],Pe=Y+1<H.length,ot=Pe?H[Y+1]:0,mt=Y+2<H.length,At=mt?H[Y+2]:0;let rr=(15&ot)<<2|At>>6,Yr=63&At;mt||(Yr=64,Pe||(rr=64)),Ae.push(K[re>>2],K[(3&re)<<4|ot>>4],K[rr],K[Yr])}return Ae.join("")},encodeString(H,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(H):this.encodeByteArray(he(H),W)},decodeString(H,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(H):function(H){const W=[];let K=0,Ae=0;for(;K<H.length;){const Y=H[K++];if(Y<128)W[Ae++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const re=H[K++];W[Ae++]=String.fromCharCode((31&Y)<<6|63&re)}else if(Y>239&&Y<365){const mt=((7&Y)<<18|(63&H[K++])<<12|(63&H[K++])<<6|63&H[K++])-65536;W[Ae++]=String.fromCharCode(55296+(mt>>10)),W[Ae++]=String.fromCharCode(56320+(1023&mt))}else{const re=H[K++],Pe=H[K++];W[Ae++]=String.fromCharCode((15&Y)<<12|(63&re)<<6|63&Pe)}}return W.join("")}(this.decodeStringToByteArray(H,W))},decodeStringToByteArray(H,W){this.init_();const K=W?this.charToByteMapWebSafe_:this.charToByteMap_,Ae=[];for(let Y=0;Y<H.length;){const re=K[H.charAt(Y++)],ot=Y<H.length?K[H.charAt(Y)]:0;++Y;const At=Y<H.length?K[H.charAt(Y)]:64;++Y;const Tt=Y<H.length?K[H.charAt(Y)]:64;if(++Y,null==re||null==ot||null==At||null==Tt)throw Error();Ae.push(re<<2|ot>>4),64!==At&&(Ae.push(ot<<4&240|At>>2),64!==Tt&&Ae.push(At<<6&192|Tt))}return Ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},oe=function(H){const W=he(H);return be.encodeByteArray(W,!0)},ue=function(H){return oe(H).replace(/\./g,"")},fe=function(H){try{return be.decodeString(H,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function z(H){return G(void 0,H)}function G(H,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return W}for(const K in W)!W.hasOwnProperty(K)||!se(K)||(H[K]=G(H[K],W[K]));return H}function se(H){return"__proto__"!==H}class Ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,K)=>{this.resolve=W,this.reject=K})}wrapCallback(W){return(K,Ae)=>{K?this.reject(K):this.resolve(Ae),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(K):W(K,Ae))}}}function Re(H,W){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ae=W||"demo-project",Y=H.iat||0,re=H.sub||H.user_id;if(!re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${Ae}`,aud:Ae,iat:Y,exp:Y+3600,auth_time:Y,sub:re,user_id:re,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Pe)),""].join(".")}function Fe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function Se(){return"object"==typeof self&&self.self===self}function Qe(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xe(){return Fe().indexOf("Electron/")>=0}function Ie(){const H=Fe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Te(){return Fe().indexOf("MSAppHost/")>=0}function qe(){return!1}function Ze(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){return"object"==typeof indexedDB}function De(){return new Promise((H,W)=>{try{let K=!0;const Ae="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(Ae);Y.onsuccess=()=>{Y.result.close(),K||self.indexedDB.deleteDatabase(Ae),H(!0)},Y.onupgradeneeded=()=>{K=!1},Y.onerror=()=>{var re;W((null===(re=Y.error)||void 0===re?void 0:re.message)||"")}}catch(K){W(K)}})}function J(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class we extends Error{constructor(W,K,Ae){super(K),this.code=W,this.customData=Ae,this.name="FirebaseError",Object.setPrototypeOf(this,we.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,de.prototype.create)}}class de{constructor(W,K,Ae){this.service=W,this.serviceName=K,this.errors=Ae}create(W,...K){const Ae=K[0]||{},Y=`${this.service}/${W}`,re=this.errors[W],Pe=re?function Le(H,W){return H.replace(pt,(K,Ae)=>{const Y=W[Ae];return null!=Y?String(Y):`<${Ae}?>`})}(re,Ae):"Error";return new we(Y,`${this.serviceName}: ${Pe} (${Y}).`,Ae)}}const pt=/\{\$([^}]+)}/g;function nn(H){return JSON.parse(H)}function Gt(H){return JSON.stringify(H)}const rt=function(H){let W={},K={},Ae={},Y="";try{const re=H.split(".");W=nn(fe(re[0])||""),K=nn(fe(re[1])||""),Y=re[2],Ae=K.d||{},delete K.d}catch(re){}return{header:W,claims:K,data:Ae,signature:Y}},vn=function(H){const K=rt(H).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},an=function(H){const W=rt(H).claims;return"object"==typeof W&&!0===W.admin};function $r(H,W){return Object.prototype.hasOwnProperty.call(H,W)}function on(H,W){if(Object.prototype.hasOwnProperty.call(H,W))return H[W]}function $t(H){for(const W in H)if(Object.prototype.hasOwnProperty.call(H,W))return!1;return!0}function ps(H,W,K){const Ae={};for(const Y in H)Object.prototype.hasOwnProperty.call(H,Y)&&(Ae[Y]=W.call(K,H[Y],Y,H));return Ae}function Ei(H,W){if(H===W)return!0;const K=Object.keys(H),Ae=Object.keys(W);for(const Y of K){if(!Ae.includes(Y))return!1;const re=H[Y],Pe=W[Y];if(Tr(re)&&Tr(Pe)){if(!Ei(re,Pe))return!1}else if(re!==Pe)return!1}for(const Y of Ae)if(!K.includes(Y))return!1;return!0}function Tr(H){return null!==H&&"object"==typeof H}function zr(H){const W=[];for(const[K,Ae]of Object.entries(H))Array.isArray(Ae)?Ae.forEach(Y=>{W.push(encodeURIComponent(K)+"="+encodeURIComponent(Y))}):W.push(encodeURIComponent(K)+"="+encodeURIComponent(Ae));return W.length?"&"+W.join("&"):""}function gs(H){const W={};return H.replace(/^\?/,"").split("&").forEach(Ae=>{if(Ae){const[Y,re]=Ae.split("=");W[decodeURIComponent(Y)]=decodeURIComponent(re)}}),W}function mo(H){const W=H.indexOf("?");if(!W)return"";const K=H.indexOf("#",W);return H.substring(W,K>0?K:void 0)}class ui{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,K){K||(K=0);const Ae=this.W_;if("string"==typeof W)for(let Tt=0;Tt<16;Tt++)Ae[Tt]=W.charCodeAt(K)<<24|W.charCodeAt(K+1)<<16|W.charCodeAt(K+2)<<8|W.charCodeAt(K+3),K+=4;else for(let Tt=0;Tt<16;Tt++)Ae[Tt]=W[K]<<24|W[K+1]<<16|W[K+2]<<8|W[K+3],K+=4;for(let Tt=16;Tt<80;Tt++){const rr=Ae[Tt-3]^Ae[Tt-8]^Ae[Tt-14]^Ae[Tt-16];Ae[Tt]=4294967295&(rr<<1|rr>>>31)}let At,An,Y=this.chain_[0],re=this.chain_[1],Pe=this.chain_[2],ot=this.chain_[3],mt=this.chain_[4];for(let Tt=0;Tt<80;Tt++){Tt<40?Tt<20?(At=ot^re&(Pe^ot),An=1518500249):(At=re^Pe^ot,An=1859775393):Tt<60?(At=re&Pe|ot&(re|Pe),An=2400959708):(At=re^Pe^ot,An=3395469782);const rr=(Y<<5|Y>>>27)+At+mt+An+Ae[Tt]&4294967295;mt=ot,ot=Pe,Pe=4294967295&(re<<30|re>>>2),re=Y,Y=rr}this.chain_[0]=this.chain_[0]+Y&4294967295,this.chain_[1]=this.chain_[1]+re&4294967295,this.chain_[2]=this.chain_[2]+Pe&4294967295,this.chain_[3]=this.chain_[3]+ot&4294967295,this.chain_[4]=this.chain_[4]+mt&4294967295}update(W,K){if(null==W)return;void 0===K&&(K=W.length);const Ae=K-this.blockSize;let Y=0;const re=this.buf_;let Pe=this.inbuf_;for(;Y<K;){if(0===Pe)for(;Y<=Ae;)this.compress_(W,Y),Y+=this.blockSize;if("string"==typeof W){for(;Y<K;)if(re[Pe]=W.charCodeAt(Y),++Pe,++Y,Pe===this.blockSize){this.compress_(re),Pe=0;break}}else for(;Y<K;)if(re[Pe]=W[Y],++Pe,++Y,Pe===this.blockSize){this.compress_(re),Pe=0;break}}this.inbuf_=Pe,this.total_+=K}digest(){const W=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Y=this.blockSize-1;Y>=56;Y--)this.buf_[Y]=255&K,K/=256;this.compress_(this.buf_);let Ae=0;for(let Y=0;Y<5;Y++)for(let re=24;re>=0;re-=8)W[Ae]=this.chain_[Y]>>re&255,++Ae;return W}}function ms(H,W){const K=new yt(H,W);return K.subscribe.bind(K)}class yt{constructor(W,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{W(this)}).catch(Ae=>{this.error(Ae)})}next(W){this.forEachObserver(K=>{K.next(W)})}error(W){this.forEachObserver(K=>{K.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,K,Ae){let Y;if(void 0===W&&void 0===K&&void 0===Ae)throw new Error("Missing Observer.");Y=function jn(H,W){if("object"!=typeof H||null===H)return!1;for(const K of W)if(K in H&&"function"==typeof H[K])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:K,complete:Ae},void 0===Y.next&&(Y.next=Gn),void 0===Y.error&&(Y.error=Gn),void 0===Y.complete&&(Y.complete=Gn);const re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(Pe){}}),this.observers.push(Y),re}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,W)}sendOne(W,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{K(this.observers[W])}catch(Ae){"undefined"!=typeof console&&console.error&&console.error(Ae)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gn(){}const _o=function(H,W,K,Ae){let Y;if(Ae<W?Y="at least "+W:Ae>K&&(Y=0===K?"none":"no more than "+K),Y)throw new Error(H+" failed: Was called with "+Ae+(1===Ae?" argument.":" arguments.")+" Expects "+Y+".")};function di(H,W){return`${H} failed: ${W} argument `}function $n(H,W,K,Ae){if((!Ae||K)&&"function"!=typeof K)throw new Error(di(H,W)+"must be a valid function.")}function Di(H,W,K,Ae){if((!Ae||K)&&("object"!=typeof K||null===K))throw new Error(di(H,W)+"must be a valid context object.")}const Qo=function(H){const W=[];let K=0;for(let Ae=0;Ae<H.length;Ae++){let Y=H.charCodeAt(Ae);if(Y>=55296&&Y<=56319){const re=Y-55296;Ae++,ne(Ae<H.length,"Surrogate pair missing trail surrogate."),Y=65536+(re<<10)+(H.charCodeAt(Ae)-56320)}Y<128?W[K++]=Y:Y<2048?(W[K++]=Y>>6|192,W[K++]=63&Y|128):Y<65536?(W[K++]=Y>>12|224,W[K++]=Y>>6&63|128,W[K++]=63&Y|128):(W[K++]=Y>>18|240,W[K++]=Y>>12&63|128,W[K++]=Y>>6&63|128,W[K++]=63&Y|128)}return W},rn=function(H){let W=0;for(let K=0;K<H.length;K++){const Ae=H.charCodeAt(K);Ae<128?W++:Ae<2048?W+=2:Ae>=55296&&Ae<=56319?(W+=4,K++):W+=3}return W};function Yt(H,W=1e3,K=2){const Ae=W*Math.pow(K,H),Y=Math.round(.5*Ae*(Math.random()-.5)*2);return Math.min(144e5,Ae+Y)}function xr(H){return H&&H._delegate?H._delegate:H}},8461:(st,Ce,L)=>{var s=L(5e3);let ne=null;function V(){return ne}const oe=new s.OlP("DocumentToken");let ue=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return function fe(){return(0,s.LFG)(G)}()},providedIn:"platform"}),n})();const z=new s.OlP("Location Initialized");let G=(()=>{class n extends ue{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(e){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,i){se()?this._history.pushState(e,r,i):this.location.hash=i}replaceState(e,r,i){se()?this._history.replaceState(e,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:function(){return function Ke(){return new G((0,s.LFG)(oe))}()},providedIn:"platform"}),n})();function se(){return!!window.history.pushState}function Re(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Fe(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:function(){return function Se(n){const t=(0,s.LFG)(oe).location;return new nt((0,s.LFG)(ue),t&&t.origin||"")}()},providedIn:"root"}),n})();const Qe=new s.OlP("appBaseHref");let nt=(()=>{class n extends me{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Re(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){const c=this.prepareExternalUrl(i+He(o));this._platformLocation.pushState(e,r,c)}replaceState(e,r,i,o){const c=this.prepareExternalUrl(i+He(o));this._platformLocation.replaceState(e,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ue),s.LFG(Qe,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n extends me{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Re(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let c=this.prepareExternalUrl(i+He(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,r,c)}replaceState(e,r,i,o){let c=this.prepareExternalUrl(i+He(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ue),s.LFG(Qe,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n{constructor(e,r){this._subject=new s.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Fe(Ze(i)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+He(r))}normalize(e){return n.stripTrailingSlash(function qe(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Ze(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._platformStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+He(r)),i)}replaceState(e,r="",i=null){this._platformStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+He(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.normalizeQueryParams=He,n.joinWithSlash=Re,n.stripTrailingSlash=Fe,n.\u0275fac=function(e){return new(e||n)(s.LFG(me),s.LFG(ue))},n.\u0275prov=s.Yz7({token:n,factory:function(){return function Te(){return new Ie((0,s.LFG)(me),(0,s.LFG)(ue))}()},providedIn:"root"}),n})();function Ze(n){return n.replace(/\/index.html$/,"")}function La(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,o]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}let gr=(()=>{class n{constructor(e,r,i,o){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,s.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,s.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),e.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!0)):Object.keys(e).forEach(r=>this._toggleClass(r,!!e[r])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!1)):Object.keys(e).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(e,r){(e=e.trim())&&e.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.ZZ4),s.Y36(s.aQg),s.Y36(s.SBq),s.Y36(s.Qsj))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class yo{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xt=(()=>{class n{constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((i,o,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new yo(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===o?void 0:o);else if(null!==o){const h=r.get(o);r.move(h,c),ea(h,i)}});for(let i=0,o=r.length;i<o;i++){const h=r.get(i).context;h.index=i,h.count=o,h.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{ea(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(s.ZZ4))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ea(n,t){n.context.$implicit=t.item}let Ut=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new En,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Tc("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Tc("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class En{constructor(){this.$implicit=null,this.ngIf=null}}function Tc(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,s.AaK)(t)}'.`)}class Tl{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Mr=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const r=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Si=(()=>{class n{constructor(e,r,i){this.ngSwitch=i,i._addCase(),this._view=new Tl(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(Mr,9))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})();let xc=(()=>{class n{transform(e,r,i){if(null==e)return null;if(!this.supports(e))throw function kr(n,t){return new s.vHH(2100,"")}();return e.slice(r,i)}supports(e){return"string"==typeof e||Array.isArray(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=s.Yjl({name:"slice",type:n,pure:!1}),n})(),Al=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const na="browser";function ja(n){return"server"===n}let Ou=(()=>{class n{}return n.\u0275prov=(0,s.Yz7)({token:n,providedIn:"root",factory:()=>new Ha((0,s.LFG)(oe),window)}),n})();class Ha{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Cs(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const c=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Nu(this.window.history)||Nu(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Nu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class bn{}class ra extends class xl extends class be{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ae(n){ne||(ne=n)}(new ra)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Ml(){return un=un||document.querySelector("base"),un?un.getAttribute("href"):null}();return null==e?null:function Eo(n){Mc=Mc||document.createElement("a"),Mc.setAttribute("href",n);const t=Mc.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){un=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return La(document.cookie,t)}}let Mc,un=null;const mr=new s.OlP("TRANSITION_ID"),Nn=[{provide:s.ip1,useFactory:function Fu(n,t,e){return()=>{e.get(s.CZH).donePromise.then(()=>{const r=V(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[mr,oe,s.zs3],multi:!0}];class Es{static init(){(0,s.VLi)(new Es)}addToWindow(t){s.dqk.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},s.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),s.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),s.dqk.frameworkStabilizers||(s.dqk.frameworkStabilizers=[]),s.dqk.frameworkStabilizers.push(r=>{const i=s.dqk.getAllAngularTestabilities();let o=i.length,c=!1;const h=function(g){c=c||g,o--,0==o&&r(c)};i.forEach(function(g){g.whenStable(h)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:r?V().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let _r=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const ia=new s.OlP("EventManagerPlugins");let Us=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>i.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const c=i[o];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(ia),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class kl{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=V().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let $i=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Is=(()=>{class n extends $i{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,i){e.forEach(o=>{const c=this._doc.createElement("style");c.textContent=o,i.push(r.appendChild(c))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(qa),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(e,i,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(qa))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function qa(n){V().remove(n)}const _t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Za=/%COMP%/g;function Me(n,t,e){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?Me(n,i,e):(i=i.replace(Za,n),e.push(i))}return e}function qt(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Mn=(()=>{class n{constructor(e,r,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ga(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case s.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ol(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(e),i}case 1:case s.ifc.ShadowDom:return new Bu(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const i=Me(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Us),s.LFG(Is),s.LFG(s.AFp))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class Ga{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(_t[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const o=_t[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=_t[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(s.JOm.DashCase|s.JOm.Important)?t.style.setProperty(e,r,i&s.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&s.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,qt(r)):this.eventManager.addEventListener(t,e,qt(r))}}class Ol extends Ga{constructor(t,e,r,i){super(t),this.component=r;const o=Me(i+"-"+r.id,r.styles,[]);e.addStyles(o),this.contentAttr=function Uu(n){return"_ngcontent-%COMP%".replace(Za,n)}(i+"-"+r.id),this.hostAttr=function Vu(n){return"_nghost-%COMP%".replace(Za,n)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class Bu extends Ga{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Me(i.id,i.styles,[]);for(let c=0;c<o.length;c++){const h=document.createElement("style");h.textContent=o[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Dm=(()=>{class n extends kl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Pc=["alt","control","meta","shift"],Oc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Vs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Fl=(()=>{class n extends kl{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const o=n.parseEventName(r),c=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(e,o.domEventName,c))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let c="";if(Pc.forEach(g=>{const v=r.indexOf(g);v>-1&&(r.splice(v,1),c+=g+".")}),c+=o,0!=r.length||0===o.length)return null;const h={};return h.domEventName=i,h.fullKey=c,h}static getEventFullKey(e){let r="",i=function Io(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&Yn.hasOwnProperty(t)&&(t=Yn[t]))}return Oc[t]||t}(e);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Pc.forEach(o=>{o!=i&&Vs[o](e)&&(r+=o+".")}),r+=i,r}static eventCallback(e,r,i){return o=>{n.getEventFullKey(o)===e&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Fc=(0,s.eFA)(s._c5,"browser",[{provide:s.Lbi,useValue:na},{provide:s.g9A,useValue:function zi(){ra.makeCurrent(),Es.init()},multi:!0},{provide:oe,useFactory:function Nc(){return(0,s.RDi)(document),document},deps:[]}]),Ll=[{provide:s.zSh,useValue:"root"},{provide:s.qLn,useFactory:function ju(){return new s.qLn},deps:[]},{provide:ia,useClass:Dm,multi:!0,deps:[oe,s.R0b,s.Lbi]},{provide:ia,useClass:Fl,multi:!0,deps:[oe]},{provide:Mn,useClass:Mn,deps:[Us,Is,s.AFp]},{provide:s.FYo,useExisting:Mn},{provide:$i,useExisting:Is},{provide:Is,useClass:Is,deps:[oe]},{provide:s.dDg,useClass:s.dDg,deps:[s.R0b]},{provide:Us,useClass:Us,deps:[ia,s.R0b]},{provide:bn,useClass:_r,deps:[]}];let oa=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:s.AFp,useValue:e.appId},{provide:mr,useExisting:s.AFp},Nn]}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(n,12))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:Ll,imports:[Al,s.hGG]}),n})();"undefined"!=typeof window&&window;var Tn=L(8996),Or=L(8306);const{isArray:Nr}=Array,{getPrototypeOf:jl,prototype:uh,keys:Yi}=Object;function Vc(n){if(1===n.length){const t=n[0];if(Nr(t))return{args:t,keys:null};if(function dh(n){return n&&"object"==typeof n&&jl(n)===uh}(t)){const e=Yi(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}var dr=L(8421),js=L(3269),Mt=L(5403),ut=L(4004);const{isArray:ca}=Array;function Ka(n){return(0,ut.U)(t=>function hh(n,t){return ca(t)?n(...t):n(t)}(n,t))}function $u(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}let zu=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.Qsj),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n}),n})(),gi=(()=>{class n extends zu{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,features:[s.qOj]}),n})();const vr=new s.OlP("NgValueAccessor"),Fr={provide:vr,useExisting:(0,s.Gpc)(()=>Qr),multi:!0},Hl=new s.OlP("CompositionEventMode");let Qr=(()=>{class n extends zu{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ph(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(Hl,8))},n.\u0275dir=s.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&s.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[s._Bn([Fr]),s.qOj]}),n})();function Mi(n){return null==n||0===n.length}function Bc(n){return null!=n&&"number"==typeof n.length}const Pn=new s.OlP("NgValidators"),Wi=new s.OlP("NgAsyncValidators"),Yu=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Zt{static min(t){return function ep(n){return t=>{if(Mi(t.value)||Mi(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function To(n){return t=>{if(Mi(t.value)||Mi(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return ql(t)}static requiredTrue(t){return function ua(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function Zl(n){return Mi(n.value)||Yu.test(n.value)?null:{email:!0}}(t)}static minLength(t){return Ja(t)}static maxLength(t){return Xa(t)}static pattern(t){return So(t)}static nullValidator(t){return null}static compose(t){return kn(t)}static composeAsync(t){return Mm(t)}}function ql(n){return Mi(n.value)?{required:!0}:null}function Ja(n){return t=>Mi(t.value)||!Bc(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function Xa(n){return t=>Bc(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function So(n){if(!n)return ki;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(Mi(r.value))return null;const i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function ki(n){return null}function da(n){return null!=n}function Gl(n){const t=(0,s.QGY)(n)?(0,Tn.D)(n):n;return(0,s.CqO)(t),t}function el(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function ha(n,t){return t.map(e=>e(n))}function jc(n){return n.map(t=>function xm(n){return!n.validate}(t)?t:e=>t.validate(e))}function kn(n){if(!n)return null;const t=n.filter(da);return 0==t.length?null:function(e){return el(ha(e,t))}}function gh(n){return null!=n?kn(jc(n)):null}function Mm(n){if(!n)return null;const t=n.filter(da);return 0==t.length?null:function(e){return function fh(...n){const t=(0,js.jO)(n),{args:e,keys:r}=Vc(n),i=new Or.y(o=>{const{length:c}=e;if(!c)return void o.complete();const h=new Array(c);let g=c,v=c;for(let E=0;E<c;E++){let D=!1;(0,dr.Xf)(e[E]).subscribe((0,Mt.x)(o,k=>{D||(D=!0,v--),h[E]=k},()=>g--,void 0,()=>{(!g||!D)&&(v||o.next(r?$u(r,h):h),o.complete())}))}});return t?i.pipe(Ka(t)):i}(ha(e,t).map(Gl)).pipe((0,ut.U)(el))}}function tp(n){return null!=n?Mm(jc(n)):null}function np(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function mh(n){return n._rawValidators}function Wu(n){return n._rawAsyncValidators}function _h(n){return n?Array.isArray(n)?n:[n]:[]}function Ao(n,t){return Array.isArray(n)?n.includes(t):n===t}function rp(n,t){const e=_h(t);return _h(n).forEach(i=>{Ao(e,i)||e.push(i)}),e}function Fn(n,t){return _h(t).filter(e=>!Ao(n,e))}class Hc{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=gh(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=tp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Lr extends Hc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class mi extends Hc{get formDirective(){return null}get path(){return null}}class qc{constructor(t){this._cd=t}is(t){var e,r,i;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[t])}}let Qi=(()=>{class n extends qc{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Lr,2))},n.\u0275dir=s.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&s.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[s.qOj]}),n})(),Jr=(()=>{class n extends qc{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(mi,10))},n.\u0275dir=s.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&s.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[s.qOj]}),n})();function xo(n,t){Mo(n,t),t.valueAccessor.writeValue(n.value),function tl(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&T(n,t)})}(n,t),function S(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function bh(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&T(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Ey(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function Oi(n,t,e=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),ko(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function es(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Mo(n,t){const e=mh(n);null!==t.validator?n.setValidators(np(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=Wu(n);null!==t.asyncValidator?n.setAsyncValidators(np(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();es(t._rawValidators,i),es(t._rawAsyncValidators,i)}function ko(n,t){let e=!1;if(null!==n){if(null!==t.validator){const i=mh(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(null!==t.asyncValidator){const i=Wu(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}const r=()=>{};return es(t._rawValidators,r),es(t._rawAsyncValidators,r),e}function T(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function P(n,t){Mo(n,t)}function Wt(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function yr(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const _i="VALID",Xr="INVALID",ei="PENDING",wr="DISABLED";function Xu(n){return(td(n)?n.validators:n)||null}function ed(n){return Array.isArray(n)?gh(n):n||null}function zl(n,t){return(td(t)?t.asyncValidators:n)||null}function op(n){return Array.isArray(n)?tp(n):n||null}function td(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const nd=n=>n instanceof up,pa=n=>n instanceof Ch,Gc=n=>n instanceof rd;function km(n){return nd(n)?n.value:n.getRawValue()}function ap(n,t){const e=pa(n),r=n.controls;if(!(e?Object.keys(r):r).length)throw new s.vHH(1e3,"");if(!r[t])throw new s.vHH(1001,"")}function lp(n,t){pa(n),n._forEachChild((r,i)=>{if(void 0===t[i])throw new s.vHH(1002,"")})}class cp{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=ed(this._rawValidators),this._composedAsyncValidatorFn=op(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===_i}get invalid(){return this.status===Xr}get pending(){return this.status==ei}get disabled(){return this.status===wr}get enabled(){return this.status!==wr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=ed(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=op(t)}addValidators(t){this.setValidators(rp(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(rp(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Fn(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Fn(t,this._rawAsyncValidators))}hasValidator(t){return Ao(this._rawValidators,t)}hasAsyncValidator(t){return Ao(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ei,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=wr,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=_i,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_i||this.status===ei)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wr:_i}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ei,this._hasOwnPendingAsyncValidator=!0;const e=Gl(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function wh(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let r=n;return t.forEach(i=>{r=pa(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:Gc(r)&&r.at(i)||null}),r}(this,t,".")}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new s.vpe,this.statusChanges=new s.vpe}_calculateStatus(){return this._allControlsDisabled()?wr:this.errors?Xr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ei)?ei:this._anyControlsHaveStatus(Xr)?Xr:_i}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){td(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class up extends cp{constructor(t=null,e,r){super(Xu(e),zl(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),td(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){yr(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){yr(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Ch extends cp{constructor(t,e,r){super(Xu(e),zl(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){lp(this,t),Object.keys(t).forEach(r=>{ap(this,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=km(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class rd extends cp{constructor(t,e,r){super(Xu(e),zl(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){lp(this,t),t.forEach((r,i)=>{ap(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>km(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Iy={provide:mi,useExisting:(0,s.Gpc)(()=>rl)},nl=(()=>Promise.resolve(null))();let rl=(()=>{class n extends mi{constructor(e,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new s.vpe,this.form=new Ch({},gh(e),tp(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){nl.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),xo(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){nl.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){nl.then(()=>{const r=this._findContainer(e.path),i=new Ch({});P(i,e),r.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){nl.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){nl.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Wt(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Pn,10),s.Y36(Wi,10))},n.\u0275dir=s.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&s.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([Iy]),s.qOj]}),n})(),ga=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Po=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const Eh=new s.OlP("NgModelWithFormControlWarning"),Fm={provide:mi,useExisting:(0,s.Gpc)(()=>$s)};let $s=(()=>{class n extends mi{constructor(e,r){super(),this.validators=e,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new s.vpe,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ko(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return xo(r,e),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Oi(e.control||null,e,!1),yr(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,Wt(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,i=this.form.get(e.path);r!==i&&(Oi(r||null,e),nd(i)&&(xo(i,e),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);P(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function j(n,t){return ko(n,t)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Mo(this.form,this),this._oldForm&&ko(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Pn,10),s.Y36(Wi,10))},n.\u0275dir=s.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&s.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([Fm]),s.qOj,s.TTD]}),n})();const zs={provide:Lr,useExisting:(0,s.Gpc)(()=>ma)};let ma=(()=>{class n extends Lr{constructor(e,r,i,o,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new s.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Dt(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===Qr?e=o:function It(n){return Object.getPrototypeOf(n.constructor)===gi}(o)?r=o:i=o}),i||r||e||null}(0,o)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function Et(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function Pi(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(s.Y36(mi,13),s.Y36(Pn,10),s.Y36(Wi,10),s.Y36(vr,10),s.Y36(Eh,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[s._Bn([zs]),s.qOj,s.TTD]}),n})();const Oo={provide:vr,useExisting:(0,s.Gpc)(()=>Wl),multi:!0};function ol(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Wl=(()=>{class n extends gi{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const i=ol(this._getOptionId(e),e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function Vm(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&s.NdJ("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([Oo]),s.qOj]}),n})(),_p=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(ol(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(Wl,9))},n.\u0275dir=s.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const rE={provide:vr,useExisting:(0,s.Gpc)(()=>Kl),multi:!0};function vp(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let Kl=(()=>{class n extends gi{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const i=e.map(o=>this._getOptionId(o));r=(o,c)=>{o._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const c=o;for(let h=0;h<c.length;h++){const v=this._getOptionValue(c[h].value);i.push(v)}}else{const c=r.options;for(let h=0;h<c.length;h++){const g=c[h];if(g.selected){const v=this._getOptionValue(g.value);i.push(v)}}}this.value=i,e(i)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function iE(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&s.NdJ("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([rE]),s.qOj]}),n})(),Dh=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(vp(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(vp(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(Kl,9))},n.\u0275dir=s.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();function xy(n){return"number"==typeof n?n:parseInt(n,10)}let Ql=(()=>{class n{constructor(){this._validator=ki}ngOnChanges(e){if(this.inputName in e){const r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ki,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,features:[s.TTD]}),n})();const $c={provide:Pn,useExisting:(0,s.Gpc)(()=>Ys),multi:!0};let Ys=(()=>{class n extends Ql{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=e=>function sE(n){return null!=n&&!1!==n&&"false"!=`${n}`}(e),this.createValidator=e=>ql}enabled(e){return e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&s.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[s._Bn([$c]),s.qOj]}),n})();const ky={provide:Pn,useExisting:(0,s.Gpc)(()=>Jl),multi:!0};let Jl=(()=>{class n extends Ql{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>xy(e),this.createValidator=e=>Ja(e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,r){2&e&&s.uIk("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[s._Bn([ky]),s.qOj]}),n})();const wp={provide:Pn,useExisting:(0,s.Gpc)(()=>Ah),multi:!0};let Ah=(()=>{class n extends Ql{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>xy(e),this.createValidator=e=>Xa(e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,r){2&e&&s.uIk("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[s._Bn([wp]),s.qOj]}),n})();const Ry={provide:Pn,useExisting:(0,s.Gpc)(()=>sd),multi:!0};let sd=(()=>{class n extends Ql{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=e=>e,this.createValidator=e=>So(e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(e,r){2&e&&s.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[s._Bn([Ry]),s.qOj]}),n})(),Zm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[Po]]}),n})(),od=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zm]}),n})(),ti=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Eh,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Zm]}),n})(),Xl=(()=>{class n{group(e,r=null){const i=this._reduceControls(e);let h,o=null,c=null;return null!=r&&(function Ep(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(o=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,h=null!=r.updateOn?r.updateOn:void 0):(o=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new Ch(i,{asyncValidators:c,updateOn:h,validators:o})}control(e,r,i){return new up(e,r,i)}array(e,r,i){const o=e.map(c=>this._createControl(c));return new rd(o,r,i)}_reduceControls(e){const r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){return nd(e)||pa(e)||Gc(e)?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:ti}),n})();function ze(...n){const t=(0,js.yG)(n);return(0,Tn.D)(n,t)}var en=L(7579);class Ur extends en.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}var zc=L(4671),Ip=L(9672);function ec(n,t,e){n?(0,Ip.f)(e,n,t):t()}var Ws=L(576);function Yc(n,t){const e=(0,Ws.m)(n)?n:()=>n,r=i=>i.error(e());return new Or.y(t?i=>t.schedule(r,0,i):r)}const Wc=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Kc=L(8189);function Tp(...n){return function zm(){return(0,Kc.J)(1)}()((0,Tn.D)(n,(0,js.yG)(n)))}function Ks(n){return new Or.y(t=>{(0,dr.Xf)(n()).subscribe(t)})}var al=L(515),Ni=L(727),Qn=L(4482);function Ym(){return(0,Qn.e)((n,t)=>{let e=null;n._refCount++;const r=(0,Mt.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class Wm extends Or.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Qn.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ni.w0;const e=this.getSubject();t.add(this.source.subscribe((0,Mt.x)(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ni.w0.EMPTY)}return t}refCount(){return Ym()(this)}}function dn(n,t){return(0,Qn.e)((e,r)=>{let i=null,o=0,c=!1;const h=()=>c&&!i&&r.complete();e.subscribe((0,Mt.x)(r,g=>{null==i||i.unsubscribe();let v=0;const E=o++;(0,dr.Xf)(n(g,E)).subscribe(i=(0,Mt.x)(r,D=>r.next(t?t(g,D,E,v++):D),()=>{i=null,h()}))},()=>{c=!0,h()}))})}var Qs=L(5698);function Ss(...n){const t=(0,js.yG)(n);return(0,Qn.e)((e,r)=>{(t?Tp(n,e,t):Tp(n,e)).subscribe(r)})}function Km(n,t,e,r,i){return(o,c)=>{let h=e,g=t,v=0;o.subscribe((0,Mt.x)(c,E=>{const D=v++;g=h?n(g,E,D):(h=!0,E),r&&c.next(g)},i&&(()=>{h&&c.next(g),c.complete()})))}}function vi(n,t){return(0,Qn.e)(Km(n,t,arguments.length>=2,!0))}function Vr(n,t){return(0,Qn.e)((e,r)=>{let i=0;e.subscribe((0,Mt.x)(r,o=>n.call(t,o,i++)&&r.next(o)))})}function No(n){return(0,Qn.e)((t,e)=>{let o,r=null,i=!1;r=t.subscribe((0,Mt.x)(e,void 0,void 0,c=>{o=(0,dr.Xf)(n(c,No(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}var Cr=L(5577);function Qc(n,t){return(0,Ws.m)(t)?(0,Cr.z)(n,t,1):(0,Cr.z)(n,1)}function ad(n){return n<=0?()=>al.E:(0,Qn.e)((t,e)=>{let r=[];t.subscribe((0,Mt.x)(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function Qm(n=Py){return(0,Qn.e)((t,e)=>{let r=!1;t.subscribe((0,Mt.x)(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function Py(){return new Wc}function tc(n){return(0,Qn.e)((t,e)=>{let r=!1;t.subscribe((0,Mt.x)(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function y(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Vr((i,o)=>n(i,o,r)):zc.y,(0,Qs.q)(1),e?tc(t):Qm(()=>new Wc))}var p=L(8505);class w{constructor(t,e){this.id=t,this.url=e}}class x extends w{constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class O extends w{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Q extends w{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _e extends w{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class je extends w{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tt extends w{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bt extends w{constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gt extends w{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jn extends w{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fi{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Jc{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Oy{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ll{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xh{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sp{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mh{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vt="primary";class Jm{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function cl(n){return new Jm(n)}const Ap="ngNavigationCancelingError";function xp(n){const t=Error("NavigationCancelingError: "+n);return t[Ap]=!0,t}function Ny(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const c=r[o],h=n[o];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Lo(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!Fy(n[i],t[i]))return!1;return!0}function Fy(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}return n===t}function Xm(n){return Array.prototype.concat.apply([],n)}function lE(n){return n.length>0?n[n.length-1]:null}function ni(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function _a(n){return(0,s.CqO)(n)?n:(0,s.QGY)(n)?(0,Tn.D)(Promise.resolve(n)):ze(n)}const cE={exact:function dE(n,t,e){if(!nc(n.segments,t.segments)||!kh(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!dE(n.children[r],t.children[r],e))return!1;return!0},subset:Uy},Ly={exact:function e_(n,t){return Lo(n,t)},subset:function hE(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Fy(n[e],t[e]))},ignored:()=>!0};function uE(n,t,e){return cE[e.paths](n.root,t.root,e.matrixParams)&&Ly[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function Uy(n,t,e){return Vy(n,t,t.segments,e)}function Vy(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!nc(i,e)||t.hasChildren()||!kh(i,e,r))}if(n.segments.length===e.length){if(!nc(n.segments,e)||!kh(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!Uy(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!!(nc(n.segments,i)&&kh(n.segments,i,r)&&n.children[Vt])&&Vy(n.children[Vt],t,o,r)}}function kh(n,t,e){return t.every((r,i)=>Ly[e](n[i].parameters,r.parameters))}class Xc{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cl(this.queryParams)),this._queryParamMap}toString(){return LA.serialize(this)}}class Kt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ni(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kp(this)}}class eu{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=cl(this.parameters)),this._parameterMap}toString(){return mE(this)}}function nc(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class t_{}class Rh{parse(t){const e=new qA(t);return new Xc(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Rp(t.root,!0)}`,r=function UA(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${Pp(e)}=${Pp(i)}`).join("&"):`${Pp(e)}=${Pp(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${r}${"string"==typeof t.fragment?`#${function By(n){return encodeURI(n)}(t.fragment)}`:""}`}}const LA=new Rh;function kp(n){return n.segments.map(t=>mE(t)).join("/")}function Rp(n,t){if(!n.hasChildren())return kp(n);if(t){const e=n.children[Vt]?Rp(n.children[Vt],!1):"",r=[];return ni(n.children,(i,o)=>{o!==Vt&&r.push(`${o}:${Rp(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function pE(n,t){let e=[];return ni(n.children,(r,i)=>{i===Vt&&(e=e.concat(t(r,i)))}),ni(n.children,(r,i)=>{i!==Vt&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===Vt?[Rp(n.children[Vt],!1)]:[`${i}:${Rp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${kp(n)}/${e[0]}`:`${kp(n)}/(${e.join("//")})`}}function gE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pp(n){return gE(n).replace(/%3B/gi,";")}function n_(n){return gE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jy(n){return decodeURIComponent(n)}function Hy(n){return jy(n.replace(/\+/g,"%20"))}function mE(n){return`${n_(n.path)}${function _E(n){return Object.keys(n).map(t=>`;${n_(t)}=${n_(n[t])}`).join("")}(n.parameters)}`}const VA=/^[^\/()?;=#]+/;function As(n){const t=n.match(VA);return t?t[0]:""}const BA=/^[^=?&#]+/,jA=/^[^&#]+/;class qA{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Vt]=new Kt(t,e)),r}parseSegment(){const t=As(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new eu(jy(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=As(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=As(this.remaining);i&&(r=i,this.capture(r))}t[jy(e)]=jy(r)}parseQueryParam(t){const e=function vE(n){const t=n.match(BA);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const c=function HA(n){const t=n.match(jA);return t?t[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Hy(e),o=Hy(r);if(t.hasOwnProperty(i)){let c=t[i];Array.isArray(c)||(c=[c],t[i]=c),c.push(o)}else t[i]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=As(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Vt);const c=this.parseChildren();e[o]=1===Object.keys(c).length?c[Vt]:new Kt([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class yE{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=r_(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=r_(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=qy(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return qy(t,this._root).map(e=>e.value)}}function r_(n,t){if(n===t.value)return t;for(const e of t.children){const r=r_(n,e);if(r)return r}return null}function qy(n,t){if(n===t.value)return[t];for(const e of t.children){const r=qy(n,e);if(r.length)return r.unshift(t),r}return[]}class rc{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ph(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Ft extends yE{constructor(t,e){super(t),this.snapshot=e,Fp(this,t)}toString(){return this.snapshot.toString()}}function Zy(n,t){const e=function bE(n,t){const c=new Np([],{},{},"",{},Vt,t,null,n.root,-1,{});return new wE("",new rc(c,[]))}(n,t),r=new Ur([new eu("",{})]),i=new Ur({}),o=new Ur({}),c=new Ur({}),h=new Ur(""),g=new ic(r,i,c,h,o,Vt,t,e.root);return g.snapshot=e.root,new Ft(new rc(g,[]),e)}class ic{constructor(t,e,r,i,o,c,h,g){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ut.U)(t=>cl(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ut.U)(t=>cl(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Op(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],o=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function va(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class Np{constructor(t,e,r,i,o,c,h,g,v,E,D){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this.routeConfig=g,this._urlSegment=v,this._lastPathIndex=E,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wE extends yE{constructor(t,e){super(e),this.url=t,Fp(this,e)}toString(){return ul(this._root)}}function Fp(n,t){t.value._routerState=n,t.children.forEach(e=>Fp(n,e))}function ul(n){const t=n.children.length>0?` { ${n.children.map(ul).join(", ")} } `:"";return`${n.value}${t}`}function Lp(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Lo(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Lo(t.params,e.params)||n.params.next(e.params),function aE(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Lo(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Lo(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function i_(n,t){const e=Lo(n.params,t.params)&&function fE(n,t){return nc(n,t)&&n.every((e,r)=>Lo(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||i_(n.parent,t.parent))}function s_(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function CE(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return s_(n,r,i);return s_(n,r)})}(n,t,e);return new rc(r,i)}{if(n.shouldAttach(t.value)){const o=n.retrieve(t.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(h=>s_(n,h)),c}}const r=function bN(n){return new ic(new Ur(n.url),new Ur(n.params),new Ur(n.queryParams),new Ur(n.fragment),new Ur(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(o=>s_(n,o));return new rc(r,i)}}function cd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ud(n){return"object"==typeof n&&null!=n&&n.outlets}function Up(n,t,e,r,i){let o={};if(r&&ni(r,(h,g)=>{o[g]=Array.isArray(h)?h.map(v=>`${v}`):`${h}`}),n===t)return new Xc(e,o,i);const c=a_(n,t,e);return new Xc(c,o,i)}function a_(n,t,e){const r={};return ni(n.children,(i,o)=>{r[o]=i===t?e:a_(i,t,e)}),new Kt(n.segments,r)}class ZA{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&cd(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(ud);if(i&&i!==lE(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $y{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function YA(n,t,e){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return l_(n,t,e);const r=function wN(n,t,e){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;const c=n.segments[i],h=e[r];if(ud(h))break;const g=`${h}`,v=r<e.length-1?e[r+1]:null;if(i>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!u_(g,v,c))return o;r+=2}else{if(!u_(g,{},c))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Kt(n.segments.slice(0,r.pathIndex),{});return o.children[Vt]=new Kt(n.segments.slice(r.pathIndex),n.children),l_(o,0,i)}return r.match&&0===i.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?c_(n,t,e):r.match?l_(n,0,i):c_(n,t,e)}function l_(n,t,e){if(0===e.length)return new Kt(n.segments,{});{const r=function EE(n){return ud(n[0])?n[0].outlets:{[Vt]:n}}(e),i={};return ni(r,(o,c)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[c]=YA(n.children[c],t,o))}),ni(n.children,(o,c)=>{void 0===r[c]&&(i[c]=o)}),new Kt(n.segments,i)}}function c_(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const o=e[i];if(ud(o)){const g=IE(o.outlets);return new Kt(r,g)}if(0===i&&cd(e[0])){r.push(new eu(n.segments[t].path,DE(e[0]))),i++;continue}const c=ud(o)?o.outlets[Vt]:`${o}`,h=i<e.length-1?e[i+1]:null;c&&h&&cd(h)?(r.push(new eu(c,DE(h))),i+=2):(r.push(new eu(c,{})),i++)}return new Kt(r,{})}function IE(n){const t={};return ni(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=c_(new Kt([],{}),0,e))}),t}function DE(n){const t={};return ni(n,(e,r)=>t[r]=`${e}`),t}function u_(n,t,e){return n==e.path&&Lo(t,e.parameters)}class EN{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Lp(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=Ph(e);t.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,i[c],r),delete i[c]}),ni(i,(o,c)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){const i=t.value,o=e?e.value:null;if(i===o)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Ph(t);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:h})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Ph(t);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=Ph(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Sp(o.value.snapshot))}),t.children.length&&this.forwardEvent(new ll(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,o=e?e.value:null;if(Lp(i),i===o)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),Lp(h.route.value),this.activateChildRoutes(t,null,c.children)}else{const h=function IN(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),g=h?h.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=g,c.outlet&&c.outlet.activateWith(i,g),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,r)}}class TE{constructor(t,e){this.routes=t,this.module=e}}function dd(n){return"function"==typeof n}function Oh(n){return n instanceof Xc}const hd=Symbol("INITIAL_VALUE");function Vp(){return dn(n=>function $m(...n){const t=(0,js.yG)(n),e=(0,js.jO)(n),{args:r,keys:i}=Vc(n);if(0===r.length)return(0,Tn.D)([],t);const o=new Or.y(function ts(n,t,e=zc.y){return r=>{ec(t,()=>{const{length:i}=n,o=new Array(i);let c=i,h=i;for(let g=0;g<i;g++)ec(t,()=>{const v=(0,Tn.D)(n[g],t);let E=!1;v.subscribe((0,Mt.x)(r,D=>{o[g]=D,E||(E=!0,h--),h||r.next(e(o.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,t,i?c=>$u(i,c):zc.y));return e?o.pipe(Ka(e)):o}(n.map(t=>t.pipe((0,Qs.q)(1),Ss(hd)))).pipe(vi((t,e)=>{let r=!1;return e.reduce((i,o,c)=>i!==hd?i:(o===hd&&(r=!0),r||!1!==o&&c!==e.length-1&&!Oh(o)?i:o),t)},hd),Vr(t=>t!==hd),(0,ut.U)(t=>Oh(t)?t:!0===t),(0,Qs.q)(1)))}class SE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fd,this.attachRef=null}}class fd{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new SE,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let d_=(()=>{class n{constructor(e,r,i,o,c){this.parentContexts=e,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new s.vpe,this.deactivateEvents=new s.vpe,this.attachEvents=new s.vpe,this.detachEvents=new s.vpe,this.name=o||Vt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const c=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,g=new zy(e,h,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(fd),s.Y36(s.s_b),s.Y36(s._Vd),s.$8M("name"),s.Y36(s.sBO))},n.\u0275dir=s.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class zy{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===ic?this.route:t===fd?this.childContexts:this.parent.get(t,e)}}let AE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&s._UZ(0,"router-outlet")},directives:[d_],encapsulation:2}),n})();function sc(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];xE(r,WA(t,r))}}function xE(n,t){n.children&&sc(n.children,t)}function WA(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function Bp(n){const t=n.children&&n.children.map(Bp),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Vt&&(e.component=AE),e}function Uo(n){return n.outlet||Vt}function Yy(n,t){const e=n.filter(r=>Uo(r)===t);return e.push(...n.filter(r=>Uo(r)!==t)),e}const ME={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function h_(n,t,e){var r;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},ME):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(t.matcher||Ny)(e,n,t);if(!o)return Object.assign({},ME);const c={};ni(o.posParams,(g,v)=>{c[v]=g.path});const h=o.consumed.length>0?Object.assign(Object.assign({},c),o.consumed[o.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:h,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function nu(n,t,e,r,i="corrected"){if(e.length>0&&function Fh(n,t,e){return e.some(r=>oc(n,t,r)&&Uo(r)!==Vt)}(n,e,r)){const c=new Kt(t,function Wy(n,t,e,r){const i={};i[Vt]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const o of e)if(""===o.path&&Uo(o)!==Vt){const c=new Kt([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,i[Uo(o)]=c}return i}(n,t,r,new Kt(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function jp(n,t,e){return e.some(r=>oc(n,t,r))}(n,e,r)){const c=new Kt(n.segments,function Nh(n,t,e,r,i,o){const c={};for(const h of r)if(oc(n,e,h)&&!i[Uo(h)]){const g=new Kt([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===o?n.segments.length:t.length,c[Uo(h)]=g}return Object.assign(Object.assign({},i),c)}(n,t,e,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const o=new Kt(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}function oc(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function kE(n,t,e,r){return!!(Uo(n)===r||r!==Vt&&oc(t,e,n))&&("**"===n.path||h_(t,n,e).matched)}function Ky(n,t,e){return 0===t.length&&!n.children[e]}class Hp{constructor(t){this.segmentGroup=t||null}}class f_{constructor(t){this.urlTree=t}}function pd(n){return Yc(new Hp(n))}function Qy(n){return Yc(new f_(n))}class xN{constructor(t,e,r,i,o){this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(s.h0i)}apply(){const t=nu(this.urlTree.root,[],[],this.config).segmentGroup,e=new Kt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Vt).pipe((0,ut.U)(o=>this.createUrlTree(g_(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(No(o=>{if(o instanceof f_)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Hp?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Vt).pipe((0,ut.U)(i=>this.createUrlTree(g_(i),t.queryParams,t.fragment))).pipe(No(i=>{throw i instanceof Hp?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const i=t.segments.length>0?new Kt([],{[Vt]:t}):t;return new Xc(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe((0,ut.U)(o=>new Kt([],o))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,Tn.D)(i).pipe(Qc(o=>{const c=r.children[o],h=Yy(e,o);return this.expandSegmentGroup(t,h,c,o).pipe((0,ut.U)(g=>({segment:g,outlet:o})))}),vi((o,c)=>(o[c.outlet]=c.segment,o),{}),function Fo(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Vr((i,o)=>n(i,o,r)):zc.y,ad(1),e?tc(t):Qm(()=>new Wc))}())}expandSegment(t,e,r,i,o,c){return(0,Tn.D)(r).pipe(Qc(h=>this.expandSegmentAgainstRoute(t,e,r,h,i,o,c).pipe(No(v=>{if(v instanceof Hp)return ze(null);throw v}))),y(h=>!!h),No((h,g)=>{if(h instanceof Wc||"EmptyError"===h.name)return Ky(e,i,o)?ze(new Kt([],{})):pd(e);throw h}))}expandSegmentAgainstRoute(t,e,r,i,o,c,h){return kE(i,e,o,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,o,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c):pd(e):pd(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Qy(o):this.lineralizeSegments(r,o).pipe((0,Cr.z)(c=>{const h=new Kt(c,{});return this.expandSegment(t,h,e,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,o,c){const{matched:h,consumedSegments:g,remainingSegments:v,positionalParamSegments:E}=h_(e,i,o);if(!h)return pd(e);const D=this.applyRedirectCommands(g,i.redirectTo,E);return i.redirectTo.startsWith("/")?Qy(D):this.lineralizeSegments(i,D).pipe((0,Cr.z)(k=>this.expandSegment(t,e,r,k.concat(v),c,!1)))}matchSegmentAgainstRoute(t,e,r,i,o){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ze(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe((0,ut.U)(D=>(r._loadedConfig=D,new Kt(i,{})))):ze(new Kt(i,{}));const{matched:c,consumedSegments:h,remainingSegments:g}=h_(e,r,i);return c?this.getChildConfig(t,r,i).pipe((0,Cr.z)(E=>{const D=E.module,k=E.routes,{segmentGroup:N,slicedSegments:U}=nu(e,h,g,k),X=new Kt(N.segments,N.children);if(0===U.length&&X.hasChildren())return this.expandChildren(D,k,X).pipe((0,ut.U)(et=>new Kt(h,et)));if(0===k.length&&0===U.length)return ze(new Kt(h,{}));const pe=Uo(r)===o;return this.expandSegment(D,X,k,U,pe?Vt:o,!0).pipe((0,ut.U)(We=>new Kt(h.concat(We.segments),We.children)))})):pd(e)}getChildConfig(t,e,r){return e.children?ze(new TE(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?ze(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe((0,Cr.z)(i=>i?this.configLoader.load(t.injector,e).pipe((0,ut.U)(o=>(e._loadedConfig=o,o))):function KA(n){return Yc(xp(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(e))):ze(new TE([],t))}runCanLoadGuards(t,e,r){const i=e.canLoad;return i&&0!==i.length?ze(i.map(c=>{const h=t.get(c);let g;if(function TN(n){return n&&dd(n.canLoad)}(h))g=h.canLoad(e,r);else{if(!dd(h))throw new Error("Invalid CanLoad guard");g=h(e,r)}return _a(g)})).pipe(Vp(),(0,p.b)(c=>{if(!Oh(c))return;const h=xp(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw h.url=c,h}),(0,ut.U)(c=>!0===c)):ze(!0)}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ze(r);if(i.numberOfChildren>1||!i.children[Vt])return Yc(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));i=i.children[Vt]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,i){const o=this.createSegmentGroup(t,e.root,r,i);return new Xc(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return ni(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[o]=e[h]}else r[o]=i}),r}createSegmentGroup(t,e,r,i){const o=this.createSegments(t,e.segments,r,i);let c={};return ni(e.children,(h,g)=>{c[g]=this.createSegmentGroup(t,h,r,i)}),new Kt(o,c)}createSegments(t,e,r,i){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}function g_(n){const t={};for(const r of Object.keys(n.children)){const o=g_(n.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function PE(n){if(1===n.numberOfChildren&&n.children[Vt]){const t=n.children[Vt];return new Kt(n.segments.concat(t.segments),t.children)}return n}(new Kt(n.segments,t))}class Jy{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class m_{constructor(t,e){this.component=t,this.route=e}}function JA(n,t,e){const r=n._root;return v_(r,t?t._root:null,e,[r.value])}function __(n,t,e){const r=function XA(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function v_(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ph(t);return n.children.forEach(c=>{(function MN(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,c=t?t.value:null,h=e?e.getContext(n.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const g=function OE(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!nc(n.url,t.url);case"pathParamsOrQueryParamsChange":return!nc(n.url,t.url)||!Lo(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!i_(n,t)||!Lo(n.queryParams,t.queryParams);default:return!i_(n,t)}}(c,o,o.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new Jy(r)):(o.data=c.data,o._resolvedData=c._resolvedData),v_(n,t,o.component?h?h.children:null:e,r,i),g&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new m_(h.outlet.component,c))}else c&&y_(t,h,i),i.canActivateChecks.push(new Jy(r)),v_(n,null,o.component?h?h.children:null:e,r,i)})(c,o[c.value.outlet],e,r.concat([c.value]),i),delete o[c.value.outlet]}),ni(o,(c,h)=>y_(c,e.getContext(h),i)),i}function y_(n,t,e){const r=Ph(n),i=n.value;ni(r,(o,c)=>{y_(o,i.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new m_(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class LE{}function UE(n){return new Or.y(t=>t.error(n))}class VE{constructor(t,e,r,i,o,c){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=c}recognize(){const t=nu(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Vt);if(null===e)return null;const r=new Np([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new rc(r,e),o=new wE(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(t){const e=t.value,r=Op(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const o of Object.keys(e.children)){const c=e.children[o],h=Yy(t,o),g=this.processSegmentGroup(h,c,o);if(null===g)return null;r.push(...g)}const i=b_(r);return function BE(n){n.sort((t,e)=>t.value.outlet===Vt?-1:e.value.outlet===Vt?1:t.value.outlet.localeCompare(e.value.outlet))}(i),i}processSegment(t,e,r,i){for(const o of t){const c=this.processSegmentAgainstRoute(o,e,r,i);if(null!==c)return c}return Ky(e,r,i)?[]:null}processSegmentAgainstRoute(t,e,r,i){if(t.redirectTo||!kE(t,e,r,i))return null;let o,c=[],h=[];if("**"===t.path){const N=r.length>0?lE(r).parameters:{};o=new Np(r,N,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eb(t),Uo(t),t.component,t,jE(e),ax(e)+r.length,HE(t))}else{const N=h_(e,t,r);if(!N.matched)return null;c=N.consumedSegments,h=N.remainingSegments,o=new Np(c,N.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eb(t),Uo(t),t.component,t,jE(e),ax(e)+c.length,HE(t))}const g=function ox(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:v,slicedSegments:E}=nu(e,c,h,g.filter(N=>void 0===N.redirectTo),this.relativeLinkResolution);if(0===E.length&&v.hasChildren()){const N=this.processChildren(g,v);return null===N?null:[new rc(o,N)]}if(0===g.length&&0===E.length)return[new rc(o,[])];const D=Uo(t)===i,k=this.processSegment(g,v,E,D?Vt:i);return null===k?null:[new rc(o,k)]}}function dl(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function b_(n){const t=[],e=new Set;for(const r of n){if(!dl(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=b_(r.children);t.push(new rc(r.value,i))}return t.filter(r=>!e.has(r))}function jE(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function ax(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function eb(n){return n.data||{}}function HE(n){return n.resolve||{}}function qE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function qp(n){return dn(t=>{const e=n(t);return e?(0,Tn.D)(e).pipe((0,ut.U)(()=>t)):ze(t)})}class rb extends class nb{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const C_=new s.OlP("ROUTES");class ZE{constructor(t,e,r,i){this.injector=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const i=this.loadModuleFactory(e.loadChildren).pipe((0,ut.U)(o=>{this.onLoadEndListener&&this.onLoadEndListener(e);const c=o.create(t);return new TE(Xm(c.injector.get(C_,void 0,s.XFs.Self|s.XFs.Optional)).map(Bp),c)}),No(o=>{throw e._loader$=void 0,o}));return e._loader$=new Wm(i,()=>new en.x).pipe(Ym()),e._loader$}loadModuleFactory(t){return _a(t()).pipe((0,Cr.z)(e=>e instanceof s.YKP?ze(e):(0,Tn.D)(this.compiler.compileModuleAsync(e))))}}class ib{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function RN(n){throw n}function fx(n,t,e){return t.parse("/")}function sb(n,t){return ze(null)}const GE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$E={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Sn=(()=>{class n{constructor(e,r,i,o,c,h,g){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new en.x,this.errorHandler=RN,this.malformedUriErrorHandler=fx,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:sb,afterPreactivation:sb},this.urlHandlingStrategy=new ib,this.routeReuseStrategy=new rb,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(s.h0i),this.console=c.get(s.c2e);const D=c.get(s.R0b);this.isNgZoneEnabled=D instanceof s.R0b&&s.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function ld(){return new Xc(new Kt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ZE(c,h,k=>this.triggerEvent(new Fi(k)),k=>this.triggerEvent(new Jc(k))),this.routerState=Zy(this.currentUrlTree,this.rootComponentType),this.transitions=new Ur({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(Vr(i=>0!==i.id),(0,ut.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),dn(i=>{let o=!1,c=!1;return ze(i).pipe((0,p.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),dn(h=>{const g=this.browserUrlTree.toString(),v=!this.navigated||h.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return hl(h.source)&&(this.browserUrlTree=h.extractedUrl),ze(h).pipe(dn(D=>{const k=this.transitions.getValue();return r.next(new x(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),k!==this.transitions.getValue()?al.E:Promise.resolve(D)}),function QA(n,t,e,r){return dn(i=>function RE(n,t,e,r,i){return new xN(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe((0,ut.U)(o=>Object.assign(Object.assign({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,p.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function lx(n,t,e,r,i){return(0,Cr.z)(o=>function sx(n,t,e,r,i="emptyOnly",o="legacy"){try{const c=new VE(n,t,e,r,i,o).recognize();return null===c?UE(new LE):ze(c)}catch(c){return UE(c)}}(n,t,o.urlAfterRedirects,e(o.urlAfterRedirects),r,i).pipe((0,ut.U)(c=>Object.assign(Object.assign({},o),{targetSnapshot:c}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,p.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(N,D)}this.browserUrlTree=D.urlAfterRedirects}const k=new je(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(k)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:N,source:U,restoredState:X,extras:pe}=h,Be=new x(k,this.serializeUrl(N),U,X);r.next(Be);const We=Zy(N,this.rootComponentType).snapshot;return ze(Object.assign(Object.assign({},h),{targetSnapshot:We,urlAfterRedirects:N,extras:Object.assign(Object.assign({},pe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),al.E}),qp(h=>{const{targetSnapshot:g,id:v,extractedUrl:E,rawUrl:D,extras:{skipLocationChange:k,replaceUrl:N}}=h;return this.hooks.beforePreactivation(g,{navigationId:v,appliedUrlTree:E,rawUrlTree:D,skipLocationChange:!!k,replaceUrl:!!N})}),(0,p.b)(h=>{const g=new tt(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(g)}),(0,ut.U)(h=>Object.assign(Object.assign({},h),{guards:JA(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function ex(n,t){return(0,Cr.z)(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=e;return 0===c.length&&0===o.length?ze(Object.assign(Object.assign({},e),{guardsResult:!0})):function Xy(n,t,e,r){return(0,Tn.D)(n).pipe((0,Cr.z)(i=>function ix(n,t,e,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?ze(o.map(h=>{const g=__(h,t,i);let v;if(function tu(n){return n&&dd(n.canDeactivate)}(g))v=_a(g.canDeactivate(n,t,e,r));else{if(!dd(g))throw new Error("Invalid CanDeactivate guard");v=_a(g(n,t,e,r))}return v.pipe(y())})).pipe(Vp()):ze(!0)}(i.component,i.route,e,t,r)),y(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Cr.z)(h=>h&&function DN(n){return"boolean"==typeof n}(h)?function NE(n,t,e,r){return(0,Tn.D)(t).pipe(Qc(i=>Tp(function nx(n,t){return null!==n&&t&&t(new Oy(n)),ze(!0)}(i.route.parent,r),function tx(n,t){return null!==n&&t&&t(new xh(n)),ze(!0)}(i.route,r),function FE(n,t,e){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(c=>function Js(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>Ks(()=>ze(c.guards.map(g=>{const v=__(g,c.node,e);let E;if(function AN(n){return n&&dd(n.canActivateChild)}(v))E=_a(v.canActivateChild(r,n));else{if(!dd(v))throw new Error("Invalid CanActivateChild guard");E=_a(v(r,n))}return E.pipe(y())})).pipe(Vp())));return ze(o).pipe(Vp())}(n,i.path,e),function rx(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return ze(!0);const i=r.map(o=>Ks(()=>{const c=__(o,t,e);let h;if(function SN(n){return n&&dd(n.canActivate)}(c))h=_a(c.canActivate(t,n));else{if(!dd(c))throw new Error("Invalid CanActivate guard");h=_a(c(t,n))}return h.pipe(y())}));return ze(i).pipe(Vp())}(n,i.route,e))),y(i=>!0!==i,!0))}(r,o,n,t):ze(h)),(0,ut.U)(h=>Object.assign(Object.assign({},e),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,p.b)(h=>{if(Oh(h.guardsResult)){const v=xp(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw v.url=h.guardsResult,v}const g=new bt(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(g)}),Vr(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),qp(h=>{if(h.guards.canActivateChecks.length)return ze(h).pipe((0,p.b)(g=>{const v=new gt(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),dn(g=>{let v=!1;return ze(g).pipe(function cx(n,t){return(0,Cr.z)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return ze(e);let o=0;return(0,Tn.D)(i).pipe(Qc(c=>function tb(n,t,e,r){return function ux(n,t,e,r){const i=qE(n);if(0===i.length)return ze({});const o={};return(0,Tn.D)(i).pipe((0,Cr.z)(c=>function w_(n,t,e,r){const i=__(n,t,r);return _a(i.resolve?i.resolve(t,e):i(t,e))}(n[c],t,e,r).pipe((0,p.b)(h=>{o[c]=h}))),ad(1),(0,Cr.z)(()=>qE(o).length===i.length?ze(o):al.E))}(n._resolve,n,t,r).pipe((0,ut.U)(o=>(n._resolvedData=o,n.data=Object.assign(Object.assign({},n.data),Op(n,e).resolve),null)))}(c.route,r,n,t)),(0,p.b)(()=>o++),ad(1),(0,Cr.z)(c=>o===i.length?ze(e):al.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,p.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,p.b)(g=>{const v=new Jn(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}))}),qp(h=>{const{targetSnapshot:g,id:v,extractedUrl:E,rawUrl:D,extras:{skipLocationChange:k,replaceUrl:N}}=h;return this.hooks.afterPreactivation(g,{navigationId:v,appliedUrlTree:E,rawUrlTree:D,skipLocationChange:!!k,replaceUrl:!!N})}),(0,ut.U)(h=>{const g=function Gy(n,t,e){const r=s_(n,t._root,e?e._root:void 0);return new Ft(r,t)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:g})}),(0,p.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,t,e)=>(0,ut.U)(r=>(new EN(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,p.b)({next(){o=!0},complete(){o=!0}}),function _(n){return(0,Qn.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}(()=>{var h;o||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),No(h=>{if(c=!0,function Mp(n){return n&&n[Ap]}(h)){const g=Oh(h.url);g||(this.navigated=!0,this.restoreHistory(i,!0));const v=new Q(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(v),g?setTimeout(()=>{const E=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hl(i.source)};this.scheduleNavigation(E,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new _e(i.id,this.serializeUrl(i.extractedUrl),h);r.next(g);try{i.resolve(this.errorHandler(h))}catch(v){i.reject(v)}}return al.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const o={replaceUrl:!0},c=(null===(i=e.state)||void 0===i?void 0:i.navigationId)?e.state:null;if(c){const g=Object.assign({},c);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(o.state=g)}const h=this.parseUrl(e.url);this.scheduleNavigation(h,r,c,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){sc(e),this.config=e.map(Bp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:o,fragment:c,queryParamsHandling:h,preserveFragment:g}=r,v=i||this.routerState.root,E=g?this.currentUrlTree.fragment:c;let D=null;switch(h){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=o||null}return null!==D&&(D=this.removeEmptyProps(D)),function o_(n,t,e,r,i){if(0===e.length)return Up(t.root,t.root,t.root,r,i);const o=function GA(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ZA(!0,0,n);let t=0,e=!1;const r=n.reduce((i,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return ni(o.outlets,(g,v)=>{h[v]="string"==typeof g?g.split("/"):g}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===c?(o.split("/").forEach((h,g)=>{0==g&&"."===h||(0==g&&""===h?e=!0:".."===h?t++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new ZA(e,t,r)}(e);if(o.toRoot())return Up(t.root,t.root,new Kt([],{}),r,i);const c=function $A(n,t,e){if(n.isAbsolute)return new $y(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const o=e.snapshot._urlSegment;return new $y(o,o===t.root,0)}const r=cd(n.commands[0])?0:1;return function zA(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new $y(r,!1,i-o)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(o,t,n),h=c.processChildren?l_(c.segmentGroup,c.index,o.commands):YA(c.segmentGroup,c.index,o.commands);return Up(t.root,c.segmentGroup,h,r,i)}(v,this.currentUrlTree,e,D,null!=E?E:null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=Oh(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function zE(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?Object.assign({},GE):!1===r?Object.assign({},$E):r,Oh(e))return uE(this.currentUrlTree,e,i);const o=this.parseUrl(e);return uE(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const o=e[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new O(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,i,o,c){var h,g;if(this.disposed)return Promise.resolve(!1);let v,E,D;c?(v=c.resolve,E=c.reject,D=c.promise):D=new Promise((U,X)=>{v=U,E=X});const k=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),N=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(g=this.browserPageId)&&void 0!==g?g:0)+1):N=0,this.setTransition({id:k,targetPageId:N,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:o,resolve:v,reject:E,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(U=>Promise.reject(U))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(e,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===c&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const i=new Q(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(i),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){s.$Z()},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function hl(n){return"imperative"!==n}let xs=(()=>{class n{constructor(e,r,i,o,c){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=c,this.commands=null,this.onChanges=new en.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==e?r.setAttribute(i,"tabindex",e):r.removeAttribute(i,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:Lh(this.skipLocationChange),replaceUrl:Lh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Lh(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Sn),s.Y36(ic),s.$8M("tabindex"),s.Y36(s.Qsj),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,r){1&e&&s.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[s.TTD]}),n})(),Br=(()=>{class n{constructor(e,r,i){this.router=e,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new en.x,this.subscription=e.events.subscribe(o=>{o instanceof O&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,r,i,o,c){if(0!==e||r||i||o||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:Lh(this.skipLocationChange),replaceUrl:Lh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Lh(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Sn),s.Y36(ic),s.Y36(me))},n.\u0275dir=s.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,r){1&e&&s.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&e&&s.uIk("target",r.target)("href",r.href,s.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[s.TTD]}),n})();function Lh(n){return""===n||!!n}class ab{}class Uh{preload(t,e){return ze(null)}}let YE=(()=>{class n{constructor(e,r,i,o){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=new ZE(i,r,g=>e.triggerEvent(new Fi(g)),g=>e.triggerEvent(new Jc(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(Vr(e=>e instanceof O),Qc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(s.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const o of r)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const c=o._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(e,o)):o.children&&i.push(this.processRoutes(e,o.children));return(0,Tn.D)(i).pipe((0,Kc.J)(),(0,ut.U)(o=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ze(r._loadedConfig):this.loader.load(e.injector,r)).pipe((0,Cr.z)(o=>(r._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Sn),s.LFG(s.Sil),s.LFG(s.zs3),s.LFG(ab))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Zp=(()=>{class n{constructor(e,r,i={}){this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof x?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof O&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Mh&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new Mh(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){s.$Z()},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const ru=new s.OlP("ROUTER_CONFIGURATION"),cb=new s.OlP("ROUTER_FORROOT_GUARD"),gx=[Ie,{provide:t_,useClass:Rh},{provide:Sn,useFactory:function _x(n,t,e,r,i,o,c={},h,g){const v=new Sn(null,n,t,e,r,i,Xm(o));return h&&(v.urlHandlingStrategy=h),g&&(v.routeReuseStrategy=g),function vx(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,v),c.enableTracing&&v.events.subscribe(E=>{var D,k;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null===(k=console.groupEnd)||void 0===k||k.call(console)}),v},deps:[t_,fd,Ie,s.zs3,s.Sil,C_,ru,[class hx{},new s.FiY],[class dx{},new s.FiY]]},fd,{provide:ic,useFactory:function Bh(n){return n.routerState.root},deps:[Sn]},YE,Uh,class lb{preload(t,e){return e().pipe(No(()=>ze(null)))}},{provide:ru,useValue:{enableTracing:!1}}];function ub(){return new s.PXZ("Router",Sn)}let WE=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[gx,db(e),{provide:cb,useFactory:Vh,deps:[[Sn,new s.FiY,new s.tp0]]},{provide:ru,useValue:r||{}},{provide:me,useFactory:KE,deps:[ue,[new s.tBr(Qe),new s.FiY],ru]},{provide:Zp,useFactory:mx,deps:[Sn,Ou,ru]},{provide:ab,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Uh},{provide:s.PXZ,multi:!0,useFactory:ub},[hb,{provide:s.ip1,multi:!0,useFactory:yx,deps:[hb]},{provide:QE,useFactory:bx,deps:[hb]},{provide:s.tb,multi:!0,useExisting:QE}]]}}static forChild(e){return{ngModule:n,providers:[db(e)]}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(cb,8),s.LFG(Sn,8))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();function mx(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new Zp(n,t,e)}function KE(n,t,e={}){return e.useHash?new xe(n,t):new nt(n,t)}function Vh(n){return"guarded"}function db(n){return[{provide:s.deG,multi:!0,useValue:n},{provide:C_,multi:!0,useValue:n}]}let hb=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new en.x}appInitializer(){return this.injector.get(z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),o=this.injector.get(Sn),c=this.injector.get(ru);return"disabled"===c.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?ze(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),i})}bootstrapListener(e){const r=this.injector.get(ru),i=this.injector.get(YE),o=this.injector.get(Zp),c=this.injector.get(Sn),h=this.injector.get(s.z2F);e===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),o.init(),c.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.zs3))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();function yx(n){return n.appInitializer.bind(n)}function bx(n){return n.bootstrapListener.bind(n)}const QE=new s.OlP("Router Initializer");class fb{}class pb{}class Ot{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),o=i.toLowerCase(),c=e.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ot?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Ot;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ot?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const o=t.value;if(o){let c=this.headers.get(e);if(!c)return;c=c.filter(h=>-1===o.indexOf(h)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class XE{encodeKey(t){return eI(t)}encodeValue(t){return eI(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Cx=/%(\d[a-f0-9])/gi,Ex={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function eI(n){return encodeURIComponent(n).replace(Cx,(t,e)=>{var r;return null!==(r=Ex[e])&&void 0!==r?r:t})}function gb(n){return`${n}`}class gd{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new XE,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function wx(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[c,h]=-1==o?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],g=e.get(c)||[];g.push(h),e.set(c,g)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e];this.map.set(e,Array.isArray(r)?r:[r])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new gd({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(gb(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(gb(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Dx{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function Sx(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Ax(n){return"undefined"!=typeof Blob&&n instanceof Blob}function E_(n){return"undefined"!=typeof FormData&&n instanceof FormData}class jh{constructor(t,e,r,i){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function Tx(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Ot),this.context||(this.context=new Dx),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const h=e.indexOf("?");this.urlWithParams=e+(-1===h?"?":h<e.length-1?"&":"")+c}}else this.params=new gd,this.urlWithParams=e}serializeBody(){return null===this.body?null:Sx(this.body)||Ax(this.body)||E_(this.body)||function xx(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||E_(this.body)?null:Ax(this.body)?this.body.type||null:Sx(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const r=t.method||this.method,i=t.url||this.url,o=t.responseType||this.responseType,c=void 0!==t.body?t.body:this.body,h=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,g=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let v=t.headers||this.headers,E=t.params||this.params;const D=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(v=Object.keys(t.setHeaders).reduce((k,N)=>k.set(N,t.setHeaders[N]),v)),t.setParams&&(E=Object.keys(t.setParams).reduce((k,N)=>k.set(N,t.setParams[N]),E)),new jh(r,i,c,{params:E,headers:v,context:D,reportProgress:g,responseType:o,withCredentials:h})}}var hr=(()=>((hr=hr||{})[hr.Sent=0]="Sent",hr[hr.UploadProgress=1]="UploadProgress",hr[hr.ResponseHeader=2]="ResponseHeader",hr[hr.DownloadProgress=3]="DownloadProgress",hr[hr.Response=4]="Response",hr[hr.User=5]="User",hr))();class tI{constructor(t,e=200,r="OK"){this.headers=t.headers||new Ot,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Xs extends tI{constructor(t={}){super(t),this.type=hr.ResponseHeader}clone(t={}){return new Xs({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class mb extends tI{constructor(t={}){super(t),this.type=hr.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new mb({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Mx extends tI{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function I_(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let pl=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof jh)o=e;else{let g,v;g=i.headers instanceof Ot?i.headers:new Ot(i.headers),i.params&&(v=i.params instanceof gd?i.params:new gd({fromObject:i.params})),o=new jh(e,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=ze(o).pipe(Qc(g=>this.handler.handle(g)));if(e instanceof jh||"events"===i.observe)return c;const h=c.pipe(Vr(g=>g instanceof mb));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return h.pipe((0,ut.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return h.pipe((0,ut.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return h.pipe((0,ut.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return h.pipe((0,ut.U)(g=>g.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new gd).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,I_(i,r))}post(e,r,i={}){return this.request("POST",e,I_(i,r))}put(e,r,i={}){return this.request("PUT",e,I_(i,r))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(fb))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class _b{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const nI=new s.OlP("HTTP_INTERCEPTORS");let ON=(()=>{class n{intercept(e,r){return r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Rx=/^\)\]\}',?\n/;let Gp=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Or.y(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((N,U)=>i.setRequestHeader(N,U.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const N=e.detectContentTypeHeader();null!==N&&i.setRequestHeader("Content-Type",N)}if(e.responseType){const N=e.responseType.toLowerCase();i.responseType="json"!==N?N:"text"}const o=e.serializeBody();let c=null;const h=()=>{if(null!==c)return c;const N=i.statusText||"OK",U=new Ot(i.getAllResponseHeaders()),X=function Px(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return c=new Xs({headers:U,status:i.status,statusText:N,url:X}),c},g=()=>{let{headers:N,status:U,statusText:X,url:pe}=h(),Be=null;204!==U&&(Be=void 0===i.response?i.responseText:i.response),0===U&&(U=Be?200:0);let We=U>=200&&U<300;if("json"===e.responseType&&"string"==typeof Be){const et=Be;Be=Be.replace(Rx,"");try{Be=""!==Be?JSON.parse(Be):null}catch($e){Be=et,We&&(We=!1,Be={error:$e,text:Be})}}We?(r.next(new mb({body:Be,headers:N,status:U,statusText:X,url:pe||void 0})),r.complete()):r.error(new Mx({error:Be,headers:N,status:U,statusText:X,url:pe||void 0}))},v=N=>{const{url:U}=h(),X=new Mx({error:N,status:i.status||0,statusText:i.statusText||"Unknown Error",url:U||void 0});r.error(X)};let E=!1;const D=N=>{E||(r.next(h()),E=!0);let U={type:hr.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(U.total=N.total),"text"===e.responseType&&!!i.responseText&&(U.partialText=i.responseText),r.next(U)},k=N=>{let U={type:hr.UploadProgress,loaded:N.loaded};N.lengthComputable&&(U.total=N.total),r.next(U)};return i.addEventListener("load",g),i.addEventListener("error",v),i.addEventListener("timeout",v),i.addEventListener("abort",v),e.reportProgress&&(i.addEventListener("progress",D),null!==o&&i.upload&&i.upload.addEventListener("progress",k)),i.send(o),r.next({type:hr.Sent}),()=>{i.removeEventListener("error",v),i.removeEventListener("abort",v),i.removeEventListener("load",g),i.removeEventListener("timeout",v),e.reportProgress&&(i.removeEventListener("progress",D),null!==o&&i.upload&&i.upload.removeEventListener("progress",k)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(bn))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const iu=new s.OlP("XSRF_COOKIE_NAME"),vb=new s.OlP("XSRF_HEADER_NAME");class Hh{}let Ox=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=La(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe),s.LFG(s.Lbi),s.LFG(iu))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),yb=(()=>{class n{constructor(e,r){this.tokenService=e,this.headerName=r}intercept(e,r){const i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(e);const o=this.tokenService.getToken();return null!==o&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,o)})),r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Hh),s.LFG(vb))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),bb=(()=>{class n{constructor(e,r){this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=this.injector.get(nI,[]);this.chain=r.reduceRight((i,o)=>new _b(i,o),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(pb),s.LFG(s.zs3))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Li=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:yb,useClass:ON}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:iu,useValue:e.cookieName}:[],e.headerName?{provide:vb,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[yb,{provide:nI,useExisting:yb,multi:!0},{provide:Hh,useClass:Ox},{provide:iu,useValue:"XSRF-TOKEN"},{provide:vb,useValue:"X-XSRF-TOKEN"}]}),n})(),md=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[pl,{provide:fb,useClass:bb},Gp,{provide:pb,useExisting:Gp}],imports:[[Li.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const Qt_firebaseConfig={apiKey:"AIzaSyCLZaM4IsxCink9IQdG2-nQYok8cOBKpI4",authDomain:"shasic-3241c.firebaseapp.com",projectId:"shasic-3241c",storageBucket:"shasic-3241c.appspot.com",messagingSenderId:"280947357134",appId:"1:280947357134:web:a9b5d932877427c9bd279f",measurementId:"G-SMYK177YN7",databaseURL:"https://shasic-3241c-default-rtdb.europe-west1.firebasedatabase.app"},Qt_apiUrl="http://api-luis-b.proyectos-afa.cf/api";let lc=(()=>{class n{constructor(e){this.http=e,this.loginUrl=Qt_apiUrl+"/login",this.registerUrl=Qt_apiUrl+"/user/register",this.eventUsersUrl=Qt_apiUrl+"/eventUsers/",this.userProfileUrl=Qt_apiUrl+"/getUserProfile",this.updatePasswordUrl=Qt_apiUrl+"/userUpdatePassword",this.updateProfileUrl=Qt_apiUrl+"/userUpdateProfile",this.httpOptions={headers:new Ot}}login(e,r){return this.http.post(this.loginUrl,{email:e,password:r})}register(e){return this.http.post(this.registerUrl,{email:e.email,userName:e.userName,password:e.password,fullName:e.fullName})}getEventUsers(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.eventUsersUrl+e,this.httpOptions)}getUserProfile(){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.userProfileUrl,this.httpOptions)}updatePassword(e,r){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.put(this.updatePasswordUrl,{oldPassword:e,newPassword:r},this.httpOptions)}updateProfile(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.put(this.updateProfileUrl,{userName:e.userName,email:e.email,fullName:e.fullName,description:e.description},this.httpOptions)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(pl))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),On=(()=>{class n{constructor(e){this.http=e,this.httpOptions={headers:new Ot},this.autoLoginUrl=Qt_apiUrl+"/autoLogin",this.queryUrl=Qt_apiUrl+"/search",this.spinner=new Ur(!1),this.sharedSpinner=this.spinner.asObservable(),this.error=new Ur(!1),this.sharedError=this.error.asObservable()}runSpinner(e){this.spinner.next(e)}showError(e){this.error.next(!0),setTimeout(()=>this.error.next(!1),e)}autoLogin(){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.autoLoginUrl,this.httpOptions)}getResults(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token"),query:e})},this.http.get(this.queryUrl,this.httpOptions)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(pl))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),su=(()=>{class n{constructor(e,r,i){this.sharedService=e,this.router=r,this.cdRef=i}ngOnInit(){this.checkUserLogged()}checkUserLogged(){localStorage.getItem("access_token")&&(this.sharedService.runSpinner(!0),this.sharedService.autoLogin().subscribe({next:e=>{"user"==e.rol&&this.router.navigate(["/home"]),"artist"==e.rol&&this.router.navigate(["/artist-home"])},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{console.clear(),this.sharedService.runSpinner(!1)}}))}ngAfterViewChecked(){this.cdRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(On),s.Y36(Sn),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-unlogged-navbar"]],decls:16,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-expand-md","navbar-purple","bg-dark"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["src","../../../../assets/shasic_logo.png","alt","Shasic"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],["src","../../../assets/dropdown-icon.png","alt","Dropdown icon",1,"dropdown-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse","justify-content-center"],[1,"nav","justify-content-center"],[1,"nav-item"],["routerLink","/login",1,"nav-link"],[1,"btn","btn-primary"],["routerLink","/register",1,"nav-link"]],template:function(e,r){1&e&&(s.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),s._UZ(3,"img",3),s.qZA(),s.TgZ(4,"button",4),s._UZ(5,"img",5),s.qZA(),s.TgZ(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9)(10,"button",10),s._uU(11,"INICIAR SESI\xd3N"),s.qZA()()(),s.TgZ(12,"li",8)(13,"a",11)(14,"button",10),s._uU(15,"REGISTRARSE"),s.qZA()()()()()()())},directives:[Br],styles:["button[_ngcontent-%COMP%]{padding:2%;width:200px}"]}),n})();function qh(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Email requerido"),s.qZA())}function Zh(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Direcci\xf3n no v\xe1lida"),s.qZA())}function Gh(n,t){if(1&n&&(s.TgZ(0,"div",14),s.YNc(1,qh,2,0,"div",15),s.YNc(2,Zh,2,0,"div",15),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.email.errors.required),s.xp6(1),s.Q6J("ngIf",e.f.email.errors.email)}}function $h(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Contrase\xf1a requerida "),s.qZA())}function zh(n,t){if(1&n&&(s.TgZ(0,"div",14),s.YNc(1,$h,2,0,"div",15),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.password.errors.required)}}function Yh(n,t){1&n&&(s.TgZ(0,"div",14),s._uU(1," Email o contrase\xf1a incorrectos "),s.qZA())}const Cb=function(n,t){return{"is-valid":n,"is-invalid":t}};let sI=(()=>{class n{constructor(e,r,i,o){this.formBuilder=e,this.userService=r,this.sharedService=i,this.router=o,this.submitted=!1,this.invalidCredentials=!1,this.loginForm=this.formBuilder.group({email:["",[Zt.required,Zt.email]],password:["",Zt.required]})}ngOnInit(){}get f(){return this.loginForm.controls}login(){var e,r;if(this.submitted=!0,!this.loginForm.valid)return;let i;this.sharedService.runSpinner(!0),this.userService.login(null===(e=this.loginForm.get("email"))||void 0===e?void 0:e.value,null===(r=this.loginForm.get("password"))||void 0===r?void 0:r.value).subscribe({next:o=>{i=o.rol,localStorage.setItem("access_token",o.access_token),localStorage.setItem("rol",o.rol)},complete:()=>{this.sharedService.runSpinner(!1),this.router.navigate("user"==i?["/home"]:["/artist-home"])},error:o=>{"invalidCredentials"==o.error?this.invalidCredentials=!0:this.sharedService.showError(6e3),this.sharedService.runSpinner(!1)}})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Xl),s.Y36(lc),s.Y36(On),s.Y36(Sn))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-login"]],decls:22,vars:12,consts:[[1,"container"],[1,"bg-purple","formDiv"],[3,"formGroup","ngSubmit"],[1,"cl-pruple","justify-content-center","mb-5"],[1,"form-floating","mb-3","col-6"],["type","email","formControlName","email","id","floatingInput","placeholder","name@example.com","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback bg-danger",4,"ngIf"],["for","floatingInput"],[1,"form-floating","col-6"],["type","password","formControlName","password","id","floatingPassword","placeholder","Password","required","",1,"form-control",3,"ngClass"],["for","floatingPassword"],[2,"padding","20px"],["type","submit",1,"btn","btn-secondary"],["routerLink","/register"],[1,"invalid-feedback","bg-danger"],[4,"ngIf"]],template:function(e,r){1&e&&(s._UZ(0,"app-unlogged-navbar"),s.TgZ(1,"div",0)(2,"div",1)(3,"form",2),s.NdJ("ngSubmit",function(){return r.login()}),s.TgZ(4,"h1",3),s._uU(5,"Inicio de Sesi\xf3n"),s.qZA(),s.TgZ(6,"div",4),s._UZ(7,"input",5),s.YNc(8,Gh,3,2,"div",6),s.TgZ(9,"label",7),s._uU(10,"Email"),s.qZA()(),s.TgZ(11,"div",8),s._UZ(12,"input",9),s.YNc(13,zh,2,1,"div",6),s.YNc(14,Yh,2,0,"div",6),s.TgZ(15,"label",10),s._uU(16,"Contrase\xf1a"),s.qZA()(),s.TgZ(17,"div",11)(18,"button",12),s._uU(19,"Login"),s.qZA()()(),s.TgZ(20,"a",13),s._uU(21,"\xbfTodav\xeda no tienes cuenta? Reg\xedstrate aqu\xed"),s.qZA()()()),2&e&&(s.xp6(3),s.Q6J("formGroup",r.loginForm),s.xp6(4),s.Q6J("ngClass",s.WLB(6,Cb,!r.f.email.invalid&&r.submitted,r.f.email.invalid&&r.submitted||r.invalidCredentials)),s.xp6(1),s.Q6J("ngIf",r.submitted&&r.f.email.errors),s.xp6(4),s.Q6J("ngClass",s.WLB(9,Cb,!r.f.password.invalid&&r.submitted,r.f.password.invalid&&r.submitted||r.invalidCredentials)),s.xp6(1),s.Q6J("ngIf",r.submitted&&r.f.password.errors),s.xp6(1),s.Q6J("ngIf",r.invalidCredentials))},directives:[su,ga,Jr,$s,Qr,Qi,ma,Ys,gr,Ut,Br],styles:["h1[_ngcontent-%COMP%]{color:#000;text-align:center}.form-floating[_ngcontent-%COMP%]{margin-left:24%}button[_ngcontent-%COMP%]{font-size:18pt}a[_ngcontent-%COMP%]{text-align:center;color:#000}a[_ngcontent-%COMP%]:hover{color:#3e3c3c}.container[_ngcontent-%COMP%]{text-align:center}"]}),n})(),gl=(()=>{class n{constructor(e){this.http=e,this.allArtistsUrl=Qt_apiUrl+"/artists",this.registerUrl=Qt_apiUrl+"/artist/register",this.artistsByUserUrl=Qt_apiUrl+"/userArtists",this.artistByName=Qt_apiUrl+"/artist/",this.followArtistUrl=Qt_apiUrl+"/followArtist/",this.unfollowArtistUrl=Qt_apiUrl+"/unfollowArtist/",this.artistsIdsUrl=Qt_apiUrl+"/artistsIds",this.artistProfileUrl=Qt_apiUrl+"/artistProfileInfo",this.updateProfileUrl=Qt_apiUrl+"/artistUpdateProfile",this.updatePasswordUrl=Qt_apiUrl+"/artistUpdatePassword",this.httpOptions={headers:new Ot}}register(e){return this.http.post(this.registerUrl,{email:e.email,userName:e.userName,password:e.password,fullName:e.fullName})}getAllArtists(){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.allArtistsUrl,this.httpOptions)}getArtistsByUser(){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.artistsByUserUrl,this.httpOptions)}getArtistByName(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.artistByName+e,this.httpOptions)}followArtist(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.followArtistUrl+e,this.httpOptions)}unfollowArtist(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.delete(this.unfollowArtistUrl+e,this.httpOptions)}getAllArtistsIds(){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.artistsIdsUrl,this.httpOptions)}getArtistProfile(){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.artistProfileUrl,this.httpOptions)}updateProfile(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.put(this.updateProfileUrl,{userName:e.userName,email:e.email,fullName:e.fullName,bio:e.bio,location:e.location},this.httpOptions)}updatePassword(e,r){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.put(this.updatePasswordUrl,{oldPassword:e,newPassword:r},this.httpOptions)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(pl))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wh=(()=>{class n{constructor(e){this.http=e,this.artistUrl=Qt_apiUrl+"/artist/img",this.userUrl=Qt_apiUrl+"/user/img",this.eventUrl=Qt_apiUrl+"/event/img/",this.httpOptions={headers:new Ot}}uploadImage(e,r,i=0){this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})};const o=new FormData;o.append("image",r);let c="";return"user"==e?c=this.userUrl:"artist"==e?c=this.artistUrl:"event"==e&&(c=this.eventUrl+i),this.http.post(c,o,this.httpOptions)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(pl))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oI(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Email requerido"),s.qZA())}function aI(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Direcci\xf3n no v\xe1lida"),s.qZA())}function lI(n,t){if(1&n&&(s.TgZ(0,"div",27),s.YNc(1,oI,2,0,"div",28),s.YNc(2,aI,2,0,"div",28),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.email.errors.required),s.xp6(1),s.Q6J("ngIf",e.f.email.errors.email)}}function cI(n,t){1&n&&(s.TgZ(0,"div",27),s._uU(1," Direcci\xf3n email ya usada "),s.qZA())}function uI(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Nombre de usuario requerido "),s.qZA())}function Nx(n,t){if(1&n&&(s.TgZ(0,"div",27),s.YNc(1,uI,2,0,"div",28),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.userName.errors.required)}}function dI(n,t){1&n&&(s.TgZ(0,"div",27),s._uU(1," Nombre de usuario ya usado "),s.qZA())}function Fx(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Nombre requerido"),s.qZA())}function hI(n,t){if(1&n&&(s.TgZ(0,"div",27),s.YNc(1,Fx,2,0,"div",28),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.fullName.errors.required)}}function fI(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Contrase\xf1a requerida "),s.qZA())}function Lx(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," La contrase\xf1a debe tener 8 caracteres como m\xednimo "),s.qZA())}function Ux(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," La contrase\xf1a debe contener al menos una letra min\xfascula, una may\xfascula y un n\xfamero "),s.qZA())}function pI(n,t){if(1&n&&(s.TgZ(0,"div",27),s.YNc(1,fI,2,0,"div",28),s.YNc(2,Lx,2,0,"div",28),s.YNc(3,Ux,2,0,"div",28),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.password.errors.required),s.xp6(1),s.Q6J("ngIf",e.f.password.errors.minlength),s.xp6(1),s.Q6J("ngIf",e.f.password.errors.pattern)}}function Vx(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Contrase\xf1a repetida requerida "),s.qZA())}function gI(n,t){if(1&n&&(s.TgZ(0,"div",27),s.YNc(1,Vx,2,0,"div",28),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.repPassword.errors.required)}}function Bx(n,t){1&n&&(s.TgZ(0,"div",27),s._uU(1," Las contrase\xf1as no coinciden "),s.qZA())}function jx(n,t){1&n&&(s.TgZ(0,"div",29),s._uU(1," Debes seleccionar un tipo de perfil "),s.qZA())}function BN(n,t){1&n&&(s.TgZ(0,"div",29),s._uU(1," El archivo debe tener el formato correcto (*.png, *.jpg, *.jpeg) "),s.qZA())}const Kh=function(n,t){return{"is-valid":n,"is-invalid":t}};let Eb=(()=>{class n{constructor(e,r,i,o,c,h){this.formBuilder=e,this.userService=r,this.artistService=i,this.sharedService=o,this.imgService=c,this.router=h,this.submitted=!1,this.userNameUsed=!1,this.emailUsed=!1,this.registerForm=e.group({email:["",[Zt.required,Zt.email]],fullName:["",Zt.required],userName:["",Zt.required],password:["",[Zt.required,Zt.pattern]],repPassword:["",Zt.required],profileType:["Selecciona el tipo de perfil"]})}ngOnInit(){var e;null===(e=document.getElementById("profileImage"))||void 0===e||e.addEventListener("change",this.displayImage)}get f(){return this.registerForm.controls}get repPassword(){var e,r;return(null===(e=this.registerForm.get("password"))||void 0===e?void 0:e.value)==(null===(r=this.registerForm.get("repPassword"))||void 0===r?void 0:r.value)}get validProfileType(){var e,r;return!("user"!=(null===(e=this.registerForm.get("profileType"))||void 0===e?void 0:e.value)&&"artist"!=(null===(r=this.registerForm.get("profileType"))||void 0===r?void 0:r.value))}get validFileExtension(){const r=document.getElementById("profileImage");return!(r.files[0]&&!/(?:jpeg|jpg|png)/i.test(r.files[0].name))}register(){var e,r,i,o,c;if(this.emailUsed=!1,this.userNameUsed=!1,this.submitted=!0,!(this.registerForm.valid&&this.repPassword&&this.validProfileType&&this.validFileExtension))return;this.sharedService.runSpinner(!0);const h=JSON.parse(JSON.stringify({email:null===(e=this.registerForm.get("email"))||void 0===e?void 0:e.value,fullName:null===(r=this.registerForm.get("fullName"))||void 0===r?void 0:r.value,userName:null===(i=this.registerForm.get("userName"))||void 0===i?void 0:i.value.toLowerCase(),password:null===(o=this.registerForm.get("password"))||void 0===o?void 0:o.value}));"user"==(null===(c=this.registerForm.get("profileType"))||void 0===c?void 0:c.value)?this.registerUser(h):this.registerArtist(h)}registerUser(e){this.userService.register(e).subscribe({next:r=>{localStorage.setItem("access_token",r.access_token),localStorage.setItem("rol","user")},complete:()=>{var r,i;const o=document.getElementById("profileImage");0!=(null===(r=null==o?void 0:o.files)||void 0===r?void 0:r.length)?(this.sharedService.runSpinner(!0),this.pushImg("user",null===(i=o.files)||void 0===i?void 0:i.item(0))):(this.router.navigate(["/home"]),this.sharedService.runSpinner(!1))},error:r=>{"emailUsed"==r.error&&(this.emailUsed=!0),"userNameUsed"==r.error?this.userNameUsed=!0:this.sharedService.showError(6e3),this.sharedService.runSpinner(!1)}})}registerArtist(e){this.artistService.register(e).subscribe({next:r=>{localStorage.setItem("access_token",r.access_token),localStorage.setItem("rol","artist")},complete:()=>{var r,i;const o=document.getElementById("profileImage");0!=(null===(r=null==o?void 0:o.files)||void 0===r?void 0:r.length)?(this.sharedService.runSpinner(!0),this.pushImg("artist",null===(i=o.files)||void 0===i?void 0:i.item(0))):(this.router.navigate(["/artist-home"]),this.sharedService.runSpinner(!1))},error:r=>{"emailUsed"==r.error?this.emailUsed=!0:"userNameUsed"==r.error?this.userNameUsed=!0:this.sharedService.showError(6e3),this.sharedService.runSpinner(!1)}})}pushImg(e,r){this.sharedService.runSpinner(!0),this.imgService.uploadImage(e,r).subscribe({complete:()=>{"user"==e&&this.router.navigate(["/home"]),"artist"==e&&this.router.navigate(["/artist-home"]),this.sharedService.runSpinner(!1)},error:i=>{console.log(i),this.sharedService.showError(6e3),this.sharedService.runSpinner(!1)}})}displayImage(){const e=document.getElementById("profileImage");if(e.files[0]){var r=new FileReader;r.onload=i=>{var o,c;null===(o=document.querySelector(".selectImage"))||void 0===o||o.setAttribute("src",null===(c=i.target)||void 0===c?void 0:c.result)},r.readAsDataURL(e.files[0])}}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Xl),s.Y36(lc),s.Y36(gl),s.Y36(On),s.Y36(Wh),s.Y36(Sn))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-register"]],decls:58,vars:35,consts:[[1,"container"],[1,"bg-purple","formDiv"],[3,"formGroup","ngSubmit"],[1,"justify-content-center","mb-5"],[1,"form-floating","mb-3","col-6"],["type","email","formControlName","email","id","email","placeholder","name@example.com","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback bg-danger",4,"ngIf"],["for","email"],["type","text","formControlName","userName","id","userName","placeholder","name@example.com","required","",1,"form-control",3,"ngClass"],["for","userName"],["type","text","formControlName","fullName","id","fullName","placeholder","Harry Potter","required","",1,"form-control",3,"ngClass"],["for","fullName"],[1,"form-floating","col-6"],["type","password","formControlName","password","id","password","placeholder","Password","required","","minlength","8","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).*$",1,"form-control",3,"ngClass"],["for","password"],["type","password","formControlName","repPassword","id","repPassword","placeholder","RepPassword","required","",1,"form-control",3,"ngClass"],["for","repPassword"],["aria-label","Disabled select example","formControlName","profileType","id","profileType",1,"form-select",3,"ngClass"],["value","user"],["value","artist"],["class","invalid-feedback bg-danger select-error",4,"ngIf"],[1,"profileImage"],["for","profileImage"],["src","../../../assets/default-user.png",1,"selectImage"],["id","profileImage","type","file","name","newImage","accept","image/png, image/jpg, image/jpeg"],["type","submit",1,"btn","btn-secondary"],["routerLink","/login"],[1,"invalid-feedback","bg-danger"],[4,"ngIf"],[1,"invalid-feedback","bg-danger","select-error"]],template:function(e,r){1&e&&(s._UZ(0,"app-unlogged-navbar"),s.TgZ(1,"div",0)(2,"div",1)(3,"form",2),s.NdJ("ngSubmit",function(){return r.register()}),s.TgZ(4,"h1",3),s._uU(5,"Registro"),s.qZA(),s.TgZ(6,"div",4),s._UZ(7,"input",5),s.YNc(8,lI,3,2,"div",6),s.YNc(9,cI,2,0,"div",6),s.TgZ(10,"label",7),s._uU(11,"Email"),s.qZA()(),s.TgZ(12,"div",4),s._UZ(13,"input",8),s.YNc(14,Nx,2,1,"div",6),s.YNc(15,dI,2,0,"div",6),s.TgZ(16,"label",9),s._uU(17,"Nombre de Usuario"),s.qZA()(),s.TgZ(18,"div",4),s._UZ(19,"input",10),s.YNc(20,hI,2,1,"div",6),s.TgZ(21,"label",11),s._uU(22,"Nombre"),s.qZA()(),s.TgZ(23,"div",12),s._UZ(24,"input",13),s.YNc(25,pI,4,3,"div",6),s.TgZ(26,"label",14),s._uU(27,"Contrase\xf1a"),s.qZA()(),s._UZ(28,"br"),s.TgZ(29,"div",12),s._UZ(30,"input",15),s.YNc(31,gI,2,1,"div",6),s.YNc(32,Bx,2,0,"div",6),s.TgZ(33,"label",16),s._uU(34,"Repetir contrase\xf1a"),s.qZA()(),s._UZ(35,"br"),s.TgZ(36,"select",17)(37,"option"),s._uU(38,"Selecciona el tipo de perfil"),s.qZA(),s.TgZ(39,"option",18),s._uU(40,"Usuario"),s.qZA(),s.TgZ(41,"option",19),s._uU(42,"Organizador/Artista"),s.qZA()(),s.YNc(43,jx,2,0,"div",20),s._UZ(44,"br"),s.TgZ(45,"div",21)(46,"label",22),s._UZ(47,"img",23),s.qZA(),s._UZ(48,"input",24),s.qZA(),s._UZ(49,"br"),s.YNc(50,BN,2,0,"div",20),s._UZ(51,"br"),s.TgZ(52,"div")(53,"button",25),s._uU(54,"Registrar"),s.qZA()()(),s._UZ(55,"br"),s.TgZ(56,"a",26),s._uU(57,"\xbfYa tienes cuenta? Inicia sesi\xf3n aqu\xed"),s.qZA()()()),2&e&&(s.xp6(3),s.Q6J("formGroup",r.registerForm),s.xp6(4),s.Q6J("ngClass",s.WLB(17,Kh,!r.f.email.invalid&&r.submitted,r.f.email.invalid&&r.submitted||r.emailUsed)),s.xp6(1),s.Q6J("ngIf",r.submitted&&r.f.email.errors),s.xp6(1),s.Q6J("ngIf",r.emailUsed),s.xp6(4),s.Q6J("ngClass",s.WLB(20,Kh,!r.f.userName.invalid&&r.submitted,r.f.userName.invalid&&r.submitted||r.userNameUsed)),s.xp6(1),s.Q6J("ngIf",r.submitted&&r.f.userName.errors),s.xp6(1),s.Q6J("ngIf",r.userNameUsed),s.xp6(4),s.Q6J("ngClass",s.WLB(23,Kh,!r.f.fullName.invalid&&r.submitted,r.f.fullName.invalid&&r.submitted)),s.xp6(1),s.Q6J("ngIf",r.submitted&&r.f.fullName.errors),s.xp6(4),s.Q6J("ngClass",s.WLB(26,Kh,!r.f.password.invalid&&r.submitted,r.f.password.invalid&&r.submitted)),s.xp6(1),s.Q6J("ngIf",r.submitted&&r.f.password.errors),s.xp6(5),s.Q6J("ngClass",s.WLB(29,Kh,!r.f.repPassword.invalid&&r.submitted,r.f.repPassword.invalid&&r.submitted||!r.repPassword&&r.submitted)),s.xp6(1),s.Q6J("ngIf",r.submitted&&r.f.repPassword.errors),s.xp6(1),s.Q6J("ngIf",!r.repPassword&&r.submitted),s.xp6(4),s.Q6J("ngClass",s.WLB(32,Kh,!r.f.profileType.invalid&&r.submitted,r.f.profileType.invalid&&r.submitted||!r.validProfileType&&r.submitted)),s.xp6(7),s.Q6J("ngIf",!r.validProfileType&&r.submitted),s.xp6(7),s.Q6J("ngIf",!r.validFileExtension))},directives:[su,ga,Jr,$s,Qr,Qi,ma,Ys,gr,Ut,Jl,sd,Wl,_p,Dh,Br],styles:["h1[_ngcontent-%COMP%]{color:#000;text-align:center}.form-floating[_ngcontent-%COMP%]{margin-left:24%}select[_ngcontent-%COMP%]{width:50%;margin-left:24%}.select-error[_ngcontent-%COMP%]{font-size:10.5pt;margin-left:24%;width:50%}button[_ngcontent-%COMP%]{font-size:18pt}.profileImage[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none;text-align:center}.selectImage[_ngcontent-%COMP%]{cursor:pointer;border-radius:10px;width:55%;height:55%;transition:width .7s,height .7s}.selectImage[_ngcontent-%COMP%]:hover{width:60%;height:60%}.formDiv[_ngcontent-%COMP%]{margin-bottom:5%}.container[_ngcontent-%COMP%]{text-align:center}a[_ngcontent-%COMP%]{text-align:center;color:#000}"]}),n})(),Ib=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-landing"]],decls:12,vars:0,consts:[[1,"container"],[1,"row"],[1,"cl-purple","col-xl-6","col-md-6","col-sm-12"],["src","../../../assets/shasic_complete.png","alt","Shasic for music",1,"col-xl-6","col-md-6","col-sm-12"]],template:function(e,r){1&e&&(s._UZ(0,"app-unlogged-navbar"),s.TgZ(1,"div",0)(2,"div",1)(3,"p",2),s._uU(4," Comparte tu"),s._UZ(5,"br"),s._uU(6," pasi\xf3n por la "),s._UZ(7,"br"),s._uU(8," m\xfasica en "),s._UZ(9,"br"),s._uU(10," directo "),s.qZA(),s._UZ(11,"img",3),s.qZA()())},directives:[su],styles:["p[_ngcontent-%COMP%]{font-size:5vw}img[_ngcontent-%COMP%]{width:50%;display:block;margin-left:auto}"]}),n})();class hn{static sortByDate(t){let e=new Date;e.setDate(e.getDate()-1);const r=t.filter(o=>o.eventDate<e).sort((o,c)=>o.eventDate-c.eventDate);return t.filter(o=>o.eventDate>=e).sort((o,c)=>o.eventDate-c.eventDate).concat(r)}static formatDate(t){const r=new Date(t);return r.getDate()+" de "+["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][r.getMonth()]+" del "+r.getFullYear()}static setArtistImg(t){return"default"==t?"../../assets/default-band.jpg":t}static setUserImg(t){return"default"==t?"../../assets/default-user.png":t}static delay(t){return new Promise(e=>setTimeout(e,t))}static reduceString(t,e){return null!=t&&t.length>e?t.substring(0,e)+"...":t}}let cc=(()=>{class n{constructor(e){this.http=e,this.httpOptions={headers:new Ot},this.allEventsUrl=Qt_apiUrl+"/events",this.eventsByUserUrl=Qt_apiUrl+"/userEvents",this.eventByIdUrl=Qt_apiUrl+"/event/",this.followEventUrl=Qt_apiUrl+"/followEvent/",this.unfollowEventUrl=Qt_apiUrl+"/unfollowEvent/",this.newEventUrl=Qt_apiUrl+"/newEvent",this.eventsPeformedUrl=Qt_apiUrl+"/getEventsPerformed",this.eventsCreatedUrl=Qt_apiUrl+"/getEventsCreated",this.updateEventUrl=Qt_apiUrl+"/updateEvent/",this.deleteEventUrl=Qt_apiUrl+"/deleteEvent/",this.deleteArtistEventUrl=Qt_apiUrl+"/deleteArtistFromEvent/"}getAllEvents(){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.allEventsUrl,this.httpOptions)}getEventsByUser(){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.eventsByUserUrl,this.httpOptions)}getEventById(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.eventByIdUrl+e,this.httpOptions)}followEvent(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.followEventUrl+e,this.httpOptions)}unfollowEvent(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.delete(this.unfollowEventUrl+e,this.httpOptions)}newEvent(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},e.eventDate.setDate(e.eventDate.getDate()+1),this.http.post(this.newEventUrl,{eventName:e.eventName,eventDate:e.eventDate.toISOString().slice(0,19).replace("T"," "),eventLocation:e.eventLocation,ticketsUrl:e.ticketsUrl,details:e.details,artists:e.artists},this.httpOptions)}getEventsPerformed(){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.eventsPeformedUrl,this.httpOptions)}getEventsCreated(){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.eventsCreatedUrl,this.httpOptions)}updateEvent(e,r){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},e.eventDate.setDate(e.eventDate.getDate()+1),this.http.put(this.updateEventUrl+r,{eventName:e.eventName,eventDate:e.eventDate.toISOString().slice(0,19).replace("T"," "),eventLocation:e.eventLocation,ticketsUrl:e.ticketsUrl,details:e.details,artists:e.artists},this.httpOptions)}deleteEvent(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.delete(this.deleteEventUrl+e,this.httpOptions)}deleteArtistFromEvent(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.delete(this.deleteArtistEventUrl+e,this.httpOptions)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(pl))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ba=(()=>{class n{constructor(e,r){this.router=e,this.actRoute=r}ngOnInit(){if(this.checkUserNotLogged(),this.actRoute.snapshot.queryParamMap.get("q")){let e=document.getElementById("searchInput");null!=e&&(e.value=this.actRoute.snapshot.queryParamMap.get("q"))}}checkUserNotLogged(){localStorage.getItem("access_token")||this.router.navigate(["/login"])}query(){null==event||event.preventDefault();const e=document.getElementById("searchInput");e.value&&this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["/search"],{relativeTo:this.actRoute,queryParams:{q:e.value}})})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Sn),s.Y36(ic))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-user-logged-navbar"]],decls:19,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-expand-md","navbar-purple","bg-dark"],[1,"container-fluid","row"],["routerLink","/home",1,"navbar-brand","col-2"],["src","../../../../assets/shasic_logo.png","alt","Shasic"],[1,"form-inline","bg-purple","search","d-md-block","d-none","col-2",3,"ngSubmit"],["src","../../../assets/search-icon.png","alt","search","type","submit",1,"search-icon",3,"click"],["type","text","id","searchInput"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],["src","../../../assets/dropdown-icon.png","alt","Dropdown icon",1,"dropdown-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse","col-6"],[1,"nav-item","col-2"],["routerLink","/chats",1,"nav-link"],["src","../../../assets/chats-icon.png","alt","chats",1,"navbar-icon"],["routerLink","/events/followed",1,"nav-link"],["src","../../../assets/events-icon.png","alt","events",1,"navbar-icon"],["routerLink","/profile",1,"nav-link"],["src","../../../assets/profile-icon.png","alt","profile",1,"navbar-icon"]],template:function(e,r){1&e&&(s.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),s._UZ(3,"img",3),s.qZA(),s.TgZ(4,"form",4),s.NdJ("ngSubmit",function(){return r.query()}),s.TgZ(5,"img",5),s.NdJ("click",function(){return r.query()}),s.qZA(),s._UZ(6,"input",6),s.qZA(),s.TgZ(7,"button",7),s._UZ(8,"img",8),s.qZA(),s.TgZ(9,"div",9)(10,"li",10)(11,"a",11),s._UZ(12,"img",12),s.qZA()(),s.TgZ(13,"li",10)(14,"a",13),s._UZ(15,"img",14),s.qZA()(),s.TgZ(16,"li",10)(17,"a",15),s._UZ(18,"img",16),s.qZA()()()()())},directives:[Br,ga,Jr,rl],styles:[".nav-link[_ngcontent-%COMP%]{text-align:center}.nav-item[_ngcontent-%COMP%]{margin-left:8%}.navbar-icon[_ngcontent-%COMP%]{width:60px}.search[_ngcontent-%COMP%]{margin-left:8%;margin-top:.5%;margin-bottom:.5%;width:25%;padding:.3%;border-radius:20px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:14pt;width:80%}.search-icon[_ngcontent-%COMP%]{width:7%;margin-right:2%;margin-left:1%}button[_ngcontent-%COMP%]{padding:2%}"]}),n})();function jN(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",6),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.oxw(2).navigate("/events/"+o.id)}),s._UZ(1,"img",7),s.TgZ(2,"div",8)(3,"h5",9),s._uU(4),s.qZA(),s.TgZ(5,"p",10),s._uU(6),s._UZ(7,"br"),s._uU(8),s.qZA()()()}if(2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(1),s.s9C("src",e.eventImage,s.LSH),s.s9C("alt",e.eventName),s.xp6(3),s.Oqu(e.eventName),s.xp6(2),s.hij(" ",r.formatDate(e.eventDate)," "),s.xp6(2),s.hij(" Seguidores: ",e.followers," ")}}function Hx(n,t){if(1&n&&(s.TgZ(0,"div")(1,"a",2)(2,"h3",3),s._uU(3,"Eventos seguidos"),s.qZA()(),s.TgZ(4,"div",4),s.YNc(5,jN,9,5,"div",5),s.ALo(6,"slice"),s.qZA(),s._UZ(7,"br")(8,"br"),s.qZA()),2&n){const e=s.oxw();s.xp6(5),s.Q6J("ngForOf",s.Dn7(6,1,e.eventsFollowed,0,4))}}function mI(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",6),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.oxw(2).navigate("/artists/"+o.userName)}),s._UZ(1,"img",7),s.TgZ(2,"div",8)(3,"h5",9),s._uU(4),s.qZA(),s.TgZ(5,"p",10),s._uU(6),s._UZ(7,"br"),s._uU(8),s.qZA()()()}if(2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(1),s.s9C("src",r.setArtistImg(e.profileImage),s.LSH),s.s9C("alt",e.fullName),s.xp6(3),s.Oqu(e.fullName),s.xp6(2),s.hij(" N\xfamero de eventos: ",null==e.events?null:e.events.length," "),s.xp6(2),s.hij(" Seguidores: ",e.followers," ")}}function HN(n,t){if(1&n&&(s.TgZ(0,"div")(1,"a",11)(2,"h3",3),s._uU(3,"Artistas seguidos"),s.qZA()(),s.TgZ(4,"div",12),s.YNc(5,mI,9,5,"div",5),s.ALo(6,"slice"),s.qZA(),s._UZ(7,"br")(8,"br"),s.qZA()),2&n){const e=s.oxw();s.xp6(5),s.Q6J("ngForOf",s.Dn7(6,1,e.artistsFollowed,0,4))}}function qx(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",6),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.oxw(2).navigate("/events/"+o.id)}),s._UZ(1,"img",7),s.TgZ(2,"div",8)(3,"h5",9),s._uU(4),s.qZA(),s.TgZ(5,"p",10),s._uU(6),s._UZ(7,"br"),s._uU(8),s.qZA()()()}if(2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(1),s.s9C("src",e.eventImage,s.LSH),s.s9C("alt",e.eventName),s.xp6(3),s.Oqu(e.eventName),s.xp6(2),s.hij(" ",r.formatDate(e.eventDate)," "),s.xp6(2),s.hij(" Seguidores: ",e.followers," ")}}function Qh(n,t){if(1&n&&(s.TgZ(0,"div")(1,"a",13)(2,"h3",3),s._uU(3,"Pr\xf3ximos eventos"),s.qZA()(),s.TgZ(4,"div",4),s.YNc(5,qx,9,5,"div",5),s.ALo(6,"slice"),s.qZA(),s._UZ(7,"br")(8,"br"),s.qZA()),2&n){const e=s.oxw();s.xp6(5),s.Q6J("ngForOf",s.Dn7(6,1,e.allEvents,0,4))}}function Zx(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",6),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.oxw(2).navigate("/artists/"+o.userName)}),s._UZ(1,"img",7),s.TgZ(2,"div",8)(3,"h5",9),s._uU(4),s.qZA(),s.TgZ(5,"p",10),s._uU(6),s._UZ(7,"br"),s._uU(8),s.qZA()()()}if(2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(1),s.s9C("src",r.setArtistImg(e.profileImage),s.LSH),s.s9C("alt",e.fullName),s.xp6(3),s.Oqu(e.fullName),s.xp6(2),s.hij(" N\xfamero de eventos: ",null==e.events?null:e.events.length," "),s.xp6(2),s.hij(" Seguidores: ",e.followers," ")}}function _I(n,t){if(1&n&&(s.TgZ(0,"div")(1,"a",14)(2,"h3",3),s._uU(3,"Artistas populares"),s.qZA()(),s.TgZ(4,"div",15),s.YNc(5,Zx,9,5,"div",5),s.ALo(6,"slice"),s.qZA()()),2&n){const e=s.oxw();s.xp6(5),s.Q6J("ngForOf",s.Dn7(6,1,e.allArtists,0,4))}}let Gx=(()=>{class n{constructor(e,r,i,o,c){this.eventService=e,this.sharedService=r,this.artistService=i,this.router=o,this.cdRef=c,this.artistsFollowed=[],this.allArtists=[],this.eventsFollowed=[],this.allEvents=[],this.formatDate=hn.formatDate,this.setArtistImg=hn.setArtistImg}ngOnInit(){this.getEventsByUser(),this.getArtistsByUser(),this.getAllEvents(),this.getAllArtists()}getEventsByUser(){this.sharedService.runSpinner(!0),this.eventService.getEventsByUser().subscribe({next:e=>{e.forEach(r=>{r.eventDate=new Date(r.eventDate)}),this.eventsFollowed=hn.sortByDate(e)},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{console.log(e),this.showError("eventsByUser"),this.sharedService.runSpinner(!1)}})}getArtistsByUser(){this.sharedService.runSpinner(!0),this.artistService.getArtistsByUser().subscribe({next:e=>{this.artistsFollowed=e},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{console.log(e),this.showError("artistsByUser"),this.sharedService.runSpinner(!1)}})}getAllEvents(){this.sharedService.runSpinner(!0),this.eventService.getAllEvents().subscribe({next:e=>{e.forEach(r=>{r.eventDate=new Date(r.eventDate)}),this.allEvents=e.filter(r=>r.eventDate>=new Date).sort((r,i)=>r.eventDate.getTime()-i.eventDate.getTime())},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{console.log(e),this.sharedService.runSpinner(!1)}})}getAllArtists(){this.sharedService.runSpinner(!0),this.artistService.getAllArtists().subscribe({next:e=>{this.allArtists=e.sort((r,i)=>i.followers-r.followers)},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{console.log(e),this.sharedService.runSpinner(!1)}})}showError(e){var r;let i=document.createElement("h2");i.classList.add("text-danger"),i.innerHTML="Se ha producido un error",null===(r=document.getElementById(e))||void 0===r||r.append(i),this.sharedService.showError(6e3)}ngAfterViewChecked(){this.cdRef.detectChanges()}navigate(e){this.router.navigate([e])}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(cc),s.Y36(On),s.Y36(gl),s.Y36(Sn),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-home"]],decls:7,vars:4,consts:[[1,"container"],[4,"ngIf"],["routerLink","/events/followed"],[1,"cl-purple"],["id","eventsByUser",1,"row"],["class","card col-xl-3 col-md-6 col-sm-12",3,"click",4,"ngFor","ngForOf"],[1,"card","col-xl-3","col-md-6","col-sm-12",3,"click"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title","bg-lightpurple"],[1,"card-text"],["routerLink","/artists/followed"],["id","artistByUser",1,"row"],["routerLink","/events"],["routerLink","/artists"],["id","allArtists",1,"row"]],template:function(e,r){1&e&&(s._UZ(0,"app-user-logged-navbar"),s.TgZ(1,"div",0),s._UZ(2,"br"),s.YNc(3,Hx,9,5,"div",1),s.YNc(4,HN,9,5,"div",1),s.YNc(5,Qh,9,5,"div",1),s.YNc(6,_I,7,5,"div",1),s.qZA()),2&e&&(s.xp6(3),s.Q6J("ngIf",r.eventsFollowed.length>0),s.xp6(1),s.Q6J("ngIf",r.artistsFollowed.length>0),s.xp6(1),s.Q6J("ngIf",r.allEvents.length>0),s.xp6(1),s.Q6J("ngIf",r.allArtists.length>0))},directives:[ba,Ut,Br,Xt],pipes:[xc],styles:[".card[_ngcontent-%COMP%]{width:250px;margin-top:2%;margin-left:4%;text-align:center;transition:box-shadow .3s;font-size:1em}.card[_ngcontent-%COMP%]:hover{box-shadow:9px 9px 19px 9px #000;cursor:pointer}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px}h5[_ngcontent-%COMP%]{border-radius:5px;padding:1%}h2[_ngcontent-%COMP%]{text-align:center;margin-top:5%;margin-bottom:5%}a[_ngcontent-%COMP%]{text-decoration:none}"]}),n})();function vI(n,t){1&n&&(s.TgZ(0,"h2",4),s._uU(1," Todav\xeda no sigues a ning\xfan evento "),s.qZA())}function T_(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",6)(1,"div",7)(2,"a",8),s._uU(3),s.qZA(),s.TgZ(4,"h5",9),s._uU(5),s.qZA(),s.TgZ(6,"h5",9),s._uU(7),s.qZA(),s.TgZ(8,"h5",9),s._uU(9),s.qZA(),s.TgZ(10,"button",10),s._uU(11," BUSCA A ALGUIEN "),s.qZA()(),s.TgZ(12,"div",11),s._UZ(13,"img",12)(14,"br"),s.TgZ(15,"div")(16,"button",13),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.oxw(2).unfollowEvent(o.id)}),s._uU(17," SIGUIENDO "),s.qZA()()(),s._UZ(18,"hr"),s.qZA()}if(2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(2),s.MGl("routerLink","/events/",e.id,""),s.xp6(1),s.Oqu(e.eventName),s.xp6(2),s.Oqu(r.formatDate(e.eventDate)),s.xp6(2),s.Oqu(e.eventLocation),s.xp6(2),s.hij(" Personas siguiendo este evento: ",e.followers," "),s.xp6(1),s.MGl("routerLink","/event-chats/",e.id,""),s.xp6(3),s.s9C("src",e.eventImage,s.LSH),s.s9C("alt",e.eventName),s.xp6(3),s.MGl("id","followButton",e.id,"")}}function $x(n,t){if(1&n&&(s.TgZ(0,"div"),s.YNc(1,T_,19,9,"div",5),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.events)}}let yI=(()=>{class n{constructor(e,r,i){this.sharedService=e,this.eventService=r,this.cdRef=i,this.events=[],this.formatDate=hn.formatDate}ngOnInit(){this.getEventsByUser()}getEventsByUser(){this.sharedService.runSpinner(!0),this.eventService.getEventsByUser().subscribe({next:e=>{e.forEach(r=>{r.eventDate=new Date(r.eventDate)}),this.events=e.sort((r,i)=>r.eventDate.getTime()-i.eventDate.getTime())},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}unfollowEvent(e){this.sharedService.runSpinner(!0),document.getElementById("followButton"+e).innerHTML="\xb7 \xb7 \xb7",this.eventService.unfollowEvent(e).subscribe({complete:()=>{this.getEventsByUser(),this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}ngAfterViewChecked(){this.cdRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(On),s.Y36(cc),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-followed-events"]],decls:7,vars:2,consts:[[1,"container"],[1,"cl-purple"],["class","text-white","id","titleEvents",4,"ngIf"],[4,"ngIf"],["id","titleEvents",1,"text-white"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-xl-6","col-sm-12","sol-md-12"],[1,"eventName",3,"routerLink"],[1,"text-white"],[1,"btn","btn-warning","searchPeopleBtn",3,"routerLink"],[1,"col-xl-6","col-sm-12","sol-md-12","col2"],[1,"eventImg","rounded","img-thumbnail",3,"src","alt"],[1,"btn","btn-primary",3,"id","click"]],template:function(e,r){1&e&&(s._UZ(0,"app-user-logged-navbar"),s.TgZ(1,"div",0)(2,"div")(3,"h1",1),s._uU(4,"Eventos que sigues"),s.qZA(),s.YNc(5,vI,2,0,"h2",2),s.qZA(),s.YNc(6,$x,2,1,"div",3),s.qZA()),2&e&&(s.xp6(5),s.Q6J("ngIf",0==r.events.length),s.xp6(1),s.Q6J("ngIf",r.events.length>0))},directives:[ba,Ut,Xt,Br,xs],styles:["h1[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:4%}.eventParentDiv[_ngcontent-%COMP%]{margin-top:4%;margin-left:15%;margin-right:15%}h2[_ngcontent-%COMP%]{margin-bottom:2%}a[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:hover{color:#c7b2e2}.searchPeopleBtn[_ngcontent-%COMP%]{margin-top:15%;font-size:18pt;font-weight:700;padding:2%}hr[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:3%;height:3px;color:#8b9393}.eventImg[_ngcontent-%COMP%]{width:45%}.col2[_ngcontent-%COMP%]{text-align:center}.col2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:18pt;font-weight:700;padding:2%;margin-top:2%}#content[_ngcontent-%COMP%]{margin-left:5%;margin-right:5%}.eventName[_ngcontent-%COMP%]{color:#fbfbfb;text-decoration:none;font-size:3em}.eventName[_ngcontent-%COMP%]:hover{color:#c7b2e2;cursor:pointer}"]}),n})(),ou=(()=>{class n{constructor(e){this.router=e}ngOnInit(){this.checkUserNotLogged()}checkUserNotLogged(){localStorage.getItem("access_token")||this.router.navigate(["/login"])}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Sn))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-artist-logged-navbar"]],decls:17,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-expand-md","navbar-purple","bg-dark"],[1,"container-fluid","row"],["routerLink","/artist-home",1,"navbar-brand","col-2"],["src","../../../../assets/shasic_logo.png","alt","Shasic"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],["src","../../../assets/dropdown-icon.png","alt","Dropdown icon",1,"dropdown-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse","col-6"],[1,"nav-item","col-2"],["routerLink","/new-event",1,"nav-link"],[1,"btn","btn-primary"],["routerLink","/events/created",1,"nav-link"],["src","../../../assets/events-icon.png","alt","events",1,"navbar-icon"],["routerLink","/artist-profile",1,"nav-link"],["src","../../../assets/profile-icon.png","alt","profile",1,"navbar-icon"]],template:function(e,r){1&e&&(s.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),s._UZ(3,"img",3),s.qZA(),s.TgZ(4,"button",4),s._UZ(5,"img",5),s.qZA(),s.TgZ(6,"div",6)(7,"li",7)(8,"a",8)(9,"button",9),s._uU(10,"CREAR EVENTO"),s.qZA()()(),s.TgZ(11,"li",7)(12,"a",10),s._UZ(13,"img",11),s.qZA()(),s.TgZ(14,"li",7)(15,"a",12),s._UZ(16,"img",13),s.qZA()()()()())},directives:[Br],styles:[".nav-link[_ngcontent-%COMP%]{text-align:center}.nav-item[_ngcontent-%COMP%]{margin-left:8%}.navbar-icon[_ngcontent-%COMP%]{width:60px}button[_ngcontent-%COMP%]{padding:2%}"]}),n})();function zx(n,t){1&n&&(s.TgZ(0,"div"),s._UZ(1,"app-user-logged-navbar"),s.qZA())}function Yx(n,t){1&n&&(s.TgZ(0,"div"),s._UZ(1,"app-artist-logged-navbar"),s.qZA())}function Wx(n,t){if(1&n&&(s.TgZ(0,"div")(1,"a",17),s._uU(2),s.qZA(),s._UZ(3,"br"),s.qZA()),2&n){const e=t.$implicit;s.xp6(1),s.MGl("routerLink","/artists/",e.userName,""),s.xp6(1),s.Oqu(e.fullName)}}function Kx(n,t){if(1&n&&(s.TgZ(0,"a",18),s._uU(1,"Comprar entradas"),s.qZA()),2&n){const e=s.oxw(2);s.s9C("href",e.event.ticketsUrl,s.LSH)}}function bI(n,t){if(1&n&&(s.TgZ(0,"div",9)(1,"h5"),s._uU(2,"Detalles:"),s.qZA(),s.TgZ(3,"p",19),s._uU(4),s.qZA()()),2&n){const e=s.oxw(2);s.xp6(4),s.Oqu(e.event.details)}}function Qx(n,t){if(1&n&&(s.TgZ(0,"button",20),s._uU(1," BUSCA A ALGUIEN "),s.qZA()),2&n){const e=s.oxw(2);s.MGl("routerLink","/event-chats/",e.event.id,"")}}function wI(n,t){if(1&n&&(s.TgZ(0,"button",21),s._uU(1," EDITAR EVENTO "),s.qZA()),2&n){const e=s.oxw(2);s.MGl("routerLink","/edit-event/",e.event.id,"")}}function CI(n,t){1&n&&(s.TgZ(0,"button",22),s._uU(1," QUITARME DE ESTE EVENTO "),s.qZA())}function Db(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"button",23),s.NdJ("click",function(){s.CHM(e);const i=s.oxw(2);return i.unfollowEvent(i.event.id)}),s._uU(2," SIGUIENDO "),s.qZA()()}}function qN(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"button",24),s.NdJ("click",function(){s.CHM(e);const i=s.oxw(2);return i.followEvent(i.event.id)}),s._uU(2," SEGUIR "),s.qZA()()}}function Tb(n,t){if(1&n&&(s.TgZ(0,"div",4)(1,"h1",5),s._uU(2),s.qZA(),s.TgZ(3,"div",6)(4,"div",7),s.YNc(5,Wx,4,2,"div",8),s.qZA(),s.TgZ(6,"h5",9),s._uU(7),s.qZA(),s.TgZ(8,"h5",9),s._uU(9),s.qZA(),s.YNc(10,Kx,2,1,"a",10),s.YNc(11,bI,5,1,"div",11),s.TgZ(12,"h5",9),s._uU(13),s.qZA(),s.YNc(14,Qx,2,1,"button",12),s.YNc(15,wI,2,1,"button",13),s.YNc(16,CI,2,0,"button",14),s.qZA(),s.TgZ(17,"div",15),s._UZ(18,"img",16)(19,"br"),s.YNc(20,Db,3,0,"div",0),s.YNc(21,qN,3,0,"div",0),s.qZA()()),2&n){const e=s.oxw();s.xp6(2),s.Oqu(e.event.eventName),s.xp6(3),s.Q6J("ngForOf",e.event.artists),s.xp6(2),s.Oqu(e.formatDate(e.event.eventDate)),s.xp6(2),s.Oqu(e.event.eventLocation),s.xp6(1),s.Q6J("ngIf",e.event.ticketsUrl),s.xp6(1),s.Q6J("ngIf",e.event.details),s.xp6(2),s.hij(" Personas siguiendo este evento: ",e.event.followers," "),s.xp6(1),s.Q6J("ngIf","user"==e.rol),s.xp6(1),s.Q6J("ngIf","artist"==e.rol&&e.event.editionAllowed),s.xp6(1),s.Q6J("ngIf","artist"==e.rol&&e.event.performing&&!e.event.editionAllowed),s.xp6(2),s.s9C("src",e.event.eventImage,s.LSH),s.s9C("alt",e.event.eventName),s.xp6(2),s.Q6J("ngIf",e.event.following&&"user"==e.rol),s.xp6(1),s.Q6J("ngIf",!e.event.following&&"user"==e.rol)}}function Jx(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",25)(1,"div",26)(2,"div",27)(3,"div",28)(4,"h5",29),s._uU(5," \xbfEst\xe1s seguro de quitarte de este evento? "),s.qZA(),s._UZ(6,"button",30),s.qZA(),s.TgZ(7,"div",31)(8,"p",32),s._uU(9," Solamente el creador del evento podr\xe1 volver a a\xf1adire. Adem\xe1s, si no hay m\xe1s artistas, "),s.TgZ(10,"b"),s._uU(11,"el evento tambi\xe9n se eliminar\xe1."),s.qZA()(),s.TgZ(12,"h5"),s._uU(13,"\xbfDeseas borrarlo de todas formas?"),s.qZA(),s.TgZ(14,"div",33)(15,"button",34),s._uU(16," Cancelar "),s.qZA(),s.TgZ(17,"button",35),s.NdJ("click",function(){return s.CHM(e),s.oxw().deleteArtistFromEvent()}),s._uU(18," BORRARME DE EVENTO "),s.qZA()()()()()()}}let ZN=(()=>{class n{constructor(e,r,i,o){this.router=e,this.eventService=r,this.sharedService=i,this.cdRef=o,this.loadAll=!1,this.formatDate=hn.formatDate,this.event={id:0,eventName:"",eventDate:new Date,artists:[],eventImage:"",eventLocation:"",ticketsUrl:"",details:"",following:null,followers:null},this.rol="",this.editionAllowed=!1}ngOnInit(){this.rol=localStorage.getItem("rol"),this.getEventById()}getEventById(){this.sharedService.runSpinner(!0);const e=parseInt(this.router.url.substring(this.router.url.lastIndexOf("/")+1));this.eventService.getEventById(e).subscribe({next:r=>{this.event=r,this.event.artists=r.artists,this.editionAllowed=r.editionAllowed},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{console.log(r),this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}followEvent(e){this.sharedService.runSpinner(!0),document.getElementById("followButton").innerHTML="\xb7 \xb7 \xb7",this.eventService.followEvent(e).subscribe({complete:()=>{this.getEventById(),this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}unfollowEvent(e){this.sharedService.runSpinner(!0),document.getElementById("followButton").innerHTML="\xb7 \xb7 \xb7",this.eventService.unfollowEvent(e).subscribe({complete:()=>{this.getEventById(),this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}deleteArtistFromEvent(){const e=parseInt(this.router.url.substring(this.router.url.lastIndexOf("/")+1));this.sharedService.runSpinner(!0),this.eventService.deleteArtistFromEvent(e).subscribe({complete:()=>{this.sharedService.runSpinner(!0),this.event.artists.length>1?this.getEventById():this.router.navigate(["/artist-home"])},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(3e3),console.log(r)}})}ngAfterViewChecked(){this.cdRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Sn),s.Y36(cc),s.Y36(On),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-event"]],decls:5,vars:4,consts:[[4,"ngIf"],[1,"container"],["class","row",4,"ngIf"],["class","modal fade","id","deleteModal","tabindex","-1","aria-labelledby","deleteModalLabel","aria-hidden","true",4,"ngIf"],[1,"row"],[1,"cl-purple"],[1,"col-xl-6","col-sm-12","sol-md-12"],[1,"bands"],[4,"ngFor","ngForOf"],[1,"text-white"],["class","tickets",3,"href",4,"ngIf"],["class","text-white",4,"ngIf"],["class","btn btn-warning searchPeopleBtn",3,"routerLink",4,"ngIf"],["class","btn btn-primary searchPeopleBtn",3,"routerLink",4,"ngIf"],["class","btn btn-danger searchPeopleBtn","data-bs-toggle","modal","data-bs-target","#deleteModal",4,"ngIf"],[1,"col-xl-6","col-sm-12","sol-md-12","col2"],[1,"eventImg","rounded","img-thumbnail",3,"src","alt"],[1,"band",3,"routerLink"],[1,"tickets",3,"href"],[1,"details"],[1,"btn","btn-warning","searchPeopleBtn",3,"routerLink"],[1,"btn","btn-primary","searchPeopleBtn",3,"routerLink"],["data-bs-toggle","modal","data-bs-target","#deleteModal",1,"btn","btn-danger","searchPeopleBtn"],["id","followButton",1,"btn","btn-primary",3,"click"],["id","followButton",1,"btn","btn-primary","notFollowing",3,"click"],["id","deleteModal","tabindex","-1","aria-labelledby","deleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","deleteModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","text-center"],[1,"text-danger"],[1,"deleteModalButtons"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",2,"margin-right","5%"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(e,r){1&e&&(s.YNc(0,zx,2,0,"div",0),s.YNc(1,Yx,2,0,"div",0),s.TgZ(2,"div",1),s.YNc(3,Tb,22,14,"div",2),s.qZA(),s.YNc(4,Jx,19,0,"div",3)),2&e&&(s.Q6J("ngIf","user"==r.rol),s.xp6(1),s.Q6J("ngIf","artist"==r.rol),s.xp6(2),s.Q6J("ngIf",r.event.eventName),s.xp6(1),s.Q6J("ngIf","artist"==r.rol&&r.event.performing&&!r.event.editionAllowed))},directives:[Ut,ba,ou,Xt,Br,xs],styles:["h1[_ngcontent-%COMP%]{margin-top:4%;margin-bottom:5%;font-size:5em}h5[_ngcontent-%COMP%]{margin-top:2%;font-size:1.5em}.tickets[_ngcontent-%COMP%]{color:#fbfbfb;font-size:1.5em}.tickets[_ngcontent-%COMP%]:hover{color:#c7b2e2}.searchPeopleBtn[_ngcontent-%COMP%]{margin-top:3%;font-size:18pt;font-weight:700;padding:2%}.eventImg[_ngcontent-%COMP%]{width:60%}.col2[_ngcontent-%COMP%]{text-align:center}.col2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:18pt;font-weight:700;padding:2%;margin-top:2%}#content[_ngcontent-%COMP%]{margin-top:8%}.band[_ngcontent-%COMP%]{color:#fbfbfb;font-size:2em;text-decoration:none;cursor:pointer}.bands[_ngcontent-%COMP%]{margin-bottom:7%}.band[_ngcontent-%COMP%]:hover{color:#c7b2e2}.details[_ngcontent-%COMP%]{font-size:1.2em}"]}),n})();function $p(n,t){1&n&&(s.TgZ(0,"div",3)(1,"h2",4),s._uU(2,"\xbfTodav\xeda no est\xe1s en ning\xfan evento?"),s.qZA(),s._UZ(3,"br")(4,"br"),s.TgZ(5,"button",5),s._uU(6," CREA TU PRIMER EVENTO "),s.qZA()())}function EI(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",10),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.oxw(2).navigate("/events/"+o.id)}),s._UZ(1,"img",11),s.TgZ(2,"div",12)(3,"h5",13),s._uU(4),s.qZA(),s.TgZ(5,"p",14),s._uU(6),s._UZ(7,"br"),s._uU(8),s.qZA()()()}if(2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(1),s.s9C("src",e.eventImage,s.LSH),s.s9C("alt",e.eventName),s.xp6(3),s.Oqu(e.eventName),s.xp6(2),s.hij(" ",r.formatDate(e.eventDate)," "),s.xp6(2),s.hij(" Seguidores: ",e.followers," ")}}function Sb(n,t){if(1&n&&(s.TgZ(0,"div")(1,"a",6)(2,"h3",7),s._uU(3,"Eventos creados por ti"),s.qZA()(),s.TgZ(4,"div",8),s.YNc(5,EI,9,5,"div",9),s.ALo(6,"slice"),s.qZA(),s._UZ(7,"br")(8,"br"),s.qZA()),2&n){const e=s.oxw();s.xp6(5),s.Q6J("ngForOf",s.Dn7(6,1,e.eventsCreated,0,4))}}function Ab(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",10),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.oxw(2).navigate("/events/"+o.id)}),s._UZ(1,"img",11),s.TgZ(2,"div",12)(3,"h5",13),s._uU(4),s.qZA(),s.TgZ(5,"p",14),s._uU(6),s._UZ(7,"br"),s._uU(8),s.qZA()()()}if(2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(1),s.s9C("src",e.eventImage,s.LSH),s.s9C("alt",e.eventName),s.xp6(3),s.Oqu(e.eventName),s.xp6(2),s.hij(" ",r.formatDate(e.eventDate)," "),s.xp6(2),s.hij(" Seguidores: ",e.followers," ")}}function Xx(n,t){if(1&n&&(s.TgZ(0,"div")(1,"a",15)(2,"h3",7),s._uU(3,"Eventos en los que participas"),s.qZA()(),s.TgZ(4,"div",8),s.YNc(5,Ab,9,5,"div",9),s.ALo(6,"slice"),s.qZA(),s._UZ(7,"br")(8,"br"),s.qZA()),2&n){const e=s.oxw();s.xp6(5),s.Q6J("ngForOf",s.Dn7(6,1,e.eventsPerformed,0,4))}}let S_=(()=>{class n{constructor(e,r,i){this.router=e,this.sharedService=r,this.eventService=i,this.eventsCreated=[],this.eventsPerformed=[],this.formatDate=hn.formatDate}ngOnInit(){this.getEventsCretaed(),this.getEventsPerformed()}getEventsCretaed(){this.sharedService.runSpinner(!0),this.eventService.getEventsCreated().subscribe({next:e=>{e.forEach(r=>{r.eventDate=new Date(r.eventDate)}),this.eventsCreated=hn.sortByDate(e)},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{this.sharedService.runSpinner(!1),console.log(e),this.sharedService.showError(6e3)}})}getEventsPerformed(){this.sharedService.runSpinner(!0),this.eventService.getEventsPerformed().subscribe({next:e=>{e.forEach(r=>{r.eventDate=new Date(r.eventDate)}),this.eventsPerformed=hn.sortByDate(e)},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{this.sharedService.runSpinner(!1),console.log(e),this.sharedService.showError(6e3)}})}navigate(e){this.router.navigate(["/"+e])}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Sn),s.Y36(On),s.Y36(cc))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-artist-home"]],decls:6,vars:3,consts:[[1,"container"],["class","noEvents",4,"ngIf"],[4,"ngIf"],[1,"noEvents"],[1,"text-white"],["routerLink","/new-event",1,"btn","btn-primary"],["routerLink","/events/created"],[1,"cl-purple"],["id","eventsByUser",1,"row"],["class","card col-xl-3 col-md-6 col-sm-12",3,"click",4,"ngFor","ngForOf"],[1,"card","col-xl-3","col-md-6","col-sm-12",3,"click"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title","bg-lightpurple"],[1,"card-text"],["routerLink","/events/performed"]],template:function(e,r){1&e&&(s._UZ(0,"app-artist-logged-navbar"),s.TgZ(1,"div",0),s.YNc(2,$p,7,0,"div",1),s._UZ(3,"br"),s.YNc(4,Sb,9,5,"div",2),s.YNc(5,Xx,9,5,"div",2),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngIf",0==r.eventsPerformed.length&&0==r.eventsCreated.length),s.xp6(2),s.Q6J("ngIf",r.eventsCreated.length>0),s.xp6(1),s.Q6J("ngIf",r.eventsPerformed.length>0))},directives:[ou,Ut,xs,Br,Xt],pipes:[xc],styles:[".card[_ngcontent-%COMP%]{width:250px;margin-top:2%;margin-left:4%;text-align:center;transition:box-shadow .3s;font-size:1em}.card[_ngcontent-%COMP%]:hover{box-shadow:9px 9px 19px 9px #000;cursor:pointer}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px}h5[_ngcontent-%COMP%]{border-radius:5px;padding:1%}h2[_ngcontent-%COMP%]{text-align:center;margin-top:5%;margin-bottom:5%}a[_ngcontent-%COMP%]{text-decoration:none}.noEvents[_ngcontent-%COMP%]{text-align:center}.noEvents[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:2em;font-weight:700;padding:2%}"]}),n})();function A_(n,t){1&n&&s._UZ(0,"app-user-logged-navbar")}function xb(n,t){1&n&&s._UZ(0,"app-artist-logged-navbar")}function GN(n,t){1&n&&(s.TgZ(0,"h2",7),s._uU(1,"Info:"),s.qZA())}function eM(n,t){if(1&n&&(s.TgZ(0,"h5",7),s._uU(1),s.qZA()),2&n){const e=s.oxw(2);s.xp6(1),s.Oqu(e.artist.bio)}}function x_(n,t){1&n&&(s.TgZ(0,"h2",7),s._uU(1,"Localizaci\xf3n:"),s.qZA())}function M_(n,t){if(1&n&&(s.TgZ(0,"h5",7),s._uU(1),s.qZA()),2&n){const e=s.oxw(2);s.xp6(1),s.Oqu(e.artist.location)}}function II(n,t){1&n&&(s.TgZ(0,"button",11),s._uU(1," EDITAR PERFIL "),s.qZA())}function DI(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"button",12),s.NdJ("click",function(){s.CHM(e);const i=s.oxw(2);return i.unfollowArtist(i.artist.id)}),s._uU(2," SIGUIENDO "),s.qZA()()}}function Mb(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"button",13),s.NdJ("click",function(){s.CHM(e);const i=s.oxw(2);return i.followArtist(i.artist.id)}),s._uU(2," SEGUIR "),s.qZA()()}}function TI(n,t){if(1&n&&(s.TgZ(0,"div",4)(1,"div",16)(2,"a",17),s._uU(3),s.qZA(),s.TgZ(4,"h5",7),s._uU(5),s.qZA(),s.TgZ(6,"h5",7),s._uU(7),s.qZA()(),s.TgZ(8,"div",18),s._UZ(9,"img",19),s.qZA(),s._UZ(10,"hr"),s.qZA()),2&n){const e=t.$implicit,r=s.oxw(3);s.xp6(2),s.MGl("routerLink","/events/",e.id,""),s.xp6(1),s.Oqu(e.eventName),s.xp6(2),s.hij(" ",r.formatDate(e.eventDate)," "),s.xp6(2),s.Oqu(e.eventLocation),s.xp6(2),s.s9C("src",e.eventImage,s.LSH),s.s9C("alt",e.eventName)}}function SI(n,t){if(1&n&&(s.TgZ(0,"div")(1,"h1",14),s._uU(2),s.qZA(),s.YNc(3,TI,11,6,"div",15),s.qZA()),2&n){const e=s.oxw(2);s.xp6(2),s.hij("Eventos de ",e.artist.fullName,""),s.xp6(1),s.Q6J("ngForOf",e.artist.events)}}function kb(n,t){if(1&n&&(s.TgZ(0,"div",2)(1,"h1",3),s._uU(2),s.qZA(),s.TgZ(3,"div",4)(4,"div",5),s.YNc(5,GN,2,0,"h2",6),s.YNc(6,eM,2,1,"h5",6),s._UZ(7,"br"),s.YNc(8,x_,2,0,"h2",6),s.YNc(9,M_,2,1,"h5",6),s._UZ(10,"br")(11,"br"),s.TgZ(12,"h3",7),s._uU(13),s.qZA(),s.TgZ(14,"h3",7),s._uU(15),s.qZA(),s._UZ(16,"br")(17,"br"),s.TgZ(18,"h3",7),s._uU(19,"Contacto:"),s.qZA(),s.TgZ(20,"h5",7),s._uU(21),s.qZA(),s._UZ(22,"br"),s.YNc(23,II,2,0,"button",8),s.qZA(),s.TgZ(24,"div",9),s._UZ(25,"img",10)(26,"br"),s.YNc(27,DI,3,0,"div",0),s.YNc(28,Mb,3,0,"div",0),s.qZA()(),s.YNc(29,SI,4,2,"div",0),s.qZA()),2&n){const e=s.oxw();s.xp6(2),s.Oqu(e.artist.fullName),s.xp6(3),s.Q6J("ngIf",e.artist.bio),s.xp6(1),s.Q6J("ngIf",e.artist.bio),s.xp6(2),s.Q6J("ngIf",e.artist.location),s.xp6(1),s.Q6J("ngIf",e.artist.location),s.xp6(4),s.hij("N\xfamero de seguidores: ",e.artist.followers,""),s.xp6(2),s.hij("N\xfamero de eventos: ",null==e.artist.events?null:e.artist.events.length,""),s.xp6(6),s.Oqu(e.artist.email),s.xp6(2),s.Q6J("ngIf","artist"==e.rol&&e.editionAllowed),s.xp6(2),s.s9C("src",e.setArtistImg(e.artist.profileImage),s.LSH),s.s9C("alt",e.artist.fullName),s.xp6(2),s.Q6J("ngIf",e.artist.following&&"user"==e.rol),s.xp6(1),s.Q6J("ngIf",!e.artist.following&&"user"==e.rol),s.xp6(1),s.Q6J("ngIf",e.artist.events)}}let Rb=(()=>{class n{constructor(e,r,i,o){this.router=e,this.artistService=r,this.cdRef=i,this.sharedService=o,this.artist={id:0,userName:"",email:"",fullName:"",profileImage:"",bio:null,events:[],following:null,followers:0,location:null,password:null},this.rol="",this.editionAllowed=!1,this.formatDate=hn.formatDate,this.setArtistImg=hn.setArtistImg}ngOnInit(){this.rol=localStorage.getItem("rol"),this.getArtistInfo()}getArtistInfo(){this.sharedService.runSpinner(!0);const e=this.router.url.substring(this.router.url.lastIndexOf("/")+1);this.artistService.getArtistByName(e).subscribe({next:r=>{this.artist=r,r.events.forEach(i=>{i.eventDate=new Date(i.eventDate)}),this.artist.events=hn.sortByDate(r.events),this.editionAllowed=r.editionAllowed},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{console.log(r),this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}followArtist(e){this.sharedService.runSpinner(!0),document.getElementById("followButton").innerHTML="\xb7 \xb7 \xb7",this.artistService.followArtist(e).subscribe({complete:()=>{this.getArtistInfo(),this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}unfollowArtist(e){this.sharedService.runSpinner(!0),document.getElementById("followButton").innerHTML="\xb7 \xb7 \xb7",this.artistService.unfollowArtist(e).subscribe({complete:()=>{this.getArtistInfo(),this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}ngAfterViewChecked(){this.cdRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Sn),s.Y36(gl),s.Y36(s.sBO),s.Y36(On))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-artist"]],decls:3,vars:3,consts:[[4,"ngIf"],["class","container",4,"ngIf"],[1,"container"],[1,"cl-purple"],[1,"row"],[1,"col-xl-6","col-md-12","col-md-12"],["class","text-white",4,"ngIf"],[1,"text-white"],["class","btn btn-primary","routerLink","/artist-profile",4,"ngIf"],[1,"col-xl-6","col-md-12","col-md-12","col2"],["id","bandImage",1,"rounded",3,"src","alt"],["routerLink","/artist-profile",1,"btn","btn-primary"],["id","followButton",1,"btn","btn-primary",3,"click"],["id","followButton",1,"btn","btn-primary","notFollowing",3,"click"],["id","titleEvents",1,"cl-purple"],["class","row",4,"ngFor","ngForOf"],[1,"col-xl-6","col-sm-12","sol-md-12"],[1,"eventName",3,"routerLink"],[1,"col-xl-6","col-sm-12","sol-md-12","col2"],[1,"eventImg","rounded","img-thumbnail",3,"src","alt"]],template:function(e,r){1&e&&(s.YNc(0,A_,1,0,"app-user-logged-navbar",0),s.YNc(1,xb,1,0,"app-artist-logged-navbar",0),s.YNc(2,kb,30,14,"div",1)),2&e&&(s.Q6J("ngIf","user"==r.rol),s.xp6(1),s.Q6J("ngIf","artist"==r.rol),s.xp6(1),s.Q6J("ngIf",r.artist.userName))},directives:[Ut,ba,ou,xs,Xt,Br],styles:["h1[_ngcontent-%COMP%]{margin-top:4%;margin-bottom:5%;font-size:5em}#bandImage[_ngcontent-%COMP%]{width:90%}.eventParentDiv[_ngcontent-%COMP%]{margin-top:4%;margin-left:15%;margin-right:15%}h2[_ngcontent-%COMP%]{margin-bottom:2%}a[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:hover{color:#c7b2e2}.searchPeopleBtn[_ngcontent-%COMP%]{margin-top:15%;font-size:18pt;font-weight:700;padding:2%}hr[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:3%;height:3px;color:#8b9393}.eventImg[_ngcontent-%COMP%]{width:45%}.col2[_ngcontent-%COMP%]{text-align:center}.col2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:18pt;font-weight:700;padding:2%;margin-top:2%}#content[_ngcontent-%COMP%]{margin-left:5%;margin-right:5%}.eventName[_ngcontent-%COMP%]{color:#fbfbfb;text-decoration:none;font-size:3em}.eventName[_ngcontent-%COMP%]:hover{color:#c7b2e2;cursor:pointer}#titleEvents[_ngcontent-%COMP%]{font-size:3.5em;margin-bottom:6%;margin-top:5%}"]}),n})();function tM(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"a",7),s._uU(4),s.qZA()(),s.TgZ(5,"h5",8),s._uU(6),s.qZA(),s.TgZ(7,"h5",8),s._uU(8),s.qZA(),s.TgZ(9,"h5",8),s._uU(10),s.qZA()(),s.TgZ(11,"div",9),s._UZ(12,"img",10)(13,"br"),s.TgZ(14,"div")(15,"button",11),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.oxw(2).unfollowArtist(o.id)}),s._uU(16," SIGUIENDO "),s.qZA()()(),s._UZ(17,"hr"),s.qZA()}if(2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(3),s.MGl("routerLink","/artists/",e.userName,""),s.xp6(1),s.Oqu(e.fullName),s.xp6(2),s.hij("N\xfamero de seguidores: ",e.followers,""),s.xp6(2),s.hij(" N\xfamero de eventos: ",null==e.events?null:e.events.length," "),s.xp6(2),s.Oqu(e.bio),s.xp6(2),s.s9C("src",r.setArtistImg(e.profileImage),s.LSH),s.s9C("alt",e.fullName),s.xp6(3),s.MGl("id","followButton",e.id,"")}}function AI(n,t){if(1&n&&(s.TgZ(0,"div"),s.YNc(1,tM,18,8,"div",3),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.artists)}}function xI(n,t){1&n&&(s.TgZ(0,"div")(1,"h1",8),s._uU(2,"Todav\xeda no sigues a ning\xfan artista"),s.qZA()())}let Pb=(()=>{class n{constructor(e,r,i){this.sharedService=e,this.artistService=r,this.cdRef=i,this.artists=[],this.setArtistImg=hn.setArtistImg}ngOnInit(){this.getArtistsByUser()}getArtistsByUser(){this.sharedService.runSpinner(!0),this.artistService.getArtistsByUser().subscribe({next:e=>{this.artists=e},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}unfollowArtist(e){this.sharedService.runSpinner(!0),document.getElementById("followButton"+e).innerHTML="\xb7 \xb7 \xb7",this.artistService.unfollowArtist(e).subscribe({complete:()=>{this.getArtistsByUser(),this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}ngAfterViewChecked(){this.cdRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(On),s.Y36(gl),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-followed-artists"]],decls:6,vars:2,consts:[[1,"container"],[1,"cl-purple"],[4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-xl-6","col-sm-12","sol-md-12"],[1,"artistNameDiv"],[1,"artistName",3,"routerLink"],[1,"text-white"],[1,"col-xl-6","col-sm-12","sol-md-12","col2"],[1,"eventImg","rounded","img-thumbnail",3,"src","alt"],[1,"btn","btn-primary",3,"id","click"]],template:function(e,r){1&e&&(s._UZ(0,"app-user-logged-navbar"),s.TgZ(1,"div",0)(2,"h1",1),s._uU(3,"Artistas que sigues"),s.qZA(),s.YNc(4,AI,2,1,"div",2),s.YNc(5,xI,3,0,"div",2),s.qZA()),2&e&&(s.xp6(4),s.Q6J("ngIf",r.artists.length>0),s.xp6(1),s.Q6J("ngIf",0==r.artists.length))},directives:[ba,Ut,Xt,Br],styles:["h1[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:4%}[_nghost-%COMP%]     .artistParentDiv{margin-top:4%;margin-left:15%;margin-right:15%}[_nghost-%COMP%]     h2{margin-bottom:2%}[_nghost-%COMP%]     a h5:hover{color:#c7b2e2}[_nghost-%COMP%]     .searchPeopleBtn{margin-top:15%;font-size:18pt;font-weight:700;padding:2%}[_nghost-%COMP%]     hr{margin-top:3%;margin-bottom:3%;height:3px;color:#8b9393}[_nghost-%COMP%]     .artistImg{width:45%}[_nghost-%COMP%]     .col2{text-align:center}[_nghost-%COMP%]     .col2 button{font-size:18pt;font-weight:700;padding:2%;margin-top:2%}#content[_ngcontent-%COMP%]{margin-left:5%;margin-right:5%}[_nghost-%COMP%]     .artistName{color:#fbfbfb;text-decoration:none;font-size:3em}[_nghost-%COMP%]     .artistName:hover{color:#c7b2e2;cursor:pointer}[_nghost-%COMP%]     .artistNameDiv{margin-bottom:7%}"]}),n})();function MI(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"button",11),s.NdJ("click",function(){s.CHM(e);const i=s.oxw().$implicit;return s.oxw(2).unfollowEvent(i.id)}),s._uU(2," SIGUIENDO "),s.qZA()()}if(2&n){const e=s.oxw().$implicit;s.xp6(1),s.MGl("id","followButton",e.id,"")}}function nM(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"button",12),s.NdJ("click",function(){s.CHM(e);const i=s.oxw().$implicit;return s.oxw(2).followEvent(i.id)}),s._uU(2," SEGUIR "),s.qZA()()}if(2&n){const e=s.oxw().$implicit;s.xp6(1),s.MGl("id","followButton",e.id,"")}}function kI(n,t){if(1&n&&(s.TgZ(0,"div",4)(1,"div",5)(2,"a",6),s._uU(3),s.qZA(),s.TgZ(4,"h5",7),s._uU(5),s.qZA(),s.TgZ(6,"h5",7),s._uU(7),s.qZA(),s.TgZ(8,"h5",7),s._uU(9),s.qZA(),s.TgZ(10,"button",8),s._uU(11," BUSCA A ALGUIEN "),s.qZA()(),s.TgZ(12,"div",9),s._UZ(13,"img",10)(14,"br"),s.YNc(15,MI,3,1,"div",2),s.YNc(16,nM,3,1,"div",2),s.qZA(),s._UZ(17,"hr"),s.qZA()),2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(2),s.MGl("routerLink","/events/",e.id,""),s.xp6(1),s.Oqu(e.eventName),s.xp6(2),s.Oqu(r.formatDate(e.eventDate)),s.xp6(2),s.Oqu(e.eventLocation),s.xp6(2),s.hij(" Personas siguiendo este evento: ",e.followers," "),s.xp6(1),s.MGl("routerLink","/event-chats/",e.id,""),s.xp6(3),s.s9C("src",e.eventImage,s.LSH),s.s9C("alt",e.eventName),s.xp6(2),s.Q6J("ngIf",e.following),s.xp6(1),s.Q6J("ngIf",!e.following)}}function RI(n,t){if(1&n&&(s.TgZ(0,"div"),s.YNc(1,kI,18,10,"div",3),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.events)}}let Ob=(()=>{class n{constructor(e,r,i){this.sharedService=e,this.eventService=r,this.cdRef=i,this.events=[],this.formatDate=hn.formatDate}ngOnInit(){this.getAllEvents()}getAllEvents(){this.sharedService.runSpinner(!0),this.eventService.getAllEvents().subscribe({next:e=>{e.forEach(i=>{i.eventDate=new Date(i.eventDate)});let r=new Date;r.setDate(r.getDate()-1),this.events=hn.sortByDate(e).filter(i=>i.eventDate>r)},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}followEvent(e){this.sharedService.runSpinner(!0),document.getElementById("followButton"+e).innerHTML="\xb7 \xb7 \xb7",this.eventService.followEvent(e).subscribe({next:r=>{this.getAllEvents()},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}unfollowEvent(e){this.sharedService.runSpinner(!0),document.getElementById("followButton"+e).innerHTML="\xb7 \xb7 \xb7",this.eventService.unfollowEvent(e).subscribe({next:r=>{this.getAllEvents()},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}ngAfterViewChecked(){this.cdRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(On),s.Y36(cc),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-all-events"]],decls:5,vars:1,consts:[[1,"container"],[1,"cl-purple"],[4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-xl-6","col-sm-12","col-md-12"],[1,"eventName",3,"routerLink"],[1,"text-white"],[1,"btn","btn-warning","searchPeopleBtn",3,"routerLink"],[1,"col-xl-6","col-sm-12","col-md-12","col2"],[1,"eventImg","rounded","img-thumbnail",3,"src","alt"],[1,"btn","btn-primary",3,"id","click"],[1,"btn","btn-primary","notFollowing",3,"id","click"]],template:function(e,r){1&e&&(s._UZ(0,"app-user-logged-navbar"),s.TgZ(1,"div",0)(2,"h1",1),s._uU(3,"Pr\xf3ximos eventos"),s.qZA(),s.YNc(4,RI,2,1,"div",2),s.qZA()),2&e&&(s.xp6(4),s.Q6J("ngIf",r.events.length>0))},directives:[ba,Ut,Xt,Br,xs],styles:["h1[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:4%}.eventParentDiv[_ngcontent-%COMP%]{margin-top:4%;margin-left:15%;margin-right:15%}h2[_ngcontent-%COMP%]{margin-bottom:2%}a[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:hover{color:#c7b2e2}.searchPeopleBtn[_ngcontent-%COMP%]{margin-top:15%;font-size:18pt;font-weight:700;padding:2%}hr[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:3%;height:3px;color:#8b9393}.eventImg[_ngcontent-%COMP%]{width:45%}.col2[_ngcontent-%COMP%]{text-align:center}.col2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:18pt;font-weight:700;padding:2%;margin-top:2%}#content[_ngcontent-%COMP%]{margin-left:5%;margin-right:5%}.eventName[_ngcontent-%COMP%]{color:#fbfbfb;text-decoration:none;font-size:3em}.eventName[_ngcontent-%COMP%]:hover{color:#c7b2e2;cursor:pointer}"]}),n})();function k_(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"button",11),s.NdJ("click",function(){s.CHM(e);const i=s.oxw().$implicit;return s.oxw(2).unfollowArtist(i.id)}),s._uU(2," SIGUIENDO "),s.qZA()()}if(2&n){const e=s.oxw().$implicit;s.xp6(1),s.MGl("id","followButton",e.id,"")}}function PI(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"button",12),s.NdJ("click",function(){s.CHM(e);const i=s.oxw().$implicit;return s.oxw(2).followArtist(i.id)}),s._uU(2," SEGUIR "),s.qZA()()}if(2&n){const e=s.oxw().$implicit;s.xp6(1),s.MGl("id","followButton",e.id,"")}}function OI(n,t){if(1&n&&(s.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"a",7),s._uU(4),s.qZA()(),s.TgZ(5,"h5",8),s._uU(6),s.qZA(),s.TgZ(7,"h5",8),s._uU(8),s.qZA(),s.TgZ(9,"h5",8),s._uU(10),s.qZA()(),s.TgZ(11,"div",9),s._UZ(12,"img",10)(13,"br"),s.YNc(14,k_,3,1,"div",2),s.YNc(15,PI,3,1,"div",2),s.qZA(),s._UZ(16,"hr"),s.qZA()),2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(3),s.MGl("routerLink","/artists/",e.userName,""),s.xp6(1),s.Oqu(e.fullName),s.xp6(2),s.hij("N\xfamero de seguidores: ",e.followers,""),s.xp6(2),s.hij(" N\xfamero de eventos: ",null==e.events?null:e.events.length," "),s.xp6(2),s.Oqu(e.bio),s.xp6(2),s.s9C("src",r.setArtistImg(e.profileImage),s.LSH),s.s9C("alt",e.fullName),s.xp6(2),s.Q6J("ngIf",e.following),s.xp6(1),s.Q6J("ngIf",!e.following)}}function NI(n,t){if(1&n&&(s.TgZ(0,"div"),s.YNc(1,OI,17,9,"div",3),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.artists)}}let FI=(()=>{class n{constructor(e,r){this.sharedService=e,this.artistService=r,this.artists=[],this.setArtistImg=hn.setArtistImg}ngOnInit(){this.getAllArtists()}getAllArtists(){this.sharedService.runSpinner(!0),this.artistService.getAllArtists().subscribe({next:e=>{this.artists=e.sort((r,i)=>i.followers-r.followers)},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}followArtist(e){this.sharedService.runSpinner(!0),document.getElementById("followButton"+e).innerHTML="\xb7 \xb7 \xb7",this.artistService.followArtist(e).subscribe({next:r=>{this.getAllArtists()},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}unfollowArtist(e){this.sharedService.runSpinner(!0),document.getElementById("followButton"+e).innerHTML="\xb7 \xb7 \xb7",this.artistService.unfollowArtist(e).subscribe({next:r=>{this.getAllArtists()},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(On),s.Y36(gl))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-all-artists"]],decls:5,vars:1,consts:[[1,"container"],[1,"cl-purple"],[4,"ngIf"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-xl-6","col-sm-12","sol-md-12"],[1,"artistNameDiv"],[1,"artistName",3,"routerLink"],[1,"text-white"],[1,"col-xl-6","col-sm-12","sol-md-12","col2"],[1,"eventImg","rounded","img-thumbnail",3,"src","alt"],[1,"btn","btn-primary",3,"id","click"],[1,"btn","btn-primary","notFollowing",3,"id","click"]],template:function(e,r){1&e&&(s._UZ(0,"app-user-logged-navbar"),s.TgZ(1,"div",0)(2,"h1",1),s._uU(3,"Artistas populares"),s.qZA(),s.YNc(4,NI,2,1,"div",2),s.qZA()),2&e&&(s.xp6(4),s.Q6J("ngIf",r.artists.length>0))},directives:[ba,Ut,Xt,Br],styles:["h1[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:4%}.artistParentDiv[_ngcontent-%COMP%]{margin-top:4%;margin-left:15%;margin-right:15%}h2[_ngcontent-%COMP%]{margin-bottom:2%}a[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:hover{color:#c7b2e2}.searchPeopleBtn[_ngcontent-%COMP%]{margin-top:15%;font-size:18pt;font-weight:700;padding:2%}hr[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:3%;height:3px;color:#8b9393}.artistImg[_ngcontent-%COMP%]{width:45%}.col2[_ngcontent-%COMP%]{text-align:center}.col2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:18pt;font-weight:700;padding:2%;margin-top:2%}#content[_ngcontent-%COMP%]{margin-left:5%;margin-right:5%}.artistName[_ngcontent-%COMP%]{color:#fbfbfb;text-decoration:none;font-size:3em}.artistName[_ngcontent-%COMP%]:hover{color:#c7b2e2;cursor:pointer}.artistNameDiv[_ngcontent-%COMP%]{margin-bottom:7%}"]}),n})();function LI(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",5)(1,"div",6)(2,"input",7),s.NdJ("change",function(){return s.CHM(e),s.oxw().checkBoxArtists()}),s.qZA(),s.TgZ(3,"label",8),s._uU(4,"Artistas"),s.qZA()(),s._UZ(5,"br"),s.TgZ(6,"div",6)(7,"input",9),s.NdJ("change",function(){return s.CHM(e),s.oxw().checkBoxEvents()}),s.qZA(),s.TgZ(8,"label",10),s._uU(9,"Eventos"),s.qZA()()()}}function UI(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"button",22),s.NdJ("click",function(){s.CHM(e);const i=s.oxw().$implicit;return s.oxw(2).unfollowEvent(i.id)}),s._uU(2," SIGUIENDO "),s.qZA()()}if(2&n){const e=s.oxw().$implicit;s.xp6(1),s.MGl("id","followButton",e.id,"")}}function VI(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"button",23),s.NdJ("click",function(){s.CHM(e);const i=s.oxw().$implicit;return s.oxw(2).followEvent(i.id)}),s._uU(2," SEGUIR "),s.qZA()()}if(2&n){const e=s.oxw().$implicit;s.xp6(1),s.MGl("id","followButton",e.id,"")}}function BI(n,t){if(1&n&&(s.TgZ(0,"div",14)(1,"div",15)(2,"a",16),s._uU(3),s.qZA(),s.TgZ(4,"h5",17),s._uU(5),s.qZA(),s.TgZ(6,"h5",17),s._uU(7),s.qZA(),s.TgZ(8,"h5",17),s._uU(9),s.qZA(),s.TgZ(10,"button",18),s._uU(11," BUSCA A ALGUIEN "),s.qZA()(),s.TgZ(12,"div",19),s._UZ(13,"img",20)(14,"br"),s.YNc(15,UI,3,1,"div",21),s.YNc(16,VI,3,1,"div",21),s.qZA(),s._UZ(17,"hr"),s.qZA()),2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(2),s.MGl("routerLink","/events/",e.id,""),s.xp6(1),s.Oqu(e.eventName),s.xp6(2),s.Oqu(r.formatDate(e.eventDate)),s.xp6(2),s.Oqu(e.eventLocation),s.xp6(2),s.hij(" Personas siguiendo este evento: ",e.followers," "),s.xp6(1),s.MGl("routerLink","/event-chats/",e.id,""),s.xp6(3),s.s9C("src",e.eventImage,s.LSH),s.s9C("alt",e.eventName),s.xp6(2),s.Q6J("ngIf",e.following),s.xp6(1),s.Q6J("ngIf",!e.following)}}function $N(n,t){if(1&n&&(s.TgZ(0,"div",11)(1,"h1",12),s._uU(2,"Eventos"),s.qZA(),s.YNc(3,BI,18,10,"div",13),s.qZA()),2&n){const e=s.oxw();s.xp6(3),s.Q6J("ngForOf",e.events)}}function rM(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"button",22),s.NdJ("click",function(){s.CHM(e);const i=s.oxw().$implicit;return s.oxw(2).unfollowArtist(i.id)}),s._uU(2," SIGUIENDO "),s.qZA()()}if(2&n){const e=s.oxw().$implicit;s.xp6(1),s.MGl("id","followButton",e.id,"")}}function iM(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"button",23),s.NdJ("click",function(){s.CHM(e);const i=s.oxw().$implicit;return s.oxw(2).followArtist(i.id)}),s._uU(2," SEGUIR "),s.qZA()()}if(2&n){const e=s.oxw().$implicit;s.xp6(1),s.MGl("id","followButton",e.id,"")}}function jI(n,t){if(1&n&&(s.TgZ(0,"div",14)(1,"div",15)(2,"div",25)(3,"a",26),s._uU(4),s.qZA()(),s.TgZ(5,"h5",17),s._uU(6),s.qZA(),s.TgZ(7,"h5",17),s._uU(8),s.qZA(),s.TgZ(9,"h5",17),s._uU(10),s.qZA()(),s.TgZ(11,"div",19),s._UZ(12,"img",20)(13,"br"),s.YNc(14,rM,3,1,"div",21),s.YNc(15,iM,3,1,"div",21),s.qZA(),s._UZ(16,"hr"),s.qZA()),2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(3),s.MGl("routerLink","/artists/",e.userName,""),s.xp6(1),s.Oqu(e.fullName),s.xp6(2),s.hij("N\xfamero de seguidores: ",e.followers,""),s.xp6(2),s.hij(" N\xfamero de eventos: ",null==e.events?null:e.events.length," "),s.xp6(2),s.Oqu(e.bio),s.xp6(2),s.s9C("src",r.setArtistImg(e.profileImage),s.LSH),s.s9C("alt",e.fullName),s.xp6(2),s.Q6J("ngIf",e.following),s.xp6(1),s.Q6J("ngIf",!e.following)}}function sM(n,t){if(1&n&&(s.TgZ(0,"div",24)(1,"h1",12),s._uU(2,"Artistas"),s.qZA(),s.YNc(3,jI,17,9,"div",13),s.qZA()),2&n){const e=s.oxw();s.xp6(3),s.Q6J("ngForOf",e.artists)}}function jr(n,t){1&n&&(s.TgZ(0,"h2",27),s._uU(1," Tu b\xfasqueda no ha tenido resultados :( "),s.qZA())}let HI=(()=>{class n{constructor(e,r,i,o,c){this.sharedService=e,this.actRoute=r,this.cdRef=i,this.eventService=o,this.artistService=c,this.artists=[],this.events=[],this.formatDate=hn.formatDate,this.setArtistImg=hn.setArtistImg}ngOnInit(){this.getResults()}getResults(){this.sharedService.runSpinner(!0);const e=this.actRoute.snapshot.queryParamMap.get("q");null!=e&&this.sharedService.getResults(e).subscribe({next:r=>{this.artists=r.artists,this.events=r.events},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{console.log(r),this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}ngAfterViewChecked(){this.cdRef.detectChanges()}followEvent(e){this.sharedService.runSpinner(!0),document.getElementById("followButton"+e).innerHTML="\xb7 \xb7 \xb7",this.eventService.followEvent(e).subscribe({next:r=>{this.getResults()},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}unfollowEvent(e){this.sharedService.runSpinner(!0),document.getElementById("followButton"+e).innerHTML="\xb7 \xb7 \xb7",this.eventService.unfollowEvent(e).subscribe({next:r=>{this.getResults()},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}followArtist(e){this.sharedService.runSpinner(!0),document.getElementById("followButton"+e).innerHTML="\xb7 \xb7 \xb7",this.artistService.followArtist(e).subscribe({next:r=>{this.getResults()},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}unfollowArtist(e){this.sharedService.runSpinner(!0),document.getElementById("followButton"+e).innerHTML="\xb7 \xb7 \xb7",this.artistService.unfollowArtist(e).subscribe({next:r=>{this.getResults()},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}checkBoxArtists(){return!(this.events.length>0&&this.artists.length>0)||document.getElementById("aritstsCheckBox").checked}checkBoxEvents(){return!(this.events.length>0&&this.artists.length>0)||document.getElementById("eventsCheckBox").checked}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(On),s.Y36(ic),s.Y36(s.sBO),s.Y36(cc),s.Y36(gl))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-search"]],decls:6,vars:4,consts:[["id","checkBoxes",4,"ngIf"],[1,"container"],["id","eventsContent",4,"ngIf"],["id","artistsContent",4,"ngIf"],["id","noResults","class","text-white",4,"ngIf"],["id","checkBoxes"],[1,"form-check","form-switch"],["checked","","type","checkbox","id","aritstsCheckBox",1,"form-check-input",3,"change"],["for","aritstsCheckBox",1,"form-check-label","cl-lightpurple"],["checked","","type","checkbox","id","eventsCheckBox",1,"form-check-input",3,"change"],["for","eventsCheckBox",1,"form-check-label","cl-lightpurple"],["id","eventsContent"],[1,"cl-purple"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-xl-6","col-sm-12","sol-md-12"],[1,"eventName",3,"routerLink"],[1,"text-white"],[1,"btn","btn-warning","searchPeopleBtn",3,"routerLink"],[1,"col-xl-6","col-sm-12","sol-md-12","col2"],[1,"eventImg","rounded","img-thumbnail",3,"src","alt"],[4,"ngIf"],[1,"btn","btn-primary",3,"id","click"],[1,"btn","btn-primary","notFollowing",3,"id","click"],["id","artistsContent"],[1,"artistNameDiv"],[1,"artistName",3,"routerLink"],["id","noResults",1,"text-white"]],template:function(e,r){1&e&&(s._UZ(0,"app-user-logged-navbar"),s.YNc(1,LI,10,0,"div",0),s.TgZ(2,"div",1),s.YNc(3,$N,4,1,"div",2),s.YNc(4,sM,4,1,"div",3),s.YNc(5,jr,2,0,"h2",4),s.qZA()),2&e&&(s.xp6(1),s.Q6J("ngIf",r.events.length>0&&r.artists.length>0),s.xp6(2),s.Q6J("ngIf",r.events.length>0&&r.checkBoxEvents()),s.xp6(1),s.Q6J("ngIf",r.artists.length>0&&r.checkBoxArtists()),s.xp6(1),s.Q6J("ngIf",0==r.events.length&&0==r.artists.length))},directives:[ba,Ut,Xt,Br,xs],styles:["h1[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:4%;font-size:5em}.eventParentDiv[_ngcontent-%COMP%]{margin-top:4%;margin-left:15%;margin-right:15%}.eventImg[_ngcontent-%COMP%]{width:45%}.eventName[_ngcontent-%COMP%]{color:#fbfbfb;text-decoration:none;font-size:3em}.eventName[_ngcontent-%COMP%]:hover{color:#c7b2e2;cursor:pointer}.artistParentDiv[_ngcontent-%COMP%]{margin-top:5%;margin-left:15%;margin-right:15%}h2[_ngcontent-%COMP%]{margin-bottom:2%}a[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:hover{color:#c7b2e2}.searchPeopleBtn[_ngcontent-%COMP%]{margin-top:15%;font-size:18pt;font-weight:700;padding:2%}hr[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:3%;height:3px;color:#8b9393}.artistImg[_ngcontent-%COMP%]{width:45%}.col2[_ngcontent-%COMP%]{text-align:center}.col2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:18pt;font-weight:700;padding:2%;margin-top:2%}#content[_ngcontent-%COMP%]{margin-left:5%;margin-right:5%}.artistName[_ngcontent-%COMP%]{color:#fbfbfb;text-decoration:none;font-size:3em}.artistName[_ngcontent-%COMP%]:hover{color:#c7b2e2;cursor:pointer}.artistNameDiv[_ngcontent-%COMP%]{margin-bottom:7%}.form-check-input[_ngcontent-%COMP%]   .form-switch[_ngcontent-%COMP%]{color:#9e73d3;border-color:#c7b2e2}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#c7b2e2;border-color:#c7b2e2;box-shadow:0 0 0 .2rem #9e73d3}.form-check-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #9e73d3;border-color:#c7b2e2}#checkBoxes[_ngcontent-%COMP%]{margin-top:1%;text-align:center;font-size:1vw}#checkBoxes[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block}#noResults[_ngcontent-%COMP%]{margin-top:4%;text-align:center;font-size:3em}"]}),n})();var zp=L(4986),au=L(6451),R_=L(3099);function Nb(n,t=zc.y){return n=null!=n?n:qI,(0,Qn.e)((e,r)=>{let i,o=!0;e.subscribe((0,Mt.x)(r,c=>{const h=t(c);(o||!n(i,h))&&(o=!1,i=h,r.next(c))}))})}function qI(n,t){return n===t}var Fb=L(5032),gn=L(5813),Er=L(2011),P_=(L(7092),L(3942)),ml=L(4859),ve=L(5861),yi=L(9681),F=L(2090),wa=L(1877);const ZI="@firebase/database";let eo="";function Vo(n){eo=n}class GI{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,F.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,F.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class $I{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,F.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const zI=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new GI(t)}}catch(t){}return new $I},_d=zI("localStorage"),Lb=zI("sessionStorage"),Xh=new wa.Yd("@firebase/database"),O_=function(){let n=1;return function(){return n++}}(),ef=function(n){const t=(0,F.dS)(n),e=new F.gQ;e.update(t);const r=e.digest();return F.US.encodeByteArray(r)},Yp=function(...n){let t="";for(let e=0;e<n.length;e++){const r=n[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=Yp.apply(null,r):t+="object"==typeof r?(0,F.Pz)(r):r,t+=" "}return t};let lu=null,YI=!0;const Ub=function(n,t){(0,F.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Xh.logLevel=wa.in.VERBOSE,lu=Xh.log.bind(Xh),t&&Lb.set("logging_enabled",!0)):"function"==typeof n?lu=n:(lu=null,Lb.remove("logging_enabled"))},Hr=function(...n){if(!0===YI&&(YI=!1,null===lu&&!0===Lb.get("logging_enabled")&&Ub(!0)),lu){const t=Yp.apply(null,n);lu(t)}},cu=function(n){return function(...t){Hr(n,...t)}},Vb=function(...n){const t="FIREBASE INTERNAL ERROR: "+Yp(...n);Xh.error(t)},Ea=function(...n){const t=`FIREBASE FATAL ERROR: ${Yp(...n)}`;throw Xh.error(t),new Error(t)},bi=function(...n){const t="FIREBASE WARNING: "+Yp(...n);Xh.warn(t)},vd=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},_l="[MIN_NAME]",Ia="[MAX_NAME]",uu=function(n,t){if(n===t)return 0;if(n===_l||t===Ia)return-1;if(t===_l||n===Ia)return 1;{const e=F_(n),r=F_(t);return null!==e?null!==r?e-r==0?n.length-t.length:e-r:-1:null!==r?1:n<t?-1:1}},KI=function(n,t){return n===t?0:n<t?-1:1},tf=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(t))},N_=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const t=[];for(const r in n)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)0!==r&&(e+=","),e+=(0,F.Pz)(t[r]),e+=":",e+=N_(n[t[r]]);return e+="}",e},jb=function(n,t){const e=n.length;if(e<=t)return[n];const r=[];for(let i=0;i<e;i+=t)r.push(n.substring(i,i+t>e?e:i+t));return r};function ri(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const QI=function(n){(0,F.hu)(!vd(n),"Invalid JSON number");const r=1023;let i,o,c,h,g;0===n?(o=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,c=Math.round(n/Math.pow(2,-1074))));const v=[];for(g=52;g;g-=1)v.push(c%2?1:0),c=Math.floor(c/2);for(g=11;g;g-=1)v.push(o%2?1:0),o=Math.floor(o/2);v.push(i?1:0),v.reverse();const E=v.join("");let D="";for(g=0;g<64;g+=8){let k=parseInt(E.substr(g,8),2).toString(16);1===k.length&&(k="0"+k),D+=k}return D.toLowerCase()},uM=new RegExp("^-?(0*)\\d{1,10}$"),JI=-2147483648,Hb=2147483647,F_=function(n){if(uM.test(n)){const t=Number(n);if(t>=JI&&t<=Hb)return t}return null},nf=function(n){try{n()}catch(t){setTimeout(()=>{throw bi("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Wp=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class hM{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){bi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class fM{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Hr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bi(t)}}let Kp=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Gb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Yb="websocket",Wb="long_polling";class V_{constructor(t,e,r,i,o=!1,c="",h=!1){this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_d.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&_d.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function B_(n,t,e){let r;if((0,F.hu)("string"==typeof t,"typeof type must == string"),(0,F.hu)("object"==typeof e,"typeof params must == object"),t===Yb)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==Wb)throw new Error("Unknown connection type: "+t);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Kb(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const i=[];return ri(e,(o,c)=>{i.push(o+"="+c)}),r+i.join("&")}class yd{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,F.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,F.p$)(this.counters_)}}const Qb={},Jb={};function du(n){const t=n.toString();return Qb[t]||(Qb[t]=new yd),Qb[t]}class Xb{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&nf(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class uc{constructor(t,e,r,i,o,c,h){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cu(t),this.stats_=du(e),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),B_(e,Wb,g))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Xb(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Z_((...o)=>{const[c,h,g,v,E]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=g;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[c,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Gb.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){uc.forceAllow_=!0}static forceDisallow(){uc.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!uc.forceAllow_&&(uc.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,F.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,F.h$)(e),i=jb(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,F.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class Z_{constructor(t,e,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=O_(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=Z_.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Hr("frame writing exception"),h.stack&&Hr(h.stack),Hr(h)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Hr("No IE domain setting required")}catch(e){const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,e){(0,F.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{Hr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let G_=null;"undefined"!=typeof MozWebSocket?G_=MozWebSocket:"undefined"!=typeof WebSocket&&(G_=WebSocket);let rf=(()=>{class n{constructor(e,r,i,o,c,h,g){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cu(this.connId),this.stats_=du(r),this.connURL=n.connectionURL_(r,h,g,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,i,o,c){const h={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&Gb.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),c&&(h.p=c),B_(e,Yb,h)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_d.set("previous_websocket_failure",!0);try{let i;if((0,F.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${eo}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,g=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;g&&(c.proxy={origin:g})}this.mySock=new G_(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&null!==G_&&!n.forceDisallow_}static previouslyFailed(){return _d.isInMemoryStorage||!0===_d.get("previous_websocket_failure")}markConnectionHealthy(){_d.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,F.cI)(r);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const r=(0,F.Pz)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=jb(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),lD=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[uc,rf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const r=rf&&rf.isAvailable();let i=r&&!rf.previouslyFailed();if(e.webSocketOnly&&(r||bi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[rf];else{const o=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class n0{constructor(t,e,r,i,o,c,h,g,v,E){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cu("c:"+this.id+":"),this.transportManager_=new lD(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=tf("t",t),r=tf("d",t);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=tf("t",t),r=tf("d",t);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=tf("t",t);if("d"in t){const r=t.d;if("h"===e)this.onHandshake_(r);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?Vb("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vb("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&bi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),Wp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_d.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class r0{put(t,e,r,i){}merge(t,e,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class s0{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,F.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const i=this.getInitialEvent(t);i&&e.apply(r,i)}off(t,e,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===e&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(t){(0,F.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class $_ extends s0{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $_}getInitialEvent(t){return(0,F.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class In{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function wn(){return new In("")}function tn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function bd(n){return n.pieces_.length-n.pieceNum_}function Un(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new In(n.pieces_,t)}function z_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Jp(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function fD(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new In(t,0)}function qn(n,t){const e=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);if(t instanceof In)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&e.push(r[i])}return new In(e,0)}function Bt(n){return n.pieceNum_>=n.pieces_.length}function ns(n,t){const e=tn(n),r=tn(t);if(null===e)return t;if(e===r)return ns(Un(n),Un(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function DM(n,t){const e=Jp(n,0),r=Jp(t,0);for(let i=0;i<e.length&&i<r.length;i++){const o=uu(e[i],r[i]);if(0!==o)return o}return e.length===r.length?0:e.length<r.length?-1:1}function a0(n,t){if(bd(n)!==bd(t))return!1;for(let e=n.pieceNum_,r=t.pieceNum_;e<=n.pieces_.length;e++,r++)if(n.pieces_[e]!==t.pieces_[r])return!1;return!0}function Bo(n,t){let e=n.pieceNum_,r=t.pieceNum_;if(bd(n)>bd(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class TM{constructor(t,e){this.errorPrefix_=e,this.parts_=Jp(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);gD(this)}}function gD(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+jo(n))}function jo(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class l0 extends s0{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new l0}getInitialEvent(t){return(0,F.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const cf=1e3;let K_,hu=(()=>{class n extends r0{constructor(e,r,i,o,c,h,g,v){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=g,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=cu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cf,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");l0.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&$_.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,i){const o=++this.requestNumber_,c={r:o,a:e,b:r};this.log_((0,F.Pz)(c)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const r=new F.BH,i={p:e._path.toString(),q:e._queryObject},o={action:"g",request:i,onComplete:h=>{const g=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,g,!1,null),r.resolve(g)):r.reject(g)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[c];void 0===h||o!==h||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(e,r,i,o){this.initConnection_();const c=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const g={onComplete:o,hashFn:r,query:e,tag:i};this.listens.get(h).set(c,g),this.connected_&&this.sendListen_(g)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(e){const r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const c={p:i};e.tag&&(c.q=r._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,g=>{const v=g.d,E=g.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",g),"ok"!==E&&this.removeListen_(i,o),e.onComplete&&e.onComplete(E,v))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,F.r3)(e,"w")){const i=(0,F.DV)(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();bi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,F.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,F.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const c=o.s,h=o.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,i=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(e,r){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,r)}sendUnlisten_(e,r,i,o){this.log_("Unlisten on "+e+" for "+r);const c={p:e};o&&(c.q=i,c.t=o),this.sendRequest("n",c)}onDisconnectPut(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:i})}onDisconnectMerge(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:i})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,i,o){const c={p:r,d:i};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(e,r,i,o){this.putInternal("p",e,r,i,o)}merge(e,r,i,o){this.putInternal("m",e,r,i,o)}putInternal(e,r,i,o,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:e,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,F.Pz)(e));const r=e.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):Vb("Unrecognized action received from server: "+(0,F.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cf,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=cf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=cf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,ve.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),i=e.onReady_.bind(e),o=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,h=e.lastSessionId;let g=!1,v=null;const E=function(){v?v.close():(g=!0,o())};e.realtime_={close:E,sendRequest:function(N){(0,F.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(N)}};const k=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[N,U]=yield Promise.all([e.authTokenProvider_.getToken(k),e.appCheckTokenProvider_.getToken(k)]);g?Hr("getToken() completed but was canceled"):(Hr("getToken() completed. Creating connection."),e.authToken_=N&&N.accessToken,e.appCheckToken_=U&&U.token,v=new n0(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,i,o,X=>{bi(X+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},h))}catch(N){e.log_("Failed to get token: "+N),g||(e.repoInfo_.nodeAdmin&&bi(N),E())}}})()}interrupt(e){Hr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Hr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=cf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let i;i=r?r.map(c=>N_(c)).join("$"):"default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,r){const i=new In(e).toString();let o;if(this.listens.has(i)){const c=this.listens.get(i);o=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,r){Hr("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){Hr("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+eo.replace(/\./g,"-")]=1,(0,F.uI)()?e["framework.cordova"]=1:(0,F.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=$_.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Jt{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Jt(t,e)}}class W_{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new Jt(_l,t),i=new Jt(_l,e);return 0!==this.compare(r,i)}minPost(){return Jt.MIN}}class bD extends W_{static get __EMPTY_NODE(){return K_}static set __EMPTY_NODE(t){K_=t}compare(t,e){return uu(t.name,e.name)}isDefinedOn(t){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Jt.MIN}maxPost(){return new Jt(Ia,K_)}makePost(t,e){return(0,F.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Jt(t,K_)}toString(){return".key"}}const Ho=new bD;class Q_{constructor(t,e,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=e?r(t.key,e):1,i&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let d0,qo=(()=>{class n{constructor(e,r,i,o,c){this.key=e,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=o?o:Ms.EMPTY_NODE,this.right=null!=c?c:Ms.EMPTY_NODE}copy(e,r,i,o,c){return new n(null!=e?e:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=o?o:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,r,i),null):0===c?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(e,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ms.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let i,o;if(i=this,r(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(e,i.key)){if(i.right.isEmpty())return Ms.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ms{constructor(t,e=Ms.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ms(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,qo.BLACK,null,null))}remove(t){return new Ms(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,qo.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,i=null;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Q_(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Q_(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Q_(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Q_(this.root_,null,this.comparator_,!0,t)}}function kM(n,t){return uu(n.name,t.name)}function u0(n,t){return uu(n,t)}Ms.EMPTY_NODE=new class MM{copy(t,e,r,i,o){return this}insert(t,e,r){return new qo(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const wD=function(n){return"number"==typeof n?"number:"+QI(n):"string:"+n},CD=function(n){if(n.isLeafNode()){const t=n.val();(0,F.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,F.r3)(t,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===d0||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===d0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let h0,ED,ID,wd=(()=>{class n{constructor(e,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),CD(this.priorityNode_)}static set __childrenNodeConstructor(e){h0=e}static get __childrenNodeConstructor(){return h0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Bt(e)?this:".priority"===tn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const i=tn(e);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,F.hu)(".priority"!==i||1===bd(e),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Un(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+wD(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?QI(this.value_):this.value_,this.lazyHash_=ef(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,F.hu)(o>=0,"Unknown leaf type: "+r),(0,F.hu)(c>=0,"Unknown leaf type: "+i),o===c?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Vn=new class OM extends W_{compare(t,e){const r=t.node.getPriority(),i=e.node.getPriority(),o=r.compareTo(i);return 0===o?uu(t.name,e.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Jt.MIN}maxPost(){return new Jt(Ia,new wd("[PRIORITY-POST]",ID))}makePost(t,e){const r=ED(t);return new Jt(e,new wd("[PRIORITY-POST]",r))}toString(){return".priority"}},f0=Math.log(2);class p0{constructor(t){this.count=parseInt(Math.log(t+1)/f0,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Xp=function(n,t,e,r){n.sort(t);const i=function(g,v){const E=v-g;let D,k;if(0===E)return null;if(1===E)return D=n[g],k=e?e(D):D,new qo(k,D.node,qo.BLACK,null,null);{const N=parseInt(E/2,10)+g,U=i(g,N),X=i(N+1,v);return D=n[N],k=e?e(D):D,new qo(k,D.node,qo.BLACK,U,X)}},h=function(g){let v=null,E=null,D=n.length;const k=function(U,X){const pe=D-U,Be=D;D-=U;const We=i(pe+1,Be),et=n[pe],$e=e?e(et):et;N(new qo($e,et.node,X,null,We))},N=function(U){v?(v.left=U,v=U):(E=U,v=U)};for(let U=0;U<g.count;++U){const X=g.nextBitIsOne(),pe=Math.pow(2,g.count-(U+1));X?k(pe,qo.BLACK):(k(pe,qo.BLACK),k(pe,qo.RED))}return E}(new p0(n.length));return new Ms(r||t,h)};let eg;const uf={};class dc{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,F.hu)(uf&&Vn,"ChildrenNode.ts has not been loaded"),eg=eg||new dc({".priority":uf},{".priority":Vn}),eg}get(t){const e=(0,F.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ms?e:null}hasIndex(t){return(0,F.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,F.hu)(t!==Ho,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=e.getIterator(Jt.Wrap);let h,c=o.getNext();for(;c;)i=i||t.isDefinedOn(c.node),r.push(c),c=o.getNext();h=i?Xp(r,t.getCompare()):uf;const g=t.toString(),v=Object.assign({},this.indexSet_);v[g]=t;const E=Object.assign({},this.indexes_);return E[g]=h,new dc(E,v)}addToIndexes(t,e){const r=(0,F.UI)(this.indexes_,(i,o)=>{const c=(0,F.DV)(this.indexSet_,o);if((0,F.hu)(c,"Missing index implementation for "+o),i===uf){if(c.isDefinedOn(t.node)){const h=[],g=e.getIterator(Jt.Wrap);let v=g.getNext();for(;v;)v.name!==t.name&&h.push(v),v=g.getNext();return h.push(t),Xp(h,c.getCompare())}return uf}{const h=e.get(t.name);let g=i;return h&&(g=g.remove(new Jt(t.name,h))),g.insert(t,t.node)}});return new dc(r,this.indexSet_)}removeFromIndexes(t,e){const r=(0,F.UI)(this.indexes_,i=>{if(i===uf)return i;{const o=e.get(t.name);return o?i.remove(new Jt(t.name,o)):i}});return new dc(r,this.indexSet_)}}let Cd,jt=(()=>{class n{constructor(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&CD(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Cd||(Cd=new n(new Ms(u0),null,dc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Cd}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?Cd:r}}getChild(e){const r=tn(e);return null===r?this:this.getImmediateChild(r).getChild(Un(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const i=new Jt(e,r);let o,c;r.isEmpty()?(o=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?Cd:this.priorityNode_;return new n(o,h,c)}}updateChild(e,r){const i=tn(e);if(null===i)return r;{(0,F.hu)(".priority"!==tn(e)||1===bd(e),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Un(e),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let i=0,o=0,c=!0;if(this.forEachChild(Vn,(h,g)=>{r[h]=g.val(e),i++,c&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):c=!1}),!e&&c&&o<2*i){const h=[];for(const g in r)h[g]=r[g];return h}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+wD(this.getPriority().val())+":"),this.forEachChild(Vn,(r,i)=>{const o=i.hash();""!==o&&(e+=":"+r+":"+o)}),this.lazyHash_=""===e?"":ef(e)}return this.lazyHash_}getPredecessorChildName(e,r,i){const o=this.resolveIndex_(i);if(o){const c=o.getPredecessorKey(new Jt(e,r));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new Jt(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new Jt(r,this.children_.get(r)):null}forEachChild(e,r){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Jt.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,e)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Jt.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,e)>0;)o.getNext(),c=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===tg?-1:0}withIndex(e){if(e===Ho||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===Ho||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Vn),o=r.getIterator(Vn);let c=i.getNext(),h=o.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=o.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(e){return e===Ho?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const tg=new class TD extends jt{constructor(){super(new Ms(u0),jt.EMPTY_NODE,dc.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return jt.EMPTY_NODE}isEmpty(){return!1}};function er(n,t=null){if(null===n)return jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,F.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new wd(n,er(t));if(n instanceof Array){let e=jt.EMPTY_NODE;return ri(n,(r,i)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const o=er(i);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(r,o))}}),e.updatePriority(er(t))}{const e=[];let r=!1;if(ri(n,(c,h)=>{if("."!==c.substring(0,1)){const g=er(h);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),e.push(new Jt(c,g)))}}),0===e.length)return jt.EMPTY_NODE;const o=Xp(e,kM,c=>c.name,u0);if(r){const c=Xp(e,Vn.getCompare());return new jt(o,er(t),new dc({".priority":c},{".priority":Vn}))}return new jt(o,er(t),dc.Default)}}Object.defineProperties(Jt,{MIN:{value:new Jt(_l,jt.EMPTY_NODE)},MAX:{value:new Jt(Ia,tg)}}),bD.__EMPTY_NODE=jt.EMPTY_NODE,wd.__childrenNodeConstructor=jt,function RM(n){d0=n}(tg),function PM(n){ID=n}(tg),function DD(n){ED=n}(er);class J_ extends W_{constructor(t){super(),this.indexPath_=t,(0,F.hu)(!Bt(t)&&".priority"!==tn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),i=this.extractChild(e.node),o=r.compareTo(i);return 0===o?uu(t.name,e.name):o}makePost(t,e){const r=er(t),i=jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Jt(e,i)}maxPost(){const t=jt.EMPTY_NODE.updateChild(this.indexPath_,tg);return new Jt(Ia,t)}toString(){return Jp(this.indexPath_,0).join("/")}}const g0=new class KN extends W_{compare(t,e){const r=t.node.compareTo(e.node);return 0===r?uu(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Jt.MIN}maxPost(){return Jt.MAX}makePost(t,e){const r=er(t);return new Jt(e,r)}toString(){return".value"}},hc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",NM=function(){let n=0;const t=[];return function(e){const r=e===n;let i;n=e;const o=new Array(8);for(i=7;i>=0;i--)o[i]=hc.charAt(e%64),e=Math.floor(e/64);(0,F.hu)(0===e,"Cannot push at time == 0");let c=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=hc.charAt(t[i]);return(0,F.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),FM=function(n){if(n===""+Hb)return"-";const t=F_(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let c=0;c<e.length;c++)e[c]=n.charAt(c);if(e.length<786)return e.push("-"),e.join("");let r=e.length-1;for(;r>=0&&"z"===e[r];)r--;if(-1===r)return Ia;const o=hc.charAt(hc.indexOf(e[r])+1);return e[r]=o,e.slice(0,r+1).join("")},_0=function(n){if(n===""+JI)return _l;const t=F_(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let r=0;r<e.length;r++)e[r]=n.charAt(r);return"-"===e[e.length-1]?1===e.length?""+Hb:(delete e[e.length-1],e.join("")):(e[e.length-1]=hc.charAt(hc.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function AD(n){return{type:"value",snapshotNode:n}}function hf(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function ng(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function rg(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class X_{constructor(t){this.index_=t}updateChild(t,e,r,i,o,c){(0,F.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=t.getImmediateChild(e);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?t.hasChild(e)?c.trackChildChange(ng(e,h)):(0,F.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(hf(e,r)):c.trackChildChange(rg(e,r,h))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return null!=r&&(t.isLeafNode()||t.forEachChild(Vn,(i,o)=>{e.hasChild(i)||r.trackChildChange(ng(i,o))}),e.isLeafNode()||e.forEachChild(Vn,(i,o)=>{if(t.hasChild(i)){const c=t.getImmediateChild(i);c.equals(o)||r.trackChildChange(rg(i,o,c))}else r.trackChildChange(hf(i,o))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?jt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Id{constructor(t){this.indexedFilter_=new X_(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Id.getStartPost_(t),this.endPost_=Id.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,r,i,o,c){return this.matches(new Jt(e,r))||(r=jt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,i,o,c)}updateFullNode(t,e,r){e.isLeafNode()&&(e=jt.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(jt.EMPTY_NODE);const o=this;return e.forEachChild(Vn,(c,h)=>{o.matches(new Jt(c,h))||(i=i.updateImmediateChild(c,jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class ev{constructor(t){this.rangedFilter_=new Id(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,r,i,o,c){return this.rangedFilter_.matches(new Jt(e,r))||(r=jt.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,i,o,c):this.fullLimitUpdateChild_(t,e,r,o,c)}updateFullNode(t,e,r){let i;if(e.isLeafNode()||e.isEmpty())i=jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let o;i=jt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){const h=o.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(h.name,h.node),c++}}else{let o,c,h,g;if(i=e.withIndex(this.index_),i=i.updatePriority(jt.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();h=(k,N)=>D(N,k)}else g=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let v=0,E=!1;for(;g.hasNext();){const D=g.getNext();!E&&h(o,D)<=0&&(E=!0),E&&v<this.limit_&&h(D,c)<=0?v++:i=i.updateImmediateChild(D.name,jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,i,o){let c;if(this.reverse_){const D=this.index_.getCompare();c=(k,N)=>D(N,k)}else c=this.index_.getCompare();const h=t;(0,F.hu)(h.numChildren()===this.limit_,"");const g=new Jt(e,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),E=this.rangedFilter_.matches(g);if(h.hasChild(e)){const D=h.getImmediateChild(e);let k=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=k&&(k.name===e||h.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const N=null==k?1:c(k,g);if(E&&!r.isEmpty()&&N>=0)return null!=o&&o.trackChildChange(rg(e,r,D)),h.updateImmediateChild(e,r);{null!=o&&o.trackChildChange(ng(e,D));const X=h.updateImmediateChild(e,jt.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(null!=o&&o.trackChildChange(hf(k.name,k.node)),X.updateImmediateChild(k.name,k.node)):X}}return r.isEmpty()?t:E&&c(v,g)>=0?(null!=o&&(o.trackChildChange(ng(v.name,v.node)),o.trackChildChange(hf(e,r))),h.updateImmediateChild(e,r).updateImmediateChild(v.name,jt.EMPTY_NODE)):t}}class fu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Vn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_l}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ia}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Vn}copy(){const t=new fu;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function v0(n,t,e){const r=n.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function ig(n,t,e){const r=n.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function y0(n,t){const e=n.copy();return e.index_=t,e}function RD(n){const t={};if(n.isDefault())return t;let e;return n.index_===Vn?e="$priority":n.index_===g0?e="$value":n.index_===Ho?e="$key":((0,F.hu)(n.index_ instanceof J_,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,F.Pz)(e),n.startSet_&&(t.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function PD(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==Vn&&(t.i=n.index_.toString()),t}class fc extends r0{constructor(t,e,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=cu("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,F.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,r,i){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const c=fc.getListenId_(t,r),h={};this.listens_[c]=h;const g=RD(t._queryParams);this.restRequest_(o+".json",g,(v,E)=>{let D=E;if(404===v&&(D=null,v=null),null===v&&this.onDataUpdate_(o,D,!1,r),(0,F.DV)(this.listens_,c)===h){let k;k=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(k,null)}})}unlisten(t,e){const r=fc.getListenId_(t,e);delete this.listens_[r]}get(t){const e=RD(t._queryParams),r=t._path.toString(),i=new F.BH;return this.restRequest_(r+".json",e,(o,c)=>{let h=c;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(e.auth=i.accessToken),o&&o.token&&(e.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,F.xO)(e);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=(0,F.cI)(h.responseText)}catch(v){bi("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,g)}else 401!==h.status&&404!==h.status&&bi("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class OD{constructor(){this.rootNode_=jt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function pc(){return{value:null,children:new Map}}function sg(n,t,e){if(Bt(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const r=tn(t);n.children.has(r)||n.children.set(r,pc()),sg(n.children.get(r),t=Un(t),e)}}function tv(n,t){if(Bt(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(Vn,(r,i)=>{sg(n,new In(r),i)}),tv(n,t)}}if(n.children.size>0){const e=tn(t);return t=Un(t),n.children.has(e)&&tv(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function b0(n,t,e){null!==n.value?e(t,n.value):function QN(n,t){n.children.forEach((e,r)=>{t(r,e)})}(n,(r,i)=>{b0(i,new In(t.toString()+"/"+r),e)})}class ND{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&ri(this.last_,(r,i)=>{e[r]=e[r]-i}),this.last_=t,e}}class jM{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new ND(t);const r=1e4+2e4*Math.random();Wp(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;ri(t,(i,o)=>{o>0&&(0,F.r3)(this.statsToReport_,i)&&(e[i]=o,r=!0)}),r&&this.server_.reportStats(e),Wp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Zo=(()=>{return(n=Zo||(Zo={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Zo;var n})();function E0(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class rv{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=Zo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(Bt(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new In(t));return new rv(wn(),e,this.revert)}}return(0,F.hu)(tn(this.path)===t,"operationForChild called for unrelated child."),new rv(Un(this.path),this.affectedTree,this.revert)}}class og{constructor(t,e){this.source=t,this.path=e,this.type=Zo.LISTEN_COMPLETE}operationForChild(t){return Bt(this.path)?new og(this.source,wn()):new og(this.source,Un(this.path))}}class Dd{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=Zo.OVERWRITE}operationForChild(t){return Bt(this.path)?new Dd(this.source,wn(),this.snap.getImmediateChild(t)):new Dd(this.source,Un(this.path),this.snap)}}class ff{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=Zo.MERGE}operationForChild(t){if(Bt(this.path)){const e=this.children.subtree(new In(t));return e.isEmpty()?null:e.value?new Dd(this.source,wn(),e.value):new ff(this.source,wn(),e)}return(0,F.hu)(tn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ff(this.source,Un(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class pu{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Bt(t))return this.isFullyInitialized()&&!this.filtered_;const e=tn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class ag{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function pf(n,t,e,r,i,o){const c=r.filter(h=>h.type===e);c.sort((h,g)=>function VD(n,t,e){if(null==t.childName||null==e.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new Jt(t.childName,t.snapshotNode),i=new Jt(e.childName,e.snapshotNode);return n.index_.compare(r,i)}(n,h,g)),c.forEach(h=>{const g=function UD(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,h,o);i.forEach(v=>{v.respondsTo(h.type)&&t.push(v.createEvent(g,n.query_))})})}function lg(n,t){return{eventCache:n,serverCache:t}}function gf(n,t,e,r){return lg(new pu(t,e,r),n.serverCache)}function BD(n,t,e,r){return lg(n.eventCache,new pu(t,e,r))}function iv(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Td(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let sv;class Bn{constructor(t,e=(()=>(sv||(sv=new Ms(KI)),sv))()){this.value=t,this.children=e}static fromObject(t){let e=new Bn(null);return ri(t,(r,i)=>{e=e.set(new In(r),i)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:wn(),value:this.value};if(Bt(t))return null;{const r=tn(t),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Un(t),e);return null!=o?{path:qn(new In(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Bt(t))return this;{const e=tn(t),r=this.children.get(e);return null!==r?r.subtree(Un(t)):new Bn(null)}}set(t,e){if(Bt(t))return new Bn(e,this.children);{const r=tn(t),o=(this.children.get(r)||new Bn(null)).set(Un(t),e),c=this.children.insert(r,o);return new Bn(this.value,c)}}remove(t){if(Bt(t))return this.children.isEmpty()?new Bn(null):new Bn(null,this.children);{const e=tn(t),r=this.children.get(e);if(r){const i=r.remove(Un(t));let o;return o=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&o.isEmpty()?new Bn(null):new Bn(this.value,o)}return this}}get(t){if(Bt(t))return this.value;{const e=tn(t),r=this.children.get(e);return r?r.get(Un(t)):null}}setTree(t,e){if(Bt(t))return e;{const r=tn(t),o=(this.children.get(r)||new Bn(null)).setTree(Un(t),e);let c;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Bn(this.value,c)}}fold(t){return this.fold_(wn(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(qn(t,i),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,wn(),e)}findOnPath_(t,e,r){const i=!!this.value&&r(e,this.value);if(i)return i;if(Bt(t))return null;{const o=tn(t),c=this.children.get(o);return c?c.findOnPath_(Un(t),qn(e,o),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,wn(),e)}foreachOnPath_(t,e,r){if(Bt(t))return this;{this.value&&r(e,this.value);const i=tn(t),o=this.children.get(i);return o?o.foreachOnPath_(Un(t),qn(e,i),r):new Bn(null)}}foreach(t){this.foreach_(wn(),t)}foreach_(t,e){this.children.inorderTraversal((r,i)=>{i.foreach_(qn(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class rs{constructor(t){this.writeTree_=t}static empty(){return new rs(new Bn(null))}}function cg(n,t,e){if(Bt(t))return new rs(new Bn(e));{const r=n.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const c=ns(i,t);return o=o.updateChild(c,e),new rs(n.writeTree_.set(i,o))}{const i=new Bn(e),o=n.writeTree_.setTree(t,i);return new rs(o)}}}function ug(n,t,e){let r=n;return ri(e,(i,o)=>{r=cg(r,qn(t,i),o)}),r}function Da(n,t){if(Bt(t))return rs.empty();{const e=n.writeTree_.setTree(t,new Bn(null));return new rs(e)}}function I0(n,t){return null!=gc(n,t)}function gc(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(ns(e.path,t)):null}function mf(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Vn,(r,i)=>{t.push(new Jt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new Jt(r,i.value))}),t}function gu(n,t){if(Bt(t))return n;{const e=gc(n,t);return new rs(null!=e?new Bn(e):n.writeTree_.subtree(t))}}function D0(n){return n.writeTree_.isEmpty()}function _f(n,t){return dg(wn(),n.writeTree_,t)}function dg(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{".priority"===i?((0,F.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):e=dg(qn(n,i),o,e)}),!e.getChild(n).isEmpty()&&null!==r&&(e=e.updateChild(qn(n,".priority"),r)),e}}function Sd(n,t){return O0(t,n)}function T0(n,t){if(n.snap)return Bo(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Bo(qn(n.path,e),t))return!0;return!1}function GM(n){return n.visible}function ZD(n,t,e){let r=rs.empty();for(let i=0;i<n.length;++i){const o=n[i];if(t(o)){const c=o.path;let h;if(o.snap)Bo(e,c)?(h=ns(e,c),r=cg(r,h,o.snap)):Bo(c,e)&&(h=ns(c,e),r=cg(r,wn(),o.snap.getChild(h)));else{if(!o.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(Bo(e,c))h=ns(e,c),r=ug(r,h,o.children);else if(Bo(c,e))if(h=ns(c,e),Bt(h))r=ug(r,wn(),o.children);else{const g=(0,F.DV)(o.children,tn(h));if(g){const v=g.getChild(Un(h));r=cg(r,wn(),v)}}}}}return r}function $M(n,t,e,r,i){if(r||i){const o=gu(n.visibleWrites,t);return!i&&D0(o)?e:i||null!=e||I0(o,wn())?_f(ZD(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(Bo(v.path,t)||Bo(t,v.path))},t),e||jt.EMPTY_NODE):null}{const o=gc(n.visibleWrites,t);if(null!=o)return o;{const c=gu(n.visibleWrites,t);return D0(c)?e:null!=e||I0(c,wn())?_f(c,e||jt.EMPTY_NODE):null}}}function ov(n,t,e,r){return $M(n.writeTree,n.treePath,t,e,r)}function k0(n,t){return function S0(n,t,e){let r=jt.EMPTY_NODE;const i=gc(n.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Vn,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(e){const o=gu(n.visibleWrites,t);return e.forEachChild(Vn,(c,h)=>{const g=_f(gu(o,new In(c)),h);r=r.updateImmediateChild(c,g)}),mf(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return mf(gu(n.visibleWrites,t)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,t)}function $D(n,t,e,r){return function A0(n,t,e,r,i){(0,F.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=qn(t,e);if(I0(n.visibleWrites,o))return null;{const c=gu(n.visibleWrites,o);return D0(c)?i.getChild(e):_f(c,i.getChild(e))}}(n.writeTree,n.treePath,t,e,r)}function hg(n,t){return function x0(n,t){return gc(n.visibleWrites,t)}(n.writeTree,qn(n.treePath,t))}function av(n,t,e){return function GD(n,t,e,r){const i=qn(t,e),o=gc(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(e)?_f(gu(n.visibleWrites,i),r.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function P0(n,t){return O0(qn(n.treePath,t),n.writeTree)}function O0(n,t){return{treePath:n,writeTree:t}}class zD{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;(0,F.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(r,rg(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(r,ng(r,i.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(r,hf(r,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw(0,F.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,rg(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const N0=new class YM{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}};class lv{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new pu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return av(this.writes_,t,r)}}getChildAfterChild(t,e,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Td(this.viewCache_),o=function R0(n,t,e,r,i,o){return function M0(n,t,e,r,i,o,c){let h;const g=gu(n.visibleWrites,t),v=gc(g,wn());if(null!=v)h=v;else{if(null==e)return[];h=_f(g,e)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const E=[],D=c.getCompare(),k=o?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let N=k.getNext();for(;N&&E.length<i;)0!==D(N,r)&&E.push(N),N=k.getNext();return E}}(n.writeTree,n.treePath,t,e,r,i,o)}(this.writes_,i,e,1,r,t);return 0===o.length?null:o[0]}}function Ad(n,t,e,r,i,o){const c=t.eventCache;if(null!=hg(r,e))return t;{let h,g;if(Bt(e))if((0,F.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const v=Td(t),D=k0(r,v instanceof jt?v:jt.EMPTY_NODE);h=n.filter.updateFullNode(t.eventCache.getNode(),D,o)}else{const v=ov(r,Td(t));h=n.filter.updateFullNode(t.eventCache.getNode(),v,o)}else{const v=tn(e);if(".priority"===v){(0,F.hu)(1===bd(e),"Can't have a priority with additional path components");const E=c.getNode();g=t.serverCache.getNode();const D=$D(r,e,E,g);h=null!=D?n.filter.updatePriority(E,D):c.getNode()}else{const E=Un(e);let D;if(c.isCompleteForChild(v)){g=t.serverCache.getNode();const k=$D(r,e,c.getNode(),g);D=null!=k?c.getNode().getImmediateChild(v).updateChild(E,k):c.getNode().getImmediateChild(v)}else D=av(r,v,t.serverCache);h=null!=D?n.filter.updateChild(c.getNode(),v,D,E,i,o):c.getNode()}}return gf(t,h,c.isFullyInitialized()||Bt(e),n.filter.filtersNodes())}}function cv(n,t,e,r,i,o,c,h){const g=t.serverCache;let v;const E=c?n.filter:n.filter.getIndexedFilter();if(Bt(e))v=E.updateFullNode(g.getNode(),r,null);else if(E.filtersNodes()&&!g.isFiltered()){const N=g.getNode().updateChild(e,r);v=E.updateFullNode(g.getNode(),N,null)}else{const N=tn(e);if(!g.isCompleteForPath(e)&&bd(e)>1)return t;const U=Un(e),pe=g.getNode().getImmediateChild(N).updateChild(U,r);v=".priority"===N?E.updatePriority(g.getNode(),pe):E.updateChild(g.getNode(),N,pe,U,N0,null)}const D=BD(t,v,g.isFullyInitialized()||Bt(e),E.filtersNodes());return Ad(n,D,e,i,new lv(i,D,o),h)}function F0(n,t,e,r,i,o,c){const h=t.eventCache;let g,v;const E=new lv(i,t,o);if(Bt(e))v=n.filter.updateFullNode(t.eventCache.getNode(),r,c),g=gf(t,v,!0,n.filter.filtersNodes());else{const D=tn(e);if(".priority"===D)v=n.filter.updatePriority(t.eventCache.getNode(),r),g=gf(t,v,h.isFullyInitialized(),h.isFiltered());else{const k=Un(e),N=h.getNode().getImmediateChild(D);let U;if(Bt(k))U=r;else{const X=E.getCompleteChild(D);U=null!=X?".priority"===z_(k)&&X.getChild(fD(k)).isEmpty()?X:X.updateChild(k,r):jt.EMPTY_NODE}g=N.equals(U)?t:gf(t,n.filter.updateChild(h.getNode(),D,U,k,E,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return g}function QM(n,t){return n.eventCache.isCompleteForChild(t)}function WD(n,t,e){return e.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function pg(n,t,e,r,i,o,c,h){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let v,g=t;v=Bt(e)?r:new Bn(null).setTree(e,r);const E=t.serverCache.getNode();return v.children.inorderTraversal((D,k)=>{if(E.hasChild(D)){const U=WD(0,t.serverCache.getNode().getImmediateChild(D),k);g=cv(n,g,new In(D),U,i,o,c,h)}}),v.children.inorderTraversal((D,k)=>{const N=!t.serverCache.isCompleteForChild(D)&&void 0===k.value;if(!E.hasChild(D)&&!N){const X=WD(0,t.serverCache.getNode().getImmediateChild(D),k);g=cv(n,g,new In(D),X,i,o,c,h)}}),g}class e1{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new X_(r.getIndex()),o=function LM(n){return n.loadsAllData()?new X_(n.getIndex()):n.hasLimit()?new ev(n):new Id(n)}(r);this.processor_=function WM(n){return{filter:n}}(o);const c=e.serverCache,h=e.eventCache,g=i.updateFullNode(jt.EMPTY_NODE,c.getNode(),null),v=o.updateFullNode(jt.EMPTY_NODE,h.getNode(),null),E=new pu(g,c.isFullyInitialized(),i.filtersNodes()),D=new pu(v,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=lg(D,E),this.eventGenerator_=new ag(this.query_)}get query(){return this.query_}}function JD(n,t){const e=Td(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!Bt(t)&&!e.getImmediateChild(tn(t)).isEmpty())?e.getChild(t):null}function gg(n){return 0===n.eventRegistrations_.length}function t1(n,t,e){const r=[];if(e){(0,F.hu)(null==t,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const c=o.createCancelEvent(e,i);c&&r.push(c)})}if(t){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const c=n.eventRegistrations_[o];if(c.matches(t)){if(t.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function V0(n,t,e,r){t.type===Zo.MERGE&&null!==t.source.queryId&&((0,F.hu)(Td(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(iv(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function KM(n,t,e,r,i){const o=new zD;let c,h;if(e.type===Zo.OVERWRITE){const v=e;v.source.fromUser?c=F0(n,t,v.path,v.snap,r,i,o):((0,F.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||t.serverCache.isFiltered()&&!Bt(v.path),c=cv(n,t,v.path,v.snap,r,i,h,o))}else if(e.type===Zo.MERGE){const v=e;v.source.fromUser?c=function fg(n,t,e,r,i,o,c){let h=t;return r.foreach((g,v)=>{const E=qn(e,g);QM(t,tn(E))&&(h=F0(n,h,E,v,i,o,c))}),r.foreach((g,v)=>{const E=qn(e,g);QM(t,tn(E))||(h=F0(n,h,E,v,i,o,c))}),h}(n,t,v.path,v.children,r,i,o):((0,F.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||t.serverCache.isFiltered(),c=pg(n,t,v.path,v.children,r,i,h,o))}else if(e.type===Zo.ACK_USER_WRITE){const v=e;c=v.revert?function XM(n,t,e,r,i,o){let c;if(null!=hg(r,e))return t;{const h=new lv(r,t,i),g=t.eventCache.getNode();let v;if(Bt(e)||".priority"===tn(e)){let E;if(t.serverCache.isFullyInitialized())E=ov(r,Td(t));else{const D=t.serverCache.getNode();(0,F.hu)(D instanceof jt,"serverChildren would be complete if leaf node"),E=k0(r,D)}E=E,v=n.filter.updateFullNode(g,E,o)}else{const E=tn(e);let D=av(r,E,t.serverCache);null==D&&t.serverCache.isCompleteForChild(E)&&(D=g.getImmediateChild(E)),v=null!=D?n.filter.updateChild(g,E,D,Un(e),h,o):t.eventCache.getNode().hasChild(E)?n.filter.updateChild(g,E,jt.EMPTY_NODE,Un(e),h,o):g,v.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=ov(r,Td(t)),c.isLeafNode()&&(v=n.filter.updateFullNode(v,c,o)))}return c=t.serverCache.isFullyInitialized()||null!=hg(r,wn()),gf(t,v,c,n.filter.filtersNodes())}}(n,t,v.path,r,i,o):function JM(n,t,e,r,i,o,c){if(null!=hg(i,e))return t;const h=t.serverCache.isFiltered(),g=t.serverCache;if(null!=r.value){if(Bt(e)&&g.isFullyInitialized()||g.isCompleteForPath(e))return cv(n,t,e,g.getNode().getChild(e),i,o,h,c);if(Bt(e)){let v=new Bn(null);return g.getNode().forEachChild(Ho,(E,D)=>{v=v.set(new In(E),D)}),pg(n,t,e,v,i,o,h,c)}return t}{let v=new Bn(null);return r.foreach((E,D)=>{const k=qn(e,E);g.isCompleteForPath(k)&&(v=v.set(E,g.getNode().getChild(k)))}),pg(n,t,e,v,i,o,h,c)}}(n,t,v.path,v.affectedTree,r,i,o)}else{if(e.type!==Zo.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+e.type);c=function KD(n,t,e,r,i){const o=t.serverCache;return Ad(n,BD(t,o.getNode(),o.isFullyInitialized()||Bt(e),o.isFiltered()),e,r,N0,i)}(n,t,e.path,r,o)}const g=o.getChanges();return function is(n,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=iv(n);(e.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&e.push(AD(iv(t)))}}(t,c,g),{viewCache:c,changes:g}}(n.processor_,i,t,e,r);return function YD(n,t){(0,F.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,F.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,B0(n,o.changes,o.viewCache.eventCache.getNode(),null)}function B0(n,t,e,r){return function LD(n,t,e,r){const i=[],o=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(function xD(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),pf(n,i,"child_removed",t,r,e),pf(n,i,"child_added",t,r,e),pf(n,i,"child_moved",o,r,e),pf(n,i,"child_changed",t,r,e),pf(n,i,"value",t,r,e),i}(n.eventGenerator_,t,e,r?[r]:n.eventRegistrations_)}let xd,mg;class j0{constructor(){this.views=new Map}}function XD(n,t,e,r){const i=t.source.queryId;if(null!==i){const o=n.views.get(i);return(0,F.hu)(null!=o,"SyncTree gave us an op for an invalid query."),V0(o,t,e,r)}{let o=[];for(const c of n.views.values())o=o.concat(V0(c,t,e,r));return o}}function eT(n,t,e,r,i){const c=n.views.get(t._queryIdentifier);if(!c){let h=ov(e,i?r:null),g=!1;h?g=!0:r instanceof jt?(h=k0(e,r),g=!1):(h=jt.EMPTY_NODE,g=!1);const v=lg(new pu(h,g,!1),new pu(r,i,!1));return new e1(t,v)}return c}function Z0(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function mu(n,t){let e=null;for(const r of n.views.values())e=e||JD(r,t);return e}function G0(n,t){return t._queryParams.loadsAllData()?uv(n):n.views.get(t._queryIdentifier)}function $0(n,t){return null!=G0(n,t)}function _u(n){return null!=uv(n)}function uv(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let rT=1;class z0{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Bn(null),this.pendingWriteTree_=function zM(){return{visibleWrites:rs.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dv(n,t,e,r,i){return function qM(n,t,e,r,i){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:t,snap:e,writeId:r,visible:i}),i&&(n.visibleWrites=cg(n.visibleWrites,t,e)),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r,i),i?mc(n,new Dd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function vu(n,t,e=!1){const r=function jD(n,t){for(let e=0;e<n.allWrites.length;e++){const r=n.allWrites[e];if(r.writeId===t)return r}return null}(n.pendingWriteTree_,t);if(function HD(n,t){const e=n.allWrites.findIndex(h=>h.writeId===t);(0,F.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[e];n.allWrites.splice(e,1);let i=r.visible,o=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=e&&T0(h,r.path)?i=!1:Bo(r.path,h.path)&&(o=!0)),c--}return!!i&&(o?(function qD(n){n.visibleWrites=ZD(n.allWrites,GM,wn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Da(n.visibleWrites,r.path):ri(r.children,g=>{n.visibleWrites=Da(n.visibleWrites,qn(r.path,g))}),!0))}(n.pendingWriteTree_,t)){let o=new Bn(null);return null!=r.snap?o=o.set(wn(),!0):ri(r.children,c=>{o=o.set(new In(c),!0)}),mc(n,new rv(r.path,o,e))}return[]}function hv(n,t,e){return mc(n,new Dd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function sT(n,t,e,r){const i=t._path,o=n.syncPointTree_.get(i);let c=[];if(o&&("default"===t._queryIdentifier||$0(o,t))){const h=function tT(n,t,e,r){const i=t._queryIdentifier,o=[];let c=[];const h=_u(n);if("default"===i)for(const[g,v]of n.views.entries())c=c.concat(t1(v,e,r)),gg(v)&&(n.views.delete(g),v.query._queryParams.loadsAllData()||o.push(v.query));else{const g=n.views.get(i);g&&(c=c.concat(t1(g,e,r)),gg(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||o.push(g.query)))}return h&&!_u(n)&&o.push(new(function H0(){return(0,F.hu)(xd,"Reference.ts has not been loaded"),xd}())(t._repo,t._path)),{removed:o,events:c}}(o,t,e,r);(function q0(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const g=h.removed;c=h.events;const v=-1!==g.findIndex(D=>D._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(i,(D,k)=>_u(k));if(v&&!E){const D=n.syncPointTree_.subtree(i);if(!D.isEmpty()){const k=function u1(n){return n.fold((t,e,r)=>{if(e&&_u(e))return[uv(e)];{let i=[];return e&&(i=Z0(e)),ri(r,(o,c)=>{i=i.concat(c)}),i}})}(D);for(let N=0;N<k.length;++N){const U=k[N],X=U.query,pe=fv(n,U);n.listenProvider_.startListening(vf(X),_g(n,X),pe.hashFn,pe.onComplete)}}}!E&&g.length>0&&!r&&(v?n.listenProvider_.stopListening(vf(t),null):g.forEach(D=>{const k=n.queryToTagMap.get(vg(D));n.listenProvider_.stopListening(vf(D),k)})),function rF(n,t){for(let e=0;e<t.length;++e){const r=t[e];if(!r._queryParams.loadsAllData()){const i=vg(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,g)}return c}function l1(n,t,e){const r=t._path;let i=null,o=!1;n.syncPointTree_.foreachOnPath(r,(D,k)=>{const N=ns(D,r);i=i||mu(k,N),o=o||_u(k)});let h,c=n.syncPointTree_.get(r);c?(o=o||_u(c),i=i||mu(c,wn())):(c=new j0,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=i?h=!0:(h=!1,i=jt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((k,N)=>{const U=mu(N,wn());U&&(i=i.updateImmediateChild(k,U))}));const g=$0(c,t);if(!g&&!t._queryParams.loadsAllData()){const D=vg(t);(0,F.hu)(!n.queryToTagMap.has(D),"View does not exist, but we have a tag");const k=function d1(){return rT++}();n.queryToTagMap.set(D,k),n.tagToQueryMap.set(k,D)}let E=function s1(n,t,e,r,i,o){const c=eT(n,t,r,i,o);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function U0(n,t){n.eventRegistrations_.push(t)}(c,e),function n1(n,t){const e=n.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Vn,(o,c)=>{r.push(hf(o,c))}),e.isFullyInitialized()&&r.push(AD(e.getNode())),B0(n,r,e.getNode(),t)}(c,e)}(c,t,e,Sd(n.pendingWriteTree_,r),i,h);if(!g&&!o){const D=G0(c,t);E=E.concat(function h1(n,t,e){const r=t._path,i=_g(n,t),o=fv(n,e),c=n.listenProvider_.startListening(vf(t),i,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,F.hu)(!_u(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((v,E,D)=>{if(!Bt(v)&&E&&_u(E))return[uv(E).query];{let k=[];return E&&(k=k.concat(Z0(E).map(N=>N.query))),ri(D,(N,U)=>{k=k.concat(U)}),k}});for(let v=0;v<g.length;++v){const E=g[v];n.listenProvider_.stopListening(vf(E),_g(n,E))}}return c}(n,t,D))}return E}function Y0(n,t,e){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(t,(c,h)=>{const v=mu(h,ns(c,t));if(v)return v});return $M(i,t,o,e,!0)}function mc(n,t){return c1(t,n.syncPointTree_,null,Sd(n.pendingWriteTree_,wn()))}function c1(n,t,e,r){if(Bt(n.path))return W0(n,t,e,r);{const i=t.get(wn());null==e&&null!=i&&(e=mu(i,wn()));let o=[];const c=tn(n.path),h=n.operationForChild(c),g=t.children.get(c);if(g&&h){const v=e?e.getImmediateChild(c):null,E=P0(r,c);o=o.concat(c1(h,g,v,E))}return i&&(o=o.concat(XD(i,n,r,e))),o}}function W0(n,t,e,r){const i=t.get(wn());null==e&&null!=i&&(e=mu(i,wn()));let o=[];return t.children.inorderTraversal((c,h)=>{const g=e?e.getImmediateChild(c):null,v=P0(r,c),E=n.operationForChild(c);E&&(o=o.concat(W0(E,h,g,v)))}),i&&(o=o.concat(XD(i,n,r,e))),o}function fv(n,t){const e=t.query,r=_g(n,e);return{hashFn:()=>(function L0(n){return n.viewCache_.serverCache.getNode()}(t)||jt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function XN(n,t,e){const r=oT(n,e);if(r){const i=yg(r),o=i.path,c=i.queryId,h=ns(o,t);return pv(n,o,new og(E0(c),h))}return[]}(n,e._path,r):function JN(n,t){return mc(n,new og({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const o=function cM(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const r=new Error(n+" at "+t._path.toString()+": "+e);return r.code=n.toUpperCase(),r}(i,e);return sT(n,e,null,o)}}}}function _g(n,t){const e=vg(t);return n.queryToTagMap.get(e)}function vg(n){return n._path.toString()+"$"+n._queryIdentifier}function oT(n,t){return n.tagToQueryMap.get(t)}function yg(n){const t=n.indexOf("$");return(0,F.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new In(n.substr(0,t))}}function pv(n,t,e){const r=n.syncPointTree_.get(t);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),XD(r,e,Sd(n.pendingWriteTree_,t),null)}function vf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function nT(){return(0,F.hu)(mg,"Reference.ts has not been loaded"),mg}())(n._repo,n._path):n}class bg{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new bg(e)}node(){return this.node_}}class K0{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=qn(this.path_,t);return new K0(this.syncTree_,e)}node(){return Y0(this.syncTree_,this.path_)}}const f1=function(n,t,e){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?sF(n[".sv"],t,e):"object"==typeof n[".sv"]?p1(n[".sv"],t):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},sF=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,F.hu)(!1,"Unexpected server value: "+n)},p1=function(n,t,e){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,F.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},aT=function(n,t,e,r){return lT(t,new K0(e,n),r)},Q0=function(n,t,e){return lT(n,new bg(t),e)};function lT(n,t,e){const r=n.getPriority().val(),i=f1(r,t.getImmediateChild(".priority"),e);let o;if(n.isLeafNode()){const c=n,h=f1(c.getValue(),t,e);return h!==c.getValue()||i!==c.getPriority().val()?new wd(h,er(i)):n}{const c=n;return o=c,i!==c.getPriority().val()&&(o=o.updatePriority(new wd(i))),c.forEachChild(Vn,(h,g)=>{const v=lT(g,t.getImmediateChild(h),e);v!==g&&(o=o.updateImmediateChild(h,v))}),o}}class J0{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function yf(n,t){let e=t instanceof In?t:new In(t),r=n,i=tn(e);for(;null!==i;){const o=(0,F.DV)(r.node.children,i)||{children:{},childCount:0};r=new J0(i,r,o),e=Un(e),i=tn(e)}return r}function Md(n){return n.node.value}function to(n,t){n.node.value=t,mv(n)}function cT(n){return n.node.childCount>0}function gv(n,t){ri(n.node.children,(e,r)=>{t(new J0(e,n,r))})}function uT(n,t,e,r){e&&!r&&t(n),gv(n,i=>{uT(i,t,!0,r)}),e&&r&&t(n)}function bf(n){return new In(null===n.parent?n.name:bf(n.parent)+"/"+n.name)}function mv(n){null!==n.parent&&function g1(n,t,e){const r=function X0(n){return void 0===Md(n)&&!cT(n)}(e),i=(0,F.r3)(n.node.children,t);r&&i?(delete n.node.children[t],n.node.childCount--,mv(n)):!r&&!i&&(n.node.children[t]=e.node,n.node.childCount++,mv(n))}(n.parent,n.name,n)}const dT=/[\[\].#$\/\u0000-\u001F\u007F]/,m1=/[\[\].#$\u0000-\u001F\u007F]/,tw=10485760,_v=function(n){return"string"==typeof n&&0!==n.length&&!dT.test(n)},vv=function(n){return"string"==typeof n&&0!==n.length&&!m1.test(n)},wf=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!vd(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},Ta=function(n,t,e,r){r&&void 0===t||wg((0,F.gK)(n,"value"),t,e)},wg=function(n,t,e){const r=e instanceof In?new TM(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+jo(r));if("function"==typeof t)throw new Error(n+"contains a function "+jo(r)+" with contents = "+t.toString());if(vd(t))throw new Error(n+"contains "+t.toString()+" "+jo(r));if("string"==typeof t&&t.length>tw/3&&(0,F.ug)(t)>tw)throw new Error(n+"contains a string greater than "+tw+" utf8 bytes "+jo(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,o=!1;if(ri(t,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(o=!0,!_v(c)))throw new Error(n+" contains an invalid key ("+c+") "+jo(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function pD(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,F.ug)(t),gD(n)})(r,c),wg(n,h,r),function SM(n){const t=n.parts_.pop();n.byteLength_-=(0,F.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+jo(r)+" in addition to actual children.")}},hT=function(n,t,e,r){if(r&&void 0===t)return;const i=(0,F.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];ri(t,(c,h)=>{const g=new In(c);if(wg(i,h,qn(e,g)),".priority"===z_(g)&&!wf(h))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(g)}),function(n,t){let e,r;for(e=0;e<t.length;e++){r=t[e];const o=Jp(r);for(let c=0;c<o.length;c++)if((".priority"!==o[c]||c!==o.length-1)&&!_v(o[c]))throw new Error(n+"contains an invalid key ("+o[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(DM);let i=null;for(e=0;e<t.length;e++){if(r=t[e],null!==i&&Bo(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},nw=function(n,t,e){if(!e||void 0!==t){if(vd(t))throw new Error((0,F.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!wf(t))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Cg=function(n,t,e,r){if(!(r&&void 0===e||_v(e)))throw new Error((0,F.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Cf=function(n,t,e,r){if(!(r&&void 0===e||vv(e)))throw new Error((0,F.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Go=function(n,t){if(".info"===tn(t))throw new Error(n+" failed = Can't modify data under /.info/")},v1=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!_v(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),vv(n)}(e))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class rw{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Eg(n,t){let e=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null!==e&&!a0(o,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:o}),e.events.push(i)}e&&n.eventLists_.push(e)}function iw(n,t,e){Eg(n,e),sw(n,r=>a0(r,t))}function $o(n,t,e){Eg(n,e),sw(n,r=>Bo(r,t)||Bo(t,r))}function sw(n,t){n.recursionDepth_++;let e=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(t(i.path)?(ow(n.eventLists_[r]),n.eventLists_[r]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function ow(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const r=e.getEventRunner();lu&&Hr("event: "+e.toString()),nf(r)}}}const yv="repo_interrupt";class y1{constructor(t,e,r,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pc(),this.transactionQueueTree_=new J0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function aw(n){const e=n.infoData_.getNode(new In(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Ig(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:aw(n)})}function gT(n,t,e,r,i){n.dataUpdateCount++;const o=new In(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(i)if(r){const g=(0,F.UI)(e,v=>er(v));c=function tF(n,t,e,r){const i=oT(n,r);if(i){const o=yg(i),c=o.path,h=o.queryId,g=ns(c,t),v=Bn.fromObject(e);return pv(n,c,new ff(E0(h),g,v))}return[]}(n.serverSyncTree_,o,g,i)}else{const g=er(e);c=function eF(n,t,e,r){const i=oT(n,r);if(null!=i){const o=yg(i),c=o.path,h=o.queryId,g=ns(c,t);return pv(n,c,new Dd(E0(h),g,e))}return[]}(n.serverSyncTree_,o,g,i)}else if(r){const g=(0,F.UI)(e,v=>er(v));c=function iT(n,t,e){const r=Bn.fromObject(e);return mc(n,new ff({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,o,g)}else{const g=er(e);c=hv(n.serverSyncTree_,o,g)}let h=o;c.length>0&&(h=yu(n,o)),$o(n.eventQueue_,h,c)}function b1(n,t){bv(n,"connected",t),!1===t&&function cF(n){zo(n,"onDisconnectEvents");const t=Ig(n),e=pc();b0(n.onDisconnect_,wn(),(i,o)=>{const c=aT(i,o,n.serverSyncTree_,t);sg(e,i,c)});let r=[];b0(e,wn(),(i,o)=>{r=r.concat(hv(n.serverSyncTree_,i,o));const c=Dv(n,i);yu(n,c)}),n.onDisconnect_=pc(),$o(n.eventQueue_,wn(),r)}(n)}function bv(n,t,e){const r=new In("/.info/"+t),i=er(e);n.infoData_.updateSnapshot(r,i);const o=hv(n.infoSyncTree_,r,i);$o(n.eventQueue_,r,o)}function wv(n){return n.nextWriteId_++}function lw(n,t,e,r,i){zo(n,"set",{path:t.toString(),value:e,priority:r});const o=Ig(n),c=er(e,r),h=Y0(n.serverSyncTree_,t),g=Q0(c,h,o),v=wv(n),E=dv(n.serverSyncTree_,t,g,v,!0);Eg(n.eventQueue_,E),n.server_.put(t.toString(),c.val(!0),(k,N)=>{const U="ok"===k;U||bi("set at "+t+" failed: "+k);const X=vu(n.serverSyncTree_,v,!U);$o(n.eventQueue_,t,X),_c(0,i,k,N)});const D=Dv(n,t);yu(n,D),$o(n.eventQueue_,D,[])}function uF(n,t,e){n.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&tv(n.onDisconnect_,t),_c(0,e,r,i)})}function C1(n,t,e,r){const i=er(e);n.server_.onDisconnectPut(t.toString(),i.val(!0),(o,c)=>{"ok"===o&&sg(n.onDisconnect_,t,i),_c(0,r,o,c)})}function cw(n,t,e){let r;r=".info"===tn(t._path)?sT(n.infoSyncTree_,t,e):sT(n.serverSyncTree_,t,e),iw(n.eventQueue_,t._path,r)}function mT(n){n.persistentConnection_&&n.persistentConnection_.interrupt(yv)}function zo(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Hr(e,...t)}function _c(n,t,e,r){t&&nf(()=>{if("ok"===e)t(null);else{const i=(e||"error").toUpperCase();let o=i;r&&(o+=": "+r);const c=new Error(o);c.code=i,t(c)}})}function Dg(n,t,e){return Y0(n.serverSyncTree_,t,e)||jt.EMPTY_NODE}function Ev(n,t=n.transactionQueueTree_){if(t||hw(n,t),Md(t)){const e=D1(n,t);(0,F.hu)(e.length>0,"Sending zero length transaction queue"),e.every(i=>0===i.status)&&function dw(n,t,e){const r=e.map(v=>v.currentWriteId),i=Dg(n,t,r);let o=i;const c=i.hash();for(let v=0;v<e.length;v++){const E=e[v];(0,F.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const D=ns(t,E.path);o=o.updateChild(D,E.currentOutputSnapshotRaw)}const h=o.val(!0),g=t;n.server_.put(g.toString(),h,v=>{zo(n,"transaction put response",{path:g.toString(),status:v});let E=[];if("ok"===v){const D=[];for(let k=0;k<e.length;k++)e[k].status=2,E=E.concat(vu(n.serverSyncTree_,e[k].currentWriteId)),e[k].onComplete&&D.push(()=>e[k].onComplete(null,!0,e[k].currentOutputSnapshotResolved)),e[k].unwatcher();hw(n,yf(n.transactionQueueTree_,t)),Ev(n,n.transactionQueueTree_),$o(n.eventQueue_,t,E);for(let k=0;k<D.length;k++)nf(D[k])}else{if("datastale"===v)for(let D=0;D<e.length;D++)e[D].status=3===e[D].status?4:0;else{bi("transaction at "+g.toString()+" failed: "+v);for(let D=0;D<e.length;D++)e[D].status=4,e[D].abortReason=v}yu(n,t)}},c)}(n,bf(t),e)}else cT(t)&&gv(t,e=>{Ev(n,e)})}function yu(n,t){const e=I1(n,t),r=bf(e);return function Iv(n,t,e){if(0===t.length)return;const r=[];let i=[];const c=t.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<t.length;h++){const g=t[h],v=ns(e,g.path);let D,E=!1;if((0,F.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)E=!0,D=g.abortReason,i=i.concat(vu(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)E=!0,D="maxretry",i=i.concat(vu(n.serverSyncTree_,g.currentWriteId,!0));else{const k=Dg(n,g.path,c);g.currentInputSnapshot=k;const N=t[h].update(k.val());if(void 0!==N){wg("transaction failed: Data returned ",N,g.path);let U=er(N);"object"==typeof N&&null!=N&&(0,F.r3)(N,".priority")||(U=U.updatePriority(k.getPriority()));const pe=g.currentWriteId,Be=Ig(n),We=Q0(U,k,Be);g.currentOutputSnapshotRaw=U,g.currentOutputSnapshotResolved=We,g.currentWriteId=wv(n),c.splice(c.indexOf(pe),1),i=i.concat(dv(n.serverSyncTree_,g.path,We,g.currentWriteId,g.applyLocally)),i=i.concat(vu(n.serverSyncTree_,pe,!0))}else E=!0,D="nodata",i=i.concat(vu(n.serverSyncTree_,g.currentWriteId,!0))}$o(n.eventQueue_,e,i),i=[],E&&(t[h].status=2,setTimeout(t[h].unwatcher,Math.floor(0)),t[h].onComplete&&r.push("nodata"===D?()=>t[h].onComplete(null,!1,t[h].currentInputSnapshot):()=>t[h].onComplete(new Error(D),!1,null)))}hw(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)nf(r[h]);Ev(n,n.transactionQueueTree_)}(n,D1(n,e),r),r}function I1(n,t){let e,r=n.transactionQueueTree_;for(e=tn(t);null!==e&&void 0===Md(r);)r=yf(r,e),e=tn(t=Un(t));return r}function D1(n,t){const e=[];return T1(n,t,e),e.sort((r,i)=>r.order-i.order),e}function T1(n,t,e){const r=Md(t);if(r)for(let i=0;i<r.length;i++)e.push(r[i]);gv(t,i=>{T1(n,i,e)})}function hw(n,t){const e=Md(t);if(e){let r=0;for(let i=0;i<e.length;i++)2!==e[i].status&&(e[r]=e[i],r++);e.length=r,to(t,e.length>0?e:void 0)}gv(t,r=>{hw(n,r)})}function Dv(n,t){const e=bf(I1(n,t)),r=yf(n.transactionQueueTree_,t);return function ew(n,t,e){let r=e?n:n.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{fw(n,i)}),fw(n,r),uT(r,i=>{fw(n,i)}),e}function fw(n,t){const e=Md(t);if(e){const r=[];let i=[],o=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,F.hu)(o===c-1,"All SENT items should be at beginning of queue."),o=c,e[c].status=3,e[c].abortReason="set"):((0,F.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),i=i.concat(vu(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&r.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===o?to(t,void 0):e.length=o+1,$o(n.eventQueue_,bf(t),i);for(let c=0;c<r.length;c++)nf(r[c])}}const pw=function(n,t){const e=vT(n),r=e.namespace;return"firebase.com"===e.domain&&Ea(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&Ea("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&bi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new V_(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,t,"",r!==e.subdomain),path:new In(e.pathString)}},vT=function(n){let t="",e="",r="",i="",o="",c=!0,h="https",g=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let E=n.indexOf("/");-1===E&&(E=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),t=n.substring(0,Math.min(E,D)),E<D&&(i=function S1(n){let t="";const e=n.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(n.substring(E,D)));const k=function A1(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):bi(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,D)));v=t.indexOf(":"),v>=0?(c="https"===h||"wss"===h,g=parseInt(t.substring(v+1),10)):v=t.length;const N=t.slice(0,v);if("localhost"===N.toLowerCase())e="localhost";else if(N.split(".").length<=2)e=N;else{const U=t.indexOf(".");r=t.substring(0,U).toLowerCase(),e=t.substring(U+1),o=r}"ns"in k&&(o=k.ns)}return{host:t,port:g,domain:e,subdomain:r,secure:c,scheme:h,pathString:i,namespace:o}};class gw{constructor(t,e,r,i){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class mw{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class yT{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class bT{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new F.BH;return uF(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Go("OnDisconnect.remove",this._path);const t=new F.BH;return C1(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Go("OnDisconnect.set",this._path),Ta("OnDisconnect.set",t,this._path,!1);const e=new F.BH;return C1(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Go("OnDisconnect.setWithPriority",this._path),Ta("OnDisconnect.setWithPriority",t,this._path,!1),nw("OnDisconnect.setWithPriority",e,!1);const r=new F.BH;return function dF(n,t,e,r,i){const o=er(e,r);n.server_.onDisconnectPut(t.toString(),o.val(!0),(c,h)=>{"ok"===c&&sg(n.onDisconnect_,t,o),_c(0,i,c,h)})}(this._repo,this._path,t,e,r.wrapCallback(()=>{})),r.promise}update(t){Go("OnDisconnect.update",this._path),hT("OnDisconnect.update",t,this._path,!1);const e=new F.BH;return function E1(n,t,e,r){if((0,F.xb)(e))return Hr("onDisconnect().update() called with empty data.  Don't do anything."),void _c(0,r,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(i,o)=>{"ok"===i&&ri(e,(c,h)=>{const g=er(h);sg(n.onDisconnect_,qn(t,c),g)}),_c(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class ss{constructor(t,e,r,i){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=i}get key(){return Bt(this._path)?null:z_(this._path)}get ref(){return new ks(this._repo,this._path)}get _queryIdentifier(){const t=PD(this._queryParams),e=N_(t);return"{}"===e?"default":e}get _queryObject(){return PD(this._queryParams)}isEqual(t){if(!((t=(0,F.m9)(t))instanceof ss))return!1;const e=this._repo===t._repo,r=a0(this._path,t._path);return e&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Y_(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function Ef(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Rd(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Ho){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==_l)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ia)throw new Error(r);if("string"!=typeof e)throw new Error(i)}}else if(n.getIndex()===Vn){if(null!=t&&!wf(t)||null!=e&&!wf(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof J_||n.getIndex()===g0,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Tg(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ks extends ss{constructor(t,e){super(t,e,new fu,!1)}get parent(){const t=fD(this._path);return null===t?null:new ks(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Pd{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new In(t),r=If(this.ref,t);return new Pd(this._node.getChild(e),r,Vn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new Pd(i,If(this.ref,r),Vn)))}hasChild(t){const e=new In(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function wT(n,t){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==t?If(n._root,t):n._root}function x1(n,t){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const e=pw(t,n._repo.repoInfo_.nodeAdmin);v1("refFromURL",e);const r=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ea("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),wT(n,e.path.toString())}function If(n,t){return null===tn((n=(0,F.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Cf("child","path",e,!1)):Cf("child","path",t,!1),new ks(n._repo,qn(n._path,t));var e}function CT(n,t){n=(0,F.m9)(n),Go("set",n._path),Ta("set",t,n._path,!1);const e=new F.BH;return lw(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function mF(n,t){hT("update",t,n._path,!1);const e=new F.BH;return function lF(n,t,e,r){zo(n,"update",{path:t.toString(),value:e});let i=!0;const o=Ig(n),c={};if(ri(e,(h,g)=>{i=!1,c[h]=aT(qn(t,h),er(g),n.serverSyncTree_,o)}),i)Hr("update() called with empty data.  Don't do anything."),_c(0,r,"ok",void 0);else{const h=wv(n),g=function a1(n,t,e,r){!function ZM(n,t,e,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:r,visible:!0}),n.visibleWrites=ug(n.visibleWrites,t,e),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r);const i=Bn.fromObject(e);return mc(n,new ff({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,t,c,h);Eg(n.eventQueue_,g),n.server_.merge(t.toString(),e,(v,E)=>{const D="ok"===v;D||bi("update at "+t+" failed: "+v);const k=vu(n.serverSyncTree_,h,!D),N=k.length>0?yu(n,t):t;$o(n.eventQueue_,N,k),_c(0,r,v,E)}),ri(e,v=>{const E=Dv(n,qn(t,v));yu(n,E)}),$o(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function k1(n){return function w1(n,t){const e=function nF(n,t){const e=t._path;let r=null;n.syncPointTree_.foreachOnPath(e,(v,E)=>{const D=ns(v,e);r=r||mu(E,D)});let i=n.syncPointTree_.get(e);i?r=r||mu(i,wn()):(i=new j0,n.syncPointTree_=n.syncPointTree_.set(e,i));const o=null!=r,c=o?new pu(r,!0,!1):null;return function QD(n){return iv(n.viewCache_)}(eT(i,t,Sd(n.pendingWriteTree_,t._path),o?c.getNode():jt.EMPTY_NODE,o))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(r=>{const i=er(r).withIndex(t._queryParams.getIndex()),o=hv(n.serverSyncTree_,t._path,i);return iw(n.eventQueue_,t._path,o),Promise.resolve(i)},r=>(zo(n,"get for query "+(0,F.Pz)(t)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,F.m9)(n))._repo,n).then(t=>new Pd(t,new ks(n._repo,n._path),n._queryParams.getIndex()))}class _w{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const r=e._queryParams.getIndex();return new gw("value",this,new Pd(t.snapshotNode,new ks(e._repo,e._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new mw(this,t,e):null}matches(t){return t instanceof _w&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class vw{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new mw(this,t,e):null}createEvent(t,e){(0,F.hu)(null!=t.childName,"Child events should have a childName.");const r=If(new ks(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new gw(t.type,this,new Pd(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof vw&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Tv(n,t,e,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const g=e,v=(E,D)=>{cw(n._repo,n,h),g(E,D)};v.userCallback=e.userCallback,v.context=e.context,e=v}const c=new yT(e,o||void 0),h="value"===t?new _w(c):new vw(t,c);return function Cv(n,t,e){let r;r=".info"===tn(t._path)?l1(n.infoSyncTree_,t,e):l1(n.serverSyncTree_,t,e),iw(n.eventQueue_,t._path,r)}(n._repo,n,h),()=>cw(n._repo,n,h)}function ET(n,t,e,r){return Tv(n,"value",t,e,r)}function a(n,t,e,r){return Tv(n,"child_added",t,e,r)}function l(n,t,e,r){return Tv(n,"child_changed",t,e,r)}function u(n,t,e,r){return Tv(n,"child_moved",t,e,r)}function d(n,t,e,r){return Tv(n,"child_removed",t,e,r)}function f(n,t,e){let r=null;const i=e?new yT(e):null;"value"===t?r=new _w(i):t&&(r=new vw(t,i)),cw(n._repo,n,r)}class m{}class b extends m{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Ta("endAt",this._value,t._path,!0);const e=ig(t._queryParams,this._value,this._key);if(Tg(e),Rd(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ss(t._repo,t._path,e,t._orderByCalled)}}class I extends m{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Ta("endBefore",this._value,t._path,!1);const e=function VM(n,t,e){let r,i;return n.index_===Ho?("string"==typeof t&&(t=_0(t)),i=ig(n,t,e)):(r=null==e?_l:_0(e),i=ig(n,t,r)),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(Tg(e),Rd(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ss(t._repo,t._path,e,t._orderByCalled)}}class R extends m{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Ta("startAt",this._value,t._path,!0);const e=v0(t._queryParams,this._value,this._key);if(Tg(e),Rd(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ss(t._repo,t._path,e,t._orderByCalled)}}class q extends m{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Ta("startAfter",this._value,t._path,!1);const e=function UM(n,t,e){let r;if(n.index_===Ho)"string"==typeof t&&(t=FM(t)),r=v0(n,t,e);else{let i;i=null==e?Ia:FM(e),r=v0(n,t,i)}return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(Tg(e),Rd(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ss(t._repo,t._path,e,t._orderByCalled)}}class Ee extends m{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ss(t._repo,t._path,function MD(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class Ye extends m{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ss(t._repo,t._path,function kD(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class ke extends m{constructor(t){super(),this._path=t}_apply(t){Ef(t,"orderByChild");const e=new In(this._path);if(Bt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new J_(e),i=y0(t._queryParams,r);return Rd(i),new ss(t._repo,t._path,i,!0)}}class sn extends m{_apply(t){Ef(t,"orderByKey");const e=y0(t._queryParams,Ho);return Rd(e),new ss(t._repo,t._path,e,!0)}}class no extends m{_apply(t){Ef(t,"orderByPriority");const e=y0(t._queryParams,Vn);return Rd(e),new ss(t._repo,t._path,e,!0)}}class yw extends m{_apply(t){Ef(t,"orderByValue");const e=y0(t._queryParams,g0);return Rd(e),new ss(t._repo,t._path,e,!0)}}class ww extends m{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Ta("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new b(this._value,this._key)._apply(new R(this._value,this._key)._apply(t))}}function ro(n,...t){let e=(0,F.m9)(n);for(const r of t)e=r._apply(e);return e}(function r1(n){(0,F.hu)(!xd,"__referenceConstructor has already been defined"),xd=n})(ks),function o1(n){(0,F.hu)(!mg,"__referenceConstructor has already been defined"),mg=n}(ks);const Sg={};function _F(n,t,e,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Ea("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hr("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,v,c=pw(o,i),h=c.repoInfo;"undefined"!=typeof process&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(g=!0,o=`http://${v}?ns=${h.namespace}`,c=pw(o,i),h=c.repoInfo):g=!c.repoInfo.secure;const E=i&&g?new Kp(Kp.OWNER):new fM(n.name,n.options,t);v1("Invalid Firebase Database URL",c),Bt(c.path)||Ea("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function Zj(n,t,e,r){let i=Sg[t.name];i||(i={},Sg[t.name]=i);let o=i[n.toURLString()];return o&&Ea("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new y1(n,false,e,r),i[n.toURLString()]=o,o}(h,n,E,new hM(n.name,e));return new $j(D,n)}class $j{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function pT(n,t,e){if(n.stats_=du(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new fc(n.repoInfo_,(r,i,o,c)=>{gT(n,r,i,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>b1(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new hu(n.repoInfo_,t,(r,i,o,c)=>{gT(n,r,i,o,c)},r=>{b1(n,r)},r=>{!function aF(n,t){ri(t,(e,r)=>{bv(n,e,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function YN(n,t){const e=n.toString();return Jb[e]||(Jb[e]=t()),Jb[e]}(n.repoInfo_,()=>new jM(n.stats_,n.server_)),n.infoData_=new OD,n.infoSyncTree_=new z0({startListening:(r,i,o,c)=>{let h=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(h=hv(n.infoSyncTree_,r._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),bv(n,"connected",!1),n.serverSyncTree_=new z0({startListening:(r,i,o,c)=>(n.server_.listen(r,o,i,(h,g)=>{const v=c(h,g);$o(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ks(this._repo,wn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function qj(n,t){const e=Sg[t];(!e||e[n.key]!==n)&&Ea(`Database ${t}(${n.repoInfo_}) has already been deleted.`),mT(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Ea("Cannot call "+t+" on a deleted database.")}}function vF(){lD.IS_TRANSPORT_INITIALIZED&&bi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function zj(){vF(),uc.forceDisallow()}function Yj(){vF(),rf.forceDisallow(),uc.forceAllow()}function Jj(n,t){Ub(n,t)}const eH={".sv":"timestamp"};class rH{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}hu.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},hu.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function Xj(n){Vo(yi.SDK_VERSION),(0,yi._registerComponent)(new ml.wA("database",(t,{instanceIdentifier:e})=>_F(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,yi.registerVersion)(ZI,"0.13.0",n),(0,yi.registerVersion)(ZI,"0.13.0","esm2017")}();const aH=new wa.Yd("@firebase/database-compat"),yF=function(n){aH.warn("FIREBASE WARNING: "+n)};class uH{constructor(t){this._delegate=t}cancel(t){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),r=>t(r)),e}remove(t){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),r=>t(r)),e}set(t,e){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",e,!0);const r=this._delegate.set(t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(t,e);return r&&i.then(()=>r(null),o=>r(o)),i}update(t,e){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,yF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",e,!0);const r=this._delegate.update(t);return e&&r.then(()=>e(null),i=>e(i)),r}}class dH{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Df{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Cf("DataSnapshot.child","path",t,!1),new Df(this._database,this._delegate.child(t))}hasChild(t){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Cf("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Df(this._database,e)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new Sa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class os{constructor(t,e){this.database=t,this._delegate=e}on(t,e,r,i){var o;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",e,!1);const c=os.getCancelAndContextArgs_("Query.on",r,i),h=(v,E)=>{e.call(c.context,new Df(this.database,v),E)};h.userCallback=e,h.context=c.context;const g=null===(o=c.cancel)||void 0===o?void 0:o.bind(c.context);switch(t){case"value":return ET(this._delegate,h,g),e;case"child_added":return a(this._delegate,h,g),e;case"child_removed":return d(this._delegate,h,g),e;case"child_changed":return l(this._delegate,h,g),e;case"child_moved":return u(this._delegate,h,g),e;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,F.Wj)("Query.off","callback",e,!0),(0,F.lb)("Query.off","context",r,!0),e){const i=()=>{};i.userCallback=e,i.context=r,f(this._delegate,t,i)}else f(this._delegate,t)}get(){return k1(this._delegate).then(t=>new Df(this.database,t))}once(t,e,r,i){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",e,!0);const o=os.getCancelAndContextArgs_("Query.once",r,i),c=new F.BH,h=(v,E)=>{const D=new Df(this.database,v);e&&e.call(o.context,D,E),c.resolve(D)};h.userCallback=e,h.context=o.context;const g=v=>{o.cancel&&o.cancel.call(o.context,v),c.reject(v)};switch(t){case"value":ET(this._delegate,h,g,{onlyOnce:!0});break;case"child_added":a(this._delegate,h,g,{onlyOnce:!0});break;case"child_removed":d(this._delegate,h,g,{onlyOnce:!0});break;case"child_changed":l(this._delegate,h,g,{onlyOnce:!0});break;case"child_moved":u(this._delegate,h,g,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new os(this.database,ro(this._delegate,function Ue(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ee(n)}(t)))}limitToLast(t){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new os(this.database,ro(this._delegate,function at(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ye(n)}(t)))}orderByChild(t){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new os(this.database,ro(this._delegate,function vt(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Cf("orderByChild","path",n,!1),new ke(n)}(t)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new os(this.database,ro(this._delegate,function Dn(){return new sn}()))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new os(this.database,ro(this._delegate,function Od(){return new no}()))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new os(this.database,ro(this._delegate,function bw(){return new yw}()))}startAt(t=null,e){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new os(this.database,ro(this._delegate,function B(n=null,t){return Cg("startAt","key",t,!0),new R(n,t)}(t,e)))}startAfter(t=null,e){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new os(this.database,ro(this._delegate,function te(n,t){return Cg("startAfter","key",t,!0),new q(n,t)}(t,e)))}endAt(t=null,e){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new os(this.database,ro(this._delegate,function C(n,t){return Cg("endAt","key",t,!0),new b(n,t)}(t,e)))}endBefore(t=null,e){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new os(this.database,ro(this._delegate,function M(n,t){return Cg("endBefore","key",t,!0),new I(n,t)}(t,e)))}equalTo(t,e){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new os(this.database,ro(this._delegate,function Cw(n,t){return Cg("equalTo","key",t,!0),new ww(n,t)}(t,e)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof os))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,r){const i={cancel:void 0,context:void 0};if(e&&r)i.cancel=e,(0,F.Wj)(t,"cancel",i.cancel,!0),i.context=r,(0,F.lb)(t,"context",i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error((0,F.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new Sa(this.database,new ks(this._delegate._repo,this._delegate._path))}}class Sa extends os{constructor(t,e){super(t,new ss(e._repo,e._path,new fu,!1)),this.database=t,this._delegate=e}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Sa(this.database,If(this._delegate,t))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Sa(this.database,t):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new Sa(this.database,this._delegate.root)}set(t,e){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",e,!0);const r=CT(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}update(t,e){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,yF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Go("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",e,!0);const r=mF(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function gF(n,t,e){if(Go("setWithPriority",n._path),Ta("setWithPriority",t,n._path,!1),nw("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return lw(n._repo,n._path,t,e,r.wrapCallback(()=>{})),r.promise}(this._delegate,t,e);return r&&i.then(()=>r(null),o=>r(o)),i}remove(t){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",t,!0);const e=function fF(n){return Go("remove",n._path),CT(n,null)}(this._delegate);return t&&e.then(()=>t(null),r=>t(r)),e}transaction(t,e,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,F.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,r){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function iH(n,t,e){var r;if(n=(0,F.m9)(n),Go("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==e?void 0:e.applyLocally)||void 0===r||r,o=new F.BH,h=ET(n,()=>{});return function uw(n,t,e,r,i,o){zo(n,"transaction on "+t);const c={path:t,update:e,onComplete:r,status:null,order:O_(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=Dg(n,t,void 0);c.currentInputSnapshot=h;const g=c.update(h.val());if(void 0===g)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{wg("transaction failed: Data returned ",g,c.path),c.status=0;const v=yf(n.transactionQueueTree_,t),E=Md(v)||[];let D;E.push(c),to(v,E),"object"==typeof g&&null!==g&&(0,F.r3)(g,".priority")?(D=(0,F.DV)(g,".priority"),(0,F.hu)(wf(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(Y0(n.serverSyncTree_,t)||jt.EMPTY_NODE).getPriority().val();const k=Ig(n),N=er(g,D),U=Q0(N,h,k);c.currentOutputSnapshotRaw=N,c.currentOutputSnapshotResolved=U,c.currentWriteId=wv(n);const X=dv(n.serverSyncTree_,t,U,c.currentWriteId,c.applyLocally);$o(n.eventQueue_,t,X),Ev(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(g,v,E)=>{let D=null;g?o.reject(g):(D=new Pd(E,new ks(n._repo,n._path),Vn),o.resolve(new rH(v,D)))},h,i),o.promise}(this._delegate,t,{applyLocally:r}).then(o=>new dH(o.committed,new Df(this.database,o.snapshot)));return e&&i.then(o=>e(null,o.committed,o.snapshot),o=>e(o,!1,null)),i}setPriority(t,e){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",e,!0);const r=function pF(n,t){n=(0,F.m9)(n),Go("setPriority",n._path),nw("setPriority",t,!1);const e=new F.BH;return lw(n._repo,qn(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}push(t,e){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",e,!0);const r=function M1(n,t){n=(0,F.m9)(n),Go("push",n._path),Ta("push",t,n._path,!0);const e=aw(n._repo),r=NM(e),i=If(n,r),o=If(n,r);let c;return c=null!=t?CT(o,t).then(()=>o):Promise.resolve(o),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,t),i=r.then(c=>new Sa(this.database,c));e&&i.then(()=>e(null),c=>e(c));const o=new Sa(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Go("Reference.onDisconnect",this._delegate._path),new uH(new bT(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Dw{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:zj,forceLongPolling:Yj}}useEmulator(t,e,r={}){!function Wj(n,t,e,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ea("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ea('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Kp(Kp.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);o=new Kp(c)}!function Iw(n,t,e,r){n.repoInfo_=new V_(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,t,e,o)}(this._delegate,t,e,r)}ref(t){if((0,F.Dv)("database.ref",0,1,arguments.length),t instanceof Sa){const e=x1(this._delegate,t.toString());return new Sa(this,e)}{const e=wT(this._delegate,t);return new Sa(this,e)}}refFromURL(t){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=x1(this._delegate,t);return new Sa(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function Kj(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),mT(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function Qj(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function _T(n){n.persistentConnection_&&n.persistentConnection_.resume(yv)}(n._repo)}(this._delegate)}}Dw.ServerValue={TIMESTAMP:function tH(){return eH}(),increment:n=>function nH(n){return{".sv":{increment:n}}}(n)};var fH=Object.freeze({__proto__:null,initStandalone:function hH({app:n,url:t,version:e,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){Vo(e);const c=new ml.zt("auth-internal",new ml.H0("database-standalone"));return c.setComponent(new ml.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Dw(_F(n,c,void 0,t,o),n),namespace:i}}});const pH=Dw.ServerValue;!function gH(n){n.INTERNAL.registerComponent(new ml.wA("database-compat",(t,{instanceIdentifier:e})=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new Dw(i,r)},"PUBLIC").setServiceProps({Reference:Sa,Query:os,Database:Dw,DataSnapshot:Df,enableLogging:Jj,INTERNAL:fH,ServerValue:pH}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(P_.Z);var IT=L(5363),mH=L(6063);class _H extends en.x{constructor(t=1/0,e=1/0,r=mH.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:c}=this;e||(r.push(t),!i&&r.push(o.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let c=0;c<o.length&&!t.closed;c+=r?1:2)t.next(o[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const c=e.now();let h=0;for(let g=1;g<r.length&&r[g]<=c;g+=2)h=g;h&&r.splice(0,h+1)}}}function bF(n,t,e){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:t=1/0,refCount:i=!1,scheduler:e}=n):r=null!=n?n:1/0,(0,R_.B)({connector:()=>new _H(r,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function wF(n,t){return(0,Ws.m)(t)?dn(()=>n,t):dn(()=>n)}var R1=L(9468);L(5867);const EF=new Map,CH={activated:!1,tokenObservers:[]},EH={initialized:!1,enabled:!1};function Ui(n){return EF.get(n)||CH}function vc(n,t){EF.set(n,t)}function TT(){return EH}class AH{constructor(t,e,r,i,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,ve.Z)(function*(){e.stop();try{e.pending=new F.BH,yield function xH(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new F.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const io=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function DF(n){if(!Ui(n).activated)throw io.create("use-before-activation",{appName:n.name})}function F1(n,t){return L1.apply(this,arguments)}function L1(){return(L1=(0,ve.Z)(function*({url:n,body:t},e){const r={"Content-Type":"application/json"},i=e.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const o={method:"POST",body:JSON.stringify(t),headers:r};let c,h;try{c=yield fetch(n,o)}catch(D){throw io.create("fetch-network-error",{originalErrorMessage:D.message})}if(200!==c.status)throw io.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(D){throw io.create("fetch-parse-error",{originalErrorMessage:D.message})}const g=h.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw io.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(g[1]),E=Date.now();return{token:h.token,expireTimeMillis:E+v,issuedAtTimeMillis:E}})).apply(this,arguments)}function OH(n,t){const{projectId:e,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const Tw="firebase-app-check-store";let xT=null;function SF(){return xT||(xT=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=r=>{n(r.target.result)},e.onerror=r=>{var i;t(io.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},e.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Tw,{keyPath:"compositeKey"})}}catch(e){t(io.create("storage-open",{originalErrorMessage:e.message}))}}),xT)}function U1(){return(U1=(0,ve.Z)(function*(n,t){const r=(yield SF()).transaction(Tw,"readwrite"),o=r.objectStore(Tw).put({compositeKey:n,value:t});return new Promise((c,h)=>{o.onsuccess=g=>{c()},r.onerror=g=>{var v;h(io.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const Sw=new wa.Yd("@firebase/app-check");function kF(n,t){return(0,F.hl)()?function UH(n,t){return function AF(n,t){return U1.apply(this,arguments)}(function MF(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Sw.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function RF(){return TT().enabled}function PF(){return H1.apply(this,arguments)}function H1(){return(H1=(0,ve.Z)(function*(){const n=TT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ZH={error:"UNKNOWN_ERROR"};function GH(n){return F.US.encodeString(JSON.stringify(n),!1)}function MT(n){return q1.apply(this,arguments)}function q1(){return(q1=(0,ve.Z)(function*(n,t=!1){const e=n.app;DF(e);const r=Ui(e);let o,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&kT(g)&&(i=g)}if(!t&&i&&kT(i))return{token:i.token};let h,c=!1;if(RF()){r.exchangeTokenPromise||(r.exchangeTokenPromise=F1(OH(e,yield PF()),n.heartbeatServiceProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),c=!0);const g=yield r.exchangeTokenPromise;return yield kF(e,g),vc(e,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),c=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?Sw.warn(g.message):Sw.error(g),o=g}return i?(h={token:i.token},vc(e,Object.assign(Object.assign({},r),{token:i})),yield kF(e,i)):h=zH(o),c&&NF(e,h),h})).apply(this,arguments)}function G1(n,t){const e=Ui(n),r=e.tokenObservers.filter(i=>i.next!==t);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),vc(n,Object.assign(Object.assign({},e),{tokenObservers:r}))}function OF(n){const{app:t}=n,e=Ui(t);let r=e.tokenRefresher;r||(r=function $H(n){const{app:t}=n;return new AH((0,ve.Z)(function*(){let r;if(r=Ui(t).token?yield MT(n,!0):yield MT(n),r.error)throw r.error}),()=>!0,()=>{const e=Ui(t);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),vc(t,Object.assign(Object.assign({},e),{tokenRefresher:r}))),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function NF(n,t){const e=Ui(n).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(i){}}function kT(n){return n.expireTimeMillis-Date.now()>0}function zH(n){return{token:GH(ZH),error:n}}class YH{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Ui(this.app);for(const e of t)G1(this.app,e.next);return Promise.resolve()}}const qF="app-check-internal";!function lq(){(0,yi._registerComponent)(new ml.wA("app-check",n=>function WH(n,t){return new YH(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(qF).initialize()})),(0,yi._registerComponent)(new ml.wA(qF,n=>function KH(n){return{getToken:t=>MT(n,t),addTokenListener:t=>function Z1(n,t,e,r){const{app:i}=n,o=Ui(i),c={next:e,error:r,type:t};if(vc(i,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,c]})),o.token&&kT(o.token)){const h=o.token;Promise.resolve().then(()=>{e({token:h.token}),OF(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>OF(n))}(n,"INTERNAL",t),removeTokenListener:t=>G1(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,yi.registerVersion)("@firebase/app-check","0.5.8")}();class Aw{constructor(){return(0,gn.vb)("app-check")}}"undefined"!=typeof window&&window;var PT=L(127);const K1=new s.OlP("angularfire2.auth.use-emulator"),Q1=new s.OlP("angularfire2.auth.settings"),J1=new s.OlP("angularfire2.auth.tenant-id"),X1=new s.OlP("angularfire2.auth.langugage-code"),ek=new s.OlP("angularfire2.auth.use-device-language"),tk=new s.OlP("angularfire.auth.persistence"),nk=(n,t,e,r,i,o,c,h)=>(0,Er.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=t.runOutsideAngular(()=>n.auth());if(e&&g.useEmulator(...e),r&&(g.tenantId=r),g.languageCode=i,o&&g.useDeviceLanguage(),c)for(const[v,E]of Object.entries(c))g.settings[v]=E;return h&&g.setPersistence(h),g},[e,r,i,o,c,h]);let OT=(()=>{class n{constructor(e,r,i,o,c,h,g,v,E,D,k,N){const U=new en.x,X=ze(void 0).pipe((0,IT.Q)(c.outsideAngular),dn(()=>o.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,7092)))),(0,ut.U)(()=>(0,Er.on)(e,o,r)),(0,ut.U)(pe=>nk(pe,o,h,v,E,D,g,k)),bF({bufferSize:1,refCount:!1}));if(ja(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ze(null);else{X.pipe(y()).subscribe();const Be=X.pipe(dn($e=>$e.getRedirectResult().then(xt=>xt,()=>null)),gn.iC,bF({bufferSize:1,refCount:!1})),We=X.pipe(dn($e=>new Or.y(xt=>({unsubscribe:o.runOutsideAngular(()=>$e.onAuthStateChanged(Rt=>xt.next(Rt),Rt=>xt.error(Rt),()=>xt.complete()))})))),et=X.pipe(dn($e=>new Or.y(xt=>({unsubscribe:o.runOutsideAngular(()=>$e.onIdTokenChanged(Rt=>xt.next(Rt),Rt=>xt.error(Rt),()=>xt.complete()))}))));this.authState=Be.pipe(wF(We),(0,R1.R)(c.outsideAngular),(0,IT.Q)(c.insideAngular)),this.user=Be.pipe(wF(et),(0,R1.R)(c.outsideAngular),(0,IT.Q)(c.insideAngular)),this.idToken=this.user.pipe(dn($e=>$e?(0,Tn.D)($e.getIdToken()):ze(null))),this.idTokenResult=this.user.pipe(dn($e=>$e?(0,Tn.D)($e.getIdTokenResult()):ze(null))),this.credential=(0,au.T)(Be,U,this.authState.pipe(Vr($e=>!$e))).pipe((0,ut.U)($e=>(null==$e?void 0:$e.user)?$e:null),(0,R1.R)(c.outsideAngular),(0,IT.Q)(c.insideAngular))}return(0,Er.pX)(this,X,o,{spy:{apply:(pe,Be,We)=>{(pe.startsWith("signIn")||pe.startsWith("createUser"))&&We.then(et=>U.next(et))}}})}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Er.Dh),s.LFG(Er.xv,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(gn.HU),s.LFG(K1,8),s.LFG(Q1,8),s.LFG(J1,8),s.LFG(X1,8),s.LFG(ek,8),s.LFG(tk,8),s.LFG(Aw,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pq=(()=>{class n{constructor(){PT.Z.registerVersion("angularfire",gn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[OT]}),n})();function GF(n){return null==n}function $F(n){return"function"==typeof n.set}function zF(n,t){return $F(t)?t:n.ref(t)}function YF(n,t){if(function gq(n){return"string"==typeof n}(n))return t.stringCase();if($F(n))return t.firebaseCase();if(function mq(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function xw(n,t,e="on",r=zp.z){return new Or.y(i=>{let o=null;return o=n[e](t,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===e&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===e?{unsubscribe(){null!=o&&n.off(t,o)}}:{unsubscribe(){}}}).pipe((0,ut.U)(i=>{const{snapshot:o,prevKey:c}=i;let h=null;return o.exists()&&(h=o.key),{type:t,payload:o,prevKey:c,key:h}}),(0,R_.B)())}function WF(n,t){const e=n.length;for(let r=0;r<e;r++)if(n[r].payload.key===t)return r;return-1}function yq(n,t){const{payload:e,prevKey:r,key:i}=t,o=WF(n,i),c=function vq(n,t){if(GF(t))return 0;{const e=WF(n,t);return-1===e?n.length:e+1}}(n,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let h=null;t.payload.forEach(g=>{const v={payload:g,type:"value",prevKey:h,key:g.key};return h=g.key,n=[...n,v],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==r&&(n=n.filter(g=>g.payload.key!==e.key)).splice(c,0,t)}else{if(null==r)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(h=>h.payload.key!==e.key);case"child_changed":return n.map(h=>h.payload.key===i?t:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function KF(n){return(GF(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function QF(n,t,e){return function _q(n,t,e){return xw(n,"value","once",e).pipe(dn(r=>{const i=[ze(r)];return t.forEach(o=>i.push(xw(n,o,"on",e))),(0,au.T)(...i).pipe(vi(yq,[]))}),Nb())}(n,t=KF(t),e)}function JF(n,t,e){const r=(t=KF(t)).map(i=>xw(n,i,"on",e));return(0,au.T)(...r)}function XF(n,t){return function(r,i){return YF(r,{stringCase:()=>n.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function Eq(n){return function(e){return e?YF(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function eL(n,t){return function(){return xw(n,"value","on",t)}}const Tq=new s.OlP("angularfire2.realtimeDatabaseURL"),Sq=new s.OlP("angularfire2.database.use-emulator");let tL=(()=>{class n{constructor(e,r,i,o,c,h,g,v,E,D,k,N,U,X,pe){this.schedulers=h;const Be=g,We=(0,Er.on)(e,c,r);v&&nk(We,c,E,k,N,U,D,X),this.database=(0,Er.cc)(`${We.name}.database.${i}`,"AngularFireDatabase",We.name,()=>{const et=c.runOutsideAngular(()=>We.database(i||void 0));return Be&&et.useEmulator(...Be),et},[Be])}list(e,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>zF(this.database,e));let o=i;return r&&(o=r(i)),function Iq(n,t){const e=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:XF(r,"update"),set:XF(r,"set"),push:i=>r.push(i),remove:Eq(r),snapshotChanges:i=>QF(n,i,e).pipe(gn.iC),stateChanges:i=>JF(n,i,e).pipe(gn.iC),auditTrail:i=>function bq(n,t,e){return function Cq(n,t,e){return function wq(n,t){return xw(n,"value","on",t).pipe((0,ut.U)(e=>{let r;return e.payload.forEach(i=>(r=i.key,!1)),{data:e,lastKeyToLoad:r}}))}(n,e).pipe(function Jh(...n){const t=(0,js.jO)(n);return(0,Qn.e)((e,r)=>{const i=n.length,o=new Array(i);let c=n.map(()=>!1),h=!1;for(let g=0;g<i;g++)(0,dr.Xf)(n[g]).subscribe((0,Mt.x)(r,v=>{o[g]=v,!h&&!c[g]&&(c[g]=!0,(h=c.every(zc.y))&&(c=null))},Fb.Z));e.subscribe((0,Mt.x)(r,g=>{if(h){const v=[g,...o];r.next(t?t(...v):v)}}))})}(t),(0,ut.U)(([i,o])=>{const c=i.lastKeyToLoad,h=o.map(g=>g.key);return{actions:o,lastKeyToLoad:c,loadedKeys:h}}),function oM(n){return(0,Qn.e)((t,e)=>{let r=!1,i=0;t.subscribe((0,Mt.x)(e,o=>(r||(r=!n(o,i++)))&&e.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ut.U)(i=>i.actions))}(n,JF(n,t).pipe(vi((i,o)=>[...i,o],[])),e)}(n,i,e).pipe(gn.iC),valueChanges:(i,o)=>QF(n,i,e).pipe((0,ut.U)(h=>h.map(g=>o&&o.idField?Object.assign(Object.assign({},g.payload.val()),{[o.idField]:g.key}):g.payload.val())),gn.iC)}}(o,this)}object(e){return function Dq(n,t){return{query:n,snapshotChanges:()=>eL(n,t.schedulers.outsideAngular)().pipe(gn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>eL(n,t.schedulers.outsideAngular)().pipe(gn.iC,(0,ut.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>zF(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Er.Dh),s.LFG(Er.xv,8),s.LFG(Tq,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(gn.HU),s.LFG(Sq,8),s.LFG(OT,8),s.LFG(K1,8),s.LFG(Q1,8),s.LFG(J1,8),s.LFG(X1,8),s.LFG(ek,8),s.LFG(tk,8),s.LFG(Aw,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Aq=(()=>{class n{constructor(){PT.Z.registerVersion("angularfire",gn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[tL]}),n})(),rk=(()=>{class n{constructor(e,r){this.angularFireDatabase=e,this.http=r,this.newChatUrl=Qt_apiUrl+"/newChat/",this.chatInfoUrl=Qt_apiUrl+"/getChatInfo/",this.openedChatsUrl=Qt_apiUrl+"/getOpenedChats",this.loaded=!1,this.httpOptions={headers:new Ot}}newFirebaseChat(e,r,i){const o=this.angularFireDatabase.database.ref("chats"),c={createdAt:(new Date).toString(),createdBy:r,createdWith:i};o.child(e.toString()).push(c)}getAllMessages(e){const r=this.angularFireDatabase.database.ref("chats/"+e);let i=[];return r.once("value",o=>{o.forEach(c=>{c.val().hasOwnProperty("text")&&c.val().hasOwnProperty("author")&&c.val().hasOwnProperty("date")&&i.push(c.val())}),this.loaded=!0}),i}updateMessages(e,r){return this.angularFireDatabase.database.ref("chats/"+e).limitToLast(1).on("value",o=>{this.loaded&&o.forEach(c=>{c.val().hasOwnProperty("text")&&c.val().hasOwnProperty("author")&&c.val().hasOwnProperty("date")&&r.push(c.val())})}),r}pushMessage(e,r){this.angularFireDatabase.database.ref("chats/"+e).push(r)}getPreviewMessages(e){return e.forEach(r=>{this.angularFireDatabase.database.ref("chats/"+r.chatId).limitToLast(1).on("value",o=>{o.forEach(c=>{c.val().hasOwnProperty("text")&&c.val().hasOwnProperty("author")&&c.val().hasOwnProperty("date")&&(r.lastMsg=c.val())})})}),e}newChat(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.post(this.newChatUrl+e,{},this.httpOptions)}getChatInfo(e){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.chatInfoUrl+e,this.httpOptions)}getOpenedChats(){return this.httpOptions={headers:new Ot({access_token:localStorage.getItem("access_token")})},this.http.get(this.openedChatsUrl,this.httpOptions)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(tL),s.LFG(pl))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xq(n,t){if(1&n&&(s.TgZ(0,"p",9),s._uU(1),s.qZA()),2&n){const e=s.oxw().$implicit,r=s.oxw(2);s.xp6(1),s.hij(" ",r.reduceUserDesc(e.description,50)," ")}}function Mq(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",4),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.oxw(2).createChat(o.userName)}),s._UZ(1,"img",5),s.TgZ(2,"div",6)(3,"h4",7),s._uU(4),s.qZA(),s.TgZ(5,"span"),s._uU(6),s.qZA()(),s.YNc(7,xq,2,1,"p",8),s.qZA()}if(2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(1),s.s9C("src",r.setUserImg(e.profileImage),s.LSH),s.MGl("alt","",e.userName," profile image"),s.xp6(3),s.Oqu(e.fullName),s.xp6(2),s.hij("@",e.userName,""),s.xp6(1),s.Q6J("ngIf",null!=e.description)}}function kq(n,t){if(1&n&&(s.TgZ(0,"div")(1,"h1",2),s._uU(2,"Busca acompa\xf1ante para el evento"),s.qZA(),s.YNc(3,Mq,8,5,"div",3),s.qZA()),2&n){const e=s.oxw();s.xp6(3),s.Q6J("ngForOf",e.users)}}function Rq(n,t){1&n&&(s.TgZ(0,"div")(1,"h1",7),s._uU(2,"Todav\xeda nadie sigue este evento :("),s.qZA()())}let Pq=(()=>{class n{constructor(e,r,i,o,c){this.sharedService=e,this.router=r,this.userService=i,this.cdRef=o,this.chatService=c,this.users=[],this.setUserImg=hn.setUserImg,this.reduceUserDesc=hn.reduceString}ngOnInit(){this.getUsers()}getUsers(){this.sharedService.runSpinner(!0);const e=parseInt(this.router.url.substring(this.router.url.lastIndexOf("/")+1));this.userService.getEventUsers(e).subscribe({next:r=>{this.users=r},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),console.log(r),this.sharedService.showError(6e3)}})}createChat(e){this.sharedService.runSpinner(!0),this.chatService.newChat(e).subscribe({next:r=>{if("alreadyExisted"==r.status)this.router.navigate(["/chats/"+e]);else try{this.chatService.newFirebaseChat(r.chatId,r.createdBy,e),this.router.navigate(["/chats/"+e])}catch(i){this.sharedService.showError(6e3)}},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),console.log(r),this.sharedService.showError(6e3)}})}ngAfterViewChecked(){this.cdRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(On),s.Y36(Sn),s.Y36(lc),s.Y36(s.sBO),s.Y36(rk))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-event-chats"]],decls:4,vars:2,consts:[[1,"container"],[4,"ngIf"],[1,"cl-purple"],["class","row bg-purple userEntry",3,"click",4,"ngFor","ngForOf"],[1,"row","bg-purple","userEntry",3,"click"],[1,"profileImage","col-4",3,"src","alt"],[1,"col-4"],[1,"text-white"],["class","userDesc col-3",4,"ngIf"],[1,"userDesc","col-3"]],template:function(e,r){1&e&&(s._UZ(0,"app-user-logged-navbar"),s.TgZ(1,"div",0),s.YNc(2,kq,4,1,"div",1),s.YNc(3,Rq,3,0,"div",1),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngIf",r.users.length>0),s.xp6(1),s.Q6J("ngIf",0==r.users.length))},directives:[ba,Ut,Xt],styles:["h1[_ngcontent-%COMP%]{margin-top:4%;margin-bottom:4%}.profileImage[_ngcontent-%COMP%]{width:100px;height:80px;border-radius:100%}.userEntry[_ngcontent-%COMP%]{border-radius:5px;padding:1%;margin-top:1%;margin-bottom:1%}.userEntry[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#c7b2e2}"]}),n})();function Oq(n,t){if(1&n&&(s.TgZ(0,"p",11),s._uU(1),s.qZA()),2&n){const e=s.oxw().$implicit,r=s.oxw(2);s.xp6(1),s.hij(" \u2022 ",r.reducePreviewMsg(e.lastMsg.text,30)," ")}}function Nq(n,t){if(1&n&&(s.TgZ(0,"p",12),s._uU(1),s.qZA()),2&n){const e=s.oxw().$implicit,r=s.oxw(2);s.xp6(1),s.hij(" \u2713 ",r.reducePreviewMsg(e.lastMsg.text,30)," ")}}function Fq(n,t){if(1&n&&(s.TgZ(0,"p",13),s._uU(1),s.qZA()),2&n){const e=s.oxw().$implicit;s.xp6(1),s.hij(" Saluda a ",e.fullName,"!! ")}}function Lq(n,t){if(1&n&&(s.TgZ(0,"div",4),s._UZ(1,"img",5),s.TgZ(2,"div",6)(3,"h4",7),s._uU(4),s.qZA(),s.TgZ(5,"span"),s._uU(6),s.qZA()(),s.YNc(7,Oq,2,1,"p",8),s.YNc(8,Nq,2,1,"p",9),s.YNc(9,Fq,2,1,"p",10),s.qZA()),2&n){const e=t.$implicit,r=s.oxw(2);s.MGl("routerLink","/chats/",e.userName,""),s.xp6(1),s.s9C("src",r.setUserImg(e.profileImage),s.LSH),s.MGl("alt","",e.userName," profile image"),s.xp6(3),s.Oqu(e.fullName),s.xp6(2),s.hij("@",e.userName,""),s.xp6(1),s.Q6J("ngIf",null!=e.lastMsg&&""!=e.lastMsg.text&&e.lastMsg.author==e.userName),s.xp6(1),s.Q6J("ngIf",null!=e.lastMsg&&""!=e.lastMsg.text&&e.lastMsg.author!=e.userName),s.xp6(1),s.Q6J("ngIf",null==e.lastMsg)}}function Uq(n,t){if(1&n&&(s.TgZ(0,"div")(1,"h1",2),s._uU(2,"Chats abiertos"),s.qZA(),s.YNc(3,Lq,10,8,"div",3),s.qZA()),2&n){const e=s.oxw();s.xp6(3),s.Q6J("ngForOf",e.chatsOpened)}}function Vq(n,t){1&n&&(s.TgZ(0,"div")(1,"h1",7),s._uU(2,"Todav\xeda no tienes ning\xfan chat abierto :("),s.qZA()())}let Bq=(()=>{class n{constructor(e,r,i){this.cdRef=e,this.sharedService=r,this.chatService=i,this.chatsOpened=[],this.setUserImg=hn.setUserImg,this.reducePreviewMsg=hn.reduceString}ngOnInit(){this.getOpenedChats()}getOpenedChats(){this.sharedService.runSpinner(!0),this.chatService.getOpenedChats().subscribe({next:e=>{this.chatsOpened=e},complete:()=>{try{this.chatsOpened=this.chatService.getPreviewMessages(this.chatsOpened)}catch(e){this.sharedService.showError(6e3)}this.sharedService.runSpinner(!1)},error:e=>{console.log(e),this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}ngAfterViewChecked(){this.cdRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.sBO),s.Y36(On),s.Y36(rk))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-user-chats"]],decls:4,vars:2,consts:[[1,"container"],[4,"ngIf"],[1,"cl-purple"],["class","row bg-purple userEntry",3,"routerLink",4,"ngFor","ngForOf"],[1,"row","bg-purple","userEntry",3,"routerLink"],[1,"profileImage","col-4",3,"src","alt"],[1,"col-3"],[1,"text-white"],["class","lastMsgReceived col-4",4,"ngIf"],["class","lastMsgSent col-4",4,"ngIf"],["class","lastMsgNone col-4 text-warning",4,"ngIf"],[1,"lastMsgReceived","col-4"],[1,"lastMsgSent","col-4"],[1,"lastMsgNone","col-4","text-warning"]],template:function(e,r){1&e&&(s._UZ(0,"app-user-logged-navbar"),s.TgZ(1,"div",0),s.YNc(2,Uq,4,1,"div",1),s.YNc(3,Vq,3,0,"div",1),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngIf",r.chatsOpened.length>0),s.xp6(1),s.Q6J("ngIf",0==r.chatsOpened.length))},directives:[ba,Ut,Xt,xs],styles:["h1[_ngcontent-%COMP%]{margin-top:4%;margin-bottom:4%}.profileImage[_ngcontent-%COMP%]{width:100px;height:80px;border-radius:100%}.userEntry[_ngcontent-%COMP%]{border-radius:5px;padding:1%;margin-top:1%;margin-bottom:1%}.userEntry[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#c7b2e2}.lastMsgReceived[_ngcontent-%COMP%]{font-weight:700;font-size:1.5em}.lastMsgSent[_ngcontent-%COMP%], .lastMsgNone[_ngcontent-%COMP%]{font-size:1.5em}"]}),n})();const jq=["chatBox"];function Hq(n,t){if(1&n&&(s.TgZ(0,"div",16)(1,"div",17)(2,"p",18),s._uU(3),s.qZA(),s.TgZ(4,"p",19),s._uU(5),s.qZA()()()),2&n){const e=s.oxw().$implicit,r=s.oxw();s.xp6(3),s.Oqu(e.text),s.xp6(2),s.Oqu(r.formatDate(e.date))}}function qq(n,t){if(1&n&&(s.TgZ(0,"div",20)(1,"div",17)(2,"p",18),s._uU(3),s.qZA(),s.TgZ(4,"p",21),s._uU(5),s.qZA()()()),2&n){const e=s.oxw().$implicit,r=s.oxw();s.xp6(3),s.Oqu(e.text),s.xp6(2),s.Oqu(r.formatDate(e.date))}}function Zq(n,t){if(1&n&&(s.TgZ(0,"tr",13),s.YNc(1,Hq,6,2,"div",14),s.YNc(2,qq,6,2,"div",15),s.qZA()),2&n){const e=t.$implicit,r=s.oxw();s.xp6(1),s.Q6J("ngIf",e.author==r.currentUserName),s.xp6(1),s.Q6J("ngIf",e.author!=r.currentUserName)}}let Gq=(()=>{class n{constructor(e,r,i,o){this.router=e,this.chatService=r,this.sharedService=i,this.cdRef=o,this.targetUser={id:0,userName:"",fullName:"",password:null,email:"",description:null,profileImage:"../../assets/default-user.png"},this.messages=[],this.setUserImg=hn.setUserImg}ngOnInit(){this.getChatInfo()}getChatInfo(){this.sharedService.runSpinner(!0);const e=this.router.url.substring(this.router.url.lastIndexOf("/")+1);this.chatService.getChatInfo(e).subscribe({next:r=>{this.currentUserName=r.currentUserName,this.targetUser=r.targetUser,this.chatId=r.chatId,this.getAllMessages(this.chatId),this.updateMessages(this.chatId)},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{console.log(r),this.sharedService.runSpinner(!1),this.sharedService.showError(6e3)}})}getAllMessages(e){try{this.messages=this.chatService.getAllMessages(e)}catch(r){this.sharedService.showError(6e3)}}updateMessages(e){try{this.messages=this.chatService.updateMessages(e,this.messages)}catch(r){this.sharedService.showError(6e3)}}sendMsg(){null==event||event.preventDefault();const e=document.getElementById("inputMsg");if(""!=e.value&&""!=e.value.trim()){const r={author:this.currentUserName,text:e.value,date:(new Date).toString()};try{this.chatService.pushMessage(this.chatId,r)}catch(i){this.sharedService.showError(6e3)}e.value=""}}scrollToBottom(){try{this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollHeight}catch(e){}}formatDate(e){const r=new Date(e);return r.getHours()+":"+r.getMinutes()}ngAfterViewChecked(){this.cdRef.detectChanges(),this.scrollToBottom()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Sn),s.Y36(rk),s.Y36(On),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-chat"]],viewQuery:function(e,r){if(1&e&&s.Gf(jq,5),2&e){let i;s.iGM(i=s.CRH())&&(r.myScrollContainer=i.first)}},decls:16,vars:4,consts:[[1,"container"],[1,"row","chatHeader","bg-purple"],[1,"col-2",3,"src","alt"],[1,"col-4"],[1,"chatBox"],["chatBox",""],[1,"table","table-borderless"],["class","row",4,"ngFor","ngForOf"],[3,"submit"],[1,"input-group","mb-3"],["type","text","name","inputMsg","id","inputMsg",1,"form-control"],[1,"input-group-append"],["type","submit",1,"btn","btn-secondary","sendBtn"],[1,"row"],["class","msgOwn",4,"ngIf"],["class","msgExt",4,"ngIf"],[1,"msgOwn"],[1,"msgText"],[1,"text-white"],[1,"text-dark","time"],[1,"msgExt"],[1,"cl-lightpurple","time"]],template:function(e,r){1&e&&(s._UZ(0,"app-user-logged-navbar"),s.TgZ(1,"div",0)(2,"div",1),s._UZ(3,"img",2),s.TgZ(4,"h3",3),s._uU(5),s.qZA()(),s.TgZ(6,"div",4,5)(8,"table",6),s.YNc(9,Zq,3,2,"tr",7),s.qZA()(),s.TgZ(10,"form",8),s.NdJ("submit",function(){return r.sendMsg()}),s.TgZ(11,"div",9),s._UZ(12,"input",10),s.TgZ(13,"div",11)(14,"button",12),s._uU(15,"Enviar"),s.qZA()()()()()),2&e&&(s.xp6(3),s.s9C("src",r.setUserImg(r.targetUser.profileImage),s.LSH),s.MGl("alt","",r.targetUser.userName," profile image"),s.xp6(2),s.Oqu(r.targetUser.fullName),s.xp6(4),s.Q6J("ngForOf",r.messages))},directives:[ba,Xt,Ut,ga,Jr,rl],styles:[".chatHeader[_ngcontent-%COMP%]{border:3px solid black;border-radius:10px;padding:1%;margin-top:2%}.chatHeader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:100%;width:150px;height:130px}.chatHeader[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:2%;margin-left:15%;font-size:3em}.chatBox[_ngcontent-%COMP%]{overflow-y:scroll;height:600px}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}tr[_ngcontent-%COMP%]{width:100%}.time[_ngcontent-%COMP%]{font-size:.75em}.msgOwn[_ngcontent-%COMP%]{padding-left:55%}.msgOwn[_ngcontent-%COMP%]   .msgText[_ngcontent-%COMP%]{margin-top:1%;background-color:#9e73d3;border-radius:10px}.msgOwn[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{text-align:right}.msgExt[_ngcontent-%COMP%]{padding-right:55%}.msgExt[_ngcontent-%COMP%]   .msgText[_ngcontent-%COMP%]{margin-top:1%;background-color:#22272e;border-radius:10px}"]}),n})();function so(n){return null!=n&&"false"!=`${n}`}function nL(n){return Array.isArray(n)?n:[n]}function ii(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Nd(n){return n instanceof s.SBq?n.nativeElement:n}function rL(n,t=zp.z){return(0,Qn.e)((e,r)=>{let i=null,o=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=o;o=null,r.next(v)}};function g(){const v=c+n,E=t.now();if(E<v)return i=this.schedule(void 0,v-E),void r.add(i);h()}e.subscribe((0,Mt.x)(r,v=>{o=v,c=t.now(),i||(i=t.schedule(g,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{o=i=null}))})}let iL=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wq=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,r)=>this._cleanupObserver(r))}observe(e){const r=Nd(e);return new Or.y(i=>{const c=this._observeElement(r).subscribe(i);return()=>{c.unsubscribe(),this._unobserveElement(r)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const r=new en.x,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:i,stream:r,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:r,stream:i}=this._observedElements.get(e);r&&r.disconnect(),i.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(iL))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Kq=(()=>{class n{constructor(e,r,i){this._contentObserver=e,this._elementRef=r,this._ngZone=i,this.event=new s.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=so(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=function $q(n,t=0){return function zq(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(rL(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Wq),s.Y36(s.SBq),s.Y36(s.R0b))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),sL=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[iL]}),n})();const Qq=new s.OlP("cdk-dir-doc",{providedIn:"root",factory:function Jq(){return(0,s.f3M)(oe)}}),Xq=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ik,Av=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new s.vpe,e){const i=e.documentElement?e.documentElement.dir:null;this.value=function eZ(n){const t=(null==n?void 0:n.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Xq.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Qq,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Mw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();try{ik="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){ik=!1}let xv,Yo=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function Pr(n){return n===na}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ik)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.Lbi))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aL=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function lL(){if(xv)return xv;if("object"!=typeof document||!document)return xv=new Set(aL),xv;let n=document.createElement("input");return xv=new Set(aL.filter(t=>(n.setAttribute("type",t),n.type===t))),xv}let kw,Ag,sk;function NT(n){return function tZ(){if(null==kw&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>kw=!0}))}finally{kw=kw||!1}return kw}()?n:!!n.capture}function nZ(){if(null==Ag){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ag=!1,Ag;if("scrollBehavior"in document.documentElement.style)Ag=!0;else{const n=Element.prototype.scrollTo;Ag=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Ag}function cL(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function xg(n){return n.composedPath?n.composedPath()[0]:n.target}function ok(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function fk(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function Rw(n){return(0,Qn.e)((t,e)=>{(0,dr.Xf)(n).subscribe((0,Mt.x)(e,()=>e.complete(),Fb.Z)),!e.closed&&t.subscribe(e)})}let fZ=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function gZ(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const r=function pZ(n){try{return n.frameElement}catch(t){return null}}(function EZ(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(r&&(-1===pL(r)||!this.isVisible(r)))return!1;let i=e.nodeName.toLowerCase(),o=pL(e);return e.hasAttribute("contenteditable")?-1!==o:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function wZ(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===i?!!e.hasAttribute("controls")&&-1!==o:"video"===i?-1!==o&&(null!==o||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,r){return function CZ(n){return!function _Z(n){return function yZ(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function mZ(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function vZ(n){return function bZ(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||fL(n))}(e)&&!this.isDisabled(e)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Yo))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fL(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function pL(n){if(!fL(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class IZ{constructor(t,e,r,i,o=!1){this._element=t,this._checker=e,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const r=this._getFirstTabbableElement(e);return null==r||r.focus(t),!!r}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let r=0;r<e.length;r++){const i=e[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[r]):null;if(i)return i}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let r=e.length-1;r>=0;r--){const i=e[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[r]):null;if(i)return i}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe((0,Qs.q)(1)).subscribe(t)}}let DZ=(()=>{class n{constructor(e,r,i){this._checker=e,this._ngZone=r,this._document=i}create(e,r=!1){return new IZ(e,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(fZ),s.LFG(s.R0b),s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TZ=(()=>{class n{constructor(e,r,i){this._elementRef=e,this._focusTrapFactory=r,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=so(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=so(e)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const r=e.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=cL(),this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(DZ),s.Y36(oe))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[s.TTD]}),n})();function gL(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function mL(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const SZ=new s.OlP("cdk-input-modality-detector-options"),AZ={ignoreKeys:[18,17,224,91,16]},Rv=NT({passive:!0,capture:!0});let xZ=(()=>{class n{constructor(e,r,i,o){this._platform=e,this._mostRecentTarget=null,this._modality=new Ur(null),this._lastTouchMs=0,this._onKeydown=c=>{var h,g;(null===(g=null===(h=this._options)||void 0===h?void 0:h.ignoreKeys)||void 0===g?void 0:g.some(v=>v===c.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=xg(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(gL(c)?"keyboard":"mouse"),this._mostRecentTarget=xg(c))},this._onTouchstart=c=>{mL(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=xg(c))},this._options=Object.assign(Object.assign({},AZ),o),this.modalityDetected=this._modality.pipe(function uZ(n){return Vr((t,e)=>n<=e)}(1)),this.modalityChanged=this.modalityDetected.pipe(Nb()),e.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Rv),i.addEventListener("mousedown",this._onMousedown,Rv),i.addEventListener("touchstart",this._onTouchstart,Rv)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Rv),document.removeEventListener("mousedown",this._onMousedown,Rv),document.removeEventListener("touchstart",this._onTouchstart,Rv))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Yo),s.LFG(s.R0b),s.LFG(oe),s.LFG(SZ,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kZ=new s.OlP("cdk-focus-monitor-default-options"),VT=NT({passive:!0,capture:!0});let vL=(()=>{class n{constructor(e,r,i,o,c){this._ngZone=e,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new en.x,this._rootNodeFocusAndBlurListener=h=>{const g=xg(h),v="focus"===h.type?this._onFocus:this._onBlur;for(let E=g;E;E=E.parentElement)v.call(this,h,E)},this._document=o,this._detectionMode=(null==c?void 0:c.detectionMode)||0}monitor(e,r=!1){const i=Nd(e);if(!this._platform.isBrowser||1!==i.nodeType)return ze(null);const o=function iZ(n){if(function rZ(){if(null==sk){const n="undefined"!=typeof document?document.head:null;sk=!(!n||!n.createShadowRoot&&!n.attachShadow)}return sk}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(i)||this._getDocument(),c=this._elementInfo.get(i);if(c)return r&&(c.checkChildren=!0),c.subject;const h={checkChildren:r,subject:new en.x,rootNode:o};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(e){const r=Nd(e),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(e,r,i){const o=Nd(e);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([h,g])=>this._originChanged(h,r,g)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused","touch"===r),e.classList.toggle("cdk-keyboard-focused","keyboard"===r),e.classList.toggle("cdk-mouse-focused","mouse"===r),e.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const i=this._elementInfo.get(r),o=xg(e);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(e,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(e,r){this._ngZone.run(()=>e.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,VT),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,VT)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Rw(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,VT),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,VT),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,i){this._setClasses(e,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((i,o)=>{(o===e||i.checkChildren&&o.contains(e))&&r.push([o,i])}),r}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.R0b),s.LFG(Yo),s.LFG(xZ),s.LFG(oe,8),s.LFG(kZ,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RZ=(()=>{class n{constructor(e,r){this._elementRef=e,this._focusMonitor=r,this.cdkFocusChange=new s.vpe}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(r=>this.cdkFocusChange.emit(r))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(vL))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),n})();const yL="cdk-high-contrast-black-on-white",bL="cdk-high-contrast-white-on-black",pk="cdk-high-contrast-active";let wL=(()=>{class n{constructor(e,r){this._platform=e,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(pk),e.remove(yL),e.remove(bL),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(e.add(pk),e.add(yL)):2===r&&(e.add(pk),e.add(bL))}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Yo),s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PZ=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(wL))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[sL]]}),n})();class CL{}const Fd="*";function gk(n,t){return{type:7,name:n,definitions:t,options:{}}}function Pw(n,t=null){return{type:4,styles:t,timings:n}}function EL(n,t=null){return{type:2,steps:n,options:t}}function yc(n){return{type:6,styles:n,offset:null}}function mk(n,t,e){return{type:0,name:n,styles:t,options:e}}function IL(n){return{type:5,steps:n}}function Ow(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function DL(n){Promise.resolve(null).then(n)}class Nw{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){DL(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class TL{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,i=0;const o=this.players.length;0==o?DL(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==o&&this._onFinish()}),c.onDestroy(()=>{++r==o&&this._onDestroy()}),c.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}const ln=!1;function SL(n){return new s.vHH(3e3,ln)}function pG(){return"undefined"!=typeof window&&void 0!==window.document}function vk(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Tf(n){switch(n.length){case 0:return new Nw;case 1:return n[0];default:return new TL(n)}}function AL(n,t,e,r,i={},o={}){const c=[],h=[];let g=-1,v=null;if(r.forEach(E=>{const D=E.offset,k=D==g,N=k&&v||{};Object.keys(E).forEach(U=>{let X=U,pe=E[U];if("offset"!==U)switch(X=t.normalizePropertyName(X,c),pe){case"!":pe=i[U];break;case Fd:pe=o[U];break;default:pe=t.normalizeStyleValue(U,X,pe,c)}N[X]=pe}),k||h.push(N),v=N,g=D}),c.length)throw function rG(n){return new s.vHH(3502,ln)}();return h}function yk(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&bk(e,"start",n)));break;case"done":n.onDone(()=>r(e&&bk(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&bk(e,"destroy",n)))}}function bk(n,t,e){const r=e.totalTime,o=wk(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==r?n.totalTime:r,!!e.disabled),c=n._data;return null!=c&&(o._data=c),o}function wk(n,t,e,r,i="",o=0,c){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!c}}function Aa(n,t,e){let r;return n instanceof Map?(r=n.get(t),r||n.set(t,r=e)):(r=n[t],r||(r=n[t]=e)),r}function xL(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let Ck=(n,t)=>!1,ML=(n,t,e)=>[],kL=null;function Ek(n){const t=n.parentNode||n.host;return t===kL?null:t}(vk()||"undefined"!=typeof Element)&&(pG()?(kL=(()=>document.documentElement)(),Ck=(n,t)=>{for(;t;){if(t===n)return!0;t=Ek(t)}return!1}):Ck=(n,t)=>n.contains(t),ML=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const r=n.querySelector(t);return r?[r]:[]});let Mg=null,RL=!1;function PL(n){Mg||(Mg=function mG(){return"undefined"!=typeof document?document.body:null}()||{},RL=!!Mg.style&&"WebkitAppearance"in Mg.style);let t=!0;return Mg.style&&!function gG(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Mg.style,!t&&RL&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Mg.style)),t}const OL=Ck,NL=ML;let FL=(()=>{class n{validateStyleProperty(e){return PL(e)}matchesElement(e,r){return!1}containsElement(e,r){return OL(e,r)}getParentElement(e){return Ek(e)}query(e,r,i){return NL(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,c,h=[],g){return new Nw(i,o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Ik=(()=>{class n{}return n.NOOP=new FL,n})();const Dk="ng-enter",jT="ng-leave",HT="ng-trigger",qT=".ng-trigger",UL="ng-animating",Tk=".ng-animating";function kg(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Sk(parseFloat(t[1]),t[2])}function Sk(n,t){return"s"===t?1e3*n:n}function ZT(n,t,e){return n.hasOwnProperty("duration")?n:function yG(n,t,e){let i,o=0,c="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return t.push(SL()),{duration:0,delay:0,easing:""};i=Sk(parseFloat(h[1]),h[2]);const g=h[3];null!=g&&(o=Sk(parseFloat(g),h[4]));const v=h[5];v&&(c=v)}else i=n;if(!e){let h=!1,g=t.length;i<0&&(t.push(function NZ(){return new s.vHH(3100,ln)}()),h=!0),o<0&&(t.push(function FZ(){return new s.vHH(3101,ln)}()),h=!0),h&&t.splice(g,0,SL())}return{duration:i,delay:o,easing:c}}(n,t,e)}function Pv(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function Sf(n,t,e={}){if(t)for(let r in n)e[r]=n[r];else Pv(n,e);return e}function BL(n,t,e){return e?t+":"+e+";":""}function jL(n){let t="";for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t+=BL(0,r,n.style.getPropertyValue(r))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=BL(0,CG(e),n.style[e]));n.setAttribute("style",t)}function bu(n,t,e){n.style&&(Object.keys(t).forEach(r=>{const i=xk(r);e&&!e.hasOwnProperty(r)&&(e[r]=n.style[i]),n.style[i]=t[r]}),vk()&&jL(n))}function Rg(n,t){n.style&&(Object.keys(t).forEach(e=>{const r=xk(e);n.style[r]=""}),vk()&&jL(n))}function Fw(n){return Array.isArray(n)?1==n.length?n[0]:EL(n):n}const Ak=new RegExp("{{\\s*(.+?)\\s*}}","g");function HL(n){let t=[];if("string"==typeof n){let e;for(;e=Ak.exec(n);)t.push(e[1]);Ak.lastIndex=0}return t}function GT(n,t,e){const r=n.toString(),i=r.replace(Ak,(o,c)=>{let h=t[c];return t.hasOwnProperty(c)||(e.push(function UZ(n){return new s.vHH(3003,ln)}()),h=""),h.toString()});return i==r?n:i}function $T(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const wG=/-+([a-z0-9])/g;function xk(n){return n.replace(wG,(...t)=>t[1].toUpperCase())}function CG(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function xa(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function VZ(n){return new s.vHH(3004,ln)}()}}function qL(n,t){return window.getComputedStyle(n)[t]}function AG(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function xG(n,t,e){if(":"==n[0]){const g=function MG(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(function XZ(n){return new s.vHH(3016,ln)}()),"* => *"}}(n,e);if("function"==typeof g)return void t.push(g);n=g}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function JZ(n){return new s.vHH(3015,ln)}()),t;const i=r[1],o=r[2],c=r[3];t.push(ZL(i,c));"<"==o[0]&&!("*"==i&&"*"==c)&&t.push(ZL(c,i))}(r,e,t)):e.push(n),e}const KT=new Set(["true","1"]),QT=new Set(["false","0"]);function ZL(n,t){const e=KT.has(n)||QT.has(n),r=KT.has(t)||QT.has(t);return(i,o)=>{let c="*"==n||n==i,h="*"==t||t==o;return!c&&e&&"boolean"==typeof i&&(c=i?KT.has(n):QT.has(n)),!h&&r&&"boolean"==typeof o&&(h=o?KT.has(t):QT.has(t)),c&&h}}const kG=new RegExp("s*:selfs*,?","g");function Mk(n,t,e,r){return new RG(n).build(t,e,r)}class RG{constructor(t){this._driver=t}build(t,e,r){const i=new NG(e);this._resetContextStyleTimingState(i);const o=xa(this,Fw(t),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),o}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0;const o=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function jZ(){return new s.vHH(3006,ln)}()),t.definitions.forEach(h=>{if(this._resetContextStyleTimingState(e),0==h.type){const g=h,v=g.name;v.toString().split(/\s*,\s*/).forEach(E=>{g.name=E,o.push(this.visitState(g,e))}),g.name=v}else if(1==h.type){const g=this.visitTransition(h,e);r+=g.queryCount,i+=g.depCount,c.push(g)}else e.errors.push(function HZ(){return new s.vHH(3007,ln)}())}),{type:7,name:t.name,states:o,transitions:c,queryCount:r,depCount:i,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){const o=new Set,c=i||{};r.styles.forEach(h=>{if(JT(h)){const g=h;Object.keys(g).forEach(v=>{HL(g[v]).forEach(E=>{c.hasOwnProperty(E)||o.add(E)})})}}),o.size&&($T(o.values()),e.errors.push(function qZ(n,t){return new s.vHH(3008,ln)}()))}return{type:0,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=xa(this,Fw(t.animation),e);return{type:1,matchers:AG(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Pg(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>xa(this,r,e)),options:Pg(t.options)}}visitGroup(t,e){const r=e.currentTime;let i=0;const o=t.steps.map(c=>{e.currentTime=r;const h=xa(this,c,e);return i=Math.max(i,e.currentTime),h});return e.currentTime=i,{type:3,steps:o,options:Pg(t.options)}}visitAnimate(t,e){const r=function LG(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return kk(ZT(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=kk(0,0,"");return o.dynamic=!0,o.strValue=e,o}const i=ZT(e,t);return kk(i.duration,i.delay,i.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let i,o=t.styles?t.styles:yc({});if(5==o.type)i=this.visitKeyframes(o,e);else{let c=t.styles,h=!1;if(!c){h=!0;const v={};r.easing&&(v.easing=r.easing),c=yc(v)}e.currentTime+=r.duration+r.delay;const g=this.visitStyle(c,e);g.isEmptyStep=h,i=g}return e.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[];Array.isArray(t.styles)?t.styles.forEach(c=>{"string"==typeof c?c==Fd?r.push(c):e.errors.push(function ZZ(n){return new s.vHH(3002,ln)}()):r.push(c)}):r.push(t.styles);let i=!1,o=null;return r.forEach(c=>{if(JT(c)){const h=c,g=h.easing;if(g&&(o=g,delete h.easing),!i)for(let v in h)if(h[v].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:o,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(h=>{if(!this._driver.validateStyleProperty(h))return delete c[h],void e.unsupportedCSSPropertiesFound.add(h);const g=e.collectedStyles[e.currentQuerySelector],v=g[h];let E=!0;v&&(o!=i&&o>=v.startTime&&i<=v.endTime&&(e.errors.push(function GZ(n,t,e,r,i){return new s.vHH(3010,ln)}()),E=!1),o=v.startTime),E&&(g[h]={startTime:o,endTime:i}),e.options&&function bG(n,t,e){const r=t.params||{},i=HL(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(function LZ(n){return new s.vHH(3001,ln)}())})}(c[h],e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function $Z(){return new s.vHH(3011,ln)}()),r;let o=0;const c=[];let h=!1,g=!1,v=0;const E=t.steps.map(Be=>{const We=this._makeStyleAst(Be,e);let et=null!=We.offset?We.offset:function FG(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(JT(e)&&e.hasOwnProperty("offset")){const r=e;t=parseFloat(r.offset),delete r.offset}});else if(JT(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(We.styles),$e=0;return null!=et&&(o++,$e=We.offset=et),g=g||$e<0||$e>1,h=h||$e<v,v=$e,c.push($e),We});g&&e.errors.push(function zZ(){return new s.vHH(3012,ln)}()),h&&e.errors.push(function YZ(){return new s.vHH(3200,ln)}());const D=t.steps.length;let k=0;o>0&&o<D?e.errors.push(function WZ(){return new s.vHH(3202,ln)}()):0==o&&(k=1/(D-1));const N=D-1,U=e.currentTime,X=e.currentAnimateTimings,pe=X.duration;return E.forEach((Be,We)=>{const et=k>0?We==N?1:k*We:c[We],$e=et*pe;e.currentTime=U+X.delay+$e,X.duration=$e,this._validateStyleAst(Be,e),Be.offset=et,r.styles.push(Be)}),r}visitReference(t,e){return{type:8,animation:xa(this,Fw(t.animation),e),options:Pg(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Pg(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Pg(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[o,c]=function PG(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(kG,"")),n=n.replace(/@\*/g,qT).replace(/@\w+/g,e=>qT+"-"+e.substr(1)).replace(/:animating/g,Tk),[n,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+o:o,Aa(e.collectedStyles,e.currentQuerySelector,{});const h=xa(this,Fw(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:h,originalSelector:t.selector,options:Pg(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function KZ(){return new s.vHH(3013,ln)}());const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:ZT(t.timings,e.errors,!0);return{type:12,animation:xa(this,Fw(t.animation),e),timings:r,options:null}}}class NG{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function JT(n){return!Array.isArray(n)&&"object"==typeof n}function Pg(n){return n?(n=Pv(n)).params&&(n.params=function OG(n){return n?Pv(n):null}(n.params)):n={},n}function kk(n,t,e){return{duration:n,delay:t,easing:e}}function Rk(n,t,e,r,i,o,c=null,h=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:c,subTimeline:h}}class XT{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const BG=new RegExp(":enter","g"),HG=new RegExp(":leave","g");function Pk(n,t,e,r,i,o={},c={},h,g,v=[]){return(new qG).buildKeyframes(n,t,e,r,i,o,c,h,g,v)}class qG{buildKeyframes(t,e,r,i,o,c,h,g,v,E=[]){v=v||new XT;const D=new Ok(t,e,v,i,o,E,[]);D.options=g,D.currentTimeline.setStyles([c],null,D.errors,g),xa(this,r,D);const k=D.timelines.filter(N=>N.containsAnimation());if(Object.keys(h).length){let N;for(let U=k.length-1;U>=0;U--){const X=k[U];if(X.element===e){N=X;break}}N&&!N.allowOnlyTimelineStyles()&&N.setStyles([h],null,D.errors,g)}return k.length?k.map(N=>N.buildKeyframes()):[Rk(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.get(e.element);if(r){const i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);o!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,r){let o=e.currentTimeline.currentTime;const c=null!=r.duration?kg(r.duration):null,h=null!=r.delay?kg(r.delay):null;return 0!==c&&t.forEach(g=>{const v=e.appendInstructionToTimeline(g,c,h);o=Math.max(o,v.duration+v.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),xa(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let i=e;const o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=eS);const c=kg(o.delay);i.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>xa(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let i=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?kg(t.options.delay):0;t.steps.forEach(c=>{const h=e.createSubContext(t.options);o&&h.delayNextStep(o),xa(this,c,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return ZT(e.params?GT(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const o=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(o):r.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,h=e.createSubContext().currentTimeline;h.easing=r.easing,t.styles.forEach(g=>{h.forwardTime((g.offset||0)*o),h.setStyles(g.styles,g.easing,e.errors,e.options),h.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(h),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?kg(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=eS);let c=r;const h=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=h.length;let g=null;h.forEach((v,E)=>{e.currentQueryIndex=E;const D=e.createSubContext(t.options,v);o&&D.delayNextStep(o),v===e.element&&(g=D.currentTimeline),xa(this,t.animation,D),D.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,D.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),g&&(e.currentTimeline.mergeTimelineCollectedStyles(g),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,i=e.currentTimeline,o=t.timings,c=Math.abs(o.duration),h=c*(e.currentQueryTotal-1);let g=c*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":g=h-g;break;case"full":g=r.currentStaggerTime}const E=e.currentTimeline;g&&E.delayNextStep(g);const D=E.currentTime;xa(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const eS={};class Ok{constructor(t,e,r,i,o,c,h,g){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=eS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new tS(this._driver,e,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let i=this.options;null!=r.duration&&(i.duration=kg(r.duration)),null!=r.delay&&(i.delay=kg(r.delay));const o=r.params;if(o){let c=i.params;c||(c=this.options.params={}),Object.keys(o).forEach(h=>{(!e||!c.hasOwnProperty(h))&&(c[h]=GT(o[h],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){const i=e||this.element,o=new Ok(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=eS,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+t.delay,easing:""},o=new ZG(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,o,c){let h=[];if(i&&h.push(this.element),t.length>0){t=(t=t.replace(BG,"."+this._enterClassName)).replace(HG,"."+this._leaveClassName);let v=this._driver.query(this.element,t,1!=r);0!==r&&(v=r<0?v.slice(v.length+r,v.length):v.slice(0,r)),h.push(...v)}return!o&&0==h.length&&c.push(function QZ(n){return new s.vHH(3014,ln)}()),h}}class tS{constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new tS(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Fd,this._currentKeyframe[e]=Fd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&(this._previousKeyframe.easing=e);const o=i&&i.params||{},c=function GG(n,t){const e={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(t),r.forEach(o=>{e[o]=Fd})):Sf(i,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(c).forEach(h=>{const g=GT(c[h],o,r);this._pendingStyles[h]=g,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:Fd),this._updateStyle(h,g)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(r=>{this._currentKeyframe[r]=t[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const r=this._styleSummary[e],i=t._styleSummary[e];(!r||i.time>r.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,g)=>{const v=Sf(h,!0);Object.keys(v).forEach(E=>{const D=v[E];"!"==D?t.add(E):D==Fd&&e.add(E)}),r||(v.offset=g/this.duration),i.push(v)});const o=t.size?$T(t.values()):[],c=e.size?$T(e.values()):[];if(r){const h=i[0],g=Pv(h);h.offset=0,g.offset=1,i=[h,g]}return Rk(this.element,i,o,c,this.duration,this.startTime,this.easing,!1)}}class ZG extends tS{constructor(t,e,r,i,o,c,h=!1){super(t,e,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],c=r+e,h=e/c,g=Sf(t[0],!1);g.offset=0,o.push(g);const v=Sf(t[0],!1);v.offset=zL(h),o.push(v);const E=t.length-1;for(let D=1;D<=E;D++){let k=Sf(t[D],!1);k.offset=zL((e+k.offset*r)/c),o.push(k)}r=c,e=0,i="",t=o}return Rk(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}}function zL(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class Nk{}class $G extends Nk{normalizePropertyName(t,e){return xk(t)}normalizeStyleValue(t,e,r,i){let o="";const c=r.toString().trim();if(zG[e]&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function BZ(n,t){return new s.vHH(3005,ln)}())}return c+o}}const zG=(()=>function YG(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function YL(n,t,e,r,i,o,c,h,g,v,E,D,k){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:c,timelines:h,queriedElements:g,preStyleProps:v,postStyleProps:E,totalTime:D,errors:k}}const Fk={};class WL{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return function WG(n,t,e,r,i){return n.some(o=>o(t,e,r,i))}(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){const i=this._stateStyles["*"],o=this._stateStyles[t],c=i?i.buildStyles(e,r):{};return o?o.buildStyles(e,r):c}build(t,e,r,i,o,c,h,g,v,E){const D=[],k=this.ast.options&&this.ast.options.params||Fk,U=this.buildStyles(r,h&&h.params||Fk,D),X=g&&g.params||Fk,pe=this.buildStyles(i,X,D),Be=new Set,We=new Map,et=new Map,$e="void"===i,xt={params:Object.assign(Object.assign({},k),X)},Rt=E?[]:Pk(t,e,this.ast.animation,o,c,U,pe,xt,v,D);let cn=0;if(Rt.forEach(Oa=>{cn=Math.max(Oa.duration+Oa.delay,cn)}),D.length)return YL(e,this._triggerName,r,i,$e,U,pe,[],[],We,et,cn,D);Rt.forEach(Oa=>{const zd=Oa.element,Nj=Aa(We,zd,{});Oa.preStyleProps.forEach(mm=>Nj[mm]=!0);const XC=Aa(et,zd,{});Oa.postStyleProps.forEach(mm=>XC[mm]=!0),zd!==e&&Be.add(zd)});const Gr=$T(Be.values());return YL(e,this._triggerName,r,i,$e,U,pe,Rt,Gr,We,et,cn)}}class KG{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r={},i=Pv(this.defaultParams);return Object.keys(t).forEach(o=>{const c=t[o];null!=c&&(i[o]=c)}),this.styles.styles.forEach(o=>{if("string"!=typeof o){const c=o;Object.keys(c).forEach(h=>{let g=c[h];g.length>1&&(g=GT(g,i,e));const v=this.normalizer.normalizePropertyName(h,e);g=this.normalizer.normalizeStyleValue(h,v,g,e),r[v]=g})}}),r}}class JG{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states={},e.states.forEach(i=>{this.states[i.name]=new KG(i.style,i.options&&i.options.params||{},r)}),KL(this.states,"true","1"),KL(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new WL(t,i,this.states))}),this.fallbackTransition=function XG(n,t,e){return new WL(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(c=>c.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function KL(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const e4=new XT;class t4{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(t,e){const r=[],o=Mk(this._driver,e,r,[]);if(r.length)throw function iG(n){return new s.vHH(3503,ln)}();this._animations[t]=o}_buildPlayer(t,e,r){const i=t.element,o=AL(0,this._normalizer,0,t.keyframes,e,r);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const i=[],o=this._animations[t];let c;const h=new Map;if(o?(c=Pk(this._driver,e,o,Dk,jT,{},{},r,e4,i),c.forEach(E=>{const D=Aa(h,E.element,{});E.postStyleProps.forEach(k=>D[k]=null)})):(i.push(function sG(){return new s.vHH(3300,ln)}()),c=[]),i.length)throw function oG(n){return new s.vHH(3504,ln)}();h.forEach((E,D)=>{Object.keys(E).forEach(k=>{E[k]=this._driver.computeStyle(D,k,Fd)})});const v=Tf(c.map(E=>{const D=h.get(E.element);return this._buildPlayer(E,{},D)}));return this._playersById[t]=v,v.onDestroy(()=>this.destroy(t)),this.players.push(v),v}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw function aG(n){return new s.vHH(3301,ln)}();return e}listen(t,e,r,i){const o=wk(e,"","","");return yk(this._getPlayer(t),r,o,i),()=>{}}command(t,e,r,i){if("register"==r)return void this.register(t,i[0]);if("create"==r)return void this.create(t,e,i[0]||{});const o=this._getPlayer(t);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const QL="ng-animate-queued",Lk="ng-animate-disabled",a4=[],JL={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},l4={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},vl="__ng_removed";class Uk{constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=function h4(n){return null!=n?n:null}(r?t.value:t),r){const o=Pv(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(i=>{null==r[i]&&(r[i]=e[i])})}}}const Lw="void",Vk=new Uk(Lw);class c4{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,yl(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.hasOwnProperty(e))throw function lG(n,t){return new s.vHH(3302,ln)}();if(null==r||0==r.length)throw function cG(n){return new s.vHH(3303,ln)}();if(!function f4(n){return"start"==n||"done"==n}(r))throw function uG(n,t){return new s.vHH(3400,ln)}();const o=Aa(this._elementListeners,t,[]),c={name:e,phase:r,callback:i};o.push(c);const h=Aa(this._engine.statesByElement,t,{});return h.hasOwnProperty(e)||(yl(t,HT),yl(t,HT+"-"+e),h[e]=Vk),()=>{this._engine.afterFlush(()=>{const g=o.indexOf(c);g>=0&&o.splice(g,1),this._triggers[e]||delete h[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw function dG(n){return new s.vHH(3401,ln)}();return e}trigger(t,e,r,i=!0){const o=this._getTrigger(e),c=new Bk(this.id,e,t);let h=this._engine.statesByElement.get(t);h||(yl(t,HT),yl(t,HT+"-"+e),this._engine.statesByElement.set(t,h={}));let g=h[e];const v=new Uk(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&v.absorbOptions(g.options),h[e]=v,g||(g=Vk),v.value!==Lw&&g.value===v.value){if(!function m4(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){const o=e[i];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}(g.params,v.params)){const X=[],pe=o.matchStyles(g.value,g.params,X),Be=o.matchStyles(v.value,v.params,X);X.length?this._engine.reportError(X):this._engine.afterFlush(()=>{Rg(t,pe),bu(t,Be)})}return}const k=Aa(this._engine.playersByElement,t,[]);k.forEach(X=>{X.namespaceId==this.id&&X.triggerName==e&&X.queued&&X.destroy()});let N=o.matchTransition(g.value,v.value,t,v.params),U=!1;if(!N){if(!i)return;N=o.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:N,fromState:g,toState:v,player:c,isFallbackTransition:U}),U||(yl(t,QL),c.onStart(()=>{Ov(t,QL)})),c.onDone(()=>{let X=this.players.indexOf(c);X>=0&&this.players.splice(X,1);const pe=this._engine.playersByElement.get(t);if(pe){let Be=pe.indexOf(c);Be>=0&&pe.splice(Be,1)}}),this.players.push(c),k.push(c),c}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,r)=>{delete e[t]}),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,qT,!0);r.forEach(i=>{if(i[vl])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(c=>c.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){const o=this._engine.statesByElement.get(t),c=new Map;if(o){const h=[];if(Object.keys(o).forEach(g=>{if(c.set(g,o[g].value),this._triggers[g]){const v=this.trigger(t,g,Lw,i);v&&h.push(v)}}),h.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),r&&Tf(h).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const i=new Set;e.forEach(o=>{const c=o.name;if(i.has(c))return;i.add(c);const g=this._triggers[c].fallbackTransition,v=r[c]||Vk,E=new Uk(Lw),D=new Bk(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:g,fromState:v,toState:E,player:D,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let c=t;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{const o=t[vl];(!o||o===JL)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){yl(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,c=this._elementListeners.get(o);c&&c.forEach(h=>{if(h.name==r.triggerName){const g=wk(o,r.triggerName,r.fromState.value,r.toState.value);g._data=t,yk(r.player,h.phase,g,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{const o=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==o||0==c?o-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class u4{constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new c4(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList,i=this.namespacesByHostElement,o=r.length-1;if(o>=0){let c=!1;if(void 0!==this.driver.getParentElement){let h=this.driver.getParentElement(e);for(;h;){const g=i.get(h);if(g){const v=r.indexOf(g);r.splice(v+1,0,t),c=!0;break}h=this.driver.getParentElement(h)}}else for(let h=o;h>=0;h--)if(this.driver.containsElement(r[h].hostElement,e)){r.splice(h+1,0,t),c=!0;break}c||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r){const i=Object.keys(r);for(let o=0;o<i.length;o++){const c=r[i[o]].namespaceId;if(c){const h=this._fetchNamespace(c);h&&e.add(h)}}}return e}trigger(t,e,r,i){if(nS(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!nS(e))return;const o=e[vl];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),yl(t,Lk)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Ov(t,Lk))}removeNode(t,e,r,i){if(nS(e)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),r){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,r,i,o){this.collectedLeaveElements.push(e),e[vl]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,r,i,o){return nS(e)?this._fetchNamespace(t).listen(e,r,i,o):()=>{}}_buildInstruction(t,e,r,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,qT,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Tk,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Tf(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const r=t[vl];if(r&&r.setForRemoval){if(t[vl]=JL,r.namespaceId){this.destroyInnerAnimations(t);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,r.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(Lk))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)yl(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?Tf(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw function hG(n){return new s.vHH(3402,ln)}()}_flushAnimations(t,e){const r=new XT,i=[],o=new Map,c=[],h=new Map,g=new Map,v=new Map,E=new Set;this.disabledNodes.forEach(ht=>{E.add(ht);const St=this.driver.query(ht,".ng-animate-queued",!0);for(let Nt=0;Nt<St.length;Nt++)E.add(St[Nt])});const D=this.bodyNode,k=Array.from(this.statesByElement.keys()),N=t2(k,this.collectedEnterElements),U=new Map;let X=0;N.forEach((ht,St)=>{const Nt=Dk+X++;U.set(St,Nt),ht.forEach(Cn=>yl(Cn,Nt))});const pe=[],Be=new Set,We=new Set;for(let ht=0;ht<this.collectedLeaveElements.length;ht++){const St=this.collectedLeaveElements[ht],Nt=St[vl];Nt&&Nt.setForRemoval&&(pe.push(St),Be.add(St),Nt.hasAnimation?this.driver.query(St,".ng-star-inserted",!0).forEach(Cn=>Be.add(Cn)):We.add(St))}const et=new Map,$e=t2(k,Array.from(Be));$e.forEach((ht,St)=>{const Nt=jT+X++;et.set(St,Nt),ht.forEach(Cn=>yl(Cn,Nt))}),t.push(()=>{N.forEach((ht,St)=>{const Nt=U.get(St);ht.forEach(Cn=>Ov(Cn,Nt))}),$e.forEach((ht,St)=>{const Nt=et.get(St);ht.forEach(Cn=>Ov(Cn,Nt))}),pe.forEach(ht=>{this.processLeaveNode(ht)})});const xt=[],Rt=[];for(let ht=this._namespaceList.length-1;ht>=0;ht--)this._namespaceList[ht].drainQueuedTransitions(e).forEach(Nt=>{const Cn=Nt.player,Zi=Nt.element;if(xt.push(Cn),this.collectedEnterElements.length){const go=Zi[vl];if(go&&go.setForMove){if(go.previousTriggersValues&&go.previousTriggersValues.has(Nt.triggerName)){const _m=go.previousTriggersValues.get(Nt.triggerName),zf=this.statesByElement.get(Nt.element);zf&&zf[Nt.triggerName]&&(zf[Nt.triggerName].value=_m)}return void Cn.destroy()}}const Mu=!D||!this.driver.containsElement(D,Zi),Na=et.get(Zi),$f=U.get(Zi),fr=this._buildInstruction(Nt,r,$f,Na,Mu);if(fr.errors&&fr.errors.length)return void Rt.push(fr);if(Mu)return Cn.onStart(()=>Rg(Zi,fr.fromStyles)),Cn.onDestroy(()=>bu(Zi,fr.toStyles)),void i.push(Cn);if(Nt.isFallbackTransition)return Cn.onStart(()=>Rg(Zi,fr.fromStyles)),Cn.onDestroy(()=>bu(Zi,fr.toStyles)),void i.push(Cn);const Uj=[];fr.timelines.forEach(go=>{go.stretchStartingKeyframe=!0,this.disabledNodes.has(go.element)||Uj.push(go)}),fr.timelines=Uj,r.append(Zi,fr.timelines),c.push({instruction:fr,player:Cn,element:Zi}),fr.queriedElements.forEach(go=>Aa(h,go,[]).push(Cn)),fr.preStyleProps.forEach((go,_m)=>{const zf=Object.keys(go);if(zf.length){let vm=g.get(_m);vm||g.set(_m,vm=new Set),zf.forEach(vN=>vm.add(vN))}}),fr.postStyleProps.forEach((go,_m)=>{const zf=Object.keys(go);let vm=v.get(_m);vm||v.set(_m,vm=new Set),zf.forEach(vN=>vm.add(vN))})});if(Rt.length){const ht=[];Rt.forEach(St=>{ht.push(function fG(n,t){return new s.vHH(3505,ln)}())}),xt.forEach(St=>St.destroy()),this.reportError(ht)}const cn=new Map,Gr=new Map;c.forEach(ht=>{const St=ht.element;r.has(St)&&(Gr.set(St,St),this._beforeAnimationBuild(ht.player.namespaceId,ht.instruction,cn))}),i.forEach(ht=>{const St=ht.element;this._getPreviousPlayers(St,!1,ht.namespaceId,ht.triggerName,null).forEach(Cn=>{Aa(cn,St,[]).push(Cn),Cn.destroy()})});const Oa=pe.filter(ht=>r2(ht,g,v)),zd=new Map;e2(zd,this.driver,We,v,Fd).forEach(ht=>{r2(ht,g,v)&&Oa.push(ht)});const XC=new Map;N.forEach((ht,St)=>{e2(XC,this.driver,new Set(ht),g,"!")}),Oa.forEach(ht=>{const St=zd.get(ht),Nt=XC.get(ht);zd.set(ht,Object.assign(Object.assign({},St),Nt))});const mm=[],Fj=[],Lj={};c.forEach(ht=>{const{element:St,player:Nt,instruction:Cn}=ht;if(r.has(St)){if(E.has(St))return Nt.onDestroy(()=>bu(St,Cn.toStyles)),Nt.disabled=!0,Nt.overrideTotalTime(Cn.totalTime),void i.push(Nt);let Zi=Lj;if(Gr.size>1){let Na=St;const $f=[];for(;Na=Na.parentNode;){const fr=Gr.get(Na);if(fr){Zi=fr;break}$f.push(Na)}$f.forEach(fr=>Gr.set(fr,Zi))}const Mu=this._buildAnimation(Nt.namespaceId,Cn,cn,o,XC,zd);if(Nt.setRealPlayer(Mu),Zi===Lj)mm.push(Nt);else{const Na=this.playersByElement.get(Zi);Na&&Na.length&&(Nt.parentPlayer=Tf(Na)),i.push(Nt)}}else Rg(St,Cn.fromStyles),Nt.onDestroy(()=>bu(St,Cn.toStyles)),Fj.push(Nt),E.has(St)&&i.push(Nt)}),Fj.forEach(ht=>{const St=o.get(ht.element);if(St&&St.length){const Nt=Tf(St);ht.setRealPlayer(Nt)}}),i.forEach(ht=>{ht.parentPlayer?ht.syncPlayerEvents(ht.parentPlayer):ht.destroy()});for(let ht=0;ht<pe.length;ht++){const St=pe[ht],Nt=St[vl];if(Ov(St,jT),Nt&&Nt.hasAnimation)continue;let Cn=[];if(h.size){let Mu=h.get(St);Mu&&Mu.length&&Cn.push(...Mu);let Na=this.driver.query(St,Tk,!0);for(let $f=0;$f<Na.length;$f++){let fr=h.get(Na[$f]);fr&&fr.length&&Cn.push(...fr)}}const Zi=Cn.filter(Mu=>!Mu.destroyed);Zi.length?p4(this,St,Zi):this.processLeaveNode(St)}return pe.length=0,mm.forEach(ht=>{this.players.push(ht),ht.onDone(()=>{ht.destroy();const St=this.players.indexOf(ht);this.players.splice(St,1)}),ht.play()}),mm}elementContainsData(t,e){let r=!1;const i=e[vl];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,o){let c=[];if(e){const h=this.playersByQueriedElement.get(t);h&&(c=h)}else{const h=this.playersByElement.get(t);if(h){const g=!o||o==Lw;h.forEach(v=>{v.queued||!g&&v.triggerName!=i||c.push(v)})}}return(r||i)&&(c=c.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),c}_beforeAnimationBuild(t,e,r){const o=e.element,c=e.isRemovalTransition?void 0:t,h=e.isRemovalTransition?void 0:e.triggerName;for(const g of e.timelines){const v=g.element,E=v!==o,D=Aa(r,v,[]);this._getPreviousPlayers(v,E,c,h,e.toState).forEach(N=>{const U=N.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),N.destroy(),D.push(N)})}Rg(o,e.fromStyles)}_buildAnimation(t,e,r,i,o,c){const h=e.triggerName,g=e.element,v=[],E=new Set,D=new Set,k=e.timelines.map(U=>{const X=U.element;E.add(X);const pe=X[vl];if(pe&&pe.removedBeforeQueried)return new Nw(U.duration,U.delay);const Be=X!==g,We=function g4(n){const t=[];return n2(n,t),t}((r.get(X)||a4).map(cn=>cn.getRealPlayer())).filter(cn=>!!cn.element&&cn.element===X),et=o.get(X),$e=c.get(X),xt=AL(0,this._normalizer,0,U.keyframes,et,$e),Rt=this._buildPlayer(U,xt,We);if(U.subTimeline&&i&&D.add(X),Be){const cn=new Bk(t,h,X);cn.setRealPlayer(Rt),v.push(cn)}return Rt});v.forEach(U=>{Aa(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function d4(n,t,e){let r;if(n instanceof Map){if(r=n.get(t),r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&n.delete(t)}}else if(r=n[t],r){if(r.length){const i=r.indexOf(e);r.splice(i,1)}0==r.length&&delete n[t]}return r}(this.playersByQueriedElement,U.element,U))}),E.forEach(U=>yl(U,UL));const N=Tf(k);return N.onDestroy(()=>{E.forEach(U=>Ov(U,UL)),bu(g,e.toStyles)}),D.forEach(U=>{Aa(i,U,[]).push(N)}),N}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new Nw(t.duration,t.delay)}}class Bk{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new Nw,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(r=>yk(t,e,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Aa(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function nS(n){return n&&1===n.nodeType}function XL(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function e2(n,t,e,r,i){const o=[];e.forEach(g=>o.push(XL(g)));const c=[];r.forEach((g,v)=>{const E={};g.forEach(D=>{const k=E[D]=t.computeStyle(v,D,i);(!k||0==k.length)&&(v[vl]=l4,c.push(v))}),n.set(v,E)});let h=0;return e.forEach(g=>XL(g,o[h++])),c}function t2(n,t){const e=new Map;if(n.forEach(h=>e.set(h,[])),0==t.length)return e;const i=new Set(t),o=new Map;function c(h){if(!h)return 1;let g=o.get(h);if(g)return g;const v=h.parentNode;return g=e.has(v)?v:i.has(v)?1:c(v),o.set(h,g),g}return t.forEach(h=>{const g=c(h);1!==g&&e.get(g).push(h)}),e}function yl(n,t){var e;null===(e=n.classList)||void 0===e||e.add(t)}function Ov(n,t){var e;null===(e=n.classList)||void 0===e||e.remove(t)}function p4(n,t,e){Tf(e).onDone(()=>n.processLeaveNode(t))}function n2(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof TL?n2(r.players,t):t.push(r)}}function r2(n,t,e){const r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(o=>i.add(o)):t.set(n,r),e.delete(n),!0}class rS{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new u4(t,e,r),this._timelineEngine=new t4(t,e,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,r,i,o){const c=t+"-"+i;let h=this._triggerCache[c];if(!h){const g=[],E=Mk(this._driver,o,g,[]);if(g.length)throw function nG(n,t){return new s.vHH(3404,ln)}();h=function QG(n,t,e){return new JG(n,t,e)}(i,E,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(e,i,h)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r,i){this._transitionEngine.removeNode(t,e,i||!1,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if("@"==r.charAt(0)){const[o,c]=xL(r);this._timelineEngine.command(o,e,c,i)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,o){if("@"==r.charAt(0)){const[c,h]=xL(r);return this._timelineEngine.listen(c,e,h,o)}return this._transitionEngine.listen(t,e,r,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let v4=(()=>{class n{constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o={}),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&bu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(bu(this._element,this._initialStyles),this._endStyles&&(bu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Rg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Rg(this._element,this._endStyles),this._endStyles=null),bu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function jk(n){let t=null;const e=Object.keys(n);for(let r=0;r<e.length;r++){const i=e[r];y4(i)&&(t=t||{},t[i]=n[i])}return t}function y4(n){return"display"===n||"position"===n}class s2{constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,r){return t.animate(e,r)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(r=>{"offset"!=r&&(t[r]=this._finished?e[r]:qL(this.element,r))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class b4{validateStyleProperty(t){return PL(t)}matchesElement(t,e){return!1}containsElement(t,e){return OL(t,e)}getParentElement(t){return Ek(t)}query(t,e,r){return NL(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}animate(t,e,r,i,o,c=[]){const g={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(g.easing=o);const v={},E=c.filter(k=>k instanceof s2);(function EG(n,t){return 0===n||0===t})(r,i)&&E.forEach(k=>{let N=k.currentSnapshot;Object.keys(N).forEach(U=>v[U]=N[U])}),e=function IG(n,t,e){const r=Object.keys(e);if(r.length&&t.length){let o=t[0],c=[];if(r.forEach(h=>{o.hasOwnProperty(h)||c.push(h),o[h]=e[h]}),c.length)for(var i=1;i<t.length;i++){let h=t[i];c.forEach(function(g){h[g]=qL(n,g)})}}return t}(t,e=e.map(k=>Sf(k,!1)),v);const D=function _4(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=jk(t[0]),t.length>1&&(r=jk(t[t.length-1]))):t&&(e=jk(t)),e||r?new v4(n,e,r):null}(t,e);return new s2(t,e,g,D)}}let w4=(()=>{class n extends CL{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:s.ifc.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(e)?EL(e):e;return o2(this._renderer,null,r,"register",[i]),new C4(r,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.FYo),s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class C4 extends class OZ{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new E4(this._id,t,e||{},this._renderer)}}class E4{constructor(t,e,r,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return o2(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function o2(n,t,e,r,i){return n.setProperty(t,`@@${e}:${r}`,i)}const a2="@.disabled";let I4=(()=>{class n{constructor(e,r,i){this.delegate=e,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,c)=>{const h=null==c?void 0:c.parentNode(o);h&&c.removeChild(h,o)}}createRenderer(e,r){const o=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let E=this._rendererCache.get(o);return E||(E=new l2("",o,this.engine),this._rendererCache.set(o,E)),E}const c=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,e);const g=E=>{Array.isArray(E)?E.forEach(g):this.engine.registerTrigger(c,h,e,E.name,E)};return r.data.animation.forEach(g),new D4(this,h,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,i){e>=0&&e<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[c,h]=o;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.FYo),s.LFG(rS),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class l2{constructor(t,e,r){this.namespaceId=t,this.delegate=e,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>e.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==a2?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class D4 extends l2{constructor(t,e,r,i){super(e,r,i),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==a2?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.substr(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const i=function T4(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let o=e.substr(1),c="";return"@"!=o.charAt(0)&&([o,c]=function S4(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(o)),this.engine.listen(this.namespaceId,i,o,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(t,e,r)}}let A4=(()=>{class n extends rS{constructor(e,r,i){super(e.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe),s.LFG(Ik),s.LFG(Nk))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Uw=new s.OlP("AnimationModuleType"),c2=[{provide:CL,useClass:w4},{provide:Nk,useFactory:function x4(){return new $G}},{provide:rS,useClass:A4},{provide:s.FYo,useFactory:function M4(n,t,e){return new I4(n,t,e)},deps:[Mn,rS,s.R0b]}],u2=[{provide:Ik,useFactory:()=>new b4},{provide:Uw,useValue:"BrowserAnimations"},...c2],k4=[{provide:Ik,useClass:FL},{provide:Uw,useValue:"NoopAnimations"},...c2];let R4=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?k4:u2}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:u2,imports:[oa]}),n})();const O4=new s.OlP("mat-sanity-checks",{providedIn:"root",factory:function P4(){return!0}});let wu=(()=>{class n{constructor(e,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!ok()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(wL),s.LFG(O4,8),s.LFG(oe))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[Mw],Mw]}),n})();function N4(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=so(t)}}}function Hk(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function F4(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=so(t)}}}function h2(n){return class extends n{constructor(...t){super(...t),this.stateChanges=new en.x,this.errorState=!1}updateErrorState(){const t=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==t&&(this.errorState=o,this.stateChanges.next())}}}const f2=new s.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function L4(){return(0,s.f3M)(s.soG)}});class as{constructor(){this._localeChanges=new en.x,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let r=this.isValid(t),i=this.isValid(e);return r&&i?!this.compareDate(t,e):r==i}return t==e}clampDate(t,e,r){return e&&this.compareDate(t,e)<0?e:r&&this.compareDate(t,r)>0?r:t}}const Og=new s.OlP("mat-date-formats"),U4=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function qk(n,t){const e=Array(n);for(let r=0;r<n;r++)e[r]=t(r);return e}let V4=(()=>{class n extends as{constructor(e,r){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const r=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return qk(12,i=>this._format(r,new Date(2017,i,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return qk(31,r=>this._format(e,new Date(2017,0,r+1)))}getDayOfWeekNames(e){const r=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return qk(7,i=>this._format(r,new Date(2017,0,i+1)))}getYearName(e){const r=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(r,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,r,i){let o=this._createDateWithOverflow(e,r,i);return o.getMonth(),o}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,r){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const i=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},r),{timeZone:"utc"}));return this._format(i,e)}addCalendarYears(e,r){return this.addCalendarMonths(e,12*r)}addCalendarMonths(e,r){let i=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+r,this.getDate(e));return this.getMonth(i)!=((this.getMonth(e)+r)%12+12)%12&&(i=this._createDateWithOverflow(this.getYear(i),this.getMonth(i),0)),i}addCalendarDays(e,r){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+r)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(U4.test(e)){let r=new Date(e);if(this.isValid(r))return r}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,r,i){const o=new Date;return o.setFullYear(e,r,i),o.setHours(0,0,0,0),o}_2digit(e){return("00"+e).slice(-2)}_format(e,r){const i=new Date;return i.setUTCFullYear(r.getFullYear(),r.getMonth(),r.getDate()),i.setUTCHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),e.format(i)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(f2,8),s.LFG(Yo))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const B4={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let j4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[{provide:as,useClass:V4}]}),n})(),H4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[{provide:Og,useValue:B4}],imports:[[j4]]}),n})(),p2=(()=>{class n{isErrorState(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class q4{constructor(t,e,r){this._renderer=t,this.element=e,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const g2={enterDuration:225,exitDuration:150},Zk=NT({passive:!0}),m2=["mousedown","touchstart"],_2=["mouseup","mouseleave","touchend","touchcancel"];class G4{constructor(t,e,r,i){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Nd(r))}fadeInRipple(t,e,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Object.assign(Object.assign({},g2),r.animation);r.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);const c=r.radius||function z4(n,t,e){const r=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),i=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(r*r+i*i)}(t,e,i),h=t-i.left,g=e-i.top,v=o.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=h-c+"px",E.style.top=g-c+"px",E.style.height=2*c+"px",E.style.width=2*c+"px",null!=r.color&&(E.style.backgroundColor=r.color),E.style.transitionDuration=`${v}ms`,this._containerElement.appendChild(E),function $4(n){window.getComputedStyle(n).getPropertyValue("opacity")}(E),E.style.transform="scale(1)";const D=new q4(this,E,r);return D.state=0,this._activeRipples.add(D),r.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const k=D===this._mostRecentTransientRipple;D.state=1,!r.persistent&&(!k||!this._isPointerDown)&&D.fadeOut()},v),D}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const r=t.element,i=Object.assign(Object.assign({},g2),t.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Nd(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(m2))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(_2),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=gL(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!mL(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,Zk)})})}_removeTriggerEvents(){this._triggerElement&&(m2.forEach(t=>{this._triggerElement.removeEventListener(t,this,Zk)}),this._pointerUpEventsRegistered&&_2.forEach(t=>{this._triggerElement.removeEventListener(t,this,Zk)}))}}const Y4=new s.OlP("mat-ripple-global-options");let v2=(()=>{class n{constructor(e,r,i,o,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new G4(this,r,e,i)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,r=0,i){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(Yo),s.Y36(Y4,8),s.Y36(Uw,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,r){2&e&&s.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),W4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[wu],wu]}),n})();var K4=L(1144);const Q4=["addListener","removeListener"],J4=["addEventListener","removeEventListener"],X4=["on","off"];function sS(n,t,e,r){if((0,Ws.m)(e)&&(r=e,e=void 0),r)return sS(n,t,e).pipe(Ka(r));const[i,o]=function n$(n){return(0,Ws.m)(n.addEventListener)&&(0,Ws.m)(n.removeEventListener)}(n)?J4.map(c=>h=>n[c](t,h,e)):function e$(n){return(0,Ws.m)(n.addListener)&&(0,Ws.m)(n.removeListener)}(n)?Q4.map(y2(n,t)):function t$(n){return(0,Ws.m)(n.on)&&(0,Ws.m)(n.off)}(n)?X4.map(y2(n,t)):[];if(!i&&(0,K4.z)(n))return(0,Cr.z)(c=>sS(c,t,e))((0,dr.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Or.y(c=>{const h=(...g)=>c.next(1<g.length?g:g[0]);return i(h),()=>o(h)})}function y2(n,t){return e=>r=>n[e](t,r)}const r$=["connectionContainer"],i$=["inputContainer"],s$=["label"];function o$(n,t){1&n&&(s.ynx(0),s.TgZ(1,"div",14),s._UZ(2,"div",15)(3,"div",16)(4,"div",17),s.qZA(),s.TgZ(5,"div",18),s._UZ(6,"div",15)(7,"div",16)(8,"div",17),s.qZA(),s.BQk())}function a$(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",19),s.NdJ("cdkObserveContent",function(){return s.CHM(e),s.oxw().updateOutlineGap()}),s.Hsn(1,1),s.qZA()}if(2&n){const e=s.oxw();s.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)}}function l$(n,t){if(1&n&&(s.ynx(0),s.Hsn(1,2),s.TgZ(2,"span"),s._uU(3),s.qZA(),s.BQk()),2&n){const e=s.oxw(2);s.xp6(3),s.Oqu(e._control.placeholder)}}function c$(n,t){1&n&&s.Hsn(0,3,["*ngSwitchCase","true"])}function u$(n,t){1&n&&(s.TgZ(0,"span",23),s._uU(1," *"),s.qZA())}function d$(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"label",20,21),s.NdJ("cdkObserveContent",function(){return s.CHM(e),s.oxw().updateOutlineGap()}),s.YNc(2,l$,4,1,"ng-container",12),s.YNc(3,c$,1,0,"ng-content",12),s.YNc(4,u$,2,0,"span",22),s.qZA()}if(2&n){const e=s.oxw();s.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),s.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),s.uIk("for",e._control.id)("aria-owns",e._control.id),s.xp6(2),s.Q6J("ngSwitchCase",!1),s.xp6(1),s.Q6J("ngSwitchCase",!0),s.xp6(1),s.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function h$(n,t){1&n&&(s.TgZ(0,"div",24),s.Hsn(1,4),s.qZA())}function f$(n,t){if(1&n&&(s.TgZ(0,"div",25),s._UZ(1,"span",26),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function p$(n,t){if(1&n&&(s.TgZ(0,"div"),s.Hsn(1,5),s.qZA()),2&n){const e=s.oxw();s.Q6J("@transitionMessages",e._subscriptAnimationState)}}function g$(n,t){if(1&n&&(s.TgZ(0,"div",30),s._uU(1),s.qZA()),2&n){const e=s.oxw(2);s.Q6J("id",e._hintLabelId),s.xp6(1),s.Oqu(e.hintLabel)}}function m$(n,t){if(1&n&&(s.TgZ(0,"div",27),s.YNc(1,g$,2,2,"div",28),s.Hsn(2,6),s._UZ(3,"div",29),s.Hsn(4,7),s.qZA()),2&n){const e=s.oxw();s.Q6J("@transitionMessages",e._subscriptAnimationState),s.xp6(1),s.Q6J("ngIf",e.hintLabel)}}const _$=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],v$=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],y$=new s.OlP("MatError"),b$={transitionMessages:gk("transitionMessages",[mk("enter",yc({opacity:1,transform:"translateY(0%)"})),Ow("void => enter",[yc({opacity:0,transform:"translateY(-5px)"}),Pw("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Gk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n}),n})();const w$=new s.OlP("MatHint");let oS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["mat-label"]]}),n})(),C$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const E$=new s.OlP("MatPrefix"),b2=new s.OlP("MatSuffix");let w2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","matSuffix",""]],features:[s._Bn([{provide:b2,useExisting:n}])]}),n})(),C2=0;const D$=Hk(class{constructor(n){this._elementRef=n}},"primary"),T$=new s.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),$k=new s.OlP("MatFormField");let I2=(()=>{class n extends D${constructor(e,r,i,o,c,h,g){super(e),this._changeDetectorRef=r,this._dir=i,this._defaults=o,this._platform=c,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new en.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+C2++,this._labelId="mat-form-field-label-"+C2++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==g,this.appearance=o&&o.appearance?o.appearance:"legacy",this._hideRequiredMarker=!(!o||null==o.hideRequiredMarker)&&o.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const r=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=so(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Ss(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Rw(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Rw(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,au.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Ss(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Ss(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Rw(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const r=this._control?this._control.ngControl:null;return r&&r[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,sS(this._label.nativeElement,"transitionend").pipe((0,Qs.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,i=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?e.push(r.id):this._hintLabel&&e.push(this._hintLabelId),i&&e.push(i.id)}else this._errorChildren&&e.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",o=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const E=r.querySelectorAll(`${i}, ${o}`);for(let D=0;D<E.length;D++)E[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,h=0;const g=r.querySelectorAll(i),v=r.querySelectorAll(o);if(this._label&&this._label.nativeElement.children.length){const E=r.getBoundingClientRect();if(0===E.width&&0===E.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(E),k=e.children,N=this._getStartEnd(k[0].getBoundingClientRect());let U=0;for(let X=0;X<k.length;X++)U+=k[X].offsetWidth;c=Math.abs(N-D)-5,h=U>0?.75*U+10:0}for(let E=0;E<g.length;E++)g[E].style.width=`${c}px`;for(let E=0;E<v.length;E++)v[E].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const r=e.getRootNode();return r&&r!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(Av,8),s.Y36(T$,8),s.Y36(Yo),s.Y36(s.R0b),s.Y36(Uw,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,r,i){if(1&e&&(s.Suo(i,Gk,5),s.Suo(i,Gk,7),s.Suo(i,oS,5),s.Suo(i,oS,7),s.Suo(i,C$,5),s.Suo(i,y$,5),s.Suo(i,w$,5),s.Suo(i,E$,5),s.Suo(i,b2,5)),2&e){let o;s.iGM(o=s.CRH())&&(r._controlNonStatic=o.first),s.iGM(o=s.CRH())&&(r._controlStatic=o.first),s.iGM(o=s.CRH())&&(r._labelChildNonStatic=o.first),s.iGM(o=s.CRH())&&(r._labelChildStatic=o.first),s.iGM(o=s.CRH())&&(r._placeholderChild=o.first),s.iGM(o=s.CRH())&&(r._errorChildren=o),s.iGM(o=s.CRH())&&(r._hintChildren=o),s.iGM(o=s.CRH())&&(r._prefixChildren=o),s.iGM(o=s.CRH())&&(r._suffixChildren=o)}},viewQuery:function(e,r){if(1&e&&(s.Gf(r$,7),s.Gf(i$,5),s.Gf(s$,5)),2&e){let i;s.iGM(i=s.CRH())&&(r._connectionContainerRef=i.first),s.iGM(i=s.CRH())&&(r._inputContainerRef=i.first),s.iGM(i=s.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,r){2&e&&s.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[s._Bn([{provide:$k,useExisting:n}]),s.qOj],ngContentSelectors:v$,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,r){1&e&&(s.F$t(_$),s.TgZ(0,"div",0)(1,"div",1,2),s.NdJ("click",function(o){return r._control.onContainerClick&&r._control.onContainerClick(o)}),s.YNc(3,o$,9,0,"ng-container",3),s.YNc(4,a$,2,1,"div",4),s.TgZ(5,"div",5,6),s.Hsn(7),s.TgZ(8,"span",7),s.YNc(9,d$,5,16,"label",8),s.qZA()(),s.YNc(10,h$,2,0,"div",9),s.qZA(),s.YNc(11,f$,2,4,"div",10),s.TgZ(12,"div",11),s.YNc(13,p$,2,1,"div",12),s.YNc(14,m$,5,2,"div",13),s.qZA()()),2&e&&(s.xp6(3),s.Q6J("ngIf","outline"==r.appearance),s.xp6(1),s.Q6J("ngIf",r._prefixChildren.length),s.xp6(5),s.Q6J("ngIf",r._hasFloatingLabel()),s.xp6(1),s.Q6J("ngIf",r._suffixChildren.length),s.xp6(1),s.Q6J("ngIf","outline"!=r.appearance),s.xp6(1),s.Q6J("ngSwitch",r._getDisplayedMessages()),s.xp6(1),s.Q6J("ngSwitchCase","error"),s.xp6(1),s.Q6J("ngSwitchCase","hint"))},directives:[Ut,Kq,Mr,Si],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[b$.transitionMessages]},changeDetection:0}),n})(),aS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[Al,wu,sL],wu]}),n})();const D2=NT({passive:!0});let S$=(()=>{class n{constructor(e,r){this._platform=e,this._ngZone=r,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return al.E;const r=Nd(e),i=this._monitoredElements.get(r);if(i)return i.subject;const o=new en.x,c="cdk-text-field-autofilled",h=g=>{"cdk-text-field-autofill-start"!==g.animationName||r.classList.contains(c)?"cdk-text-field-autofill-end"===g.animationName&&r.classList.contains(c)&&(r.classList.remove(c),this._ngZone.run(()=>o.next({target:g.target,isAutofilled:!1}))):(r.classList.add(c),this._ngZone.run(()=>o.next({target:g.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,D2),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",h,D2)}}),o}stopMonitoring(e){const r=Nd(e),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((e,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Yo),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const S2=new s.OlP("MAT_INPUT_VALUE_ACCESSOR"),A$=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let x$=0;const M$=h2(class{constructor(n,t,e,r){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=r}});let A2=(()=>{class n extends M${constructor(e,r,i,o,c,h,g,v,E,D){super(h,o,c,i),this._elementRef=e,this._platform=r,this._autofillMonitor=v,this._formField=D,this._uid="mat-input-"+x$++,this.focused=!1,this.stateChanges=new en.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(U=>lL().has(U)),this._iOSKeyupListener=U=>{const X=U.target;!X.value&&0===X.selectionStart&&0===X.selectionEnd&&(X.setSelectionRange(1,1),X.setSelectionRange(0,0))};const k=this._elementRef.nativeElement,N=k.nodeName.toLowerCase();this._inputValueAccessor=g||k,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&E.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===N,this._isTextarea="textarea"===N,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=k.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=so(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){var e,r,i,o;return null!==(o=null!==(e=this._required)&&void 0!==e?e:null===(i=null===(r=this.ngControl)||void 0===r?void 0:r.control)||void 0===i?void 0:i.hasValidator(Zt.required))&&void 0!==o&&o}set required(e){this._required=so(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&lL().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=so(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var e,r;const i=(null===(r=null===(e=this._formField)||void 0===e?void 0:e._hideControlPlaceholder)||void 0===r?void 0:r.call(e))?null:this.placeholder;if(i!==this._previousPlaceholder){const o=this._elementRef.nativeElement;this._previousPlaceholder=i,i?o.setAttribute("placeholder",i):o.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){A$.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,r=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(Yo),s.Y36(Lr,10),s.Y36(rl,8),s.Y36($s,8),s.Y36(p2),s.Y36(S2,10),s.Y36(S$),s.Y36(s.R0b),s.Y36($k,8))},n.\u0275dir=s.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,r){1&e&&s.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&e&&(s.Ikx("disabled",r.disabled)("required",r.required),s.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),s.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[s._Bn([{provide:Gk,useExisting:n}]),s.qOj,s.TTD]}),n})(),x2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[p2],imports:[[T2,aS,wu],T2,aS]}),n})();var M2=L(4408);const Bw={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:r}=Bw;r&&(t=r.requestAnimationFrame,e=r.cancelAnimationFrame);const i=t(o=>{e=void 0,n(o)});return new Ni.w0(()=>null==e?void 0:e(i))},requestAnimationFrame(...n){const{delegate:t}=Bw;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Bw;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var k2=L(7565);new class R$ extends k2.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw i}}}(class k$ extends M2.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=Bw.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(t,e,r);t.actions.some(i=>i.id===e)||(Bw.cancelAnimationFrame(e),t._scheduled=void 0)}});let zk,O$=1;const lS={};function R2(n){return n in lS&&(delete lS[n],!0)}const N$={setImmediate(n){const t=O$++;return lS[t]=!0,zk||(zk=Promise.resolve()),zk.then(()=>R2(t)&&n()),t},clearImmediate(n){R2(n)}},{setImmediate:F$,clearImmediate:L$}=N$,cS={setImmediate(...n){const{delegate:t}=cS;return((null==t?void 0:t.setImmediate)||F$)(...n)},clearImmediate(n){const{delegate:t}=cS;return((null==t?void 0:t.clearImmediate)||L$)(n)},delegate:void 0};new class V$ extends k2.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw i}}}(class U$ extends M2.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=cS.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(t,e,r);t.actions.some(i=>i.id===e)||(cS.clearImmediate(e),t._scheduled=void 0)}});var H$=L(3532);function P2(n,t=zp.z){return function j$(n){return(0,Qn.e)((t,e)=>{let r=!1,i=null,o=null,c=!1;const h=()=>{if(null==o||o.unsubscribe(),o=null,r){r=!1;const v=i;i=null,e.next(v)}c&&e.complete()},g=()=>{o=null,c&&e.complete()};t.subscribe((0,Mt.x)(e,v=>{r=!0,i=v,o||(0,dr.Xf)(n(v)).subscribe(o=(0,Mt.x)(e,h,g))},()=>{c=!0,(!r||!o||o.closed)&&e.complete()}))})}(()=>function Z$(n=0,t,e=zp.P){let r=-1;return null!=t&&((0,H$.K)(t)?e=t:r=t),new Or.y(i=>{let o=function q$(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;o<0&&(o=0);let c=0;return e.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},o)})}(n,t))}let $$=(()=>{class n{constructor(e,r,i){this._ngZone=e,this._platform=r,this._scrolled=new en.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Or.y(r=>{this._globalSubscription||this._addGlobalListener();const i=e>0?this._scrolled.pipe(P2(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ze()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){const i=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(Vr(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(e){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,e)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,r){let i=Nd(r),o=e.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>sS(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(s.R0b),s.LFG(Yo),s.LFG(oe,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O2=(()=>{class n{constructor(e,r,i){this._platform=e,this._change=new en.x,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(e.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,r=this._getWindow(),i=e.documentElement,o=i.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||e.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(P2(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Yo),s.LFG(s.R0b),s.LFG(oe,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})(),N2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[Mw,Yk],Mw,Yk]}),n})();class Wk{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Kk extends Wk{constructor(t,e,r,i){super(),this.component=t,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=i}}class F2 extends Wk{constructor(t,e,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Y$ extends Wk{constructor(t){super(),this.element=t instanceof s.SBq?t.nativeElement:t}}class L2{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Kk?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof F2?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Y$?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class W$ extends L2{constructor(t,e,r,i,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=c=>{const h=c.element,g=this._document.createComment("dom-portal");h.parentNode.insertBefore(g,h),this.outletElement.appendChild(h),this._attachedPortal=c,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(h,g)})},this._document=o}attachComponentPortal(t){const r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let i;return t.viewContainerRef?(i=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(t.injector||this._defaultInjector||s.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=t,i}attachTemplatePortal(t){let e=t.viewContainerRef,r=e.createEmbeddedView(t.templateRef,t.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=e.indexOf(r);-1!==i&&e.remove(i)}),this._attachedPortal=t,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let U2=(()=>{class n extends L2{constructor(e,r,i){super(),this._componentFactoryResolver=e,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new s.vpe,this.attachDomPortal=o=>{const c=o.element,h=this._document.createComment("dom-portal");o.setAttachedHost(this),c.parentNode.insertBefore(h,c),this._getRootNode().appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(c,h)})},this._document=i}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const r=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,o=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=r.createComponent(o,r.length,e.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s._Vd),s.Y36(s.s_b),s.Y36(oe))},n.\u0275dir=s.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[s.qOj]}),n})(),V2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const B2=nZ();class K${constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=ii(-this._previousScrollPosition.left),t.style.top=ii(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,r=t.style,i=this._document.body.style,o=r.scrollBehavior||"",c=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),B2&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),B2&&(r.scrollBehavior=o,i.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}}class Q${constructor(t,e,r,i){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class j2{enable(){}disable(){}attach(){}}function Qk(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function H2(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class J${constructor(t,e,r,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Qk(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let X$=(()=>{class n{constructor(e,r,i,o){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new j2,this.close=c=>new Q$(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new K$(this._viewportRuler,this._document),this.reposition=c=>new J$(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=o}}return n.\u0275fac=function(e){return new(e||n)(s.LFG($$),s.LFG(O2),s.LFG(s.R0b),s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class q2{constructor(t){if(this.scrollStrategy=new j2,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const r of e)void 0!==t[r]&&(this[r]=t[r])}}}class ez{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class tz{constructor(t,e,r,i,o,c,h,g,v){this._portalOutlet=t,this._host=e,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=c,this._document=h,this._location=g,this._outsideClickDispatcher=v,this._backdropElement=null,this._backdropClick=new en.x,this._attachments=new en.x,this._detachments=new en.x,this._locationChanges=Ni.w0.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._backdropTransitionendHandler=E=>{this._disposeBackdrop(E.target)},this._keydownEvents=new en.x,this._outsidePointerEvents=new en.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Qs.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=ii(this._config.width),t.height=ii(this._config.height),t.minWidth=ii(this._config.minWidth),t.minHeight=ii(this._config.minHeight),t.maxWidth=ii(this._config.maxWidth),t.maxHeight=ii(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,r){const i=nL(e||[]).filter(o=>!!o);i.length&&(r?t.classList.add(...i):t.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Rw((0,au.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let Z2=(()=>{class n{constructor(e,r){this._platform=r,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||ok()){const i=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}const r=this._document.createElement("div");r.classList.add(e),ok()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe),s.LFG(Yo))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const G2="cdk-overlay-connected-position-bounding-box",nz=/([A-Za-z%]+)$/;class $2{constructor(t,e,r,i,o){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new en.x,this._resizeSubscription=Ni.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(G2),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[];let c;for(let h of this._preferredPositions){let g=this._getOriginPoint(t,i,h),v=this._getOverlayPoint(g,e,h),E=this._getOverlayFit(v,e,r,h);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,g);this._canFitWithFlexibleDimensions(E,v,r)?o.push({position:h,origin:g,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(g,h)}):(!c||c.overlayFit.visibleArea<E.visibleArea)&&(c={overlayFit:E,overlayPoint:v,originPoint:g,position:h,overlayRect:e})}if(o.length){let h=null,g=-1;for(const v of o){const E=v.boundingBoxRect.width*v.boundingBoxRect.height*(v.position.weight||1);E>g&&(g=E,h=v)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ng(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(G2),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,r){let i,o;if("center"==r.originX)i=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,h=this._isRtl()?t.left:t.right;i="start"==r.originX?c:h}return e.left<0&&(i-=e.left),o="center"==r.originY?t.top+t.height/2:"top"==r.originY?t.top:t.bottom,e.top<0&&(o-=e.top),{x:i,y:o}}_getOverlayPoint(t,e,r){let i,o;return i="center"==r.overlayX?-e.width/2:"start"===r.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==r.overlayY?-e.height/2:"top"==r.overlayY?0:-e.height,{x:t.x+i,y:t.y+o}}_getOverlayFit(t,e,r,i){const o=Y2(e);let{x:c,y:h}=t,g=this._getOffset(i,"x"),v=this._getOffset(i,"y");g&&(c+=g),v&&(h+=v);let k=0-h,N=h+o.height-r.height,U=this._subtractOverflows(o.width,0-c,c+o.width-r.width),X=this._subtractOverflows(o.height,k,N),pe=U*X;return{visibleArea:pe,isCompletelyWithinViewport:o.width*o.height===pe,fitsInViewportVertically:X===o.height,fitsInViewportHorizontally:U==o.width}}_canFitWithFlexibleDimensions(t,e,r){if(this._hasFlexibleDimensions){const i=r.bottom-e.y,o=r.right-e.x,c=z2(this._overlayRef.getConfig().minHeight),h=z2(this._overlayRef.getConfig().minWidth),v=t.fitsInViewportHorizontally||null!=h&&h<=o;return(t.fitsInViewportVertically||null!=c&&c<=i)&&v}return!1}_pushOverlayOnScreen(t,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const i=Y2(e),o=this._viewportRect,c=Math.max(t.x+i.width-o.width,0),h=Math.max(t.y+i.height-o.height,0),g=Math.max(o.top-r.top-t.y,0),v=Math.max(o.left-r.left-t.x,0);let E=0,D=0;return E=i.width<=o.width?v||-c:t.x<this._viewportMargin?o.left-r.left-t.x:0,D=i.height<=o.height?g||-h:t.y<this._viewportMargin?o.top-r.top-t.y:0,this._previousPushAmount={x:E,y:D},{x:t.x+E,y:t.y+D}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new ez(t,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=t.overlayY;r="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(t,e){const r=this._viewportRect,i=this._isRtl();let o,c,h,E,D,k;if("top"===e.overlayY)c=t.y,o=r.height-c+this._viewportMargin;else if("bottom"===e.overlayY)h=r.height-t.y+2*this._viewportMargin,o=r.height-h+this._viewportMargin;else{const N=Math.min(r.bottom-t.y+r.top,t.y),U=this._lastBoundingBoxSize.height;o=2*N,c=t.y-N,o>U&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.y-U/2)}if("end"===e.overlayX&&!i||"start"===e.overlayX&&i)k=r.width-t.x+this._viewportMargin,E=t.x-this._viewportMargin;else if("start"===e.overlayX&&!i||"end"===e.overlayX&&i)D=t.x,E=r.right-t.x;else{const N=Math.min(r.right-t.x+r.left,t.x),U=this._lastBoundingBoxSize.width;E=2*N,D=t.x-N,E>U&&!this._isInitialRender&&!this._growAfterOpen&&(D=t.x-U/2)}return{top:c,left:D,bottom:h,right:k,width:E,height:o}}_setBoundingBoxStyles(t,e){const r=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;i.height=ii(r.height),i.top=ii(r.top),i.bottom=ii(r.bottom),i.width=ii(r.width),i.left=ii(r.left),i.right=ii(r.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",o&&(i.maxHeight=ii(o)),c&&(i.maxWidth=ii(c))}this._lastBoundingBoxSize=r,Ng(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Ng(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ng(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(i){const E=this._viewportRuler.getViewportScrollPosition();Ng(r,this._getExactOverlayY(e,t,E)),Ng(r,this._getExactOverlayX(e,t,E))}else r.position="static";let h="",g=this._getOffset(e,"x"),v=this._getOffset(e,"y");g&&(h+=`translateX(${g}px) `),v&&(h+=`translateY(${v}px)`),r.transform=h.trim(),c.maxHeight&&(i?r.maxHeight=ii(c.maxHeight):o&&(r.maxHeight="")),c.maxWidth&&(i?r.maxWidth=ii(c.maxWidth):o&&(r.maxWidth="")),Ng(this._pane.style,r)}_getExactOverlayY(t,e,r){let i={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),"bottom"===t.overlayY?i.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":i.top=ii(o.y),i}_getExactOverlayX(t,e,r){let c,i={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),c=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===c?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=ii(o.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:H2(t,r),isOriginOutsideView:Qk(t,r),isOverlayClipped:H2(e,r),isOverlayOutsideView:Qk(e,r)}}_subtractOverflows(t,...e){return e.reduce((r,i)=>r-Math.max(i,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&nL(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof s.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+e,height:r,width:e}}}function Ng(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function z2(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(nz);return e&&"px"!==e?null:parseFloat(t)}return n||null}function Y2(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const W2="cdk-global-overlay-wrapper";class rz{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(W2),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:c,maxHeight:h}=r,g=!("100%"!==i&&"100vw"!==i||c&&"100%"!==c&&"100vw"!==c),v=!("100%"!==o&&"100vh"!==o||h&&"100%"!==h&&"100vh"!==h);t.position=this._cssPosition,t.marginLeft=g?"0":this._leftOffset,t.marginTop=v?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,g?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=v?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(W2),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let iz=(()=>{class n{constructor(e,r,i,o){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=o}global(){return new rz}flexibleConnectedTo(e){return new $2(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(O2),s.LFG(oe),s.LFG(Yo),s.LFG(Z2))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),K2=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sz=(()=>{class n extends K2{constructor(e,r){super(e),this._ngZone=r,this._keydownListener=i=>{const o=this._attachedOverlays;for(let c=o.length-1;c>-1;c--)if(o[c]._keydownEvents.observers.length>0){const h=o[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(i)):h.next(i);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe),s.LFG(s.R0b,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oz=(()=>{class n extends K2{constructor(e,r,i){super(e),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=xg(o)},this._clickListener=o=>{const c=xg(o),h="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const g=this._attachedOverlays.slice();for(let v=g.length-1;v>-1;v--){const E=g[v];if(E._outsidePointerEvents.observers.length<1||!E.hasAttached())continue;if(E.overlayElement.contains(c)||E.overlayElement.contains(h))break;const D=E._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(o)):D.next(o)}}}add(e){if(super.add(e),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(oe),s.LFG(Yo),s.LFG(s.R0b,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),az=0,uS=(()=>{class n{constructor(e,r,i,o,c,h,g,v,E,D,k){this.scrollStrategies=e,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=o,this._keyboardDispatcher=c,this._injector=h,this._ngZone=g,this._document=v,this._directionality=E,this._location=D,this._outsideClickDispatcher=k}create(e){const r=this._createHostElement(),i=this._createPaneElement(r),o=this._createPortalOutlet(i),c=new q2(e);return c.direction=c.direction||this._directionality.value,new tz(o,r,i,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const r=this._document.createElement("div");return r.id="cdk-overlay-"+az++,r.classList.add("cdk-overlay-pane"),e.appendChild(r),r}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(s.z2F)),new W$(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(X$),s.LFG(Z2),s.LFG(s._Vd),s.LFG(iz),s.LFG(sz),s.LFG(s.zs3),s.LFG(s.R0b),s.LFG(oe),s.LFG(Av),s.LFG(Ie),s.LFG(oz))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const uz={provide:new s.OlP("cdk-connected-overlay-scroll-strategy"),deps:[uS],useFactory:function cz(n){return()=>n.scrollStrategies.reposition()}};let dz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[uS,uz],imports:[[Mw,V2,N2],N2]}),n})();const hz=["mat-button",""],fz=["*"],gz=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],mz=Hk(N4(F4(class{constructor(n){this._elementRef=n}})));let Jk=(()=>{class n extends mz{constructor(e,r,i){super(e),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of gz)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,r){e?this._focusMonitor.focusVia(this._getHostElement(),e,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(vL),s.Y36(Uw,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,r){if(1&e&&s.Gf(v2,5),2&e){let i;s.iGM(i=s.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,r){2&e&&(s.uIk("disabled",r.disabled||null),s.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[s.qOj],attrs:hz,ngContentSelectors:fz,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,r){1&e&&(s.F$t(),s.TgZ(0,"span",0),s.Hsn(1),s.qZA(),s._UZ(2,"span",1)(3,"span",2)),2&e&&(s.xp6(2),s.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),s.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[v2],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),Q2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[W4,wu],wu]}),n})();const _z=["mat-calendar-body",""];function vz(n,t){if(1&n&&(s.TgZ(0,"tr",2)(1,"td",3),s._uU(2),s.qZA()()),2&n){const e=s.oxw();s.xp6(1),s.Udp("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),s.uIk("colspan",e.numCols),s.xp6(1),s.hij(" ",e.label," ")}}function yz(n,t){if(1&n&&(s.TgZ(0,"td",3),s._uU(1),s.qZA()),2&n){const e=s.oxw(2);s.Udp("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),s.uIk("colspan",e._firstRowOffset),s.xp6(1),s.hij(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function bz(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"td",7)(1,"button",8),s.NdJ("click",function(i){const c=s.CHM(e).$implicit;return s.oxw(2)._cellClicked(c,i)}),s.TgZ(2,"div",9),s._uU(3),s.qZA(),s._UZ(4,"div",10),s.qZA()()}if(2&n){const e=t.$implicit,r=t.index,i=s.oxw().index,o=s.oxw();s.Udp("width",o._cellWidth)("padding-top",o._cellPadding)("padding-bottom",o._cellPadding),s.uIk("data-mat-row",i)("data-mat-col",r),s.xp6(1),s.ekj("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",o._isActiveCell(i,r))("mat-calendar-body-range-start",o._isRangeStart(e.compareValue))("mat-calendar-body-range-end",o._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",o._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",o._isComparisonBridgeStart(e.compareValue,i,r))("mat-calendar-body-comparison-bridge-end",o._isComparisonBridgeEnd(e.compareValue,i,r))("mat-calendar-body-comparison-start",o._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",o._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",o._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",o._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",o._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",o._isInPreview(e.compareValue)),s.Q6J("ngClass",e.cssClasses)("tabindex",o._isActiveCell(i,r)?0:-1),s.uIk("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",o._isSelected(e.compareValue))("aria-current",o.todayValue===e.compareValue?"date":null),s.xp6(1),s.ekj("mat-calendar-body-selected",o._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",o._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",o.todayValue===e.compareValue),s.xp6(1),s.hij(" ",e.displayValue," ")}}function wz(n,t){if(1&n&&(s.TgZ(0,"tr",4),s.YNc(1,yz,2,6,"td",5),s.YNc(2,bz,5,47,"td",6),s.qZA()),2&n){const e=t.$implicit,r=t.index,i=s.oxw();s.xp6(1),s.Q6J("ngIf",0===r&&i._firstRowOffset),s.xp6(1),s.Q6J("ngForOf",e)}}function Cz(n,t){if(1&n&&(s.TgZ(0,"th",5)(1,"span",6),s._uU(2),s.qZA(),s.TgZ(3,"span",7),s._uU(4),s.qZA()()),2&n){const e=t.$implicit;s.xp6(2),s.Oqu(e.long),s.xp6(2),s.Oqu(e.narrow)}}const J2=["*"];function Ez(n,t){}function Iz(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"mat-month-view",5),s.NdJ("activeDateChange",function(i){return s.CHM(e),s.oxw().activeDate=i})("_userSelection",function(i){return s.CHM(e),s.oxw()._dateSelected(i)}),s.qZA()}if(2&n){const e=s.oxw();s.Q6J("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)}}function Dz(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"mat-year-view",6),s.NdJ("activeDateChange",function(i){return s.CHM(e),s.oxw().activeDate=i})("monthSelected",function(i){return s.CHM(e),s.oxw()._monthSelectedInYearView(i)})("selectedChange",function(i){return s.CHM(e),s.oxw()._goToDateInView(i,"month")}),s.qZA()}if(2&n){const e=s.oxw();s.Q6J("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function Tz(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"mat-multi-year-view",7),s.NdJ("activeDateChange",function(i){return s.CHM(e),s.oxw().activeDate=i})("yearSelected",function(i){return s.CHM(e),s.oxw()._yearSelectedInMultiYearView(i)})("selectedChange",function(i){return s.CHM(e),s.oxw()._goToDateInView(i,"year")}),s.qZA()}if(2&n){const e=s.oxw();s.Q6J("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function Sz(n,t){}const Az=["button"];function xz(n,t){1&n&&(s.O4$(),s.TgZ(0,"svg",3),s._UZ(1,"path",4),s.qZA())}const Mz=[[["","matDatepickerToggleIcon",""]]],kz=["[matDatepickerToggleIcon]"];function Rz(n,t){1&n&&(s.TgZ(0,"div",0),s.Hsn(1),s.qZA())}class Xk{constructor(t,e,r,i,o={},c=t,h){this.value=t,this.displayValue=e,this.ariaLabel=r,this.enabled=i,this.cssClasses=o,this.compareValue=c,this.rawValue=h}}let Nv=(()=>{class n{constructor(e,r){this._elementRef=e,this._ngZone=r,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new s.vpe,this.previewChange=new s.vpe,this._enterHandler=i=>{if(this._skipNextFocus&&"focus"===i.type)this._skipNextFocus=!1;else if(i.target&&this.isRange){const o=this._getCellFromElement(i.target);o&&this._ngZone.run(()=>this.previewChange.emit({value:o.enabled?o:null,event:i}))}},this._leaveHandler=i=>{null!==this.previewEnd&&this.isRange&&i.target&&this._getCellFromElement(i.target)&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:i}))},r.runOutsideAngular(()=>{const i=e.nativeElement;i.addEventListener("mouseenter",this._enterHandler,!0),i.addEventListener("focus",this._enterHandler,!0),i.addEventListener("mouseleave",this._leaveHandler,!0),i.addEventListener("blur",this._leaveHandler,!0)})}_cellClicked(e,r){e.enabled&&this.selectedValueChange.emit({value:e.value,event:r})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){const r=e.numCols,{rows:i,numCols:o}=this;(e.rows||r)&&(this._firstRowOffset=i&&i.length&&i[0].length?o-i[0].length:0),(e.cellAspectRatio||r||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/o+"%"),(r||!this._cellWidth)&&(this._cellWidth=100/o+"%")}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mouseenter",this._enterHandler,!0),e.removeEventListener("focus",this._enterHandler,!0),e.removeEventListener("mouseleave",this._leaveHandler,!0),e.removeEventListener("blur",this._leaveHandler,!0)}_isActiveCell(e,r){let i=e*this.numCols+r;return e&&(i-=this._firstRowOffset),i==this.activeCell}_focusActiveCell(e=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Qs.q)(1)).subscribe(()=>{setTimeout(()=>{const r=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");r&&(e||(this._skipNextFocus=!0),r.focus())})})})}_isRangeStart(e){return eR(e,this.startValue,this.endValue)}_isRangeEnd(e){return tR(e,this.startValue,this.endValue)}_isInRange(e){return nR(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return eR(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,r,i){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let o=this.rows[r][i-1];if(!o){const c=this.rows[r-1];o=c&&c[c.length-1]}return o&&!this._isRangeEnd(o.compareValue)}_isComparisonBridgeEnd(e,r,i){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let o=this.rows[r][i+1];if(!o){const c=this.rows[r+1];o=c&&c[0]}return o&&!this._isRangeStart(o.compareValue)}_isComparisonEnd(e){return tR(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return nR(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return eR(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return tR(e,this.previewStart,this.previewEnd)}_isInPreview(e){return nR(e,this.previewStart,this.previewEnd,this.isRange)}_getCellFromElement(e){let r;if(X2(e)?r=e:X2(e.parentNode)&&(r=e.parentNode),r){const i=r.getAttribute("data-mat-row"),o=r.getAttribute("data-mat-col");if(i&&o)return this.rows[parseInt(i)][parseInt(o)]}return null}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.R0b))},n.\u0275cmp=s.Xpm({type:n,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange"},exportAs:["matCalendarBody"],features:[s.TTD],attrs:_z,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(e,r){1&e&&(s.YNc(0,vz,3,6,"tr",0),s.YNc(1,wz,3,2,"tr",1)),2&e&&(s.Q6J("ngIf",r._firstRowOffset<r.labelMinRequiredCells),s.xp6(1),s.Q6J("ngForOf",r.rows))},directives:[Ut,Xt,gr],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content,.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content{outline:dotted 2px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content.mat-calendar-body-selected,.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content.mat-calendar-body-selected{outline:solid 3px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}\n'],encapsulation:2,changeDetection:0}),n})();function X2(n){return"TD"===n.nodeName}function eR(n,t,e){return null!==e&&t!==e&&n<e&&n===t}function tR(n,t,e){return null!==t&&t!==e&&n>=t&&n===e}function nR(n,t,e,r){return r&&null!==t&&null!==e&&t!==e&&n>=t&&n<=e}class Wo{constructor(t,e){this.start=t,this.end=e}}let Af=(()=>{class n{constructor(e,r){this.selection=e,this._adapter=r,this._selectionChanged=new en.x,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,r){const i=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:r,oldValue:i})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}}return n.\u0275fac=function(e){s.$Z()},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Pz=(()=>{class n extends Af{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const e=new n(this._adapter);return e.updateSelection(this.selection,this),e}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(as))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const eU={provide:Af,deps:[[new s.FiY,new s.tp0,Af],as],useFactory:function Nz(n,t){return n||new Pz(t)}},dS=new s.OlP("MAT_DATE_RANGE_SELECTION_STRATEGY");let tU=(()=>{class n{constructor(e,r,i,o,c){this._changeDetectorRef=e,this._dateFormats=r,this._dateAdapter=i,this._dir=o,this._rangeStrategy=c,this._rerenderSubscription=Ni.w0.EMPTY,this.selectedChange=new s.vpe,this._userSelection=new s.vpe,this.activeDateChange=new s.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){const r=this._activeDate,i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(i,this.minDate,this.maxDate),this._hasSameMonthAndYear(r,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Wo?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Ss(null)).subscribe(()=>this._init())}ngOnChanges(e){const r=e.comparisonStart||e.comparisonEnd;r&&!r.firstChange&&this._setRanges(this.selected)}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){const r=e.value,i=this._dateAdapter.getYear(this.activeDate),o=this._dateAdapter.getMonth(this.activeDate),c=this._dateAdapter.createDate(i,o,r);let h,g;this._selected instanceof Wo?(h=this._getDateInCurrentMonth(this._selected.start),g=this._getDateInCurrentMonth(this._selected.end)):h=g=this._getDateInCurrentMonth(this._selected),(h!==r||g!==r)&&this.selectedChange.emit(c),this._userSelection.emit({value:c,event:e.event}),this._previewStart=this._previewEnd=null,this._changeDetectorRef.markForCheck()}_handleCalendarBodyKeydown(e){const r=this._activeDate,i=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,i?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,i?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&e.preventDefault());case 27:return void(null!=this._previewEnd&&!fk(e)&&(this._previewStart=this._previewEnd=null,this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e}),e.preventDefault(),e.stopPropagation()));default:return}this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_previewChanged({event:e,value:r}){if(this._rangeStrategy){const o=this._rangeStrategy.createPreview(r?r.rawValue:null,this.selected,e);this._previewStart=this._getCellCompareValue(o.start),this._previewEnd=this._getCellCompareValue(o.end),this._changeDetectorRef.detectChanges()}}_initWeekdays(){const e=this._dateAdapter.getFirstDayOfWeek(),r=this._dateAdapter.getDayOfWeekNames("narrow");let o=this._dateAdapter.getDayOfWeekNames("long").map((c,h)=>({long:c,narrow:r[h]}));this._weekdays=o.slice(e).concat(o.slice(0,e))}_createWeekCells(){const e=this._dateAdapter.getNumDaysInMonth(this.activeDate),r=this._dateAdapter.getDateNames();this._weeks=[[]];for(let i=0,o=this._firstWeekOffset;i<e;i++,o++){7==o&&(this._weeks.push([]),o=0);const c=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),i+1),h=this._shouldEnableDate(c),g=this._dateAdapter.format(c,this._dateFormats.display.dateA11yLabel),v=this.dateClass?this.dateClass(c,"month"):void 0;this._weeks[this._weeks.length-1].push(new Xk(i+1,r[i],g,h,v,this._getCellCompareValue(c),c))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,r){return!(!e||!r||this._dateAdapter.getMonth(e)!=this._dateAdapter.getMonth(r)||this._dateAdapter.getYear(e)!=this._dateAdapter.getYear(r))}_getCellCompareValue(e){if(e){const r=this._dateAdapter.getYear(e),i=this._dateAdapter.getMonth(e),o=this._dateAdapter.getDate(e);return new Date(r,i,o).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(e){e instanceof Wo?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.sBO),s.Y36(Og,8),s.Y36(as,8),s.Y36(Av,8),s.Y36(dS,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-month-view"]],viewQuery:function(e,r){if(1&e&&s.Gf(Nv,5),2&e){let i;s.iGM(i=s.CRH())&&(r._matCalendarBody=i.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[s.TTD],decls:7,vars:13,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","selectedValueChange","previewChange","keyup","keydown"],["scope","col"],[1,"cdk-visually-hidden"],["aria-hidden","true"]],template:function(e,r){1&e&&(s.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),s.YNc(3,Cz,5,2,"th",2),s.qZA(),s.TgZ(4,"tr"),s._UZ(5,"th",3),s.qZA()(),s.TgZ(6,"tbody",4),s.NdJ("selectedValueChange",function(o){return r._dateSelected(o)})("previewChange",function(o){return r._previewChanged(o)})("keyup",function(o){return r._handleCalendarBodyKeyup(o)})("keydown",function(o){return r._handleCalendarBodyKeydown(o)}),s.qZA()()),2&e&&(s.xp6(3),s.Q6J("ngForOf",r._weekdays),s.xp6(3),s.Q6J("label",r._monthLabel)("rows",r._weeks)("todayValue",r._todayDate)("startValue",r._rangeStart)("endValue",r._rangeEnd)("comparisonStart",r._comparisonRangeStart)("comparisonEnd",r._comparisonRangeEnd)("previewStart",r._previewStart)("previewEnd",r._previewEnd)("isRange",r._isRange)("labelMinRequiredCells",3)("activeCell",r._dateAdapter.getDate(r.activeDate)-1))},directives:[Nv,Xt],encapsulation:2,changeDetection:0}),n})(),nU=(()=>{class n{constructor(e,r,i){this._changeDetectorRef=e,this._dateAdapter=r,this._dir=i,this._rerenderSubscription=Ni.w0.EMPTY,this.selectedChange=new s.vpe,this.yearSelected=new s.vpe,this.activeDateChange=new s.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let r=this._activeDate;const i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(i,this.minDate,this.maxDate),rU(this._dateAdapter,r,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Wo?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Ss(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const r=this._dateAdapter.getYear(this._activeDate)-jw(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let i=0,o=[];i<24;i++)o.push(r+i),4==o.length&&(this._years.push(o.map(c=>this._createCellForYear(c))),o=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){const r=e.value;this.yearSelected.emit(this._dateAdapter.createDate(r,0,1));let i=this._dateAdapter.getMonth(this.activeDate),o=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(r,i,1));this.selectedChange.emit(this._dateAdapter.createDate(r,i,Math.min(this._dateAdapter.getDate(this.activeDate),o)))}_handleCalendarBodyKeydown(e){const r=this._activeDate,i=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,i?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,i?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-jw(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-jw(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-240:-24);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?240:24);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return jw(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_createCellForYear(e){const r=this._dateAdapter.createDate(e,0,1),i=this._dateAdapter.getYearName(r),o=this.dateClass?this.dateClass(r,"multi-year"):void 0;return new Xk(e,i,i,this._shouldEnableYear(e),o)}_shouldEnableYear(e){if(null==e||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let i=this._dateAdapter.createDate(e,0,1);this._dateAdapter.getYear(i)==e;i=this._dateAdapter.addCalendarDays(i,1))if(this.dateFilter(i))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(e){if(this._selectedYear=null,e instanceof Wo){const r=e.start||e.end;r&&(this._selectedYear=this._dateAdapter.getYear(r))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.sBO),s.Y36(as,8),s.Y36(Av,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-multi-year-view"]],viewQuery:function(e,r){if(1&e&&s.Gf(Nv,5),2&e){let i;s.iGM(i=s.CRH())&&(r._matCalendarBody=i.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(e,r){1&e&&(s.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),s._UZ(3,"th",2),s.qZA()(),s.TgZ(4,"tbody",3),s.NdJ("selectedValueChange",function(o){return r._yearSelected(o)})("keyup",function(o){return r._handleCalendarBodyKeyup(o)})("keydown",function(o){return r._handleCalendarBodyKeydown(o)}),s.qZA()()),2&e&&(s.xp6(4),s.Q6J("rows",r._years)("todayValue",r._todayYear)("startValue",r._selectedYear)("endValue",r._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",r._getActiveCell()))},directives:[Nv],encapsulation:2,changeDetection:0}),n})();function rU(n,t,e,r,i){const o=n.getYear(t),c=n.getYear(e),h=iU(n,r,i);return Math.floor((o-h)/24)===Math.floor((c-h)/24)}function jw(n,t,e,r){return function Vz(n,t){return(n%t+t)%t}(n.getYear(t)-iU(n,e,r),24)}function iU(n,t,e){let r=0;return e?r=n.getYear(e)-24+1:t&&(r=n.getYear(t)),r}let sU=(()=>{class n{constructor(e,r,i,o){this._changeDetectorRef=e,this._dateFormats=r,this._dateAdapter=i,this._dir=o,this._rerenderSubscription=Ni.w0.EMPTY,this.selectedChange=new s.vpe,this.monthSelected=new s.vpe,this.activeDateChange=new s.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let r=this._activeDate;const i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(i,this.minDate,this.maxDate),this._dateAdapter.getYear(r)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof Wo?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Ss(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){const r=e.value,i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),r,1);this.monthSelected.emit(i);const o=this._dateAdapter.getNumDaysInMonth(i);this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),r,Math.min(this._dateAdapter.getDate(this.activeDate),o)))}_handleCalendarBodyKeydown(e){const r=this._activeDate,i=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,i?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,i?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(r=>r.map(i=>this._createCellForMonth(i,e[i]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_createCellForMonth(e,r){const i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),o=this._dateAdapter.format(i,this._dateFormats.display.monthYearA11yLabel),c=this.dateClass?this.dateClass(i,"year"):void 0;return new Xk(e,r.toLocaleUpperCase(),o,this._shouldEnableMonth(e),c)}_shouldEnableMonth(e){const r=this._dateAdapter.getYear(this.activeDate);if(null==e||this._isYearAndMonthAfterMaxDate(r,e)||this._isYearAndMonthBeforeMinDate(r,e))return!1;if(!this.dateFilter)return!0;for(let o=this._dateAdapter.createDate(r,e,1);this._dateAdapter.getMonth(o)==e;o=this._dateAdapter.addCalendarDays(o,1))if(this.dateFilter(o))return!0;return!1}_isYearAndMonthAfterMaxDate(e,r){if(this.maxDate){const i=this._dateAdapter.getYear(this.maxDate),o=this._dateAdapter.getMonth(this.maxDate);return e>i||e===i&&r>o}return!1}_isYearAndMonthBeforeMinDate(e,r){if(this.minDate){const i=this._dateAdapter.getYear(this.minDate),o=this._dateAdapter.getMonth(this.minDate);return e<i||e===i&&r<o}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(e){this._selectedMonth=e instanceof Wo?this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._getMonthInCurrentYear(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.sBO),s.Y36(Og,8),s.Y36(as,8),s.Y36(Av,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-year-view"]],viewQuery:function(e,r){if(1&e&&s.Gf(Nv,5),2&e){let i;s.iGM(i=s.CRH())&&(r._matCalendarBody=i.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(e,r){1&e&&(s.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),s._UZ(3,"th",2),s.qZA()(),s.TgZ(4,"tbody",3),s.NdJ("selectedValueChange",function(o){return r._monthSelected(o)})("keyup",function(o){return r._handleCalendarBodyKeyup(o)})("keydown",function(o){return r._handleCalendarBodyKeydown(o)}),s.qZA()()),2&e&&(s.xp6(4),s.Q6J("label",r._yearLabel)("rows",r._months)("todayValue",r._todayMonth)("startValue",r._selectedMonth)("endValue",r._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",r._dateAdapter.getMonth(r.activeDate)))},directives:[Nv],encapsulation:2,changeDetection:0}),n})(),Hw=(()=>{class n{constructor(){this.changes=new en.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,r){return`${e} \u2013 ${r}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bz=0,jz=(()=>{class n{constructor(e,r,i,o,c){this._intl=e,this.calendar=r,this._dateAdapter=i,this._dateFormats=o,this._buttonDescriptionId="mat-calendar-button-"+Bz++,this.calendar.stateChanges.subscribe(()=>c.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const r=this._dateAdapter.getYear(this.calendar.activeDate)-jw(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),i=r+24-1,o=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1)),c=this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1));return this._intl.formatYearRange(o,c)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,r){return"month"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(r)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(r):"year"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(r):rU(this._dateAdapter,e,r,this.calendar.minDate,this.calendar.maxDate)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Hw),s.Y36((0,s.Gpc)(()=>sR)),s.Y36(as,8),s.Y36(Og,8),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:J2,decls:11,vars:10,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["viewBox","0 0 10 5","focusable","false",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(e,r){1&e&&(s.F$t(),s.TgZ(0,"div",0)(1,"div",1)(2,"button",2),s.NdJ("click",function(){return r.currentPeriodClicked()}),s.TgZ(3,"span"),s._uU(4),s.qZA(),s.O4$(),s.TgZ(5,"svg",3),s._UZ(6,"polygon",4),s.qZA()(),s.kcU(),s._UZ(7,"div",5),s.Hsn(8),s.TgZ(9,"button",6),s.NdJ("click",function(){return r.previousClicked()}),s.qZA(),s.TgZ(10,"button",7),s.NdJ("click",function(){return r.nextClicked()}),s.qZA()()()),2&e&&(s.xp6(2),s.uIk("aria-label",r.periodButtonLabel)("aria-describedby",r._buttonDescriptionId),s.xp6(1),s.uIk("id",r._buttonDescriptionId),s.xp6(1),s.Oqu(r.periodButtonText),s.xp6(1),s.ekj("mat-calendar-invert","month"!==r.calendar.currentView),s.xp6(4),s.Q6J("disabled",!r.previousEnabled()),s.uIk("aria-label",r.prevButtonLabel),s.xp6(1),s.Q6J("disabled",!r.nextEnabled()),s.uIk("aria-label",r.nextButtonLabel))},directives:[Jk],encapsulation:2,changeDetection:0}),n})(),sR=(()=>{class n{constructor(e,r,i,o){this._dateAdapter=r,this._dateFormats=i,this._changeDetectorRef=o,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new s.vpe,this.yearSelected=new s.vpe,this.monthSelected=new s.vpe,this.viewChanged=new s.vpe(!0),this._userSelection=new s.vpe,this.stateChanges=new en.x,this._intlChanges=e.changes.subscribe(()=>{o.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){this._selected=e instanceof Wo?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){const r=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),r&&this.viewChanged.emit(r)}ngAfterContentInit(){this._calendarHeaderPortal=new Kk(this.headerComponent||jz),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){const r=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,i=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,o=r||i||e.dateFilter;if(o&&!o.firstChange){const c=this._getCurrentViewComponent();c&&(this._changeDetectorRef.detectChanges(),c._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){const r=e.value;(this.selected instanceof Wo||r&&!this._dateAdapter.sameDate(r,this.selected))&&this.selectedChange.emit(r),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,r){this.activeDate=e,this.currentView=r}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Hw),s.Y36(as,8),s.Y36(Og,8),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-calendar"]],viewQuery:function(e,r){if(1&e&&(s.Gf(tU,5),s.Gf(sU,5),s.Gf(nU,5)),2&e){let i;s.iGM(i=s.CRH())&&(r.monthView=i.first),s.iGM(i=s.CRH())&&(r.yearView=i.first),s.iGM(i=s.CRH())&&(r.multiYearView=i.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[s._Bn([eU]),s.TTD],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(e,r){1&e&&(s.YNc(0,Ez,0,0,"ng-template",0),s.TgZ(1,"div",1),s.YNc(2,Iz,1,8,"mat-month-view",2),s.YNc(3,Dz,1,6,"mat-year-view",3),s.YNc(4,Tz,1,6,"mat-multi-year-view",4),s.qZA()),2&e&&(s.Q6J("cdkPortalOutlet",r._calendarHeaderPortal),s.xp6(1),s.Q6J("ngSwitch",r.currentView),s.xp6(1),s.Q6J("ngSwitchCase","month"),s.xp6(1),s.Q6J("ngSwitchCase","year"),s.xp6(1),s.Q6J("ngSwitchCase","multi-year"))},directives:[tU,sU,nU,U2,RZ,Mr,Si],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}\n'],encapsulation:2,changeDetection:0}),n})();const oU={transformPanel:gk("transformPanel",[Ow("void => enter-dropdown",Pw("120ms cubic-bezier(0, 0, 0.2, 1)",IL([yc({opacity:0,transform:"scale(1, 0.8)"}),yc({opacity:1,transform:"scale(1, 1)"})]))),Ow("void => enter-dialog",Pw("150ms cubic-bezier(0, 0, 0.2, 1)",IL([yc({opacity:0,transform:"scale(0.7)"}),yc({transform:"none",opacity:1})]))),Ow("* => void",Pw("100ms linear",yc({opacity:0})))]),fadeInCalendar:gk("fadeInCalendar",[mk("void",yc({opacity:0})),mk("enter",yc({opacity:1})),Ow("void => *",Pw("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let Hz=0;const aU=new s.OlP("mat-datepicker-scroll-strategy"),Zz={provide:aU,deps:[uS],useFactory:function qz(n){return()=>n.scrollStrategies.reposition()}},Gz=Hk(class{constructor(n){this._elementRef=n}});let $z=(()=>{class n extends Gz{constructor(e,r,i,o,c,h){super(e),this._changeDetectorRef=r,this._globalModel=i,this._dateAdapter=o,this._rangeSelectionStrategy=c,this._subscriptions=new Ni.w0,this._animationDone=new en.x,this._actionsPortal=null,this._closeButtonText=h.closeCalendarLabel}ngOnInit(){this._model=this._actionsPortal?this._globalModel.clone():this._globalModel,this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){const r=this._model.selection,i=e.value,o=r instanceof Wo;if(o&&this._rangeSelectionStrategy){const c=this._rangeSelectionStrategy.selectionFinished(i,r,e.event);this._model.updateSelection(c,this)}else i&&(o||!this._dateAdapter.sameDate(i,r))&&this._model.add(i);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(Af),s.Y36(as),s.Y36(dS,8),s.Y36(Hw))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-datepicker-content"]],viewQuery:function(e,r){if(1&e&&s.Gf(sR,5),2&e){let i;s.iGM(i=s.CRH())&&(r._calendar=i.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(e,r){1&e&&s.WFA("@transformPanel.done",function(){return r._animationDone.next()}),2&e&&(s.d8E("@transformPanel",r._animationState),s.ekj("mat-datepicker-content-touch",r.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[s.qOj],decls:5,vars:24,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","yearSelected","monthSelected","viewChanged","_userSelection"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(e,r){if(1&e&&(s.TgZ(0,"div",0)(1,"mat-calendar",1),s.NdJ("yearSelected",function(o){return r.datepicker._selectYear(o)})("monthSelected",function(o){return r.datepicker._selectMonth(o)})("viewChanged",function(o){return r.datepicker._viewChanged(o)})("_userSelection",function(o){return r._handleUserSelection(o)}),s.qZA(),s.YNc(2,Sz,0,0,"ng-template",2),s.TgZ(3,"button",3),s.NdJ("focus",function(){return r._closeButtonFocused=!0})("blur",function(){return r._closeButtonFocused=!1})("click",function(){return r.datepicker.close()}),s._uU(4),s.qZA()()),2&e){let i;s.ekj("mat-datepicker-content-container-with-custom-header",r.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",r._actionsPortal),s.uIk("aria-modal",!0)("aria-labelledby",null!==(i=r._dialogLabelId)&&void 0!==i?i:void 0),s.xp6(1),s.Q6J("id",r.datepicker.id)("ngClass",r.datepicker.panelClass)("startAt",r.datepicker.startAt)("startView",r.datepicker.startView)("minDate",r.datepicker._getMinDate())("maxDate",r.datepicker._getMaxDate())("dateFilter",r.datepicker._getDateFilter())("headerComponent",r.datepicker.calendarHeaderComponent)("selected",r._getSelected())("dateClass",r.datepicker.dateClass)("comparisonStart",r.comparisonStart)("comparisonEnd",r.comparisonEnd)("@fadeInCalendar","enter"),s.xp6(1),s.Q6J("cdkPortalOutlet",r._actionsPortal),s.xp6(1),s.ekj("cdk-visually-hidden",!r._closeButtonFocused),s.Q6J("color",r.color||"primary"),s.xp6(1),s.Oqu(r._closeButtonText)}},directives:[sR,Jk,TZ,gr,U2],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}\n"],encapsulation:2,data:{animation:[oU.transformPanel,oU.fadeInCalendar]},changeDetection:0}),n})(),qw=(()=>{class n{constructor(e,r,i,o,c,h,g){this._overlay=e,this._ngZone=r,this._viewContainerRef=i,this._dateAdapter=c,this._dir=h,this._model=g,this._inputStateChanges=Ni.w0.EMPTY,this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new s.vpe,this.monthSelected=new s.vpe,this.viewChanged=new s.vpe(!0),this.openedStream=new s.vpe,this.closedStream=new s.vpe,this._opened=!1,this.id="mat-datepicker-"+Hz++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new en.x,this._scrollStrategy=o}get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}get touchUi(){return this._touchUi}set touchUi(e){this._touchUi=so(e)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){const r=so(e);r!==this._disabled&&(this._disabled=r,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(e){this._restoreFocus=so(e)}get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=function Yq(n,t=/\s+/){const e=[];if(null!=n){const r=Array.isArray(n)?n:`${n}`.split(t);for(const i of r){const o=`${i}`.trim();o&&e.push(o)}}return e}(e)}get opened(){return this._opened}set opened(e){so(e)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}ngOnChanges(e){const r=e.xPosition||e.yPosition;if(r&&!r.firstChange&&this._overlayRef){const i=this._overlayRef.getConfig().positionStrategy;i instanceof $2&&(this._setConnectedPositions(i),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal=e}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null)}open(){this._opened||this.disabled||(this._focusedElementBeforeOpen=cL(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened)return;if(this._componentRef){const r=this._componentRef.instance;r._startExitAnimation(),r._animationDone.pipe((0,Qs.q)(1)).subscribe(()=>this._destroyOverlay())}const e=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(e)):e()}_applyPendingSelection(){var e,r;null===(r=null===(e=this._componentRef)||void 0===e?void 0:e.instance)||void 0===r||r._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._actionsPortal=this._actionsPortal,e._dialogLabelId=this.datepickerInput.getOverlayLabelId()}_openOverlay(){this._destroyOverlay();const e=this.touchUi,r=new Kk($z,this._viewContainerRef),i=this._overlayRef=this._overlay.create(new q2({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(e?"dialog":"popup")}));this._getCloseStream(i).subscribe(o=>{o&&o.preventDefault(),this.close()}),this._componentRef=i.attach(r),this._forwardContentValues(this._componentRef.instance),e||this._ngZone.onStable.pipe((0,Qs.q)(1)).subscribe(()=>i.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){const r="end"===this.xPosition?"end":"start",i="start"===r?"end":"start",o="above"===this.yPosition?"bottom":"top",c="top"===o?"bottom":"top";return e.withPositions([{originX:r,originY:c,overlayX:r,overlayY:o},{originX:r,originY:o,overlayX:r,overlayY:c},{originX:i,originY:c,overlayX:i,overlayY:o},{originX:i,originY:o,overlayX:i,overlayY:c}])}_getCloseStream(e){return(0,au.T)(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(Vr(r=>27===r.keyCode&&!fk(r)||this.datepickerInput&&fk(r,"altKey")&&38===r.keyCode)))}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(uS),s.Y36(s.R0b),s.Y36(s.s_b),s.Y36(aU),s.Y36(as,8),s.Y36(Av,8),s.Y36(Af))},n.\u0275dir=s.lG2({type:n,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:"touchUi",disabled:"disabled",xPosition:"xPosition",yPosition:"yPosition",restoreFocus:"restoreFocus",dateClass:"dateClass",panelClass:"panelClass",opened:"opened"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[s.TTD]}),n})(),lU=(()=>{class n extends qw{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=s.n5z(n)))(r||n)}}(),n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[s._Bn([eU,{provide:qw,useExisting:n}]),s.qOj],decls:0,vars:0,template:function(e,r){},encapsulation:2,changeDetection:0}),n})();class hS{constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}}let zz=(()=>{class n{constructor(e,r,i){this._elementRef=e,this._dateAdapter=r,this._dateFormats=i,this.dateChange=new s.vpe,this.dateInput=new s.vpe,this.stateChanges=new en.x,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=Ni.w0.EMPTY,this._localeSubscription=Ni.w0.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=o=>{const c=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(o.value));return!c||this._matchesFilter(c)?null:{matDatepickerFilter:!0}},this._minValidator=o=>{const c=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(o.value)),h=this._getMinDate();return!h||!c||this._dateAdapter.compareDate(h,c)<=0?null:{matDatepickerMin:{min:h,actual:c}}},this._maxValidator=o=>{const c=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(o.value)),h=this._getMaxDate();return!h||!c||this._dateAdapter.compareDate(h,c)>=0?null:{matDatepickerMax:{max:h,actual:c}}},this._lastValueValid=!1,this._localeSubscription=r.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){const r=so(e),i=this._elementRef.nativeElement;this._disabled!==r&&(this._disabled=r,this.stateChanges.next(void 0)),r&&this._isInitialized&&i.blur&&i.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(r=>{if(this._shouldHandleChangeEvent(r)){const i=this._getValueFromModel(r.selection);this._lastValueValid=this._isValidValue(i),this._cvaOnChange(i),this._onTouched(),this._formatValue(i),this.dateInput.emit(new hS(this,this._elementRef.nativeElement)),this.dateChange.emit(new hS(this,this._elementRef.nativeElement))}})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){(function Yz(n,t){const e=Object.keys(n);for(let r of e){const{previousValue:i,currentValue:o}=n[r];if(!t.isDateInstance(i)||!t.isDateInstance(o))return!0;if(!t.sameDate(i,o))return!0}return!1})(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){e.altKey&&40===e.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){const r=this._lastValueValid;let i=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(i),i=this._dateAdapter.getValidDateOrNull(i);const o=!this._dateAdapter.sameDate(i,this.value);!i||o?this._cvaOnChange(i):(e&&!this.value&&this._cvaOnChange(i),r!==this._lastValueValid&&this._validatorOnChange()),o&&(this._assignValue(i),this.dateInput.emit(new hS(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new hS(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=null!=e?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){const r=this._getDateFilter();return!r||r(e)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(as,8),s.Y36(Og,8))},n.\u0275dir=s.lG2({type:n,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[s.TTD]}),n})();const Wz={provide:vr,useExisting:(0,s.Gpc)(()=>fS),multi:!0},Kz={provide:Pn,useExisting:(0,s.Gpc)(()=>fS),multi:!0};let fS=(()=>{class n extends zz{constructor(e,r,i,o){super(e,r,i),this._formField=o,this._closedSubscription=Ni.w0.EMPTY,this._validator=Zt.compose(super._getValidators())}set matDatepicker(e){e&&(this._datepicker=e,this._closedSubscription=e.closedStream.subscribe(()=>this._onTouched()),this._registerModel(e.registerInput(this)))}get min(){return this._min}set min(e){const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(r,this._min)||(this._min=r,this._validatorOnChange())}get max(){return this._max}set max(e){const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(r,this._max)||(this._max=r,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(e){const r=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==r&&this._validatorOnChange()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(s.SBq),s.Y36(as,8),s.Y36(Og,8),s.Y36($k,8))},n.\u0275dir=s.lG2({type:n,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(e,r){1&e&&s.NdJ("input",function(o){return r._onInput(o.target.value)})("change",function(){return r._onChange()})("blur",function(){return r._onBlur()})("keydown",function(o){return r._onKeydown(o)}),2&e&&(s.Ikx("disabled",r.disabled),s.uIk("aria-haspopup",r._datepicker?"dialog":null)("aria-owns",(null==r._datepicker?null:r._datepicker.opened)&&r._datepicker.id||null)("min",r.min?r._dateAdapter.toIso8601(r.min):null)("max",r.max?r._dateAdapter.toIso8601(r.max):null)("data-mat-calendar",r._datepicker?r._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[s._Bn([Wz,Kz,{provide:S2,useExisting:n}]),s.qOj]}),n})(),Qz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=s.lG2({type:n,selectors:[["","matDatepickerToggleIcon",""]]}),n})(),cU=(()=>{class n{constructor(e,r,i){this._intl=e,this._changeDetectorRef=r,this._stateChanges=Ni.w0.EMPTY;const o=Number(i);this.tabIndex=o||0===o?o:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=so(e)}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.datepicker?this.datepicker.stateChanges:ze(),r=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:ze(),i=this.datepicker?(0,au.T)(this.datepicker.openedStream,this.datepicker.closedStream):ze();this._stateChanges.unsubscribe(),this._stateChanges=(0,au.T)(this._intl.changes,e,r,i).subscribe(()=>this._changeDetectorRef.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Hw),s.Y36(s.sBO),s.$8M("tabindex"))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-datepicker-toggle"]],contentQueries:function(e,r,i){if(1&e&&s.Suo(i,Qz,5),2&e){let o;s.iGM(o=s.CRH())&&(r._customIcon=o.first)}},viewQuery:function(e,r){if(1&e&&s.Gf(Az,5),2&e){let i;s.iGM(i=s.CRH())&&(r._button=i.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(e,r){1&e&&s.NdJ("click",function(o){return r._open(o)}),2&e&&(s.uIk("tabindex",null)("data-mat-calendar",r.datepicker?r.datepicker.id:null),s.ekj("mat-datepicker-toggle-active",r.datepicker&&r.datepicker.opened)("mat-accent",r.datepicker&&"accent"===r.datepicker.color)("mat-warn",r.datepicker&&"warn"===r.datepicker.color))},inputs:{datepicker:["for","datepicker"],tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],disabled:"disabled",disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[s.TTD],ngContentSelectors:kz,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(e,r){1&e&&(s.F$t(Mz),s.TgZ(0,"button",0,1),s.YNc(2,xz,2,0,"svg",2),s.Hsn(3),s.qZA()),2&e&&(s.Q6J("disabled",r.disabled)("disableRipple",r.disableRipple),s.uIk("aria-haspopup",r.datepicker?"dialog":null)("aria-label",r.ariaLabel||r._intl.openCalendarLabel)("tabindex",r.disabled?-1:r.tabIndex),s.xp6(2),s.Q6J("ngIf",!r._customIcon))},directives:[Jk,Ut],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}\n"],encapsulation:2,changeDetection:0}),n})(),uU=(()=>{class n{constructor(e){this._datepicker=e}_applySelection(){this._datepicker._applyPendingSelection(),this._datepicker.close()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(qw))},n.\u0275dir=s.lG2({type:n,selectors:[["","matDatepickerApply",""],["","matDateRangePickerApply",""]],hostBindings:function(e,r){1&e&&s.NdJ("click",function(){return r._applySelection()})}}),n})(),dU=(()=>{class n{constructor(e){this._datepicker=e}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(qw))},n.\u0275dir=s.lG2({type:n,selectors:[["","matDatepickerCancel",""],["","matDateRangePickerCancel",""]],hostBindings:function(e,r){1&e&&s.NdJ("click",function(){return r._datepicker.close()})}}),n})(),hU=(()=>{class n{constructor(e,r){this._datepicker=e,this._viewContainerRef=r}ngAfterViewInit(){this._portal=new F2(this._template,this._viewContainerRef),this._datepicker.registerActions(this._portal)}ngOnDestroy(){var e;this._datepicker.removeActions(this._portal),this._portal&&this._portal.isAttached&&(null===(e=this._portal)||void 0===e||e.detach())}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(qw),s.Y36(s.s_b))},n.\u0275cmp=s.Xpm({type:n,selectors:[["mat-datepicker-actions"],["mat-date-range-picker-actions"]],viewQuery:function(e,r){if(1&e&&s.Gf(s.Rgc,5),2&e){let i;s.iGM(i=s.CRH())&&(r._template=i.first)}},ngContentSelectors:J2,decls:1,vars:0,consts:[[1,"mat-datepicker-actions"]],template:function(e,r){1&e&&(s.F$t(),s.YNc(0,Rz,2,0,"ng-template"))},styles:[".mat-datepicker-actions{display:flex;justify-content:flex-end;align-items:center;padding:0 8px 8px 8px}.mat-datepicker-actions .mat-button-base+.mat-button-base{margin-left:8px}[dir=rtl] .mat-datepicker-actions .mat-button-base+.mat-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),n})(),Jz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[Hw,Zz],imports:[[Al,Q2,dz,PZ,V2,wu],Yk]}),n})();function Xz(n,t){1&n&&(s.TgZ(0,"div",43)(1,"p",44),s._uU(2,"Debes a\xf1adir al menos un artista"),s.qZA()())}function e5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",45)(1,"span",46),s._uU(2),s.qZA(),s.TgZ(3,"span",47),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.oxw().removeChosenArtist(o.id)}),s._uU(4,"\u274c"),s.qZA()()}if(2&n){const e=t.$implicit;s.xp6(2),s.hij("",e.fullName," ")}}function t5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Fecha requerida"),s.qZA())}function n5(n,t){if(1&n&&(s.TgZ(0,"div",48),s.YNc(1,t5,2,0,"div",49),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.date.errors.required)}}function r5(n,t){1&n&&(s.TgZ(0,"div",48),s._uU(1," La fecha debe de ser futura "),s.qZA())}function s5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Nombre requerido"),s.qZA())}function o5(n,t){if(1&n&&(s.TgZ(0,"div",50),s.YNc(1,s5,2,0,"div",49),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.name.errors.required)}}function a5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Localizaci\xf3n requerida "),s.qZA())}function l5(n,t){if(1&n&&(s.TgZ(0,"div",50),s.YNc(1,a5,2,0,"div",49),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.location.errors.required)}}function c5(n,t){1&n&&(s.TgZ(0,"div",48),s._uU(1," Portada de evento requerida "),s.qZA())}function u5(n,t){1&n&&(s.TgZ(0,"div",48),s._uU(1," El archivo debe tener el formato correcto (*.png, *.jpg, *.jpeg) "),s.qZA())}function d5(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"div",51),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return c.addChosenArtist(o),c.filterArtists()}),s.TgZ(2,"b"),s._uU(3),s.qZA(),s._UZ(4,"br"),s.TgZ(5,"span"),s._uU(6),s.qZA()()()}if(2&n){const e=t.$implicit;s.xp6(3),s.Oqu(e.fullName),s.xp6(3),s.hij("@",e.userName,"")}}const fU=function(n,t){return{"is-valid":n,"is-invalid":t}};let h5=(()=>{class n{constructor(e,r,i,o,c,h,g){this.formBuilder=e,this.eventService=r,this.artistService=i,this.sharedService=o,this.imgService=c,this.router=h,this.cdRef=g,this.MIN_DATE=new Date,this.submitted=!1,this.artistsImported=[],this.artistsChosen=[],this.filteredArtists=[],this.addedStatus=!1,this.newEventForm=e.group({name:["",Zt.required],location:["",Zt.required],date:["",Zt.required],eventImage:[""],ticketsUrl:[""],details:[""]})}ngOnInit(){this.getAllArtists()}getAllArtists(){this.sharedService.runSpinner(!0),this.artistService.getAllArtistsIds().subscribe({next:e=>{this.artistsImported=e},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{this.sharedService.runSpinner(!1),console.log(e),this.sharedService.showError(6e3)}})}newEvent(){this.submitted=!0,this.newEventForm.valid&&this.checkDate&&this.validFileExtension&&this.imagePicked&&0!=this.artistsChosen.length&&(this.sharedService.runSpinner(!0),this.eventService.newEvent({eventName:this.newEventForm.value.name,eventDate:this.newEventForm.value.date,eventLocation:this.newEventForm.value.location,ticketsUrl:this.newEventForm.value.ticketsUrl,details:this.newEventForm.value.details,artists:this.artistsChosen,id:0,eventImage:null,followers:null,following:null}).subscribe({next:r=>{var i;const o=document.getElementById("eventImage");this.pushImg(r.id,null===(i=o.files)||void 0===i?void 0:i.item(0))},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),console.log(r),this.sharedService.showError(6e3)}}))}pushImg(e,r){this.sharedService.runSpinner(!0),this.imgService.uploadImage("event",r,e).subscribe({complete:()=>{this.sharedService.runSpinner(!1),this.router.navigate(["/events/"+e])},error:i=>{this.sharedService.runSpinner(!1),console.log(i),this.sharedService.showError(6e3)}})}get f(){return this.newEventForm.controls}get checkDate(){return!(null!=this.newEventForm.value.date&&this.newEventForm.value.date<this.MIN_DATE)}get validFileExtension(){const r=document.getElementById("eventImage");return!(r.files[0]&&!/(?:jpeg|jpg|png)/i.test(r.files[0].name))}get imagePicked(){return!!document.getElementById("eventImage").files[0]}filterArtists(){const e=document.getElementById("filterArtist");this.filteredArtists=""!=e.value.trim()?this.artistsImported.filter(r=>r.userName.includes(e.value)&&!this.artistsChosen.some(i=>i.id==r.id)).slice(0,9):[]}addChosenArtist(e){var r=this;return(0,ve.Z)(function*(){if(!r.artistsChosen.some(i=>i.id==e.id)){r.artistsChosen.push(e);const i=document.getElementById("addedStatus");i.style.display="block",yield hn.delay(1e3),i.style.display="none"}})()}removeChosenArtist(e){this.artistsChosen=this.artistsChosen.filter(r=>r.id!=e)}ngAfterViewChecked(){this.cdRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Xl),s.Y36(cc),s.Y36(gl),s.Y36(On),s.Y36(Wh),s.Y36(Sn),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-new-event"]],decls:70,vars:21,consts:[[1,"artistsChosen"],[1,"text-white"],["class","text-danger",4,"ngIf"],["class","row artistChos",4,"ngFor","ngForOf"],["type","button","data-bs-toggle","modal","data-bs-target","#artistsModal",1,"btn","btn-primary"],[1,"container"],[1,"cl-purple","justify-content-center","mb-5"],[3,"formGroup","ngSubmit"],[1,"inputsDiv"],[1,"f","col-6","datepicker"],["appearance","fill",1,"example-form-field"],["matInput","","formControlName","date","id","date","required","",1,"form-control",3,"matDatepicker","min"],["matSuffix","",3,"for"],["datepicker",""],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","color","primary","matDatepickerApply",""],["class","bg-danger",4,"ngIf"],[1,"form-floating","mb-3","col-6"],["type","text","formControlName","name","id","name","maxlength","50","placeholder","Unexpectance","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback bg-danger",4,"ngIf"],["for","name"],[1,"aster"],["type","text","formControlName","location","id","location","placeholder","Gij\xf3n, Asturias","required","",1,"form-control",3,"ngClass"],["for","location"],["type","text","formControlName","ticketsUrl","id","ticketsUrl","placeholder","https://www.entradas.com",1,"form-control"],["for","ticketsUrl"],[1,"form-floating","col-6"],["id","details","formControlName","details","rows","10","placeholder","Posibles detalles del evento",1,"form-control",2,"height","120px"],["for","details"],[1,"mb-3","imgInput"],["type","file","id","eventImage","accept","image/png, image/jpg, image/jpeg",1,"form-control",3,"change"],["type","submit",1,"btn","btn-secondary"],["id","artistsModal","tabindex","-1","aria-labelledby","artistModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","artistModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["type","text","name","filterArtist","id","filterArtist",1,"form-control",3,"keydown","keyup"],[4,"ngFor","ngForOf"],["id","addedStatus",1,"modal-footer"],[1,"text-success"],[1,"text-danger"],[1,"col-10"],[1,"row","artistChos"],[1,"text-white","col-10"],[1,"col-2","removeArt",3,"click"],[1,"bg-danger"],[4,"ngIf"],[1,"invalid-feedback","bg-danger"],[1,"addArtist",3,"click"]],template:function(e,r){if(1&e&&(s._UZ(0,"app-artist-logged-navbar"),s.TgZ(1,"div",0)(2,"h3",1),s._uU(3,"Artistas a\xf1adidos"),s.qZA(),s.YNc(4,Xz,3,0,"div",2),s.YNc(5,e5,5,1,"div",3),s.TgZ(6,"button",4),s._uU(7," A\xf1adir Artista "),s.qZA()(),s.TgZ(8,"div",5)(9,"h1",6),s._uU(10,"Nuevo Evento"),s.qZA(),s.TgZ(11,"form",7),s.NdJ("ngSubmit",function(){return r.newEvent()}),s.TgZ(12,"div",8)(13,"div",9)(14,"mat-form-field",10)(15,"mat-label"),s._uU(16,"Escoge una fecha"),s.qZA(),s._UZ(17,"input",11)(18,"mat-datepicker-toggle",12),s.TgZ(19,"mat-datepicker",null,13)(21,"mat-datepicker-actions")(22,"button",14),s._uU(23,"Cancelar"),s.qZA(),s.TgZ(24,"button",15),s._uU(25," Seleccionar "),s.qZA()()()(),s.YNc(26,n5,2,1,"div",16),s.YNc(27,r5,2,0,"div",16),s.qZA(),s.TgZ(28,"div",17),s._UZ(29,"input",18),s.YNc(30,o5,2,1,"div",19),s.TgZ(31,"label",20),s._uU(32,"Nombre "),s.TgZ(33,"span",21),s._uU(34,"*"),s.qZA()()(),s.TgZ(35,"div",17),s._UZ(36,"input",22),s.YNc(37,l5,2,1,"div",19),s.TgZ(38,"label",23),s._uU(39,"Localizaci\xf3n "),s.TgZ(40,"span",21),s._uU(41,"*"),s.qZA()()(),s.TgZ(42,"div",17),s._UZ(43,"input",24),s.TgZ(44,"label",25),s._uU(45,"Link de venta de entradas"),s.qZA()(),s.TgZ(46,"div",26),s._UZ(47,"textarea",27),s.TgZ(48,"label",28),s._uU(49,"Detalles"),s.qZA()(),s.TgZ(50,"div",29)(51,"input",30),s.NdJ("change",function(){return r.validFileExtension}),s.qZA(),s.YNc(52,c5,2,0,"div",16),s.YNc(53,u5,2,0,"div",16),s.qZA()(),s.TgZ(54,"div")(55,"button",31),s._uU(56,"Crear Evento"),s.qZA()()()(),s.TgZ(57,"div",32)(58,"div",33)(59,"div",34)(60,"div",35)(61,"h5",36),s._uU(62,"A\xf1adir un artista"),s.qZA(),s._UZ(63,"button",37),s.qZA(),s.TgZ(64,"div",38)(65,"input",39),s.NdJ("keydown",function(){return r.filterArtists()})("keyup",function(){return r.filterArtists()}),s.qZA(),s.YNc(66,d5,7,2,"div",40),s.qZA(),s.TgZ(67,"div",41)(68,"b",42),s._uU(69,"Artista a\xf1adido \u2713"),s.qZA()()()()()),2&e){const i=s.MAs(20);s.xp6(4),s.Q6J("ngIf",0==r.artistsChosen.length&&r.submitted),s.xp6(1),s.Q6J("ngForOf",r.artistsChosen),s.xp6(6),s.Q6J("formGroup",r.newEventForm),s.xp6(6),s.Q6J("matDatepicker",i)("min",r.MIN_DATE),s.xp6(1),s.Q6J("for",i),s.xp6(8),s.Q6J("ngIf",r.submitted&&r.f.date.errors),s.xp6(1),s.Q6J("ngIf",r.submitted&&!r.checkDate),s.xp6(2),s.Q6J("ngClass",s.WLB(15,fU,!r.f.name.invalid&&r.submitted,r.f.name.invalid&&r.submitted)),s.xp6(1),s.Q6J("ngIf",r.submitted&&r.f.name.errors),s.xp6(6),s.Q6J("ngClass",s.WLB(18,fU,!r.f.location.invalid&&r.submitted,r.f.location.invalid&&r.submitted)),s.xp6(1),s.Q6J("ngIf",r.submitted&&r.f.location.errors),s.xp6(15),s.Q6J("ngIf",!r.imagePicked&&r.submitted),s.xp6(1),s.Q6J("ngIf",!r.validFileExtension),s.xp6(13),s.Q6J("ngForOf",r.filteredArtists)}},directives:[ou,Ut,Xt,ga,Jr,$s,I2,oS,A2,Qr,fS,Qi,ma,Ys,cU,w2,lU,hU,dU,uU,Ah,gr],styles:['@import"https://fonts.googleapis.com/icon?family=Material+Icons";.container[_ngcontent-%COMP%]{text-align:center}  .mat-focused .mat-form-field-label{color:#fff!important}  .mat-form-field-underline{background-color:#fff!important}  .mat-form-field-ripple{background-color:#fff!important}  .mat-form-field-label{color:#fff!important}mat-datepicker-toggle[_ngcontent-%COMP%]{color:#fff!important}.datepicker[_ngcontent-%COMP%]{margin-bottom:3%;color:#fff}h1[_ngcontent-%COMP%]{margin-top:3%}.inputsDiv[_ngcontent-%COMP%]{margin-left:33%}.btn-secondary[_ngcontent-%COMP%]{font-size:16pt}.artistsChosen[_ngcontent-%COMP%]{position:absolute;margin-left:12%;margin-top:4%;font-size:14pt}.artistChos[_ngcontent-%COMP%]{margin-bottom:4%}.removeArt[_ngcontent-%COMP%]:hover{cursor:pointer}.addArtist[_ngcontent-%COMP%]{padding:1%;margin-top:2%}.addArtist[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#dedede}#addedStatus[_ngcontent-%COMP%]{display:none;text-align:center}.imgInput[_ngcontent-%COMP%]{margin-top:2%;width:50%}.bg-danger[_ngcontent-%COMP%]{margin-top:2%;color:#000;padding:1%;border-radius:5px}']}),n})();function f5(n,t){1&n&&(s.TgZ(0,"div",44),s._uU(1," El archivo debe tener el formato correcto (*.png, *.jpg, *.jpeg)\n"),s.qZA())}function p5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Nombre de usuario requerido "),s.qZA())}function g5(n,t){if(1&n&&(s.TgZ(0,"div",45),s.YNc(1,p5,2,0,"div",46),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.userName.errors.required)}}function m5(n,t){1&n&&(s.TgZ(0,"div",45),s._uU(1," Nombre de usuario email ya usado "),s.qZA())}function _5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Nombre requerido"),s.qZA())}function v5(n,t){if(1&n&&(s.TgZ(0,"div",45),s.YNc(1,_5,2,0,"div",46),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.fullName.errors.required)}}function y5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Email requerido"),s.qZA())}function b5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Direcci\xf3n no v\xe1lida"),s.qZA())}function w5(n,t){if(1&n&&(s.TgZ(0,"div",45),s.YNc(1,y5,2,0,"div",46),s.YNc(2,b5,2,0,"div",46),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.email.errors.required),s.xp6(1),s.Q6J("ngIf",e.f.email.errors.email)}}function C5(n,t){1&n&&(s.TgZ(0,"div",45),s._uU(1," Direcci\xf3n email ya usada "),s.qZA())}function E5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Contrase\xf1a actual requerida "),s.qZA())}function I5(n,t){if(1&n&&(s.TgZ(0,"div",45),s.YNc(1,E5,2,0,"div",46),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.fp.oldPassword.errors.required)}}function D5(n,t){1&n&&(s.TgZ(0,"div",45),s._uU(1," Contrase\xf1a incorrecta "),s.qZA())}function T5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Nueva contrase\xf1a requerida "),s.qZA())}function S5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," La contrase\xf1a debe tener 8 caracteres como m\xednimo. "),s.qZA())}function A5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," La contrase\xf1a debe contener al menos una letra min\xfascula, una may\xfascula y un n\xfamero. "),s.qZA())}function x5(n,t){if(1&n&&(s.TgZ(0,"div",45),s.YNc(1,T5,2,0,"div",46),s.YNc(2,S5,2,0,"div",46),s.YNc(3,A5,2,0,"div",46),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.fp.newPassword.errors.required),s.xp6(1),s.Q6J("ngIf",e.fp.newPassword.errors.minlength),s.xp6(1),s.Q6J("ngIf",e.fp.newPassword.errors.pattern)}}function M5(n,t){1&n&&(s.TgZ(0,"div",45),s._uU(1," La nueva contrase\xf1a debe ser distinta a la anterior "),s.qZA())}function k5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Contrase\xf1a repetida requerida "),s.qZA())}function R5(n,t){if(1&n&&(s.TgZ(0,"div",45),s.YNc(1,k5,2,0,"div",46),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.fp.repNewPassword.errors.required)}}function P5(n,t){1&n&&(s.TgZ(0,"div",45),s._uU(1," Las contrase\xf1as no coinciden "),s.qZA())}const Fv=function(n,t){return{"is-valid":n,"is-invalid":t}};let O5=(()=>{class n{constructor(e,r,i,o,c,h){this.formBuilder=e,this.userService=r,this.sharedService=i,this.imgService=o,this.router=c,this.cdRef=h,this.user={id:0,userName:"",email:"",fullName:"",description:"",profileImage:"default",password:null},this.submittedInfo=!1,this.submittedPassword=!1,this.userNameUsed=!1,this.emailUsed=!1,this.validFileExtension=!1,this.imageSelected=!1,this.wrongPassword=!1,this.setUserImg=hn.setUserImg,this.updateInfoForm=this.formBuilder.group({email:["",[Zt.required,Zt.email]],fullName:["",Zt.required],userName:["",Zt.required],description:[""]}),this.passwordForm=this.formBuilder.group({oldPassword:["",[Zt.required]],newPassword:["",[Zt.required]],repNewPassword:["",[Zt.required]]})}ngOnInit(){var e;this.getUserProfileInfo(),null===(e=document.getElementById("profileImage"))||void 0===e||e.addEventListener("change",this.displayImage)}getUserProfileInfo(){this.sharedService.runSpinner(!0),this.userService.getUserProfile().subscribe({next:e=>{this.user=e,this.refreshForm(e)},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{console.log(e),this.sharedService.showError(6e3)}})}refreshForm(e){var r;this.updateInfoForm.setValue({email:e.email,fullName:e.fullName,userName:e.userName,description:e.description}),null===(r=document.querySelector(".selectImage"))||void 0===r||r.setAttribute("src",this.setUserImg(e.profileImage))}updateInfo(){this.emailUsed=!1,this.userNameUsed=!1,this.submittedInfo=!0,this.updateInfoForm.valid&&(this.sharedService.runSpinner(!0),this.userService.updateProfile({userName:this.updateInfoForm.value.userName,fullName:this.updateInfoForm.value.fullName,email:this.updateInfoForm.value.email,description:this.updateInfoForm.value.description,id:0,password:null,profileImage:""}).subscribe({complete:()=>{var r,i;const o=document.getElementById("profileImage");0!=(null===(r=null==o?void 0:o.files)||void 0===r?void 0:r.length)?this.pushImg(null===(i=o.files)||void 0===i?void 0:i.item(0)):(this.getUserProfileInfo(),this.updatedSuccess(),this.sharedService.runSpinner(!1)),this.submittedInfo=!1},error:r=>{console.log(r),"emailUsed"==r.error?this.emailUsed=!0:"userNameUsed"==r.error?this.userNameUsed=!0:this.sharedService.showError(6e3),this.sharedService.runSpinner(!1)}}))}updatePassword(){var r,e=this;this.wrongPassword=!1,this.submittedPassword=!0,this.passwordForm.valid&&this.repPassword&&!this.samePassword&&(this.sharedService.runSpinner(!0),this.userService.updatePassword(this.passwordForm.value.oldPassword,this.passwordForm.value.newPassword).subscribe({complete:(r=(0,ve.Z)(function*(){e.sharedService.runSpinner(!1),e.submittedPassword=!1;const i=document.getElementById("passwordUpdated");i.style.display="block",yield hn.delay(3e3),i.style.display="none"}),function(){return r.apply(this,arguments)}),error:r=>{this.sharedService.runSpinner(!1),(r.error="wrongPassword")?this.wrongPassword=!0:(this.sharedService.showError(3e3),console.log(r))}}))}pushImg(e){this.sharedService.runSpinner(!0),this.imgService.uploadImage("user",e).subscribe({complete:()=>{this.getUserProfileInfo(),this.sharedService.runSpinner(!1),this.updatedSuccess()},error:r=>{this.getUserProfileInfo(),console.log(r),this.sharedService.showError(6e3),this.sharedService.runSpinner(!1)}})}get f(){return this.updateInfoForm.controls}get fp(){return this.passwordForm.controls}get repPassword(){var e,r;return(null===(e=this.passwordForm.get("newPassword"))||void 0===e?void 0:e.value)==(null===(r=this.passwordForm.get("repNewPassword"))||void 0===r?void 0:r.value)}get samePassword(){return""!=this.passwordForm.value.newPassword&&this.passwordForm.value.newPassword==this.passwordForm.value.oldPassword}signOut(){localStorage.clear(),this.router.navigate(["/"])}updatedSuccess(){return(0,ve.Z)(function*(){const e=document.getElementById("profileUpdated");e.style.display="block",yield hn.delay(3e3),e.style.display="none"})()}displayImage(){this.imageSelected=!0;const e=document.getElementById("profileImage");if(e.files[0]){var r=new FileReader;r.onload=i=>{var o,c;null===(o=document.querySelector(".selectImage"))||void 0===o||o.setAttribute("src",null===(c=i.target)||void 0===c?void 0:c.result)},r.readAsDataURL(e.files[0])}}ngAfterViewChecked(){this.cdRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Xl),s.Y36(lc),s.Y36(On),s.Y36(Wh),s.Y36(Sn),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-user-profile"]],decls:81,vars:39,consts:[[1,"signOutBtnDiv"],[1,"btn","btn-danger",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#passwordModal",1,"btn","btn-primary"],[1,"profileImage"],["for","profileImage"],[1,"selectImage",3,"src"],["id","profileImage","type","file","name","newImage","accept","image/*"],["class","invalid-feedback bg-danger select-error",4,"ngIf"],[1,"container"],[1,"cl-purple"],[1,"infoForm",3,"formGroup","ngSubmit"],["id","profileUpdated",1,"text-success",2,"display","none","font-size","1.5em"],[1,"form-group","mb-3","col-6"],["for","userName",1,"text-white"],["type","text","formControlName","userName","id","userName","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback bg-danger",4,"ngIf"],["for","fullName",1,"text-white"],["type","text","formControlName","fullName","id","fullName","required","",1,"form-control",3,"ngClass"],["for","email",1,"text-white"],["type","email","formControlName","email","id","email","required","",1,"form-control",3,"ngClass"],["for","description",1,"text-white"],["id","description","formControlName","description","rows","6",1,"form-control"],["type","reset",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-success"],["id","passwordModal","tabindex","-1","aria-labelledby","passwordModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","passwordModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup","submit"],[1,"form-floating","mb-3"],["type","password","id","oldPassword","formControlName","oldPassword",1,"form-control",3,"ngClass"],["for","oldPassword"],["type","password","id","newPassword","formControlName","newPassword","minlength","8","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).*$","required","",1,"form-control",3,"ngClass"],["for","newPassword"],["type","password","id","repNewPassword","formControlName","repNewPassword","required","",1,"form-control",3,"ngClass"],["for","repNewPassword"],["id","passwordUpdated",1,"text-success","text-center",2,"display","none"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","mr-auto","modalButton",3,"click"],["passwordClose",""],["type","button",1,"btn","btn-success","modalButton",3,"click"],[1,"invalid-feedback","bg-danger","select-error"],[1,"invalid-feedback","bg-danger"],[4,"ngIf"]],template:function(e,r){1&e&&(s._UZ(0,"app-user-logged-navbar"),s.TgZ(1,"div",0)(2,"button",1),s.NdJ("click",function(){return r.signOut()}),s._uU(3,"Cerrar Sesi\xf3n"),s.qZA(),s._UZ(4,"br")(5,"br"),s.TgZ(6,"button",2),s._uU(7," Cambiar Contrase\xf1a "),s.qZA()(),s.TgZ(8,"div",3)(9,"label",4),s._UZ(10,"img",5),s.qZA(),s._UZ(11,"input",6),s.qZA(),s._UZ(12,"br"),s.YNc(13,f5,2,0,"div",7),s.TgZ(14,"div",8)(15,"h1",9),s._uU(16,"Perfil"),s.qZA(),s.TgZ(17,"form",10),s.NdJ("ngSubmit",function(){return r.updateInfo()}),s.TgZ(18,"p",11),s._uU(19," Perfil actualizado con \xe9xito "),s.qZA(),s.TgZ(20,"div",12)(21,"label",13),s._uU(22,"Nombre de usuario"),s.qZA(),s._UZ(23,"input",14),s.YNc(24,g5,2,1,"div",15),s.YNc(25,m5,2,0,"div",15),s.qZA(),s.TgZ(26,"div",12)(27,"label",16),s._uU(28,"Nombre"),s.qZA(),s._UZ(29,"input",17),s.YNc(30,v5,2,1,"div",15),s.qZA(),s.TgZ(31,"div",12)(32,"label",18),s._uU(33,"Email"),s.qZA(),s._UZ(34,"input",19),s.YNc(35,w5,3,2,"div",15),s.YNc(36,C5,2,0,"div",15),s.qZA(),s.TgZ(37,"div",12)(38,"label",20),s._uU(39,"Descripci\xf3n"),s.qZA(),s._UZ(40,"textarea",21),s.qZA(),s.TgZ(41,"button",22),s.NdJ("click",function(){return r.refreshForm(r.user),r.submittedInfo=!1}),s._uU(42," Cancelar "),s.qZA(),s.TgZ(43,"button",23),s._uU(44,"Guardar"),s.qZA()()(),s.TgZ(45,"div",24)(46,"div",25)(47,"div",26)(48,"div",27)(49,"h5",28),s._uU(50," Cambio de Contrase\xf1a "),s.qZA(),s._UZ(51,"button",29),s.qZA(),s.TgZ(52,"div",30)(53,"form",31),s.NdJ("submit",function(){return r.updatePassword()}),s.TgZ(54,"div",32),s._UZ(55,"input",33),s.YNc(56,I5,2,1,"div",15),s.YNc(57,D5,2,0,"div",15),s.TgZ(58,"label",34),s._uU(59,"Contrase\xf1a"),s.qZA()(),s.TgZ(60,"div",32),s._UZ(61,"input",35),s.YNc(62,x5,4,3,"div",15),s.YNc(63,M5,2,0,"div",15),s.TgZ(64,"label",36),s._uU(65,"Nueva contrase\xf1a"),s.qZA()(),s.TgZ(66,"div",32),s._UZ(67,"input",37),s.YNc(68,R5,2,1,"div",15),s.YNc(69,P5,2,0,"div",15),s.TgZ(70,"label",38),s._uU(71,"Repetir nueva ontrase\xf1a"),s.qZA()()()(),s.TgZ(72,"b",39),s._uU(73," Contrase\xf1a actualizada con \xe9xito "),s.qZA(),s.TgZ(74,"div",40),s._UZ(75,"br"),s.TgZ(76,"button",41,42),s.NdJ("click",function(){return r.passwordForm.reset(),r.submittedPassword=!1}),s._uU(78," Cancelar "),s.qZA(),s.TgZ(79,"button",43),s.NdJ("click",function(){return r.updatePassword()}),s._uU(80," Guardar "),s.qZA()()()()()),2&e&&(s.xp6(10),s.s9C("src",r.setUserImg(r.user.profileImage),s.LSH),s.xp6(3),s.Q6J("ngIf",!r.validFileExtension),s.xp6(4),s.Q6J("formGroup",r.updateInfoForm),s.xp6(6),s.Q6J("ngClass",s.WLB(21,Fv,!r.f.userName.invalid&&r.submittedInfo,r.f.userName.invalid&&r.submittedInfo||r.userNameUsed)),s.xp6(1),s.Q6J("ngIf",r.submittedInfo&&r.f.userName.errors),s.xp6(1),s.Q6J("ngIf",r.userNameUsed),s.xp6(4),s.Q6J("ngClass",s.WLB(24,Fv,!r.f.fullName.invalid&&r.submittedInfo,r.f.fullName.invalid&&r.submittedInfo)),s.xp6(1),s.Q6J("ngIf",r.submittedInfo&&r.f.fullName.errors),s.xp6(4),s.Q6J("ngClass",s.WLB(27,Fv,!r.f.email.invalid&&r.submittedInfo,r.f.email.invalid&&r.submittedInfo||r.emailUsed)),s.xp6(1),s.Q6J("ngIf",r.submittedInfo&&r.f.email.errors),s.xp6(1),s.Q6J("ngIf",r.emailUsed),s.xp6(17),s.Q6J("formGroup",r.passwordForm),s.xp6(2),s.Q6J("ngClass",s.WLB(30,Fv,!r.fp.oldPassword.invalid&&r.submittedPassword,r.fp.oldPassword.invalid&&r.submittedPassword||r.wrongPassword)),s.xp6(1),s.Q6J("ngIf",r.submittedPassword&&r.fp.oldPassword.errors),s.xp6(1),s.Q6J("ngIf",r.wrongPassword),s.xp6(4),s.Q6J("ngClass",s.WLB(33,Fv,!r.fp.newPassword.invalid&&r.submittedPassword,r.fp.newPassword.invalid&&r.submittedPassword||r.samePassword&&r.submittedPassword)),s.xp6(1),s.Q6J("ngIf",r.submittedPassword&&r.fp.newPassword.errors),s.xp6(1),s.Q6J("ngIf",r.submittedPassword&&r.samePassword),s.xp6(4),s.Q6J("ngClass",s.WLB(36,Fv,!r.fp.repNewPassword.invalid&&r.submittedPassword,r.fp.repNewPassword.invalid&&r.submittedPassword||!r.repPassword&&r.submittedPassword)),s.xp6(1),s.Q6J("ngIf",r.submittedPassword&&r.fp.repNewPassword.errors),s.xp6(1),s.Q6J("ngIf",!r.repPassword&&r.submittedPassword))},directives:[ba,Ut,ga,Jr,$s,Qr,Qi,ma,Ys,gr,Jl,sd],styles:[".profileImage[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none;text-align:center}.profileImage[_ngcontent-%COMP%]{margin-top:-5%;margin-left:7%;position:absolute}.selectImage[_ngcontent-%COMP%]{cursor:pointer;border-radius:100%;width:300px;height:300px;transition:box-shadow .3s,filter .3s}.selectImage[_ngcontent-%COMP%]:hover{box-shadow:4px 4px 14px 4px #9e73d3;filter:brightness(1.3)}.signOutBtnDiv[_ngcontent-%COMP%]{margin-right:5%;margin-top:2%;text-align:right}.signOutBtnDiv[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:15%;font-size:1.5em}h1[_ngcontent-%COMP%]{margin-top:-8%;text-align:center;font-size:4em}.form-group[_ngcontent-%COMP%]{text-align:left;margin-left:25%}.infoForm[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:2em}.infoForm[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1em}.infoForm[_ngcontent-%COMP%]{margin-top:2%;text-align:center}.infoForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:1%;font-size:1.5em}.modalButton[_ngcontent-%COMP%]{font-size:1.5em}.modal-footer[_ngcontent-%COMP%]{display:inline-flex;text-align:left}"]}),n})();function N5(n,t){1&n&&(s.TgZ(0,"div",46),s._uU(1," El archivo debe tener el formato correcto (*.png, *.jpg, *.jpeg)\n"),s.qZA())}function F5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Nombre de usuario requerido "),s.qZA())}function L5(n,t){if(1&n&&(s.TgZ(0,"div",47),s.YNc(1,F5,2,0,"div",48),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.userName.errors.required)}}function U5(n,t){1&n&&(s.TgZ(0,"div",47),s._uU(1," Nombre de usuario email ya usado "),s.qZA())}function V5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Nombre requerido"),s.qZA())}function B5(n,t){if(1&n&&(s.TgZ(0,"div",47),s.YNc(1,V5,2,0,"div",48),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.fullName.errors.required)}}function j5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Email requerido"),s.qZA())}function H5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Direcci\xf3n no v\xe1lida"),s.qZA())}function q5(n,t){if(1&n&&(s.TgZ(0,"div",47),s.YNc(1,j5,2,0,"div",48),s.YNc(2,H5,2,0,"div",48),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.email.errors.required),s.xp6(1),s.Q6J("ngIf",e.f.email.errors.email)}}function Z5(n,t){1&n&&(s.TgZ(0,"div",47),s._uU(1," Direcci\xf3n email ya usada "),s.qZA())}function G5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Contrase\xf1a actual requerida "),s.qZA())}function $5(n,t){if(1&n&&(s.TgZ(0,"div",47),s.YNc(1,G5,2,0,"div",48),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.fp.oldPassword.errors.required)}}function z5(n,t){1&n&&(s.TgZ(0,"div",47),s._uU(1," Contrase\xf1a incorrecta "),s.qZA())}function Y5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Nueva contrase\xf1a requerida "),s.qZA())}function W5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," La contrase\xf1a debe tener 8 caracteres como m\xednimo. "),s.qZA())}function K5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," La contrase\xf1a debe contener al menos una letra min\xfascula, una may\xfascula y un n\xfamero. "),s.qZA())}function Q5(n,t){if(1&n&&(s.TgZ(0,"div",47),s.YNc(1,Y5,2,0,"div",48),s.YNc(2,W5,2,0,"div",48),s.YNc(3,K5,2,0,"div",48),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.fp.newPassword.errors.required),s.xp6(1),s.Q6J("ngIf",e.fp.newPassword.errors.minlength),s.xp6(1),s.Q6J("ngIf",e.fp.newPassword.errors.pattern)}}function J5(n,t){1&n&&(s.TgZ(0,"div",47),s._uU(1," La nueva contrase\xf1a debe ser distinta a la anterior "),s.qZA())}function X5(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Contrase\xf1a repetida requerida "),s.qZA())}function eY(n,t){if(1&n&&(s.TgZ(0,"div",47),s.YNc(1,X5,2,0,"div",48),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.fp.repNewPassword.errors.required)}}function tY(n,t){1&n&&(s.TgZ(0,"div",47),s._uU(1," Las contrase\xf1as no coinciden "),s.qZA())}const Lv=function(n,t){return{"is-valid":n,"is-invalid":t}};let nY=(()=>{class n{constructor(e,r,i,o,c,h){this.formBuilder=e,this.artistService=r,this.sharedService=i,this.imgService=o,this.router=c,this.cdRef=h,this.artist={id:0,userName:"",email:"",fullName:"",bio:null,events:[],followers:null,following:null,location:null,profileImage:"default",password:null},this.submittedInfo=!1,this.submittedPassword=!1,this.userNameUsed=!1,this.emailUsed=!1,this.validFileExtension=!1,this.imageSelected=!1,this.wrongPassword=!1,this.setArtistImg=hn.setArtistImg,this.updateInfoForm=this.formBuilder.group({email:["",[Zt.required,Zt.email]],fullName:["",Zt.required],userName:["",Zt.required],bio:[""],location:[""]}),this.passwordForm=this.formBuilder.group({oldPassword:["",[Zt.required]],newPassword:["",[Zt.required,Zt.pattern]],repNewPassword:["",[Zt.required]]})}ngOnInit(){var e;this.getArtistProfileInfo(),null===(e=document.getElementById("profileImage"))||void 0===e||e.addEventListener("change",this.displayImage)}getArtistProfileInfo(){this.sharedService.runSpinner(!0),this.artistService.getArtistProfile().subscribe({next:e=>{this.artist=e,this.refreshForm(e)},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{console.log(e),this.sharedService.showError(6e3)}})}updateInfo(){this.emailUsed=!1,this.userNameUsed=!1,this.submittedInfo=!0,this.updateInfoForm.valid&&(this.sharedService.runSpinner(!0),this.artistService.updateProfile({userName:this.updateInfoForm.value.userName,fullName:this.updateInfoForm.value.fullName,email:this.updateInfoForm.value.email,bio:this.updateInfoForm.value.bio,location:this.updateInfoForm.value.location,events:null,followers:null,following:null,id:0,password:null,profileImage:""}).subscribe({complete:()=>{var r,i;const o=document.getElementById("profileImage");0!=(null===(r=null==o?void 0:o.files)||void 0===r?void 0:r.length)?this.pushImg(null===(i=o.files)||void 0===i?void 0:i.item(0)):(this.getArtistProfileInfo(),this.updatedSuccess(),this.sharedService.runSpinner(!1)),this.submittedInfo=!1},error:r=>{console.log(r),"emailUsed"==r.error?this.emailUsed=!0:"userNameUsed"==r.error?this.userNameUsed=!0:this.sharedService.showError(6e3),this.sharedService.runSpinner(!1)}}))}updatePassword(){var r,e=this;this.wrongPassword=!1,this.submittedPassword=!0,this.passwordForm.valid&&this.repPassword&&!this.samePassword&&(this.sharedService.runSpinner(!0),this.artistService.updatePassword(this.passwordForm.value.oldPassword,this.passwordForm.value.newPassword).subscribe({complete:(r=(0,ve.Z)(function*(){e.sharedService.runSpinner(!1),e.submittedPassword=!1;const i=document.getElementById("passwordUpdated");i.style.display="block",yield hn.delay(3e3),i.style.display="none"}),function(){return r.apply(this,arguments)}),error:r=>{this.sharedService.runSpinner(!1),(r.error="wrongPassword")?this.wrongPassword=!0:(this.sharedService.showError(3e3),console.log(r))}}))}pushImg(e){this.sharedService.runSpinner(!0),this.imgService.uploadImage("artist",e).subscribe({complete:()=>{this.getArtistProfileInfo(),this.sharedService.runSpinner(!1),this.updatedSuccess()},error:r=>{this.getArtistProfileInfo(),console.log(r),this.sharedService.showError(6e3),this.sharedService.runSpinner(!1)}})}get f(){return this.updateInfoForm.controls}get fp(){return this.passwordForm.controls}get repPassword(){var e,r;return(null===(e=this.passwordForm.get("newPassword"))||void 0===e?void 0:e.value)==(null===(r=this.passwordForm.get("repNewPassword"))||void 0===r?void 0:r.value)}get samePassword(){return""!=this.passwordForm.value.newPassword&&this.passwordForm.value.newPassword==this.passwordForm.value.oldPassword}signOut(){localStorage.clear(),this.router.navigate(["/"])}refreshForm(e){var r;this.updateInfoForm.setValue({email:e.email,fullName:e.fullName,userName:e.userName,bio:e.bio,location:e.location}),null===(r=document.querySelector(".selectImage"))||void 0===r||r.setAttribute("src",this.setArtistImg(e.profileImage))}updatedSuccess(){return(0,ve.Z)(function*(){const e=document.getElementById("profileUpdated");e.style.display="block",yield hn.delay(3e3),e.style.display="none"})()}displayImage(){this.imageSelected=!0;const e=document.getElementById("profileImage");if(e.files[0]){var r=new FileReader;r.onload=i=>{var o,c;null===(o=document.querySelector(".selectImage"))||void 0===o||o.setAttribute("src",null===(c=i.target)||void 0===c?void 0:c.result)},r.readAsDataURL(e.files[0])}}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Xl),s.Y36(gl),s.Y36(On),s.Y36(Wh),s.Y36(Sn),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-artist-profile"]],decls:85,vars:39,consts:[[1,"signOutBtnDiv"],[1,"btn","btn-danger",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#passwordModal",1,"btn","btn-primary"],[1,"profileImage"],["for","profileImage"],[1,"selectImage","img-thumbnail",3,"src"],["id","profileImage","type","file","name","newImage","accept","image/*"],["class","invalid-feedback bg-danger select-error",4,"ngIf"],[1,"container"],[1,"cl-purple"],[1,"infoForm",3,"formGroup","ngSubmit"],["id","profileUpdated",1,"text-success",2,"display","none","font-size","1.5em"],[1,"form-group","mb-3","col-6"],["for","userName",1,"text-white"],["type","text","formControlName","userName","id","userName","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback bg-danger",4,"ngIf"],["for","fullName",1,"text-white"],["type","text","formControlName","fullName","id","fullName","required","",1,"form-control",3,"ngClass"],["for","email",1,"text-white"],["type","email","formControlName","email","id","email","required","",1,"form-control",3,"ngClass"],["for","location",1,"text-white"],["type","text","formControlName","location","id","location",1,"form-control"],["for","bio",1,"text-white"],["id","bio","formControlName","bio","rows","6",1,"form-control"],["type","reset",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-success"],["id","passwordModal","tabindex","-1","aria-labelledby","passwordModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","passwordModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup","submit"],[1,"form-floating","mb-3"],["type","password","id","oldPassword","formControlName","oldPassword",1,"form-control",3,"ngClass"],["for","oldPassword"],["type","password","id","newPassword","formControlName","newPassword","minlength","8","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).*$","required","",1,"form-control",3,"ngClass"],["for","newPassword"],["type","password","id","repNewPassword","formControlName","repNewPassword","required","",1,"form-control",3,"ngClass"],["for","repNewPassword"],["id","passwordUpdated",1,"text-success","text-center",2,"display","none"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary","mr-auto","modalButton",3,"click"],["passwordClose",""],["type","button",1,"btn","btn-success","modalButton",3,"click"],[1,"invalid-feedback","bg-danger","select-error"],[1,"invalid-feedback","bg-danger"],[4,"ngIf"]],template:function(e,r){1&e&&(s._UZ(0,"app-artist-logged-navbar"),s.TgZ(1,"div",0)(2,"button",1),s.NdJ("click",function(){return r.signOut()}),s._uU(3,"Cerrar Sesi\xf3n"),s.qZA(),s._UZ(4,"br")(5,"br"),s.TgZ(6,"button",2),s._uU(7," Cambiar Contrase\xf1a "),s.qZA()(),s.TgZ(8,"div",3)(9,"label",4),s._UZ(10,"img",5),s.qZA(),s._UZ(11,"input",6),s.qZA(),s._UZ(12,"br"),s.YNc(13,N5,2,0,"div",7),s.TgZ(14,"div",8)(15,"h1",9),s._uU(16,"Perfil"),s.qZA(),s.TgZ(17,"form",10),s.NdJ("ngSubmit",function(){return r.updateInfo()}),s.TgZ(18,"p",11),s._uU(19," Perfil actualizado con \xe9xito "),s.qZA(),s.TgZ(20,"div",12)(21,"label",13),s._uU(22,"Nombre de usuario"),s.qZA(),s._UZ(23,"input",14),s.YNc(24,L5,2,1,"div",15),s.YNc(25,U5,2,0,"div",15),s.qZA(),s.TgZ(26,"div",12)(27,"label",16),s._uU(28,"Nombre"),s.qZA(),s._UZ(29,"input",17),s.YNc(30,B5,2,1,"div",15),s.qZA(),s.TgZ(31,"div",12)(32,"label",18),s._uU(33,"Email"),s.qZA(),s._UZ(34,"input",19),s.YNc(35,q5,3,2,"div",15),s.YNc(36,Z5,2,0,"div",15),s.qZA(),s.TgZ(37,"div",12)(38,"label",20),s._uU(39,"Localizaci\xf3n"),s.qZA(),s._UZ(40,"input",21),s.qZA(),s.TgZ(41,"div",12)(42,"label",22),s._uU(43,"Biograf\xeda"),s.qZA(),s._UZ(44,"textarea",23),s.qZA(),s.TgZ(45,"button",24),s.NdJ("click",function(){return r.refreshForm(r.artist),r.submittedInfo=!1}),s._uU(46," Cancelar "),s.qZA(),s.TgZ(47,"button",25),s._uU(48,"Guardar"),s.qZA()()(),s.TgZ(49,"div",26)(50,"div",27)(51,"div",28)(52,"div",29)(53,"h5",30),s._uU(54," Cambio de Contrase\xf1a "),s.qZA(),s._UZ(55,"button",31),s.qZA(),s.TgZ(56,"div",32)(57,"form",33),s.NdJ("submit",function(){return r.updatePassword()}),s.TgZ(58,"div",34),s._UZ(59,"input",35),s.YNc(60,$5,2,1,"div",15),s.YNc(61,z5,2,0,"div",15),s.TgZ(62,"label",36),s._uU(63,"Contrase\xf1a"),s.qZA()(),s.TgZ(64,"div",34),s._UZ(65,"input",37),s.YNc(66,Q5,4,3,"div",15),s.YNc(67,J5,2,0,"div",15),s.TgZ(68,"label",38),s._uU(69,"Nueva contrase\xf1a"),s.qZA()(),s.TgZ(70,"div",34),s._UZ(71,"input",39),s.YNc(72,eY,2,1,"div",15),s.YNc(73,tY,2,0,"div",15),s.TgZ(74,"label",40),s._uU(75,"Repetir nueva ontrase\xf1a"),s.qZA()()()(),s.TgZ(76,"b",41),s._uU(77," Contrase\xf1a actualizada con \xe9xito "),s.qZA(),s.TgZ(78,"div",42),s._UZ(79,"br"),s.TgZ(80,"button",43,44),s.NdJ("click",function(){return r.passwordForm.reset(),r.submittedPassword=!1}),s._uU(82," Cancelar "),s.qZA(),s.TgZ(83,"button",45),s.NdJ("click",function(){return r.updatePassword()}),s._uU(84," Guardar "),s.qZA()()()()()),2&e&&(s.xp6(10),s.s9C("src",r.setArtistImg(r.artist.profileImage),s.LSH),s.xp6(3),s.Q6J("ngIf",!r.validFileExtension),s.xp6(4),s.Q6J("formGroup",r.updateInfoForm),s.xp6(6),s.Q6J("ngClass",s.WLB(21,Lv,!r.f.userName.invalid&&r.submittedInfo,r.f.userName.invalid&&r.submittedInfo||r.userNameUsed)),s.xp6(1),s.Q6J("ngIf",r.submittedInfo&&r.f.userName.errors),s.xp6(1),s.Q6J("ngIf",r.userNameUsed),s.xp6(4),s.Q6J("ngClass",s.WLB(24,Lv,!r.f.fullName.invalid&&r.submittedInfo,r.f.fullName.invalid&&r.submittedInfo)),s.xp6(1),s.Q6J("ngIf",r.submittedInfo&&r.f.fullName.errors),s.xp6(4),s.Q6J("ngClass",s.WLB(27,Lv,!r.f.email.invalid&&r.submittedInfo,r.f.email.invalid&&r.submittedInfo||r.emailUsed)),s.xp6(1),s.Q6J("ngIf",r.submittedInfo&&r.f.email.errors),s.xp6(1),s.Q6J("ngIf",r.emailUsed),s.xp6(21),s.Q6J("formGroup",r.passwordForm),s.xp6(2),s.Q6J("ngClass",s.WLB(30,Lv,!r.fp.oldPassword.invalid&&r.submittedPassword,r.fp.oldPassword.invalid&&r.submittedPassword||r.wrongPassword)),s.xp6(1),s.Q6J("ngIf",r.submittedPassword&&r.fp.oldPassword.errors),s.xp6(1),s.Q6J("ngIf",r.wrongPassword),s.xp6(4),s.Q6J("ngClass",s.WLB(33,Lv,!r.fp.newPassword.invalid&&r.submittedPassword,r.fp.newPassword.invalid&&r.submittedPassword||r.samePassword&&r.submittedPassword)),s.xp6(1),s.Q6J("ngIf",r.submittedPassword&&r.fp.newPassword.errors),s.xp6(1),s.Q6J("ngIf",r.submittedPassword&&r.samePassword),s.xp6(4),s.Q6J("ngClass",s.WLB(36,Lv,!r.fp.repNewPassword.invalid&&r.submittedPassword,r.fp.repNewPassword.invalid&&r.submittedPassword||!r.repPassword&&r.submittedPassword)),s.xp6(1),s.Q6J("ngIf",r.submittedPassword&&r.fp.repNewPassword.errors),s.xp6(1),s.Q6J("ngIf",!r.repPassword&&r.submittedPassword))},directives:[ou,Ut,ga,Jr,$s,Qr,Qi,ma,Ys,gr,Jl,sd],styles:[".profileImage[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none;text-align:center}.profileImage[_ngcontent-%COMP%]{margin-top:-5%;margin-left:7%;position:absolute}.selectImage[_ngcontent-%COMP%]{cursor:pointer;width:300px;transition:box-shadow .3s,filter .3s}.selectImage[_ngcontent-%COMP%]:hover{box-shadow:4px 4px 14px 4px #9e73d3;filter:brightness(1.3)}.signOutBtnDiv[_ngcontent-%COMP%]{margin-right:5%;margin-top:2%;text-align:right}.signOutBtnDiv[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:15%;font-size:1.5em}h1[_ngcontent-%COMP%]{margin-top:-8%;text-align:center;font-size:4em}.form-group[_ngcontent-%COMP%]{text-align:left;margin-left:25%}.infoForm[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:2em}.infoForm[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:1.1em}.infoForm[_ngcontent-%COMP%]{margin-top:2%;text-align:center}.infoForm[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:1%;font-size:1.5em}.modalButton[_ngcontent-%COMP%]{font-size:1.5em}.modal-footer[_ngcontent-%COMP%]{display:inline-flex;text-align:left}"]}),n})();function rY(n,t){1&n&&(s.TgZ(0,"h2",4),s._uU(1," Todav\xeda no has creado ning\xfan evento "),s.qZA())}function iY(n,t){if(1&n&&(s.TgZ(0,"div",6)(1,"div",7)(2,"a",8),s._uU(3),s.qZA(),s.TgZ(4,"h5",9),s._uU(5),s.qZA(),s.TgZ(6,"h5",9),s._uU(7),s.qZA(),s.TgZ(8,"h5",9),s._uU(9),s.qZA(),s.TgZ(10,"button",10),s._uU(11," EDITAR EVENTO "),s.qZA()(),s.TgZ(12,"div",11),s._UZ(13,"img",12)(14,"br"),s.qZA(),s._UZ(15,"hr"),s.qZA()),2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(2),s.MGl("routerLink","/events/",e.id,""),s.xp6(1),s.Oqu(e.eventName),s.xp6(2),s.Oqu(r.formatDate(e.eventDate)),s.xp6(2),s.Oqu(e.eventLocation),s.xp6(2),s.hij(" Personas siguiendo este evento: ",e.followers," "),s.xp6(1),s.MGl("routerLink","/edit-event/",e.id,""),s.xp6(3),s.s9C("src",e.eventImage,s.LSH),s.s9C("alt",e.eventName)}}function sY(n,t){if(1&n&&(s.TgZ(0,"div"),s.YNc(1,iY,16,8,"div",5),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.events)}}let oY=(()=>{class n{constructor(e,r){this.eventService=e,this.sharedService=r,this.events=[],this.formatDate=hn.formatDate}ngOnInit(){this.getEventsCretaed()}getEventsCretaed(){this.sharedService.runSpinner(!0),this.eventService.getEventsCreated().subscribe({next:e=>{e.forEach(r=>{r.eventDate=new Date(r.eventDate)}),this.events=hn.sortByDate(e)},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{this.sharedService.runSpinner(!1),console.log(e),this.sharedService.showError(6e3)}})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(cc),s.Y36(On))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-events-created"]],decls:7,vars:2,consts:[[1,"container"],[1,"cl-purple"],["class","text-white","id","titleEvents",4,"ngIf"],[4,"ngIf"],["id","titleEvents",1,"text-white"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-xl-6","col-sm-12","sol-md-12"],[1,"eventName",3,"routerLink"],[1,"text-white"],[1,"btn","btn-primary","editButton",3,"routerLink"],[1,"col-xl-6","col-sm-12","sol-md-12","col2"],[1,"eventImg","rounded","img-thumbnail",3,"src","alt"]],template:function(e,r){1&e&&(s._UZ(0,"app-artist-logged-navbar"),s.TgZ(1,"div",0)(2,"div")(3,"h1",1),s._uU(4,"Eventos que has creado"),s.qZA(),s.YNc(5,rY,2,0,"h2",2),s.qZA(),s.YNc(6,sY,2,1,"div",3),s.qZA()),2&e&&(s.xp6(5),s.Q6J("ngIf",0==r.events.length),s.xp6(1),s.Q6J("ngIf",r.events.length>0))},directives:[ou,Ut,Xt,Br,xs],styles:["h1[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:4%}.eventParentDiv[_ngcontent-%COMP%]{margin-top:4%;margin-left:15%;margin-right:15%}h2[_ngcontent-%COMP%]{margin-bottom:2%}a[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:hover{color:#c7b2e2}hr[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:3%;height:3px;color:#8b9393}.eventImg[_ngcontent-%COMP%]{width:45%}.col2[_ngcontent-%COMP%]{text-align:center}#content[_ngcontent-%COMP%]{margin-left:5%;margin-right:5%}.eventName[_ngcontent-%COMP%]{color:#fbfbfb;text-decoration:none;font-size:3em}.eventName[_ngcontent-%COMP%]:hover{color:#c7b2e2;cursor:pointer}.editButton[_ngcontent-%COMP%]{margin-top:15%;font-size:18pt;font-weight:700;padding:2%}"]}),n})();function aY(n,t){1&n&&(s.TgZ(0,"div",49)(1,"p",53),s._uU(2,"Debes a\xf1adir al menos un artista"),s.qZA()())}function lY(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div",54)(1,"span",55),s._uU(2),s.qZA(),s.TgZ(3,"span",56),s.NdJ("click",function(){const o=s.CHM(e).$implicit;return s.oxw().removeChosenArtist(o.id)}),s._uU(4,"\u274c"),s.qZA()()}if(2&n){const e=t.$implicit;s.xp6(2),s.hij("",e.fullName," ")}}function cY(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Fecha requerida"),s.qZA())}function uY(n,t){if(1&n&&(s.TgZ(0,"div",57),s.YNc(1,cY,2,0,"div",58),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.date.errors.required)}}function dY(n,t){1&n&&(s.TgZ(0,"div",57),s._uU(1," La fecha debe de ser futura "),s.qZA())}function hY(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1,"Nombre requerido"),s.qZA())}function fY(n,t){if(1&n&&(s.TgZ(0,"div",59),s.YNc(1,hY,2,0,"div",58),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.name.errors.required)}}function pY(n,t){1&n&&(s.TgZ(0,"div"),s._uU(1," Localizaci\xf3n requerida "),s.qZA())}function gY(n,t){if(1&n&&(s.TgZ(0,"div",59),s.YNc(1,pY,2,0,"div",58),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.f.location.errors.required)}}function mY(n,t){1&n&&(s.TgZ(0,"div",57),s._uU(1," El archivo debe tener el formato correcto (*.png, *.jpg, *.jpeg) "),s.qZA())}function _Y(n,t){if(1&n){const e=s.EpF();s.TgZ(0,"div")(1,"div",60),s.NdJ("click",function(){const o=s.CHM(e).$implicit,c=s.oxw();return c.addChosenArtist(o),c.filterArtists()}),s.TgZ(2,"b"),s._uU(3),s.qZA(),s._UZ(4,"br"),s.TgZ(5,"span"),s._uU(6),s.qZA()()()}if(2&n){const e=t.$implicit;s.xp6(3),s.Oqu(e.fullName),s.xp6(3),s.hij("@",e.userName,"")}}const pU=function(n,t){return{"is-valid":n,"is-invalid":t}};let vY=(()=>{class n{constructor(e,r,i,o,c,h,g){this.formBuilder=e,this.eventService=r,this.artistService=i,this.sharedService=o,this.imgService=c,this.router=h,this.cdRef=g,this.MIN_DATE=new Date,this.submitted=!1,this.artistsChosen=[],this.artistsImported=[],this.filteredArtists=[],this.addedStatus=!1,this.eventId=-1,this.updateEventForm=e.group({name:["",Zt.required],location:["",Zt.required],date:["",Zt.required],ticketsUrl:[""],details:[""]})}ngOnInit(){this.getEvent(),this.getAllArtists()}getEvent(){const e=parseInt(this.router.url.substring(this.router.url.lastIndexOf("/")+1));this.sharedService.runSpinner(!0),this.eventService.getEventById(e).subscribe({next:r=>{this.event=r,this.eventId=r.id,this.refreshForm(r)},complete:()=>{this.sharedService.runSpinner(!1)},error:r=>{this.sharedService.runSpinner(!1),console.log(r),this.sharedService.showError(6e3)}})}getAllArtists(){this.sharedService.runSpinner(!0),this.artistService.getAllArtistsIds().subscribe({next:e=>{this.artistsImported=e},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{this.sharedService.runSpinner(!1),console.log(e),this.sharedService.showError(6e3)}})}updateEvent(){this.submitted=!0,this.updateEventForm.valid&&this.checkDate&&0!=this.artistsChosen.length&&(this.sharedService.runSpinner(!0),this.eventService.updateEvent({eventName:this.updateEventForm.value.name,eventDate:this.updateEventForm.value.date,eventLocation:this.updateEventForm.value.location,ticketsUrl:this.updateEventForm.value.ticketsUrl,details:this.updateEventForm.value.details,artists:this.artistsChosen,id:0,eventImage:null,followers:null,following:null},this.eventId).subscribe({complete:()=>{var r,i;const o=document.getElementById("eventImage");0!=(null===(r=null==o?void 0:o.files)||void 0===r?void 0:r.length)?this.pushImg(this.eventId,null===(i=o.files)||void 0===i?void 0:i.item(0)):(this.router.navigate(["/events/"+this.eventId]),this.sharedService.runSpinner(!1))},error:r=>{this.sharedService.runSpinner(!1),console.log(r),this.sharedService.showError(6e3)}}))}deleteEvent(){const e=parseInt(this.router.url.substring(this.router.url.lastIndexOf("/")+1));this.sharedService.runSpinner(!0),this.eventService.deleteEvent(e).subscribe({complete:()=>{this.sharedService.runSpinner(!1),this.router.navigate(["/artist-home"])},error:r=>{console.log(r),this.sharedService.showError(5e3)}})}pushImg(e,r){this.sharedService.runSpinner(!0),this.imgService.uploadImage("event",r,e).subscribe({complete:()=>{this.sharedService.runSpinner(!1),this.router.navigate(["/events/"+this.eventId])},error:i=>{this.sharedService.runSpinner(!1),console.log(i),this.sharedService.showError(6e3)}})}get f(){return this.updateEventForm.controls}get checkDate(){return!(null!=this.updateEventForm.value.date&&this.updateEventForm.value.date<this.MIN_DATE)}get validFileExtension(){const r=document.getElementById("eventImage");return!(r.files[0]&&!/(?:jpeg|jpg|png)/i.test(r.files[0].name))}get imagePicked(){return!!document.getElementById("eventImage").files[0]}filterArtists(){const e=document.getElementById("filterArtist");this.filteredArtists=""!=e.value.trim()?this.artistsImported.filter(r=>r.userName.toLowerCase().includes(e.value.toLowerCase())||r.fullName.toLowerCase().includes(e.value.toLowerCase())&&!this.artistsChosen.some(i=>i.id==r.id)).slice(0,9):[]}addChosenArtist(e){var r=this;return(0,ve.Z)(function*(){if(!r.artistsChosen.some(i=>i.id==e.id)){r.artistsChosen.push(e);const i=document.getElementById("addedStatus");i.style.display="block",yield hn.delay(1e3),i.style.display="none"}})()}removeChosenArtist(e){this.artistsChosen=this.artistsChosen.filter(r=>r.id!=e)}refreshForm(e){this.updateEventForm.setValue({name:e.eventName,location:e.eventLocation,date:new Date(e.eventDate),ticketsUrl:e.ticketsUrl,details:e.details}),this.artistsChosen=e.artists}ngAfterViewChecked(){this.cdRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(Xl),s.Y36(cc),s.Y36(gl),s.Y36(On),s.Y36(Wh),s.Y36(Sn),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-edit-event"]],decls:91,vars:20,consts:[[1,"deleteButton"],["type","button","data-bs-toggle","modal","data-bs-target","#deleteModal",1,"btn","btn-danger"],[1,"artistsChosen"],[1,"text-white"],["class","text-danger",4,"ngIf"],["class","row artistChos",4,"ngFor","ngForOf"],["type","button","data-bs-toggle","modal","data-bs-target","#artistsModal",1,"btn","btn-primary"],[1,"container"],[1,"cl-purple","justify-content-center","mb-5"],[3,"formGroup","ngSubmit"],[1,"inputsDiv"],[1,"f","col-6","datepicker"],["appearance","fill",1,"example-form-field"],["matInput","","formControlName","date","id","date","required","",1,"form-control",3,"matDatepicker","min"],["matSuffix","",3,"for"],["datepicker",""],["mat-button","","matDatepickerCancel",""],["mat-raised-button","","color","primary","matDatepickerApply",""],["class","bg-danger",4,"ngIf"],[1,"form-floating","mb-3","col-6"],["type","text","formControlName","name","id","name","maxlength","50","placeholder","Unexpectance","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback bg-danger",4,"ngIf"],["for","name"],[1,"aster"],["type","text","formControlName","location","id","location","placeholder","Gij\xf3n, Asturias","required","",1,"form-control",3,"ngClass"],["for","location"],["type","text","formControlName","ticketsUrl","id","ticketsUrl","placeholder","https://www.entradas.com",1,"form-control"],["for","ticketsUrl"],[1,"form-floating","col-6"],["id","details","formControlName","details","rows","10","placeholder","Posibles detalles del evento",1,"form-control",2,"height","120px"],["for","details"],[1,"mb-3","imgInput"],["type","file","id","eventImage","accept","image/png, image/jpg, image/jpeg",1,"form-control",3,"change"],["type","button",1,"btn","btn-danger",3,"click"],["type","submit",1,"btn","btn-secondary"],["id","artistsModal","tabindex","-1","aria-labelledby","artistModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","artistModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["type","text","name","filterArtist","id","filterArtist",1,"form-control",3,"keydown","keyup"],[4,"ngFor","ngForOf"],["id","addedStatus",1,"modal-footer"],[1,"text-success"],["id","deleteModal","tabindex","-1","aria-labelledby","deleteModalLabel","aria-hidden","true",1,"modal","fade"],["id","deleteModalLabel",1,"modal-title"],[1,"modal-body","text-center"],[1,"text-danger"],[1,"deleteModalButtons"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",2,"margin-right","5%"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"col-10"],[1,"row","artistChos"],[1,"text-white","col-10"],[1,"col-2","removeArt",3,"click"],[1,"bg-danger"],[4,"ngIf"],[1,"invalid-feedback","bg-danger"],[1,"addArtist",3,"click"]],template:function(e,r){if(1&e&&(s._UZ(0,"app-artist-logged-navbar"),s.TgZ(1,"div",0)(2,"button",1),s._uU(3," BORRAR EVENTO "),s.qZA()(),s.TgZ(4,"div",2)(5,"h3",3),s._uU(6,"Artistas a\xf1adidos"),s.qZA(),s.YNc(7,aY,3,0,"div",4),s.YNc(8,lY,5,1,"div",5),s.TgZ(9,"button",6),s._uU(10," A\xf1adir Artista "),s.qZA()(),s.TgZ(11,"div",7)(12,"h1",8),s._uU(13,"Editar Evento"),s.qZA(),s.TgZ(14,"form",9),s.NdJ("ngSubmit",function(){return r.updateEvent()}),s.TgZ(15,"div",10)(16,"div",11)(17,"mat-form-field",12)(18,"mat-label"),s._uU(19,"Escoge una fecha"),s.qZA(),s._UZ(20,"input",13)(21,"mat-datepicker-toggle",14),s.TgZ(22,"mat-datepicker",null,15)(24,"mat-datepicker-actions")(25,"button",16),s._uU(26,"Cancelar"),s.qZA(),s.TgZ(27,"button",17),s._uU(28," Seleccionar "),s.qZA()()()(),s.YNc(29,uY,2,1,"div",18),s.YNc(30,dY,2,0,"div",18),s.qZA(),s.TgZ(31,"div",19),s._UZ(32,"input",20),s.YNc(33,fY,2,1,"div",21),s.TgZ(34,"label",22),s._uU(35,"Nombre "),s.TgZ(36,"span",23),s._uU(37,"*"),s.qZA()()(),s.TgZ(38,"div",19),s._UZ(39,"input",24),s.YNc(40,gY,2,1,"div",21),s.TgZ(41,"label",25),s._uU(42,"Localizaci\xf3n "),s.TgZ(43,"span",23),s._uU(44,"*"),s.qZA()()(),s.TgZ(45,"div",19),s._UZ(46,"input",26),s.TgZ(47,"label",27),s._uU(48,"Link de venta de entradas"),s.qZA()(),s.TgZ(49,"div",28),s._UZ(50,"textarea",29),s.TgZ(51,"label",30),s._uU(52,"Detalles"),s.qZA()(),s.TgZ(53,"div",31)(54,"input",32),s.NdJ("change",function(){return r.validFileExtension}),s.qZA(),s.YNc(55,mY,2,0,"div",18),s.qZA()(),s.TgZ(56,"div")(57,"button",33),s.NdJ("click",function(){return r.refreshForm(r.event)}),s._uU(58," Cancelar "),s.qZA(),s.TgZ(59,"button",34),s._uU(60,"Guardar Cambios"),s.qZA()()()(),s.TgZ(61,"div",35)(62,"div",36)(63,"div",37)(64,"div",38)(65,"h5",39),s._uU(66,"A\xf1adir un artista"),s.qZA(),s._UZ(67,"button",40),s.qZA(),s.TgZ(68,"div",41)(69,"input",42),s.NdJ("keydown",function(){return r.filterArtists()})("keyup",function(){return r.filterArtists()}),s.qZA(),s.YNc(70,_Y,7,2,"div",43),s.qZA(),s.TgZ(71,"div",44)(72,"b",45),s._uU(73,"Artista a\xf1adido \u2713"),s.qZA()()()()(),s.TgZ(74,"div",46)(75,"div",36)(76,"div",37)(77,"div",38)(78,"h5",47),s._uU(79," \xbfEst\xe1s seguro de borrar el evento? "),s.qZA(),s._UZ(80,"button",40),s.qZA(),s.TgZ(81,"div",48)(82,"p",49),s._uU(83," Al borrar el evento se perder\xe1n tambi\xe9n todos los seguidores de este, as\xed como los artistas participantes. "),s.qZA(),s.TgZ(84,"h5"),s._uU(85,"\xbfDeseas borrarlo de todas formas?"),s.qZA(),s.TgZ(86,"div",50)(87,"button",51),s._uU(88," Cancelar "),s.qZA(),s.TgZ(89,"button",52),s.NdJ("click",function(){return r.deleteEvent()}),s._uU(90," BORRAR "),s.qZA()()()()()()),2&e){const i=s.MAs(23);s.xp6(7),s.Q6J("ngIf",0==r.artistsChosen.length&&r.submitted),s.xp6(1),s.Q6J("ngForOf",r.artistsChosen),s.xp6(6),s.Q6J("formGroup",r.updateEventForm),s.xp6(6),s.Q6J("matDatepicker",i)("min",r.MIN_DATE),s.xp6(1),s.Q6J("for",i),s.xp6(8),s.Q6J("ngIf",r.submitted&&r.f.date.errors),s.xp6(1),s.Q6J("ngIf",r.submitted&&!r.checkDate),s.xp6(2),s.Q6J("ngClass",s.WLB(14,pU,!r.f.name.invalid&&r.submitted,r.f.name.invalid&&r.submitted)),s.xp6(1),s.Q6J("ngIf",r.submitted&&r.f.name.errors),s.xp6(6),s.Q6J("ngClass",s.WLB(17,pU,!r.f.location.invalid&&r.submitted,r.f.location.invalid&&r.submitted)),s.xp6(1),s.Q6J("ngIf",r.submitted&&r.f.location.errors),s.xp6(15),s.Q6J("ngIf",!r.validFileExtension),s.xp6(15),s.Q6J("ngForOf",r.filteredArtists)}},directives:[ou,Ut,Xt,ga,Jr,$s,I2,oS,A2,Qr,fS,Qi,ma,Ys,cU,w2,lU,hU,dU,uU,Ah,gr],styles:['@import"https://fonts.googleapis.com/icon?family=Material+Icons";.container[_ngcontent-%COMP%]{text-align:center}  .mat-focused .mat-form-field-label{color:#fff!important}  .mat-form-field-underline{background-color:#fff!important}  .mat-form-field-ripple{background-color:#fff!important}  .mat-form-field-label{color:#fff!important}mat-datepicker-toggle[_ngcontent-%COMP%]{color:#fff!important}.datepicker[_ngcontent-%COMP%]{margin-bottom:3%;color:#fff}h1[_ngcontent-%COMP%]{margin-top:3%}.inputsDiv[_ngcontent-%COMP%]{margin-left:33%}.btn-secondary[_ngcontent-%COMP%]{font-size:16pt}.artistsChosen[_ngcontent-%COMP%]{position:absolute;margin-left:12%;margin-top:4%;font-size:14pt}.artistChos[_ngcontent-%COMP%]{margin-bottom:4%}.removeArt[_ngcontent-%COMP%]:hover{cursor:pointer}.addArtist[_ngcontent-%COMP%]{padding:1%;margin-top:2%}.addArtist[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#dedede}#addedStatus[_ngcontent-%COMP%]{display:none;text-align:center}.imgInput[_ngcontent-%COMP%]{margin-top:2%;width:50%}.bg-danger[_ngcontent-%COMP%]{margin-top:2%;color:#000;padding:1%;border-radius:5px}.btn-danger[_ngcontent-%COMP%]{font-size:16pt;margin-right:2%}.deleteButton[_ngcontent-%COMP%]{margin-right:5%;margin-top:2%;text-align:right}.deleteModalButtons[_ngcontent-%COMP%]{text-align:center}']}),n})();function yY(n,t){1&n&&(s.TgZ(0,"h2",4),s._uU(1," Todav\xeda no participas en ning\xfan evento "),s.qZA())}function bY(n,t){if(1&n&&(s.TgZ(0,"div",6)(1,"div",7)(2,"a",8),s._uU(3),s.qZA(),s.TgZ(4,"h5",9),s._uU(5),s.qZA(),s.TgZ(6,"h5",9),s._uU(7),s.qZA(),s.TgZ(8,"h5",9),s._uU(9),s.qZA()(),s.TgZ(10,"div",10),s._UZ(11,"img",11)(12,"br"),s.qZA(),s._UZ(13,"hr"),s.qZA()),2&n){const e=t.$implicit,r=s.oxw(2);s.xp6(2),s.MGl("routerLink","/events/",e.id,""),s.xp6(1),s.Oqu(e.eventName),s.xp6(2),s.Oqu(r.formatDate(e.eventDate)),s.xp6(2),s.Oqu(e.eventLocation),s.xp6(2),s.hij(" Personas siguiendo este evento: ",e.followers," "),s.xp6(2),s.s9C("src",e.eventImage,s.LSH),s.s9C("alt",e.eventName)}}function wY(n,t){if(1&n&&(s.TgZ(0,"div"),s.YNc(1,bY,14,7,"div",5),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.Q6J("ngForOf",e.events)}}const CY=[{path:"",component:Ib},{path:"login",component:sI},{path:"register",component:Eb},{path:"profile",component:O5},{path:"artist-profile",component:nY},{path:"home",component:Gx},{path:"artist-home",component:S_},{path:"events",component:Ob},{path:"events/followed",component:yI},{path:"events/created",component:oY},{path:"events/performed",component:(()=>{class n{constructor(e,r,i){this.eventService=e,this.sharedService=r,this.cdRef=i,this.events=[],this.formatDate=hn.formatDate}ngOnInit(){this.getEventsPerformed()}getEventsPerformed(){this.sharedService.runSpinner(!0),this.eventService.getEventsPerformed().subscribe({next:e=>{this.events=e},complete:()=>{this.sharedService.runSpinner(!1)},error:e=>{this.sharedService.runSpinner(!1),console.log(e),this.sharedService.showError(6e3)}})}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(cc),s.Y36(On),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-events-performed"]],decls:7,vars:2,consts:[[1,"container"],[1,"cl-purple"],["class","text-white","id","titleEvents",4,"ngIf"],[4,"ngIf"],["id","titleEvents",1,"text-white"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-xl-6","col-sm-12","sol-md-12"],[1,"eventName",3,"routerLink"],[1,"text-white"],[1,"col-xl-6","col-sm-12","sol-md-12","col2"],[1,"eventImg","rounded","img-thumbnail",3,"src","alt"]],template:function(e,r){1&e&&(s._UZ(0,"app-artist-logged-navbar"),s.TgZ(1,"div",0)(2,"div")(3,"h1",1),s._uU(4,"Eventos en los que participas"),s.qZA(),s.YNc(5,yY,2,0,"h2",2),s.qZA(),s.YNc(6,wY,2,1,"div",3),s.qZA()),2&e&&(s.xp6(5),s.Q6J("ngIf",0==r.events.length),s.xp6(1),s.Q6J("ngIf",r.events.length>0))},directives:[ou,Ut,Xt,Br],styles:["h1[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:4%}.eventParentDiv[_ngcontent-%COMP%]{margin-top:4%;margin-left:15%;margin-right:15%}h2[_ngcontent-%COMP%]{margin-bottom:2%}a[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:hover{color:#c7b2e2}hr[_ngcontent-%COMP%]{margin-top:3%;margin-bottom:3%;height:3px;color:#8b9393}.eventImg[_ngcontent-%COMP%]{width:45%}.col2[_ngcontent-%COMP%]{text-align:center}#content[_ngcontent-%COMP%]{margin-left:5%;margin-right:5%}.eventName[_ngcontent-%COMP%]{color:#fbfbfb;text-decoration:none;font-size:3em}.eventName[_ngcontent-%COMP%]:hover{color:#c7b2e2;cursor:pointer}.editButton[_ngcontent-%COMP%]{margin-top:15%;font-size:18pt;font-weight:700;padding:2%}"]}),n})()},{path:"edit-event/:id",component:vY},{path:"events/:id",component:ZN},{path:"new-event",component:h5},{path:"artists",component:FI},{path:"artists/followed",component:Pb},{path:"artists/:userName",component:Rb},{path:"event-chats/:id",component:Pq},{path:"chats",component:Bq},{path:"chats/:userName",component:Gq},{path:"search",component:HI}];let EY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[WE.forRoot(CY)],WE]}),n})();function IY(n,t){1&n&&(s.TgZ(0,"div",9),s._UZ(1,"span",10),s.qZA())}function DY(n,t){1&n&&(s.TgZ(0,"div",11),s._uU(1," \u26a0 Se ha producido un error\n"),s.qZA())}let TY=(()=>{class n{constructor(e,r){this.sharedService=e,this.cdRef=r,this.title="Shasic",this.showSpinner=!1,this.showError=!1}ngOnInit(){this.sharedService.sharedSpinner.subscribe(e=>{this.showSpinner=e}),this.sharedService.sharedError.subscribe(e=>{this.showError=e})}ngAfterViewChecked(){this.cdRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(On),s.Y36(s.sBO))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-root"]],decls:13,vars:2,consts:[["class","spinner-border cl-purple","role","status",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"footer","row"],[1,"col-xl-4","col-md-4","col-sm-12"],["href","https://www.linkedin.com/in/luis-barrientos-vincelle/"],["src","../assets/linkedin.png","alt","Linkedin"],[1,"cl-purple","col-xl-4","col-md-4","col-sm-12"],["href","https://github.com/luisjin9"],["src","../assets/github.png","alt","GitHub"],["role","status",1,"spinner-border","cl-purple"],[1,"visually-hidden"],["role","alert",1,"alert","alert-danger"]],template:function(e,r){1&e&&(s.YNc(0,IY,2,0,"div",0),s.YNc(1,DY,2,0,"div",1),s._UZ(2,"router-outlet"),s.TgZ(3,"div",2)(4,"div",3)(5,"a",4),s._UZ(6,"img",5),s.qZA()(),s.TgZ(7,"div",6)(8,"p"),s._uU(9,"Desarrollado por Luis Barrientos"),s.qZA()(),s.TgZ(10,"div",3)(11,"a",7),s._UZ(12,"img",8),s.qZA()()()),2&e&&(s.Q6J("ngIf",r.showSpinner),s.xp6(1),s.Q6J("ngIf",r.showError))},directives:[Ut,d_],styles:[""]}),n})();const gU="firebasestorage.googleapis.com",mU="storageBucket";class Ir extends F.ZR{constructor(t,e){super(oR(t),`Firebase Storage: ${e} (${oR(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ir.prototype)}_codeEquals(t){return oR(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function oR(n){return"storage/"+n}function aR(){return new Ir("unknown","An unknown error occurred, please check the error payload for server response.")}function _U(){return new Ir("canceled","User canceled the upload/download.")}function vU(){return new Ir("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Uv(n){return new Ir("invalid-argument",n)}function yU(){return new Ir("app-deleted","The Firebase app was deleted.")}function bU(n){return new Ir("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zw(n,t){return new Ir("invalid-format","String does not match format '"+n+"': "+t)}function Gw(n){throw new Ir("internal-error","Internal error: "+n)}class Rs{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=Rs.makeFromUrl(t,e)}catch(i){return new Rs(t,"")}if(""===r.path)return r;throw function FY(n){return new Ir("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v($e){$e.path_=decodeURIComponent($e.path)}const D=e.replace(/[.]/g,"\\."),et=[{regex:h,indices:{bucket:1,path:3},postModify:function o($e){"/"===$e.path.charAt($e.path.length-1)&&($e.path_=$e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${e===gU?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let $e=0;$e<et.length;$e++){const xt=et[$e],Rt=xt.regex.exec(t);if(Rt){let Gr=Rt[xt.indices.path];Gr||(Gr=""),r=new Rs(Rt[xt.indices.bucket],Gr),xt.postModify(r);break}}if(null==r)throw function NY(n){return new Ir("invalid-url","Invalid URL '"+n+"'.")}(t);return r}}class BY{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function pS(n){return"string"==typeof n||n instanceof String}function wU(n){return lR()&&n instanceof Blob}function lR(){return"undefined"!=typeof Blob}function cR(n,t,e,r){if(r<t)throw Uv(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw Uv(`Invalid value for '${n}'. Expected ${e} or less.`)}function Ld(n,t,e){let r=t;return null==e&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function CU(n){const t=encodeURIComponent;let e="?";for(const r in n)n.hasOwnProperty(r)&&(e=e+(t(r)+"=")+t(n[r])+"&");return e=e.slice(0,-1),e}var xf=(()=>{return(n=xf||(xf={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",xf;var n})();class $Y{constructor(t,e,r,i,o,c,h,g,v,E,D){this.url_=t,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=E,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,N)=>{this.resolve_=k,this.reject_=N,this.start_()})}start_(){const e=(r,i)=>{const o=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());!function qY(n){return void 0!==n}(g)?o():o(g)}catch(g){c(g)}else if(null!==h){const g=aR();g.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,g):g)}else c(i.canceled?this.appDelete_?yU():_U():function OY(){return new Ir("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?e(0,new gS(!1,null,!0)):this.backoffId_=function jY(n,t,e){let r=1,i=null,o=null,c=!1,h=0;function g(){return 2===h}let v=!1;function E(...pe){v||(v=!0,t.apply(null,pe))}function D(pe){i=setTimeout(()=>{i=null,n(N,g())},pe)}function k(){o&&clearTimeout(o)}function N(pe,...Be){if(v)return void k();if(pe)return k(),void E.call(null,pe,...Be);if(g()||c)return k(),void E.call(null,pe,...Be);let et;r<64&&(r*=2),1===h?(h=2,et=0):et=1e3*(r+Math.random()),D(et)}let U=!1;function X(pe){U||(U=!0,k(),!v&&(null!==i?(pe||(h=2),clearTimeout(i),D(0)):pe||(h=1)))}return D(0),o=setTimeout(()=>{c=!0,X(!0)},e),X}((r,i)=>{if(i)return void r(!1,new gS(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const h=o.getErrorCode()===xf.NO_ERROR,g=o.getStatus();if(!h||this.isRetryStatusCode_(g)){const E=o.getErrorCode()===xf.ABORT;return void r(!1,new gS(!1,null,E))}const v=-1!==this.successCodes_.indexOf(g);r(!0,new gS(v,o))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function HY(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,i=-1!==[408,429].indexOf(t),o=-1!==this.additionalRetryCodes_.indexOf(t);return e||i||o}}class gS{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}}function XY(...n){const t=function JY(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let r=0;r<n.length;r++)e.append(n[r]);return e.getBlob()}if(lR())return new Blob(n);throw new Ir("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ka={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class uR{constructor(t,e){this.data=t,this.contentType=e||null}}function dR(n,t){switch(n){case ka.RAW:return new uR(EU(t));case ka.BASE64:case ka.BASE64URL:return new uR(IU(n,t));case ka.DATA_URL:return new uR(function r8(n){const t=new DU(n);return t.base64?IU(ka.BASE64,t.rest):function n8(n){let t;try{t=decodeURIComponent(n)}catch(e){throw Zw(ka.DATA_URL,"Malformed data URL.")}return EU(t)}(t.rest)}(t),function s8(n){return new DU(n).contentType}(t))}throw aR()}function EU(n){const t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++e),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function IU(n,t){switch(n){case ka.BASE64:{const i=-1!==t.indexOf("-"),o=-1!==t.indexOf("_");if(i||o)throw Zw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ka.BASE64URL:{const i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw Zw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function t8(n){return atob(n)}(t)}catch(i){throw Zw(n,"Invalid character found")}const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}class DU{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw Zw(ka.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;null!=r&&(this.base64=function o8(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}class Cu{constructor(t,e){let r=0,i="";wU(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(wU(this.data_)){const i=function e8(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===i?null:new Cu(i)}{const r=new Uint8Array(this.data_.buffer,t,e-t);return new Cu(r,!0)}}static getBlob(...t){if(lR()){const e=t.map(r=>r instanceof Cu?r.data_:r);return new Cu(XY.apply(null,e))}{const e=t.map(c=>pS(c)?dR(ka.RAW,c).data:c.data_);let r=0;e.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return e.forEach(c=>{for(let h=0;h<c.length;h++)i[o++]=c[h]}),new Cu(i,!0)}}uploadData(){return this.data_}}function hR(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function GY(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function TU(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function c8(n,t){return t}class oo{constructor(t,e,r,i){this.server=t,this.local=e||t,this.writable=!!r,this.xform=i||c8}}let mS=null;function $w(){if(mS)return mS;const n=[];n.push(new oo("bucket")),n.push(new oo("generation")),n.push(new oo("metageneration")),n.push(new oo("name","fullPath",!0));const e=new oo("name");e.xform=function t(o,c){return function u8(n){return!pS(n)||n.length<2?n:TU(n)}(c)},n.push(e);const i=new oo("size");return i.xform=function r(o,c){return void 0!==c?Number(c):c},n.push(i),n.push(new oo("timeCreated")),n.push(new oo("updated")),n.push(new oo("md5Hash",null,!0)),n.push(new oo("cacheControl",null,!0)),n.push(new oo("contentDisposition",null,!0)),n.push(new oo("contentEncoding",null,!0)),n.push(new oo("contentLanguage",null,!0)),n.push(new oo("contentType",null,!0)),n.push(new oo("metadata","customMetadata",!0)),mS=n,mS}function SU(n,t,e){const r=hR(t);return null===r?null:function h8(n,t,e){const r={type:"file"},i=e.length;for(let o=0;o<i;o++){const c=e[o];r[c.local]=c.xform(r,t[c.server])}return function d8(n,t){Object.defineProperty(n,"ref",{get:function e(){const o=new Rs(n.bucket,n.fullPath);return t._makeStorageReference(o)}})}(r,n),r}(n,r,e)}function fR(n,t){const e={},r=t.length;for(let i=0;i<r;i++){const o=t[i];o.writable&&(e[o.server]=n[o.local])}return JSON.stringify(e)}const AU="prefixes";class Eu{constructor(t,e,r,i){this.url=t,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Iu(n){if(!n)throw aR()}function _S(n,t){return function e(r,i){const o=SU(n,i,t);return Iu(null!==o),o}}function Vv(n){return function t(e,r){let i;return i=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function RY(){return new Ir("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function kY(){return new Ir("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function MY(n){return new Ir("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function PY(n){return new Ir("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function zw(n){const t=Vv(n);return function e(r,i){let o=t(r,i);return 404===r.getStatus()&&(o=function xY(n){return new Ir("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function MU(n,t,e){const i=Ld(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Eu(i,"GET",_S(n,e),c);return h.errorHandler=zw(t),h}function v8(n,t,e,r,i){const o={};o.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(o.delimiter=e),r&&(o.pageToken=r),i&&(o.maxResults=i);const h=Ld(t.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,E=new Eu(h,"GET",function m8(n,t){return function e(r,i){const o=function g8(n,t,e){const r=hR(e);return null===r?null:function p8(n,t,e){const r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[AU])for(const i of e[AU]){const o=i.replace(/\/$/,""),c=n._makeStorageReference(new Rs(t,o));r.prefixes.push(c)}if(e.items)for(const i of e.items){const o=n._makeStorageReference(new Rs(t,i.name));r.items.push(o)}return r}(n,t,r)}(n,t,i);return Iu(null!==o),o}}(n,t.bucket),v);return E.urlParams=o,E.errorHandler=Vv(t),E}function RU(n,t,e){const r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=function C8(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}class vS{constructor(t,e,r,i){this.current=t,this.total=e,this.finalized=!!r,this.metadata=i||null}}function pR(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Iu(!1)}return Iu(!!e&&-1!==(t||["active"]).indexOf(e)),e}const T8={STATE_CHANGED:"state_changed"},ao={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gR(n){switch(n){case"running":case"pausing":case"canceling":return ao.RUNNING;case"paused":return ao.PAUSED;case"success":return ao.SUCCESS;case"canceled":return ao.CANCELED;default:return ao.ERROR}}class S8{constructor(t,e,r){if(function ZY(n){return"function"==typeof n}(t)||null!=e||null!=r)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=r?r:void 0;else{const o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Bv(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class x8 extends class A8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xf.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xf.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xf.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,i){if(this.sent_)throw Gw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw Gw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function bc(){return new x8}class FU{constructor(t,e,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=r,this._mappings=$w(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,r])=>{switch(this._state){case"running":t(e,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const r=function E8(n,t,e,r,i){const o=t.bucketOnlyServerUrl(),c=RU(t,r,i),h={name:c.fullPath},g=Ld(o,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},D=fR(c,e),U=new Eu(g,"POST",function N(X){let pe;pR(X);try{pe=X.getResponseHeader("X-Goog-Upload-URL")}catch(Be){Iu(!1)}return Iu(pS(pe)),pe},n.maxUploadRetryTime);return U.urlParams=h,U.headers=E,U.body=D,U.errorHandler=Vv(t),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,bc,t,e);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,r)=>{const i=function I8(n,t,e,r){const g=new Eu(e,"POST",function o(v){const E=pR(v,["active","final"]);let D=null;try{D=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch(N){Iu(!1)}D||Iu(!1);const k=Number(D);return Iu(!isNaN(k)),new vS(k,r.size(),"final"===E)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=Vv(t),g}(this._ref.storage,this._ref._location,t,this._blob),o=this._ref.storage._makeRequest(i,bc,e,r);this._request=o,o.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new vS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let c;try{c=function D8(n,t,e,r,i,o,c,h){const g=new vS(0,0);if(c?(g.current=c.current,g.total=c.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function UY(){return new Ir("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=g.total-g.current;let E=v;i>0&&(E=Math.min(E,i));const D=g.current,U={"X-Goog-Upload-Command":E===v?"upload, finalize":"upload","X-Goog-Upload-Offset":`${g.current}`},X=r.slice(D,D+E);if(null===X)throw vU();const et=new Eu(e,"POST",function pe($e,xt){const Rt=pR($e,["active","final"]),cn=g.current+E,Gr=r.size();let Oa;return Oa="final"===Rt?_S(t,o)($e,xt):null,new vS(cn,Gr,"final"===Rt,Oa)},t.maxUploadRetryTime);return et.headers=U,et.body=X.uploadData(),et.progressCallback=h||null,et.errorHandler=Vv(n),et}(this._ref._location,this._ref.storage,r,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const h=this._ref.storage._makeRequest(c,bc,i,o);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const r=MU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,bc,t,e);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const r=function PU(n,t,e,r,i){const o=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},g=function h(){let et="";for(let $e=0;$e<2;$e++)et+=Math.random().toString().slice(2);return et}();c["Content-Type"]="multipart/related; boundary="+g;const v=RU(t,r,i),E=fR(v,e),N=Cu.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+g+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===N)throw vU();const U={name:v.fullPath},X=Ld(o,n.host,n._protocol),Be=n.maxUploadRetryTime,We=new Eu(X,"POST",_S(n,e),Be);return We.urlParams=U,We.headers=c,We.body=N.uploadData(),We.errorHandler=Vv(t),We}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,bc,t,e);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=_U(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=gR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,r,i){const o=new S8(e||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(gR(this._state)){case ao.SUCCESS:Bv(this._resolve.bind(null,this.snapshot))();break;case ao.CANCELED:case ao.ERROR:Bv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(gR(this._state)){case ao.RUNNING:case ao.PAUSED:t.next&&Bv(t.next.bind(t,this.snapshot))();break;case ao.SUCCESS:t.complete&&Bv(t.complete.bind(t))();break;default:t.error&&Bv(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Fg{constructor(t,e){this._service=t,this._location=e instanceof Rs?e:Rs.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Fg(t,e)}get root(){const t=new Rs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return TU(this._location.path)}get storage(){return this._service}get parent(){const t=function a8(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Rs(this._location.bucket,t);return new Fg(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw bU(t)}}function UU(n,t,e){return mR.apply(this,arguments)}function mR(){return(mR=(0,ve.Z)(function*(n,t,e){const i=yield VU(n,{pageToken:e});t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield UU(n,t,i.nextPageToken))})).apply(this,arguments)}function VU(n,t){null!=t&&"number"==typeof t.maxResults&&cR("options.maxResults",1,1e3,t.maxResults);const e=t||{},r=v8(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(r,bc)}function j8(n){n._throwIfRoot("getDownloadURL");const t=function y8(n,t,e){const i=Ld(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Eu(i,"GET",function _8(n,t){return function e(r,i){const o=SU(n,i,t);return Iu(null!==o),function f8(n,t,e,r){const i=hR(t);if(null===i||!pS(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const c=encodeURIComponent;return o.split(",").map(v=>{const D=n.fullPath;return Ld("/b/"+c(n.bucket)+"/o/"+c(D),e,r)+CU({alt:"media",token:v})})[0]}(o,i,n.host,n._protocol)}}(n,e),c);return h.errorHandler=zw(t),h}(n.storage,n._location,$w());return n.storage.makeRequestWithTokens(t,bc).then(e=>{if(null===e)throw function VY(){return new Ir("no-download-url","The given file does not have any download URLs.")}();return e})}function BU(n,t){const e=function l8(n,t){const e=t.split("/").filter(r=>r.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),r=new Rs(n._location.bucket,e);return new Fg(n.storage,r)}function jU(n,t){if(n instanceof _R){const e=n;if(null==e._bucket)throw function LY(){return new Ir("no-default-bucket","No default bucket found. Did you set the '"+mU+"' property when initializing the app?")}();const r=new Fg(e,e._bucket);return null!=t?jU(r,t):r}return void 0!==t?BU(n,t):n}function G8(n,t){if(t&&function q8(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof _R)return function Z8(n,t){return new Fg(n,t)}(n,t);throw Uv("To use ref(service, url), the first argument must be a Storage instance.")}return jU(n,t)}function HU(n,t){const e=null==t?void 0:t[mU];return null==e?null:Rs.makeFromBucketSpec(e,n)}class _R{constructor(t,e,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=gU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Rs.makeFromBucketSpec(i,this._host):HU(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Rs.makeFromBucketSpec(this._url,t):HU(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){cR("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){cR("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,ve.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,ve.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Fg(this,t)}_makeRequest(t,e,r,i){if(this._deleted)return new BY(yU());{const o=function QY(n,t,e,r,i,o){const c=CU(n.urlParams),h=n.url+c,g=Object.assign({},n.headers);return function WY(n,t){t&&(n["X-Firebase-GMPID"]=t)}(g,t),function zY(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(g,e),function YY(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(g,o),function KY(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(g,r),new $Y(h,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(t,this._appId,r,i,e,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,e){var r=this;return(0,ve.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(t,e,i,o).getPromise()})()}}const qU="@firebase/storage";function $U(n,t){return G8(n=(0,F.m9)(n),t)}function nW(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new _R(e,r,i,t,yi.SDK_VERSION)}!function rW(){(0,yi._registerComponent)(new ml.wA("storage",nW,"PUBLIC").setMultipleInstances(!0)),(0,yi.registerVersion)(qU,"0.9.6",""),(0,yi.registerVersion)(qU,"0.9.6","esm2017")}();class yS{constructor(t,e,r){this._delegate=t,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class zU{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new yS(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(r=>{if(t)return t(new yS(r,this,this._ref))},e)}on(t,e,r,i){let o;return e&&(o="function"==typeof e?c=>e(new yS(c,this,this._ref)):{next:e.next?c=>e.next(new yS(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,r||void 0,i||void 0)}}class YU{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Ud(t,this._service))}get items(){return this._delegate.items.map(t=>new Ud(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ud{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function eW(n,t){return BU(n,t)}(this._delegate,t);return new Ud(e,this.storage)}get root(){return new Ud(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Ud(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new zU(function z8(n,t,e){return function F8(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new FU(n,new Cu(t),e)}(n=(0,F.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=ka.RAW,r){this._throwIfRoot("putString");const i=dR(e,t),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new zU(new FU(this._delegate,new Cu(i.data,!0),o),this)}listAll(){return function Q8(n){return function U8(n){const t={prefixes:[],items:[]};return UU(n,t).then(()=>t)}(n=(0,F.m9)(n))}(this._delegate).then(t=>new YU(t,this.storage))}list(t){return function K8(n,t){return VU(n=(0,F.m9)(n),t)}(this._delegate,t||void 0).then(e=>new YU(e,this.storage))}getMetadata(){return function Y8(n){return function V8(n){n._throwIfRoot("getMetadata");const t=MU(n.storage,n._location,$w());return n.storage.makeRequestWithTokens(t,bc)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(t){return function W8(n,t){return function B8(n,t){n._throwIfRoot("updateMetadata");const e=function b8(n,t,e,r){const o=Ld(t.fullServerUrl(),n.host,n._protocol),h=fR(e,r),v=n.maxOperationRetryTime,E=new Eu(o,"PATCH",_S(n,r),v);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=h,E.errorHandler=zw(t),E}(n.storage,n._location,t,$w());return n.storage.makeRequestWithTokens(e,bc)}(n=(0,F.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function J8(n){return j8(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function X8(n){return function H8(n){n._throwIfRoot("deleteObject");const t=function w8(n,t){const r=Ld(t.fullServerUrl(),n.host,n._protocol),h=new Eu(r,"DELETE",function c(g,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=zw(t),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,bc)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw bU(t)}}class WU{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(KU(t))throw Uv("ref() expected a child path but got a URL, use refFromURL instead.");return new Ud($U(this._delegate,t),this)}refFromURL(t){if(!KU(t))throw Uv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Rs.makeFromUrl(t,this._delegate.host)}catch(e){throw Uv("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ud($U(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,r={}){!function tW(n,t,e,r={}){!function $8(n,t,e,r={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,F.Sg)(i,n.app.options.projectId))}(n,t,e,r)}(this._delegate,t,e,r)}}function KU(n){return/^[A-Za-z]+:\/\//.test(n)}function aW(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:t});return new WU(e,r)}function QU(n){const t=function cW(n){return new Or.y(t=>{const e=c=>t.next(c);e(n.snapshot);const o=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){o()}}).pipe(rL(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,ut.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function bS(n){return{getDownloadURL:()=>ze(void 0).pipe(gn.fc,dn(()=>n.getDownloadURL()),gn.iC),getMetadata:()=>ze(void 0).pipe(gn.fc,dn(()=>n.getMetadata()),gn.iC),delete:()=>(0,Tn.D)(n.delete()),child:t=>bS(n.child(t)),updateMetadata:t=>(0,Tn.D)(n.updateMetadata(t)),put:(t,e)=>QU(n.put(t,e)),putString:(t,e,r)=>QU(n.putString(t,e,r)),list:t=>(0,Tn.D)(n.list(t)),listAll:()=>(0,Tn.D)(n.listAll())}}!function lW(n){const t={TaskState:ao,TaskEvent:T8,StringFormat:ka,Storage:WU,Reference:Ud};n.INTERNAL.registerComponent(new ml.wA("storage-compat",aW,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(P_.Z);const uW=new s.OlP("angularfire2.storageBucket"),dW=new s.OlP("angularfire2.storage.maxUploadRetryTime"),hW=new s.OlP("angularfire2.storage.maxOperationRetryTime"),fW=new s.OlP("angularfire2.storage.use-emulator");let pW=(()=>{class n{constructor(e,r,i,o,c,h,g,v,E,D){const k=(0,Er.on)(e,c,r);this.storage=(0,Er.cc)(`${k.name}.storage.${i}`,"AngularFireStorage",k.name,()=>{const N=c.runOutsideAngular(()=>k.storage(i||void 0)),U=E;return U&&N.useEmulator(...U),g&&N.setMaxUploadRetryTime(g),v&&N.setMaxOperationRetryTime(v),N},[g,v])}ref(e){return bS(this.storage.ref(e))}refFromURL(e){return bS(this.storage.refFromURL(e))}upload(e,r,i){return bS(this.storage.ref(e)).put(r,i)}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Er.Dh),s.LFG(Er.xv,8),s.LFG(uW,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(gn.HU),s.LFG(dW,8),s.LFG(hW,8),s.LFG(fW,8),s.LFG(Aw,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})(),mW=(()=>{class n{constructor(){PT.Z.registerVersion("angularfire",gn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[pW],imports:[gW]}),n})();function vR(){return(0,Qn.e)((n,t)=>{let e,r=!1;n.subscribe((0,Mt.x)(t,i=>{const o=e;e=i,r&&t.next([o,i]),r=!0}))})}var lt,_W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Vd={},yR=yR||{},Ht=_W||self;function wS(){}function bR(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Yw(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var wR="closure_uid_"+(1e9*Math.random()>>>0),yW=0;function bW(n,t,e){return n.call.apply(n.bind,arguments)}function wW(n,t,e){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function ls(n,t,e){return(ls=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bW:wW).apply(null,arguments)}function CS(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function cs(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return t.prototype[i].apply(r,c)}}function Mf(){this.s=this.s,this.o=this.o}var EW={};Mf.prototype.s=!1,Mf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function vW(n){return Object.prototype.hasOwnProperty.call(n,wR)&&n[wR]||(n[wR]=++yW)}(this);delete EW[n]}},Mf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const JU=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},XU=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const r=n.length,i="string"==typeof n?n.split(""):n;for(let o=0;o<r;o++)o in i&&t.call(e,i[o],o,n)};function eV(n){return Array.prototype.concat.apply([],arguments)}function CR(n){const t=n.length;if(0<t){const e=Array(t);for(let r=0;r<t;r++)e[r]=n[r];return e}return[]}function ES(n){return/^[\s\xa0]*$/.test(n)}var co,tV=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function lo(n,t){return-1!=n.indexOf(t)}function ER(n,t){return n<t?-1:n>t?1:0}e:{var nV=Ht.navigator;if(nV){var rV=nV.userAgent;if(rV){co=rV;break e}}co=""}function IR(n,t,e){for(const r in n)t.call(e,n[r],r,n)}function iV(n){const t={};for(const e in n)t[e]=n[e];return t}var sV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oV(n,t){let e,r;for(let i=1;i<arguments.length;i++){for(e in r=arguments[i],r)n[e]=r[e];for(let o=0;o<sV.length;o++)e=sV[o],Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}function DR(n){return DR[" "](n),n}DR[" "]=wS;var IS,n,TW=lo(co,"Opera"),jv=lo(co,"Trident")||lo(co,"MSIE"),aV=lo(co,"Edge"),TR=aV||jv,lV=lo(co,"Gecko")&&!(lo(co.toLowerCase(),"webkit")&&!lo(co,"Edge"))&&!(lo(co,"Trident")||lo(co,"MSIE"))&&!lo(co,"Edge"),SW=lo(co.toLowerCase(),"webkit")&&!lo(co,"Edge");function cV(){var n=Ht.document;return n?n.documentMode:void 0}e:{var SR="",AR=(n=co,lV?/rv:([^\);]+)(\)|;)/.exec(n):aV?/Edge\/([\d\.]+)/.exec(n):jv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):SW?/WebKit\/(\S+)/.exec(n):TW?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(AR&&(SR=AR?AR[1]:""),jv){var xR=cV();if(null!=xR&&xR>parseFloat(SR)){IS=String(xR);break e}}IS=SR}var AW={};var MW=Ht.document&&jv&&(cV()||parseInt(IS,10))||void 0,kW=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ht.addEventListener("test",wS,t),Ht.removeEventListener("test",wS,t)}catch(e){}return n}();function Ps(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function Ww(n,t){if(Ps.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(lV){e:{try{DR(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:RW[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ww.Z.h.call(this)}}Ps.prototype.h=function(){this.defaultPrevented=!0},cs(Ww,Ps);var RW={2:"touch",3:"pen",4:"mouse"};Ww.prototype.h=function(){Ww.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Kw="closure_listenable_"+(1e6*Math.random()|0),PW=0;function OW(n,t,e,r,i){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!r,this.ia=i,this.key=++PW,this.ca=this.fa=!1}function DS(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function TS(n){this.src=n,this.g={},this.h=0}function kR(n,t){var e=t.type;if(e in n.g){var o,r=n.g[e],i=JU(r,t);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(DS(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function RR(n,t,e,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ca&&o.listener==t&&o.capture==!!e&&o.ia==r)return i}return-1}TS.prototype.add=function(n,t,e,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var c=RR(n,t,r,i);return-1<c?(t=n[c],e||(t.fa=!1)):((t=new OW(t,this.src,o,!!r,i)).fa=e,n.push(t)),t};var PR="closure_lm_"+(1e6*Math.random()|0),OR={};function dV(n,t,e,r,i){if(r&&r.once)return fV(n,t,e,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)dV(n,t[o],e,r,i);return null}return e=UR(e),n&&n[Kw]?n.N(t,e,Yw(r)?!!r.capture:!!r,i):hV(n,t,e,!1,r,i)}function hV(n,t,e,r,i,o){if(!t)throw Error("Invalid event type");var c=Yw(i)?!!i.capture:!!i,h=FR(n);if(h||(n[PR]=h=new TS(n)),(e=h.add(t,e,r,c,o)).proxy)return e;if(r=function NW(){var t=FW;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=r,r.src=n,r.listener=e,n.addEventListener)kW||(i=c),void 0===i&&(i=!1),n.addEventListener(t.toString(),r,i);else if(n.attachEvent)n.attachEvent(gV(t.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return e}function fV(n,t,e,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)fV(n,t[o],e,r,i);return null}return e=UR(e),n&&n[Kw]?n.O(t,e,Yw(r)?!!r.capture:!!r,i):hV(n,t,e,!0,r,i)}function pV(n,t,e,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)pV(n,t[o],e,r,i);else r=Yw(r)?!!r.capture:!!r,e=UR(e),n&&n[Kw]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=RR(o=n.g[t],e,r,i))&&(DS(o[e]),Array.prototype.splice.call(o,e,1),0==o.length&&(delete n.g[t],n.h--))):n&&(n=FR(n))&&(t=n.g[t.toString()],n=-1,t&&(n=RR(t,e,r,i)),(e=-1<n?t[n]:null)&&NR(e))}function NR(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Kw])kR(t.i,n);else{var e=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(e,r,n.capture):t.detachEvent?t.detachEvent(gV(e),r):t.addListener&&t.removeListener&&t.removeListener(r),(e=FR(t))?(kR(e,n),0==e.h&&(e.src=null,t[PR]=null)):DS(n)}}}function gV(n){return n in OR?OR[n]:OR[n]="on"+n}function FW(n,t){if(n.ca)n=!0;else{t=new Ww(t,this);var e=n.listener,r=n.ia||n.src;n.fa&&NR(n),n=e.call(r,t)}return n}function FR(n){return(n=n[PR])instanceof TS?n:null}var LR="__closure_events_fn_"+(1e9*Math.random()>>>0);function UR(n){return"function"==typeof n?n:(n[LR]||(n[LR]=function(t){return n.handleEvent(t)}),n[LR])}function Vi(){Mf.call(this),this.i=new TS(this),this.P=this,this.I=null}function us(n,t){var e,r=n.I;if(r)for(e=[];r;r=r.I)e.push(r);if(n=n.P,r=t.type||t,"string"==typeof t)t=new Ps(t,n);else if(t instanceof Ps)t.target=t.target||n;else{var i=t;oV(t=new Ps(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var c=t.g=e[o];i=SS(c,r,!0,t)&&i}if(i=SS(c=t.g=n,r,!0,t)&&i,i=SS(c,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=SS(c=t.g=e[o],r,!1,t)&&i}function SS(n,t,e,r){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var c=t[o];if(c&&!c.ca&&c.capture==e){var h=c.listener,g=c.ia||c.src;c.fa&&kR(n.i,c),i=!1!==h.call(g,r)&&i}}return i&&!r.defaultPrevented}cs(Vi,Mf),Vi.prototype[Kw]=!0,Vi.prototype.removeEventListener=function(n,t,e,r){pV(this,n,t,e,r)},Vi.prototype.M=function(){if(Vi.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],r=0;r<e.length;r++)DS(e[r]);delete n.g[t],n.h--}}this.I=null},Vi.prototype.N=function(n,t,e,r){return this.i.add(String(n),t,!1,e,r)},Vi.prototype.O=function(n,t,e,r){return this.i.add(String(n),t,!0,e,r)};var VR=Ht.JSON.stringify;function LW(){var n=_V;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var jR,mV=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new VW,n=>n.reset());class VW{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function BW(n){Ht.setTimeout(()=>{throw n},0)}function BR(n,t){jR||function jW(){var n=Ht.Promise.resolve(void 0);jR=function(){n.then(HW)}}(),HR||(jR(),HR=!0),_V.add(n,t)}var HR=!1,_V=new class UW{constructor(){this.h=this.g=null}add(t,e){const r=mV.get();r.set(t,e),this.h?this.h.next=r:this.g=r,this.h=r}};function HW(){for(var n;n=LW();){try{n.h.call(n.g)}catch(e){BW(e)}var t=mV;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}HR=!1}function AS(n,t){Vi.call(this),this.h=n||1,this.g=t||Ht,this.j=ls(this.kb,this),this.l=Date.now()}function qR(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function ZR(n,t,e){if("function"==typeof n)e&&(n=ls(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ls(n.handleEvent,n)}return 2147483647<Number(t)?-1:Ht.setTimeout(n,t||0)}function vV(n){n.g=ZR(()=>{n.g=null,n.i&&(n.i=!1,vV(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}cs(AS,Vi),(lt=AS.prototype).da=!1,lt.S=null,lt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),us(this,"tick"),this.da&&(qR(this),this.start()))}},lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){AS.Z.M.call(this),qR(this),delete this.g};class qW extends Mf{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:vV(this)}M(){super.M(),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qw(n){Mf.call(this),this.h=n,this.g={}}cs(Qw,Mf);var yV=[];function bV(n,t,e,r){Array.isArray(e)||(e&&(yV[0]=e.toString()),e=yV);for(var i=0;i<e.length;i++){var o=dV(t,e[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function wV(n){IR(n.g,function(t,e){this.g.hasOwnProperty(e)&&NR(t)},n),n.g={}}function xS(){this.g=!0}function Hv(n,t,e,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function zW(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var r=e[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var c=1;c<i.length;c++)i[c]=""}}}return VR(e)}catch(h){return t}}(n,e)+(r?" "+r:"")})}Qw.prototype.M=function(){Qw.Z.M.call(this),wV(this)},Qw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xS.prototype.Aa=function(){this.g=!1},xS.prototype.info=function(){};var Lg={},CV=null;function MS(){return CV=CV||new Vi}function EV(n){Ps.call(this,Lg.Ma,n)}function Jw(n){const t=MS();us(t,new EV(t,n))}function IV(n,t){Ps.call(this,Lg.STAT_EVENT,n),this.stat=t}function uo(n){const t=MS();us(t,new IV(t,n))}function DV(n,t){Ps.call(this,Lg.Na,n),this.size=t}function Xw(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ht.setTimeout(function(){n()},t)}Lg.Ma="serverreachability",cs(EV,Ps),Lg.STAT_EVENT="statevent",cs(IV,Ps),Lg.Na="timingevent",cs(DV,Ps);var kS={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},TV={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function GR(){}function AV(){}GR.prototype.h=null;var YR,eC={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function $R(){Ps.call(this,"d")}function zR(){Ps.call(this,"c")}function RS(){}function tC(n,t,e,r){this.l=n,this.j=t,this.m=e,this.X=r||1,this.V=new Qw(this),this.P=YW,this.W=new AS(n=TR?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new xV}function xV(){this.i=null,this.g="",this.h=!1}cs($R,Ps),cs(zR,Ps),cs(RS,GR),RS.prototype.g=function(){return new XMLHttpRequest},RS.prototype.i=function(){return{}},YR=new RS;var YW=45e3,WR={},PS={};function KR(n,t,e){n.K=1,n.v=US(Bd(t)),n.s=e,n.U=!0,MV(n,null)}function MV(n,t){n.F=Date.now(),nC(n),n.A=Bd(n.v);var e=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),VV(e.h,"t",r),n.C=0,e=n.l.H,n.h=new xV,n.g=lB(n.l,e?t:null,!n.s),0<n.O&&(n.L=new qW(ls(n.Ia,n,n.g),n.O)),bV(n.V,n.g,"readystatechange",n.gb),t=n.H?iV(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),Jw(1),function ZW(n,t,e,r,i,o){n.info(function(){if(n.g)if(o)for(var c="",h=o.split("&"),g=0;g<h.length;g++){var v=h[g].split("=");if(1<v.length){var E=v[0];v=v[1];var D=E.split("_");c=2<=D.length&&"type"==D[1]?c+(E+"=")+v+"&":c+(E+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function kV(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function RV(n,t,e){let i,r=!0;for(;!n.I&&n.C<e.length;){if(i=WW(n,e),i==PS){4==t&&(n.o=4,uo(14),r=!1),Hv(n.j,n.m,null,"[Incomplete Response]");break}if(i==WR){n.o=4,uo(15),Hv(n.j,n.m,e,"[Invalid Chunk]"),r=!1;break}Hv(n.j,n.m,i,null),QR(n,i)}kV(n)&&i!=PS&&i!=WR&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,uo(16),r=!1),n.i=n.i&&r,r?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),lP(t),t.L=!0,uo(11))):(Hv(n.j,n.m,e,"[Invalid Chunked Response]"),Ug(n),rC(n))}function WW(n,t){var e=n.C,r=t.indexOf("\n",e);return-1==r?PS:(e=Number(t.substring(e,r)),isNaN(e)?WR:(r+=1)+e>t.length?PS:(t=t.substr(r,e),n.C=r+e,t))}function nC(n){n.Y=Date.now()+n.P,PV(n,n.P)}function PV(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xw(ls(n.eb,n),t)}function OS(n){n.B&&(Ht.clearTimeout(n.B),n.B=null)}function rC(n){0==n.l.G||n.I||iB(n.l,n)}function Ug(n){OS(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,qR(n.W),wV(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function QR(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||eP(e.i,n)))if(e.I=n.N,!n.J&&eP(e.i,n)&&3==e.G){try{var r=e.Ca.g.parse(t)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(e.u)e.ta=i[1],0<e.ta-e.U&&37500>i[2]&&e.N&&0==e.A&&!e.v&&(e.v=Xw(ls(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;ZS(e),HS(e)}aP(e),uo(18)}if(1>=HV(e.i)&&e.ka){try{e.ka()}catch(v){}e.ka=void 0}}else jg(e,11)}else if((n.J||e.g==n)&&ZS(e),!ES(t))for(i=e.Ca.g.parse(t),t=0;t<i.length;t++){let v=i[t];if(e.U=v[0],v=v[1],2==e.G)if("c"==v[0]){e.J=v[1],e.la=v[2];const E=v[3];null!=E&&(e.ma=E,e.h.info("VER="+e.ma));const D=v[4];null!=D&&(e.za=D,e.h.info("SVER="+e.za));const k=v[5];null!=k&&"number"==typeof k&&0<k&&(e.K=r=1.5*k,e.h.info("backChannelRequestTimeoutMs_="+r)),r=e;const N=n.g;if(N){const U=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var o=r.i;!o.g&&(lo(U,"spdy")||lo(U,"quic")||lo(U,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(tP(o,o.h),o.h=null))}if(r.D){const X=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;X&&(r.sa=X,or(r.F,r.D,X))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var c=n;if((r=e).oa=aB(r,r.H?r.la:null,r.W),c.J){qV(r.i,c);var h=c,g=r.K;g&&h.setTimeout(g),h.B&&(OS(h),nC(h)),r.g=c}else nB(r);0<e.l.length&&qS(e)}else"stop"!=v[0]&&"close"!=v[0]||jg(e,7);else 3==e.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?jg(e,7):sP(e):"noop"!=v[0]&&e.j&&e.j.wa(v),e.A=0)}Jw(4)}catch(v){}}function JR(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(bR(n)||"string"==typeof n)XU(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(bR(n)||"string"==typeof n){e=[];for(var r=n.length,i=0;i<r;i++)e.push(i)}else for(i in e=[],r=0,n)e[r++]=i;r=function KW(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(bR(n)){for(var t=[],e=n.length,r=0;r<e;r++)t.push(n[r]);return t}for(r in t=[],e=0,n)t[e++]=n[r];return t}(n),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],e&&e[o],n)}}function qv(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof qv)for(e=n.T(),r=0;r<e.length;r++)this.set(e[r],n.get(e[r]));else for(r in n)this.set(r,n[r])}function XR(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var r=n.g[t];Vg(n.h,r)&&(n.g[e++]=r),t++}n.g.length=e}if(n.i!=n.g.length){var i={};for(e=t=0;t<n.g.length;)Vg(i,r=n.g[t])||(n.g[e++]=r,i[r]=1),t++;n.g.length=e}}function Vg(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(lt=tC.prototype).setTimeout=function(n){this.P=n},lt.gb=function(n){n=n.target;const t=this.L;t&&3==jd(n)?t.l():this.Ia(n)},lt.Ia=function(n){try{if(n==this.g)e:{const E=jd(this.g);var t=this.g.Da();const D=this.g.ba();if(!(3>E)&&(3!=E||TR||this.g&&(this.h.h||this.g.ga()||QV(this.g)))){this.I||4!=E||7==t||Jw(8==t||0>=D?3:2),OS(this);var e=this.g.ba();this.N=e;t:if(kV(this)){var r=QV(this.g);n="";var i=r.length,o=4==jd(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ug(this),rC(this);var c="";break t}this.h.i=new Ht.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,n+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==e,function GW(n,t,e,r,i,o,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+o+" "+c})}(this.j,this.u,this.A,this.m,this.X,E,e),this.i){if(this.$&&!this.J){t:{if(this.g){var h,g=this.g;if((h=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ES(h)){var v=h;break t}}v=null}if(!(e=v)){this.i=!1,this.o=3,uo(12),Ug(this),rC(this);break e}Hv(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,QR(this,e)}this.U?(RV(this,E,c),TR&&this.i&&3==E&&(bV(this.V,this.W,"tick",this.fb),this.W.start())):(Hv(this.j,this.m,c,null),QR(this,c)),4==E&&Ug(this),this.i&&!this.I&&(4==E?iB(this.l,this):(this.i=!1,nC(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,uo(12)):(this.o=0,uo(13)),Ug(this),rC(this)}}}catch(E){}},lt.fb=function(){if(this.g){var n=jd(this.g),t=this.g.ga();this.C<t.length&&(OS(this),RV(this,n,t),this.i&&4!=n&&nC(this))}},lt.cancel=function(){this.I=!0,Ug(this)},lt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function $W(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Jw(3),uo(17)),Ug(this),this.o=2,rC(this)):PV(this,this.Y-n)},(lt=qv.prototype).R=function(){XR(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},lt.T=function(){return XR(this),this.g.concat()},lt.get=function(n,t){return Vg(this.h,n)?this.h[n]:t},lt.set=function(n,t){Vg(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},lt.forEach=function(n,t){for(var e=this.T(),r=0;r<e.length;r++){var i=e[r],o=this.get(i);n.call(t,o,i,this)}};var OV=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Bg(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Bg){this.g=void 0!==t?t:n.g,NS(this,n.j),this.s=n.s,FS(this,n.i),LS(this,n.m),this.l=n.l,t=n.h;var e=new oC;e.i=t.i,t.g&&(e.g=new qv(t.g),e.h=t.h),NV(this,e),this.o=n.o}else n&&(e=String(n).match(OV))?(this.g=!!t,NS(this,e[1]||"",!0),this.s=iC(e[2]||""),FS(this,e[3]||"",!0),LS(this,e[4]),this.l=iC(e[5]||"",!0),NV(this,e[6]||"",!0),this.o=iC(e[7]||"")):(this.g=!!t,this.h=new oC(null,this.g))}function Bd(n){return new Bg(n)}function NS(n,t,e){n.j=e?iC(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function FS(n,t,e){n.i=e?iC(t,!0):t}function LS(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function NV(n,t,e){t instanceof oC?(n.h=t,function o7(n,t){t&&!n.j&&(kf(n),n.i=null,n.g.forEach(function(e,r){var i=r.toLowerCase();r!=i&&(LV(this,r),VV(this,i,e))},n)),n.j=t}(n.h,n.g)):(e||(t=sC(t,r7)),n.h=new oC(t,n.g))}function or(n,t,e){n.h.set(t,e)}function US(n){return or(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function iC(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function sC(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,e7),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function e7(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Bg.prototype.toString=function(){var n=[],t=this.j;t&&n.push(sC(t,FV,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(sC(t,FV,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(sC(e,"/"==e.charAt(0)?n7:t7,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",sC(e,s7)),n.join("")};var FV=/[#\/\?@]/g,t7=/[#\?:]/g,n7=/[#\?]/g,r7=/[#\?@]/g,s7=/#/g;function oC(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function kf(n){n.g||(n.g=new qv,n.h=0,n.i&&function QW(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var r=n[e].indexOf("="),i=null;if(0<=r){var o=n[e].substring(0,r);i=n[e].substring(r+1)}else o=n[e];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function LV(n,t){kf(n),t=Zv(n,t),Vg(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,Vg((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&XR(n)))}function UV(n,t){return kf(n),t=Zv(n,t),Vg(n.g.h,t)}function VV(n,t,e){LV(n,t),0<e.length&&(n.i=null,n.g.set(Zv(n,t),CR(e)),n.h+=e.length)}function Zv(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function BV(n){this.l=n||l7,n=Ht.PerformanceNavigationTiming?0<(n=Ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ht.g&&Ht.g.Ea&&Ht.g.Ea()&&Ht.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=oC.prototype).add=function(n,t){kf(this),this.i=null,n=Zv(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},lt.forEach=function(n,t){kf(this),this.g.forEach(function(e,r){XU(e,function(i){n.call(t,i,r,this)},this)},this)},lt.T=function(){kf(this);for(var n=this.g.R(),t=this.g.T(),e=[],r=0;r<t.length;r++)for(var i=n[r],o=0;o<i.length;o++)e.push(t[r]);return e},lt.R=function(n){kf(this);var t=[];if("string"==typeof n)UV(this,n)&&(t=eV(t,this.g.get(Zv(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=eV(t,n[e])}return t},lt.set=function(n,t){return kf(this),this.i=null,UV(this,n=Zv(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},lt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var r=t[e],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var c=i;""!==r[o]&&(c+="="+encodeURIComponent(String(r[o]))),n.push(c)}}return this.i=n.join("&")};var l7=10;function jV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function HV(n){return n.h?1:n.g?n.g.size:0}function eP(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function tP(n,t){n.g?n.g.add(t):n.h=t}function qV(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function ZV(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return CR(n.i)}function nP(){}function c7(){this.g=new nP}function u7(n,t,e){const r=e||"";try{JR(n,function(i,o){let c=i;Yw(i)&&(c=VR(i)),t.push(r+o+"="+encodeURIComponent(c))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function VS(n,t,e,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function aC(n){this.l=n.$b||null,this.j=n.ib||!1}function BS(n,t){Vi.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=rP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}BV.prototype.cancel=function(){if(this.i=ZV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},nP.prototype.stringify=function(n){return Ht.JSON.stringify(n,void 0)},nP.prototype.parse=function(n){return Ht.JSON.parse(n,void 0)},cs(aC,GR),aC.prototype.g=function(){return new BS(this.l,this.j)},aC.prototype.i=function(n){return function(){return n}}({}),cs(BS,Vi);var rP=0;function GV(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function lC(n){n.readyState=4,n.l=null,n.j=null,n.A=null,cC(n)}function cC(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=BS.prototype).open=function(n,t){if(this.readyState!=rP)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,cC(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Ht).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,lC(this)),this.readyState=rP},lt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,cC(this)),this.g&&(this.readyState=3,cC(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ht.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;GV(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},lt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?lC(this):cC(this),3==this.readyState&&GV(this)}},lt.Ua=function(n){this.g&&(this.response=this.responseText=n,lC(this))},lt.Ta=function(n){this.g&&(this.response=n,lC(this))},lt.ha=function(){this.g&&lC(this)},lt.setRequestHeader=function(n,t){this.v.append(n,t)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(BS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var h7=Ht.JSON.parse;function si(n){Vi.call(this),this.headers=new qv,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$V,this.K=this.L=!1}cs(si,Vi);var $V="",f7=/^https?$/i,p7=["POST","PUT"];function m7(n){return"content-type"==n.toLowerCase()}function zV(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,YV(n),jS(n)}function YV(n){n.D||(n.D=!0,us(n,"complete"),us(n,"error"))}function WV(n){if(n.h&&void 0!==yR&&(!n.C[1]||4!=jd(n)||2!=n.ba()))if(n.v&&4==jd(n))ZR(n.Fa,0,n);else if(us(n,"readystatechange"),4==jd(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var r;if(r=0===h){var i=String(n.H).match(OV)[1]||null;if(!i&&Ht.self&&Ht.self.location){var o=Ht.self.location.protocol;i=o.substr(0,o.length-1)}r=!f7.test(i?i.toLowerCase():"")}e=r}if(e)us(n,"complete"),us(n,"success");else{n.m=6;try{var c=2<jd(n)?n.g.statusText:""}catch(g){c=""}n.j=c+" ["+n.ba()+"]",YV(n)}}finally{jS(n)}}}function jS(n,t){if(n.g){KV(n);const e=n.g,r=n.C[0]?wS:null;n.g=null,n.C=null,t||us(n,"ready");try{e.onreadystatechange=r}catch(i){}}}function KV(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ht.clearTimeout(n.A),n.A=null)}function jd(n){return n.g?n.g.readyState:0}function QV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case $V:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function iP(n,t,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=function _7(n){let t="";return IR(n,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):or(n,t,e))}function uC(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function JV(n){this.za=0,this.l=[],this.h=new xS,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=uC("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=uC("baseRetryDelayMs",5e3,n),this.$a=uC("retryDelaySeedMs",1e4,n),this.Ya=uC("forwardChannelMaxRetries",2,n),this.ra=uC("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new BV(n&&n.concurrentRequestLimit),this.Ca=new c7,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function sP(n){if(XV(n),3==n.G){var t=n.V++,e=Bd(n.F);or(e,"SID",n.J),or(e,"RID",t),or(e,"TYPE","terminate"),dC(n,e),(t=new tC(n,n.h,t,void 0)).K=2,t.v=US(Bd(e)),e=!1,Ht.navigator&&Ht.navigator.sendBeacon&&(e=Ht.navigator.sendBeacon(t.v.toString(),"")),!e&&Ht.Image&&((new Image).src=t.v,e=!0),e||(t.g=lB(t.l,null),t.g.ea(t.v)),t.F=Date.now(),nC(t)}oB(n)}function HS(n){n.g&&(lP(n),n.g.cancel(),n.g=null)}function XV(n){HS(n),n.u&&(Ht.clearTimeout(n.u),n.u=null),ZS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ht.clearTimeout(n.m),n.m=null)}function oP(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&qS(n)}function qS(n){jV(n.i)||n.m||(n.m=!0,BR(n.Ha,n),n.C=0)}function eB(n,t){var e;e=t?t.m:n.V++;const r=Bd(n.F);or(r,"SID",n.J),or(r,"RID",e),or(r,"AID",n.U),dC(n,r),n.o&&n.s&&iP(r,n.o,n.s),e=new tC(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=tB(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),tP(n.i,e),KR(e,r,t)}function dC(n,t){n.j&&JR({},function(e,r){or(t,r,e)})}function tB(n,t,e){e=Math.min(n.l.length,e);var r=n.j?ls(n.j.Oa,n.j,n):null;e:{var i=n.l;let o=-1;for(;;){const c=["count="+e];-1==o?0<e?(o=i[0].h,c.push("ofs="+o)):o=0:c.push("ofs="+o);let h=!0;for(let g=0;g<e;g++){let v=i[g].h;const E=i[g].g;if(v-=o,0>v)o=Math.max(0,i[g].h-100),h=!1;else try{u7(E,c,"req"+v+"_")}catch(D){r&&r(E)}}if(h){r=c.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,r}function nB(n){n.g||n.u||(n.Y=1,BR(n.Ga,n),n.A=0)}function aP(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Xw(ls(n.Ga,n),sB(n,n.A)),n.A++,0))}function lP(n){null!=n.B&&(Ht.clearTimeout(n.B),n.B=null)}function rB(n){n.g=new tC(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=Bd(n.oa);or(t,"RID","rpc"),or(t,"SID",n.J),or(t,"CI",n.N?"0":"1"),or(t,"AID",n.U),dC(n,t),or(t,"TYPE","xmlhttp"),n.o&&n.s&&iP(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=US(Bd(t)),e.s=null,e.U=!0,MV(e,n)}function ZS(n){null!=n.v&&(Ht.clearTimeout(n.v),n.v=null)}function iB(n,t){var e=null;if(n.g==t){ZS(n),lP(n),n.g=null;var r=2}else{if(!eP(n.i,t))return;e=t.D,qV(n.i,t),r=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==r){e=t.s?t.s.length:0,t=Date.now()-t.F;var i=n.C;us(r=MS(),new DV(r,e,t,i)),qS(n)}else nB(n);else if(3==(i=t.o)||0==i&&0<n.I||!(1==r&&function v7(n,t){return!(HV(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Xw(ls(n.Ha,n,t),sB(n,n.C)),n.C++,0)))}(n,t)||2==r&&aP(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),i){case 1:jg(n,5);break;case 4:jg(n,10);break;case 3:jg(n,6);break;default:jg(n,2)}}function sB(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function jg(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var r=ls(n.jb,n);e||(e=new Bg("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||NS(e,"https"),US(e)),function d7(n,t){const e=new xS;if(Ht.Image){const r=new Image;r.onload=CS(VS,e,r,"TestLoadImage: loaded",!0,t),r.onerror=CS(VS,e,r,"TestLoadImage: error",!1,t),r.onabort=CS(VS,e,r,"TestLoadImage: abort",!1,t),r.ontimeout=CS(VS,e,r,"TestLoadImage: timeout",!1,t),Ht.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}(e.toString(),r)}else uo(2);n.G=0,n.j&&n.j.va(t),oB(n),XV(n)}function oB(n){n.G=0,n.I=-1,n.j&&((0!=ZV(n.i).length||0!=n.l.length)&&(n.i.i.length=0,CR(n.l),n.l.length=0),n.j.ua())}function aB(n,t,e){let r=function JW(n){return n instanceof Bg?Bd(n):new Bg(n,void 0)}(e);if(""!=r.i)t&&FS(r,t+"."+r.i),LS(r,r.m);else{const i=Ht.location;r=function XW(n,t,e,r){var i=new Bg(null,void 0);return n&&NS(i,n),t&&FS(i,t),e&&LS(i,e),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,e)}return n.aa&&IR(n.aa,function(i,o){or(r,o,i)}),e=n.sa,(t=n.D)&&e&&or(r,t,e),or(r,"VER",n.ma),dC(n,r),r}function lB(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new si(e&&n.Ba&&!n.qa?new aC({ib:!0}):n.qa)).L=n.H,t}function cB(){}function GS(){if(jv&&!(10<=Number(MW)))throw Error("Environmental error: no available transport.")}function Ra(n,t){Vi.call(this),this.g=new JV(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!ES(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ES(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new Gv(this)}function uB(n){$R.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function dB(){zR.call(this),this.status=1}function Gv(n){this.g=n}(lt=si.prototype).ea=function(n,t,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():YR.g(),this.C=function SV(n){return n.h||(n.h=n.i())}(this.u?this.u:YR),this.g.onreadystatechange=ls(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(o){return void zV(this,o)}n=e||"";const i=new qv(this.headers);r&&JR(r,function(o,c){i.set(c,o)}),r=function IW(n){e:{var t=m7;const e=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<e;i++)if(i in r&&t.call(void 0,r[i],i,n)){t=i;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(i.T()),e=Ht.FormData&&n instanceof Ht.FormData,!(0<=JU(p7,t))||r||e||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,c){this.g.setRequestHeader(c,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{KV(this),0<this.B&&((this.K=function g7(n){return jv&&function xW(){return function DW(n){var t=AW;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=tV(String(IS)).split("."),e=tV("9").split("."),r=Math.max(t.length,e.length);for(let c=0;0==n&&c<r;c++){var i=t[c]||"",o=e[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=ER(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||ER(0==i[2].length,0==o[2].length)||ER(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ls(this.pa,this)):this.A=ZR(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){zV(this,o)}},lt.pa=function(){void 0!==yR&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,us(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,us(this,"complete"),us(this,"abort"),jS(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jS(this,!0)),si.Z.M.call(this)},lt.Fa=function(){this.s||(this.F||this.v||this.l?WV(this):this.cb())},lt.cb=function(){WV(this)},lt.ba=function(){try{return 2<jd(this)?this.g.status:-1}catch(n){return-1}},lt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},lt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),h7(t)}},lt.Da=function(){return this.m},lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=JV.prototype).ma=8,lt.G=1,lt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},lt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new tC(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=iV(o),oV(o,this.P)):o=this.P),null===this.o&&(i.H=o),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var r=this.l[e];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=tB(this,i,t),or(e=Bd(this.F),"RID",n),or(e,"CVER",22),this.D&&or(e,"X-HTTP-Session-Id",this.D),dC(this,e),this.o&&o&&iP(e,this.o,o),tP(this.i,i),this.Ra&&or(e,"TYPE","init"),this.ja?(or(e,"$req",t),or(e,"SID","null"),i.$=!0,KR(i,e,null)):KR(i,e,t),this.G=2}}else 3==this.G&&(n?eB(this,n):0==this.l.length||jV(this.i)||eB(this))},lt.Ga=function(){if(this.u=null,rB(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Xw(ls(this.bb,this),n)}},lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,uo(10),HS(this),rB(this))},lt.ab=function(){null!=this.v&&(this.v=null,HS(this),aP(this),uo(19))},lt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),uo(2)):(this.h.info("Failed to ping google.com"),uo(1))},(lt=cB.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Oa=function(){},GS.prototype.g=function(n,t){return new Ra(n,t)},cs(Ra,Vi),Ra.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),BR(ls(n.hb,n,t))),uo(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=aB(n,null,n.W),qS(n)},Ra.prototype.close=function(){sP(this.g)},Ra.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,oP(this.g,t)}else this.v?((t={}).__data__=VR(n),oP(this.g,t)):oP(this.g,n)},Ra.prototype.M=function(){this.g.j=null,delete this.j,sP(this.g),delete this.g,Ra.Z.M.call(this)},cs(uB,$R),cs(dB,zR),cs(Gv,cB),Gv.prototype.xa=function(){us(this.g,"a")},Gv.prototype.wa=function(n){us(this.g,new uB(n))},Gv.prototype.va=function(n){us(this.g,new dB(n))},Gv.prototype.ua=function(){us(this.g,"b")},GS.prototype.createWebChannel=GS.prototype.g,Ra.prototype.send=Ra.prototype.u,Ra.prototype.open=Ra.prototype.m,Ra.prototype.close=Ra.prototype.close,kS.NO_ERROR=0,kS.TIMEOUT=8,kS.HTTP_ERROR=6,TV.COMPLETE="complete",AV.EventType=eC,eC.OPEN="a",eC.CLOSE="b",eC.ERROR="c",eC.MESSAGE="d",Vi.prototype.listen=Vi.prototype.N,si.prototype.listenOnce=si.prototype.O,si.prototype.getLastError=si.prototype.La,si.prototype.getLastErrorCode=si.prototype.Da,si.prototype.getStatus=si.prototype.ba,si.prototype.getResponseJson=si.prototype.Qa,si.prototype.getResponseText=si.prototype.ga,si.prototype.send=si.prototype.ea;var y7=Vd.createWebChannelTransport=function(){return new GS},b7=Vd.getStatEventTarget=function(){return MS()},cP=Vd.ErrorCode=kS,w7=Vd.EventType=TV,C7=Vd.Event=Lg,hB=Vd.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},E7=Vd.FetchXmlHttpFactory=aC,$S=Vd.WebChannel=AV,I7=Vd.XhrIo=si;const fB="@firebase/firestore";class ds{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ds.UNAUTHENTICATED=new ds(null),ds.GOOGLE_CREDENTIALS=new ds("google-credentials-uid"),ds.FIRST_PARTY=new ds("first-party-uid"),ds.MOCK_USER=new ds("mock-user");let $v="9.8.0";const Rf=new wa.Yd("@firebase/firestore");function uP(){return Rf.logLevel}function Ve(n,...t){if(Rf.logLevel<=wa.in.DEBUG){const e=t.map(dP);Rf.debug(`Firestore (${$v}): ${n}`,...e)}}function oi(n,...t){if(Rf.logLevel<=wa.in.ERROR){const e=t.map(dP);Rf.error(`Firestore (${$v}): ${n}`,...e)}}function hC(n,...t){if(Rf.logLevel<=wa.in.WARN){const e=t.map(dP);Rf.warn(`Firestore (${$v}): ${n}`,...e)}}function dP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function dt(n="Unexpected state"){const t=`FIRESTORE (${$v}) INTERNAL ASSERTION FAILED: `+n;throw oi(t),new Error(t)}function Lt(n,t){n||dt()}function it(n,t){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends F.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bi{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class pB{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class S7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ds.UNAUTHENTICATED))}shutdown(){}}class A7{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class x7{constructor(t){this.t=t,this.currentUser=ds.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var r=this;let i=this.i;const o=v=>this.i!==i?(i=this.i,e(v)):Promise.resolve();let c=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Bi,t.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const v=c;t.enqueueRetryable((0,ve.Z)(function*(){yield v.promise,yield o(r.currentUser)}))},g=v=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Bi)}},0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt("string"==typeof r.accessToken),new pB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Lt(null===t||"string"==typeof t),new ds(t)}}class M7{constructor(t,e,r){this.type="FirstParty",this.user=ds.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class k7{constructor(t,e,r){this.h=t,this.l=e,this.m=r}getToken(){return Promise.resolve(new M7(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(ds.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gB{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R7{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const r=o=>{null!=o.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.p;return this.p=o.token,Ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?i(o):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Lt("string"==typeof e.token),this.p=e.token,new gB(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Pa{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.I(r),this.T=r=>e.writeSequenceNumber(r))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function P7(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}Pa.A=-1;class mB{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=P7(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<e&&(r+=t.charAt(i[o]%t.length))}return r}}function zt(n,t){return n<t?-1:n>t?1:0}function zv(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function _B(n){return n+"\0"}class qr{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return qr.fromMillis(Date.now())}static fromDate(t){return qr.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new qr(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?zt(this.nanoseconds,t.nanoseconds):zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class kt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new kt(t)}static min(){return new kt(new qr(0,0))}static max(){return new kt(new qr(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function vB(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Hg(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function yB(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class fC{constructor(t,e,r){void 0===e?e=0:e>t.length&&dt(),void 0===r?r=t.length-e:r>t.length-e&&dt(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return 0===fC.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof fC?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const o=t.get(i),c=e.get(i);if(o<c)return-1;if(o>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class mn extends fC{construct(t,e,r){return new mn(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Oe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new mn(e)}static emptyPath(){return new mn([])}}const O7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wi extends fC{construct(t,e,r){return new wi(t,e,r)}static isValidIdentifier(t){return O7.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wi(["__name__"])}static fromServerFormat(t){const e=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Oe(ge.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;i<t.length;){const h=t[i];if("\\"===h){if(i+1===t.length)throw new Oe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Oe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(o(),i++)}if(o(),c)throw new Oe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new wi(e)}static emptyPath(){return new wi([])}}class Yv{constructor(t){this.fields=t,t.sort(wi.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return zv(this.fields,t.fields,(e,r)=>e.isEqual(r))}}class Ci{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Ci(e)}static fromUint8Array(t){const e=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(t);return new Ci(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ci.EMPTY_BYTE_STRING=new Ci("");const F7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pf(n){if(Lt(!!n),"string"==typeof n){let t=0;const e=F7.exec(n);if(Lt(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Dr(n.seconds),nanos:Dr(n.nanos)}}function Dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function qg(n){return"string"==typeof n?Ci.fromBase64String(n):Ci.fromUint8Array(n)}function hP(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function bB(n){const t=n.mapValue.fields.__previous_value__;return hP(t)?bB(t):t}function pC(n){const t=Pf(n.mapValue.fields.__local_write_time__.timestampValue);return new qr(t.seconds,t.nanos)}class L7{constructor(t,e,r,i,o,c,h,g){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=g}}class Hd{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Hd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Hd&&t.projectId===this.projectId&&t.database===this.database}}function gC(n){return null==n}function mC(n){return 0===n&&1/n==-1/0}function wB(n){return"number"==typeof n&&Number.isInteger(n)&&!mC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Xe{constructor(t){this.path=t}static fromPath(t){return new Xe(mn.fromString(t))}static fromName(t){return new Xe(mn.fromString(t).popFirst(5))}static empty(){return new Xe(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===mn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return mn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Xe(new mn(t.slice()))}}const Of={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zS={nullValue:"NULL_VALUE"};function Zg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hP(n)?4:DB(n)?9007199254740991:10:dt()}function Du(n,t){if(n===t)return!0;const e=Zg(n);if(e!==Zg(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return pC(n).isEqual(pC(t));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Pf(r.timestampValue),c=Pf(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return i=t,qg(n.bytesValue).isEqual(qg(i.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return Dr(r.geoPointValue.latitude)===Dr(i.geoPointValue.latitude)&&Dr(r.geoPointValue.longitude)===Dr(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Dr(r.integerValue)===Dr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Dr(r.doubleValue),c=Dr(i.doubleValue);return o===c?mC(o)===mC(c):isNaN(o)&&isNaN(c)}return!1}(n,t);case 9:return zv(n.arrayValue.values||[],t.arrayValue.values||[],Du);case 10:return function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(vB(o)!==vB(c))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===c[h]||!Du(o[h],c[h])))return!1;return!0}(n,t);default:return dt()}var i}function _C(n,t){return void 0!==(n.values||[]).find(e=>Du(e,t))}function Nf(n,t){if(n===t)return 0;const e=Zg(n),r=Zg(t);if(e!==r)return zt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,t.booleanValue);case 2:return function(i,o){const c=Dr(i.integerValue||i.doubleValue),h=Dr(o.integerValue||o.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,t);case 3:return CB(n.timestampValue,t.timestampValue);case 4:return CB(pC(n),pC(t));case 5:return zt(n.stringValue,t.stringValue);case 6:return function(i,o){const c=qg(i),h=qg(o);return c.compareTo(h)}(n.bytesValue,t.bytesValue);case 7:return function(i,o){const c=i.split("/"),h=o.split("/");for(let g=0;g<c.length&&g<h.length;g++){const v=zt(c[g],h[g]);if(0!==v)return v}return zt(c.length,h.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,o){const c=zt(Dr(i.latitude),Dr(o.latitude));return 0!==c?c:zt(Dr(i.longitude),Dr(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(i,o){const c=i.values||[],h=o.values||[];for(let g=0;g<c.length&&g<h.length;++g){const v=Nf(c[g],h[g]);if(v)return v}return zt(c.length,h.length)}(n.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===Of.mapValue&&o===Of.mapValue)return 0;if(i===Of.mapValue)return 1;if(o===Of.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),g=o.fields||{},v=Object.keys(g);h.sort(),v.sort();for(let E=0;E<h.length&&E<v.length;++E){const D=zt(h[E],v[E]);if(0!==D)return D;const k=Nf(c[h[E]],g[v[E]]);if(0!==k)return k}return zt(h.length,v.length)}(n.mapValue,t.mapValue);default:throw dt()}}function CB(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return zt(n,t);const e=Pf(n),r=Pf(t),i=zt(e.seconds,r.seconds);return 0!==i?i:zt(e.nanos,r.nanos)}function Wv(n){return fP(n)}function fP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Pf(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?qg(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const c of r.values||[])o?o=!1:i+=",",i+=fP(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",c=!0;for(const h of i)c?c=!1:o+=",",o+=`${h}:${fP(r.fields[h])}`;return o+"}"}(n.mapValue):dt();var t}function Gg(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function pP(n){return!!n&&"integerValue"in n}function vC(n){return!!n&&"arrayValue"in n}function EB(n){return!!n&&"nullValue"in n}function IB(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function YS(n){return!!n&&"mapValue"in n}function yC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Hg(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=yC(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=yC(n.arrayValue.values[e]);return t}return Object.assign({},n)}function DB(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function U7(n){return"nullValue"in n?zS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Gg(Hd.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function V7(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Gg(Hd.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Of:dt()}function TB(n,t){const e=Nf(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function SB(n,t){const e=Nf(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Os{constructor(t){this.value=t}static empty(){return new Os({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!YS(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=yC(e)}setAll(t){let e=wi.emptyPath(),r={},i=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const g=this.getFieldsMap(e);this.applyChanges(g,r,i),r={},i=[],e=h.popLast()}c?r[h.lastSegment()]=yC(c):i.push(h.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,r,i)}delete(t){const e=this.field(t.popLast());YS(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Du(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];YS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){Hg(e,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new Os(yC(this.value))}}function AB(n){const t=[];return Hg(n.fields,(e,r)=>{const i=new wi([e]);if(YS(r)){const o=AB(r.mapValue).fields;if(0===o.length)t.push(i);else for(const c of o)t.push(i.child(c))}else t.push(i)}),new Yv(t)}class tr{constructor(t,e,r,i,o,c){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.data=o,this.documentState=c}static newInvalidDocument(t){return new tr(t,0,kt.min(),kt.min(),Os.empty(),0)}static newFoundDocument(t,e,r){return new tr(t,1,e,kt.min(),r,0)}static newNoDocument(t,e){return new tr(t,2,e,kt.min(),Os.empty(),0)}static newUnknownDocument(t,e){return new tr(t,3,e,kt.min(),Os.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Os.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Os.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof tr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class WS{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function gP(n){return n.fields.find(t=>2===t.kind)}function $g(n){return n.fields.filter(t=>2!==t.kind)}WS.UNKNOWN_ID=-1;class KS{constructor(t,e){this.fieldPath=t,this.kind=e}}class bC{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new bC(0,wc.min())}}function xB(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=kt.fromTimestamp(1e9===r?new qr(e+1,0):new qr(e,r));return new wc(i,Xe.empty(),t)}function B7(n){return new wc(n.readTime,n.key,-1)}class wc{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new wc(kt.min(),Xe.empty(),-1)}static max(){return new wc(kt.max(),Xe.empty(),-1)}}function MB(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=Xe.comparator(n.documentKey,t.documentKey),0!==e?e:zt(n.largestBatchId,t.largestBatchId))}class Zr{constructor(t,e){this.comparator=t,this.root=e||hs.EMPTY}insert(t,e){return new Zr(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,hs.BLACK,null,null))}remove(t){return new Zr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hs.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(0===i)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new QS(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new QS(this.root,t,this.comparator,!1)}getReverseIterator(){return new QS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new QS(this.root,t,this.comparator,!0)}}class QS{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?r(t.key,e):1,e&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class hs{constructor(t,e,r,i,o){this.key=t,this.value=e,this.color=null!=r?r:hs.RED,this.left=null!=i?i:hs.EMPTY,this.right=null!=o?o:hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,o){return new hs(null!=t?t:this.key,null!=e?e:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,e,r),null):0===o?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hs.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return hs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const t=this.left.check();if(t!==this.right.check())throw dt();return t+(this.isRed()?0:1)}}hs.EMPTY=null,hs.RED=!0,hs.BLACK=!1,hs.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,t,e,r,i){return this}insert(n,t,e){return new hs(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wn{constructor(t){this.comparator=t,this.data=new Zr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new kB(this.data.getIterator())}getIteratorFrom(t){return new kB(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Wn)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Wn(this.comparator);return e.data=t,e}}class kB{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kv(n){return n.hasNext()?n.getNext():void 0}class j7{constructor(t,e=null,r=[],i=[],o=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=h,this.P=null}}function RB(n,t=null,e=[],r=[],i=null,o=null,c=null){return new j7(n,t,e,r,i,o,c)}function zg(n){const t=it(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Wv(i.value);var i}).join(","),e+="|ob:",e+=t.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),gC(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>Wv(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>Wv(r)).join(",")),t.P=e}return t.P}function wC(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!K7(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((e=n.filters[i]).op!==(r=t.filters[i]).op||!e.field.isEqual(r.field)||!Du(e.value,r.value))return!1;var e,r;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!LB(n.startAt,t.startAt)&&LB(n.endAt,t.endAt)}function JS(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function XS(n,t){return n.filters.filter(e=>e instanceof fs&&e.field.isEqual(t))}function PB(n,t,e){let r=zS,i=!0;for(const o of XS(n,t)){let c=zS,h=!0;switch(o.op){case"<":case"<=":c=U7(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,h=!1;break;case"!=":case"not-in":c=zS}TB({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];TB({value:r,inclusive:i},{value:c,inclusive:e.inclusive})<0&&(r=c,i=e.inclusive);break}return{value:r,inclusive:i}}function OB(n,t,e){let r=Of,i=!0;for(const o of XS(n,t)){let c=Of,h=!0;switch(o.op){case">=":case">":c=V7(o.value),h=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,h=!1;break;case"!=":case"not-in":c=Of}SB({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==e)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){const c=e.position[o];SB({value:r,inclusive:i},{value:c,inclusive:e.inclusive})>0&&(r=c,i=e.inclusive);break}return{value:r,inclusive:i}}class fs extends class{}{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,r):new q7(t,e,r):"array-contains"===e?new $7(t,r):"in"===e?new z7(t,r):"not-in"===e?new Y7(t,r):"array-contains-any"===e?new W7(t,r):new fs(t,e,r)}static V(t,e,r){return"in"===e?new Z7(t,r):new G7(t,r)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(Nf(e,this.value)):null!==e&&Zg(this.value)===Zg(e)&&this.v(Nf(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return dt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class q7 extends fs{constructor(t,e,r){super(t,e,r),this.key=Xe.fromName(r.referenceValue)}matches(t){const e=Xe.comparator(t.key,this.key);return this.v(e)}}class Z7 extends fs{constructor(t,e){super(t,"in",e),this.keys=NB(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class G7 extends fs{constructor(t,e){super(t,"not-in",e),this.keys=NB(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function NB(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class $7 extends fs{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return vC(e)&&_C(e.arrayValue,this.value)}}class z7 extends fs{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&_C(this.value.arrayValue,e)}}class Y7 extends fs{constructor(t,e){super(t,"not-in",e)}matches(t){if(_C(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!_C(this.value.arrayValue,e)}}class W7 extends fs{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!vC(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>_C(this.value.arrayValue,r))}}class Ff{constructor(t,e){this.position=t,this.inclusive=e}}class Qv{constructor(t,e="asc"){this.field=t,this.dir=e}}function K7(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function FB(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const o=t[i],c=n.position[i];if(r=o.field.isKeyField()?Xe.comparator(Xe.fromName(c.referenceValue),e.key):Nf(c,e.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function LB(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Du(n.position[e],t.position[e]))return!1;return!0}class qd{constructor(t,e=null,r=[],i=[],o=null,c="F",h=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=g,this.D=null,this.C=null}}function UB(n,t,e,r,i,o,c,h){return new qd(n,t,e,r,i,o,c,h)}function Jv(n){return new qd(n)}function mP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function _P(n){for(const t of n.filters)if(t.S())return t.field;return null}function vP(n){return null!==n.collectionGroup}function Xv(n){const t=it(n);if(null===t.D){t.D=[];const e=_P(t),r=mP(t);if(null!==e&&null===r)e.isKeyField()||t.D.push(new Qv(e)),t.D.push(new Qv(wi.keyField(),"asc"));else{let i=!1;for(const o of t.explicitOrderBy)t.D.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Qv(wi.keyField(),o))}}}return t.D}function bl(n){const t=it(n);if(!t.C)if("F"===t.limitType)t.C=RB(t.path,t.collectionGroup,Xv(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const o of Xv(t))e.push(new Qv(o.field,"desc"===o.dir?"asc":"desc"));const r=t.endAt?new Ff(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ff(t.startAt.position,t.startAt.inclusive):null;t.C=RB(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}return t.C}function VB(n,t,e){return new qd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function CC(n,t){return wC(bl(n),bl(t))&&n.limitType===t.limitType}function BB(n){return`${zg(bl(n))}|lt:${n.limitType}`}function yP(n){return`Query(target=${function H7(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(r=e).field.canonicalString()} ${r.op} ${Wv(r.value)}`;var r}).join(", ")}]`),gC(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(r=e).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>Wv(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>Wv(e)).join(",")),`Target(${t})`}(bl(n))}; limitType=${n.limitType})`}function bP(n,t){return t.isFoundDocument()&&function(e,r){const i=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):Xe.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i)}(n,t)&&function(e,r){for(const i of e.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,t)&&function(e,r){for(const i of e.filters)if(!i.matches(r))return!1;return!0}(n,t)&&(r=t,!((e=n).startAt&&!function(i,o,c){const h=FB(i,o,c);return i.inclusive?h<=0:h<0}(e.startAt,Xv(e),r)||e.endAt&&!function(i,o,c){const h=FB(i,o,c);return i.inclusive?h>=0:h>0}(e.endAt,Xv(e),r)));var e,r}function jB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HB(n){return(t,e)=>{let r=!1;for(const i of Xv(n)){const o=J7(i,t,e);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function J7(n,t,e){const r=n.field.isKeyField()?Xe.comparator(t.key,e.key):function(i,o,c){const h=o.data.field(i),g=c.data.field(i);return null!==h&&null!==g?Nf(h,g):dt()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function qB(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mC(t)?"-0":t}}function ZB(n){return{integerValue:""+n}}function GB(n,t){return wB(t)?ZB(t):qB(n,t)}class eA{constructor(){this._=void 0}}function X7(n,t,e){return n instanceof ey?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(e,t):n instanceof Yg?zB(n,t):n instanceof Wg?YB(n,t):function(r,i){const o=$B(r,i),c=WB(o)+WB(r.k);return pP(o)&&pP(r.k)?ZB(c):qB(r.M,c)}(n,t)}function eK(n,t,e){return n instanceof Yg?zB(n,t):n instanceof Wg?YB(n,t):e}function $B(n,t){return n instanceof ty?pP(e=t)||(r=e)&&"doubleValue"in r?t:{integerValue:0}:null;var r,e}class ey extends eA{}class Yg extends eA{constructor(t){super(),this.elements=t}}function zB(n,t){const e=KB(t);for(const r of n.elements)e.some(i=>Du(i,r))||e.push(r);return{arrayValue:{values:e}}}class Wg extends eA{constructor(t){super(),this.elements=t}}function YB(n,t){let e=KB(t);for(const r of n.elements)e=e.filter(i=>!Du(i,r));return{arrayValue:{values:e}}}class ty extends eA{constructor(t,e){super(),this.M=t,this.k=e}}function WB(n){return Dr(n.integerValue||n.doubleValue)}function KB(n){return vC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class EC{constructor(t,e){this.field=t,this.transform=e}}class nK{constructor(t,e){this.version=t,this.transformResults=e}}class ai{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ai}static exists(t){return new ai(void 0,t)}static updateTime(t){return new ai(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function tA(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class nA{}function rK(n,t,e){n instanceof IC?function(r,i,o){const c=r.value.clone(),h=e3(r.fieldTransforms,i,o.transformResults);c.setAll(h),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,t,e):n instanceof Kg?function(r,i,o){if(!tA(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=e3(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(XB(r)),h.setAll(c),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function wP(n,t,e){var i;n instanceof IC?function(r,i,o){if(!tA(r.precondition,i))return;const c=r.value.clone(),h=t3(r.fieldTransforms,o,i);c.setAll(h),i.convertToFoundDocument(JB(i),c).setHasLocalMutations()}(n,t,e):n instanceof Kg?function(r,i,o){if(!tA(r.precondition,i))return;const c=t3(r.fieldTransforms,o,i),h=i.data;h.setAll(XB(r)),h.setAll(c),i.convertToFoundDocument(JB(i),h).setHasLocalMutations()}(n,t,e):tA(n.precondition,i=t)&&i.convertToNoDocument(kt.min())}function iK(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),o=$B(r.transform,i||null);null!=o&&(null==e&&(e=Os.empty()),e.set(r.field,o))}return e||null}function QB(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===r||e&&r&&zv(e,r,(i,o)=>function tK(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(e=n.transform)instanceof Yg&&r instanceof Yg||e instanceof Wg&&r instanceof Wg?zv(e.elements,r.elements,Du):e instanceof ty&&r instanceof ty?Du(e.k,r.k):e instanceof ey&&r instanceof ey);var e,r}(i,o))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,r}function JB(n){return n.isFoundDocument()?n.version:kt.min()}class IC extends nA{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Kg extends nA{constructor(t,e,r,i,o=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}}function XB(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function e3(n,t,e){const r=new Map;Lt(n.length===e.length);for(let i=0;i<e.length;i++){const o=n[i],c=o.transform,h=t.data.field(o.field);r.set(o.field,eK(c,h,e[i]))}return r}function t3(n,t,e){const r=new Map;for(const i of n){const o=i.transform,c=e.data.field(i.field);r.set(i.field,X7(o,c,t))}return r}class DC extends nA{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class CP extends nA{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class sK{constructor(t){this.count=t}}var li,_n;function n3(n){switch(n){default:return dt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function r3(n){if(void 0===n)return oi("GRPC error has no .code"),ge.UNKNOWN;switch(n){case li.OK:return ge.OK;case li.CANCELLED:return ge.CANCELLED;case li.UNKNOWN:return ge.UNKNOWN;case li.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case li.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case li.INTERNAL:return ge.INTERNAL;case li.UNAVAILABLE:return ge.UNAVAILABLE;case li.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case li.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case li.NOT_FOUND:return ge.NOT_FOUND;case li.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case li.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case li.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case li.ABORTED:return ge.ABORTED;case li.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case li.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case li.DATA_LOSS:return ge.DATA_LOSS;default:return dt()}}(_n=li||(li={}))[_n.OK=0]="OK",_n[_n.CANCELLED=1]="CANCELLED",_n[_n.UNKNOWN=2]="UNKNOWN",_n[_n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_n[_n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_n[_n.NOT_FOUND=5]="NOT_FOUND",_n[_n.ALREADY_EXISTS=6]="ALREADY_EXISTS",_n[_n.PERMISSION_DENIED=7]="PERMISSION_DENIED",_n[_n.UNAUTHENTICATED=16]="UNAUTHENTICATED",_n[_n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_n[_n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_n[_n.ABORTED=10]="ABORTED",_n[_n.OUT_OF_RANGE=11]="OUT_OF_RANGE",_n[_n.UNIMPLEMENTED=12]="UNIMPLEMENTED",_n[_n.INTERNAL=13]="INTERNAL",_n[_n.UNAVAILABLE=14]="UNAVAILABLE",_n[_n.DATA_LOSS=15]="DATA_LOSS";class Lf{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,t))return o}has(t){return void 0!==this.get(t)}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(void 0===i)return this.inner[r]=[[t,e]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return 1===r.length?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Hg(this.inner,(e,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return yB(this.inner)}size(){return this.innerSize}}const oK=new Zr(Xe.comparator);function wl(){return oK}const aK=new Zr(Xe.comparator);function EP(...n){let t=aK;for(const e of n)t=t.insert(e.key,e);return t}function TC(){return new Lf(n=>n.toString(),(n,t)=>n.isEqual(t))}const lK=new Zr(Xe.comparator),cK=new Wn(Xe.comparator);function Rn(...n){let t=cK;for(const e of n)t=t.add(e);return t}const uK=new Wn(zt);function rA(){return uK}class SC{constructor(t,e,r,i,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e){const r=new Map;return r.set(t,AC.createSynthesizedTargetChangeForCurrentChange(t,e)),new SC(kt.min(),r,rA(),wl(),Rn())}}class AC{constructor(t,e,r,i,o){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e){return new AC(Ci.EMPTY_BYTE_STRING,e,Rn(),Rn(),Rn())}}class iA{constructor(t,e,r,i){this.O=t,this.removedTargetIds=e,this.key=r,this.F=i}}class s3{constructor(t,e){this.targetId=t,this.$=e}}class o3{constructor(t,e,r=Ci.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class a3{constructor(){this.B=0,this.L=c3(),this.U=Ci.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=Rn(),e=Rn(),r=Rn();return this.L.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new AC(this.U,this.q,t,e,r)}J(){this.K=!1,this.L=c3()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class dK{constructor(t){this.nt=t,this.st=new Map,this.it=wl(),this.rt=l3(),this.ot=new Wn(zt)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const r=this.lt(e);switch(t.state){case 0:this.ft(e)&&r.W(t.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(t.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(e);break;case 3:this.ft(e)&&(r.et(),r.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),r.W(t.resumeToken));break;default:dt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((r,i)=>{this.ft(i)&&e(i)})}_t(t){const e=t.targetId,r=t.$.count,i=this.wt(e);if(i){const o=i.target;if(JS(o))if(0===r){const c=new Xe(o.path);this.ct(e,c,tr.newNoDocument(c,kt.min()))}else Lt(1===r);else this.gt(e)!==r&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((o,c)=>{const h=this.wt(c);if(h){if(o.current&&JS(h.target)){const g=new Xe(h.target.path);null!==this.it.get(g)||this.It(c,g)||this.ct(c,g,tr.newNoDocument(g,t))}o.j&&(e.set(c,o.H()),o.J())}});let r=Rn();this.rt.forEach((o,c)=>{let h=!0;c.forEachWhile(g=>{const v=this.wt(g);return!v||2===v.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.it.forEach((o,c)=>c.setReadTime(t));const i=new SC(t,e,this.ot,this.it,r);return this.it=wl(),this.rt=l3(),this.ot=new Wn(zt),i}at(t,e){if(!this.ft(t))return;const r=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,r),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,r){if(!this.ft(t))return;const i=this.lt(t);this.It(t,e)?i.Y(e,1):i.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),r&&(this.it=this.it.insert(e,r))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new a3,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new Wn(zt),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||Ve("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new a3),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function l3(){return new Zr(Xe.comparator)}function c3(){return new Zr(Xe.comparator)}const hK={asc:"ASCENDING",desc:"DESCENDING"},fK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class pK{constructor(t,e){this.databaseId=t,this.N=e}}function xC(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function u3(n,t){return n.N?t.toBase64():t.toUint8Array()}function gK(n,t){return xC(n,t.toTimestamp())}function ji(n){return Lt(!!n),kt.fromTimestamp(function(t){const e=Pf(t);return new qr(e.seconds,e.nanos)}(n))}function IP(n,t){return(e=n,new mn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function d3(n){const t=mn.fromString(n);return Lt(b3(t)),t}function MC(n,t){return IP(n.databaseId,t.path)}function Tu(n,t){const e=d3(t);if(e.get(1)!==n.databaseId.projectId)throw new Oe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Oe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Xe(f3(e))}function DP(n,t){return IP(n.databaseId,t)}function h3(n){const t=d3(n);return 4===t.length?mn.emptyPath():f3(t)}function kC(n){return new mn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function f3(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function p3(n,t,e){return{name:MC(n,t),fields:e.value.mapValue.fields}}function g3(n,t,e){const r=Tu(n,t.name),i=ji(t.updateTime),o=new Os({mapValue:{fields:t.fields}}),c=tr.newFoundDocument(r,i,o);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function RC(n,t){let e;if(t instanceof IC)e={update:p3(n,t.key,t.value)};else if(t instanceof DC)e={delete:MC(n,t.key)};else if(t instanceof Kg)e={update:p3(n,t.key,t.data),updateMask:IK(t.fieldMask)};else{if(!(t instanceof CP))return dt();e={verify:MC(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof ey)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Yg)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Wg)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ty)return{fieldPath:o.field.canonicalString(),increment:c.k};throw dt()}(0,r))),t.precondition.isNone||(e.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:gK(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),e;var i}function TP(n,t){const e=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?ai.updateTime(ji(i.updateTime)):void 0!==i.exists?ai.exists(i.exists):ai.none():ai.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(o,c){let h=null;"setToServerValue"in c?(Lt("REQUEST_TIME"===c.setToServerValue),h=new ey):"appendMissingElements"in c?h=new Yg(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new Wg(c.removeAllFromArray.values||[]):"increment"in c?h=new ty(o,c.increment):dt();const g=wi.fromServerFormat(c.fieldPath);return new EC(g,h)}(n,i)):[];var i;if(t.update){const i=Tu(n,t.update.name),o=new Os({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new Yv((t.updateMask.fieldPaths||[]).map(v=>wi.fromServerFormat(v)));return new Kg(i,o,c,e,r)}return new IC(i,o,e,r)}if(t.delete){const i=Tu(n,t.delete);return new DC(i,e)}if(t.verify){const i=Tu(n,t.verify);return new CP(i,e)}return dt()}function m3(n,t){return{documents:[DP(n,t.path)]}}function _3(n,t){const e={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(e.parent=DP(n,r),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=DP(n,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const v=g.map(E=>function(D){if("=="===D.op){if(IB(D.value))return{unaryFilter:{field:ny(D.field),op:"IS_NAN"}};if(EB(D.value))return{unaryFilter:{field:ny(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(IB(D.value))return{unaryFilter:{field:ny(D.field),op:"IS_NOT_NAN"}};if(EB(D.value))return{unaryFilter:{field:ny(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ny(D.field),op:wK(D.op),value:D.value}}}(E));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(t.filters);i&&(e.structuredQuery.where=i);const o=function(g){if(0!==g.length)return g.map(v=>{return{field:ny((E=v).field),direction:bK(E.dir)};var E})}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const c=(v=t.limit,n.N||gC(v)?v:{value:v});var v,h,g;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(h=t.startAt).inclusive,values:h.position}),t.endAt&&(e.structuredQuery.endAt={before:!(g=t.endAt).inclusive,values:g.position}),e}function v3(n){let t=h3(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Lt(1===r);const E=e.from[0];E.allDescendants?i=E.collectionId:t=t.child(E.collectionId)}let o=[];e.where&&(o=y3(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(E=>{return new Qv(ry((D=E).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;e.limit&&(h=function(E){let D;return D="object"==typeof E?E.value:E,gC(D)?null:D}(e.limit));let g=null;var E;e.startAt&&(g=new Ff((E=e.startAt).values||[],!!E.before));let v=null;return e.endAt&&(v=function(E){return new Ff(E.values||[],!E.before)}(e.endAt)),UB(t,i,c,o,h,"F",g,v)}function y3(n){return n?void 0!==n.unaryFilter?[EK(n)]:void 0!==n.fieldFilter?[CK(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>y3(t)).reduce((t,e)=>t.concat(e)):dt():[]}function bK(n){return hK[n]}function wK(n){return fK[n]}function ny(n){return{fieldPath:n.canonicalString()}}function ry(n){return wi.fromServerFormat(n.fieldPath)}function CK(n){return fs.create(ry(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function EK(n){switch(n.unaryFilter.op){case"IS_NAN":const t=ry(n.unaryFilter.field);return fs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=ry(n.unaryFilter.field);return fs.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ry(n.unaryFilter.field);return fs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ry(n.unaryFilter.field);return fs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function IK(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function b3(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ho(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=w3(t)),t=DK(n.get(e),t);return w3(t)}function DK(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=o}}return e}function w3(n){return n+"\x01\x01"}function Su(n){const t=n.length;if(Lt(t>=2),2===t)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mn.emptyPath();const e=t-2,r=[];let i="";for(let o=0;o<t;){const c=n.indexOf("\x01",o);switch((c<0||c>e)&&dt(),n.charAt(c+1)){case"\x01":const h=n.substring(o,c);let g;0===i.length?g=h:(i+=h,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(o,c),i+="\0";break;case"\x11":i+=n.substring(o,c+1);break;default:dt()}o=c+2}return new mn(r)}const C3=["userId","batchId"];function sA(n,t){return[n,ho(t)]}function E3(n,t,e){return[n,ho(t),e]}const TK={},SK=["prefixPath","collectionGroup","readTime","documentId"],AK=["prefixPath","collectionGroup","documentId"],xK=["collectionGroup","readTime","prefixPath","documentId"],MK=["canonicalId","targetId"],kK=["targetId","path"],RK=["path","targetId"],PK=["collectionId","parent"],OK=["indexId","uid"],NK=["uid","sequenceNumber"],FK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],LK=["indexId","uid","orderedDocumentKey"],UK=["userId","collectionPath","documentId"],VK=["userId","collectionPath","largestBatchId"],BK=["userId","collectionGroup","largestBatchId"],I3=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jK=[...I3,"documentOverlays"],D3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],HK=[...D3,"indexConfiguration","indexState","indexEntries"],T3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class S3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class ye{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ye((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(e,o).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof ye?e:ye.resolve(e)}catch(e){return ye.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):ye.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):ye.reject(e)}static resolve(t){return new ye((e,r)=>{e(t)})}static reject(t){return new ye((e,r)=>{r(t)})}static waitFor(t){return new ye((e,r)=>{let i=0,o=0,c=!1;t.forEach(h=>{++i,h.next(()=>{++o,c&&o===i&&e()},g=>r(g))}),c=!0,o===i&&e()})}static or(t){let e=ye.resolve(!1);for(const r of t)e=e.next(i=>i?ye.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,o)=>{r.push(e.call(this,i,o))}),this.waitFor(r)}}class oA{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new Bi,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new PC(t,e.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=SP(r.target.error);this.At.reject(new PC(t,i))}}static open(t,e,r,i){try{return new oA(e,t.transaction(i,r))}catch(o){throw new PC(e,o)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(Ve("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new ZK(e)}}class Cc{constructor(t,e,r){this.name=t,this.version=e,this.Pt=r,12.2===Cc.Vt((0,F.z$)())&&oi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ve("SimpleDb","Removing database:",t),Jg(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,F.hl)())return!1;if(Cc.St())return!0;const t=(0,F.z$)(),e=Cc.Vt(t),r=0<e&&e<10,i=Cc.Dt(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(t){var e=this;return(0,ve.Z)(function*(){return e.db||(Ve("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,i)=>{const o=indexedDB.open(e.name,e.version);o.onsuccess=c=>{r(c.target.result)},o.onblocked=()=>{i(new PC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Oe(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Oe(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new PC(t,h))},o.onupgradeneeded=c=>{Ve("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.Pt.kt(c.target.result,o.transaction,c.oldVersion,e.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=r=>e.Mt(r)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,r,i){var o=this;return(0,ve.Z)(function*(){const c="readonly"===e;let h=0;for(;;){++h;try{o.db=yield o.Nt(t);const g=oA.open(o.db,t,c?"readonly":"readwrite",r),v=i(g).next(E=>(g.bt(),E)).catch(E=>(g.abort(E),ye.reject(E))).toPromise();return v.catch(()=>{}),yield g.Rt,v}catch(g){const v="FirebaseError"!==g.name&&h<3;if(Ve("SimpleDb","Transaction failed with error:",g.message,"Retrying:",v),o.close(),!v)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qK{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return Jg(this.Ft.delete())}}class PC extends Oe{constructor(t,e){super(ge.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Qg(n){return"IndexedDbTransactionError"===n.name}class ZK{constructor(t){this.store=t}put(t,e){let r;return void 0!==e?(Ve("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Jg(r)}add(t){return Ve("SimpleDb","ADD",this.store.name,t,t),Jg(this.store.add(t))}get(t){return Jg(this.store.get(t)).next(e=>(void 0===e&&(e=null),Ve("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Ve("SimpleDb","DELETE",this.store.name,t),Jg(this.store.delete(t))}count(){return Ve("SimpleDb","COUNT",this.store.name),Jg(this.store.count())}qt(t,e){const r=this.options(t,e);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.Kt(i,(c,h)=>{o.push(h)}).next(()=>o)}{const i=this.store.getAll(r.range);return new ye((o,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}}Gt(t,e){const r=this.store.getAll(t,null===e?void 0:e);return new ye((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(t,e){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(o,c,h)=>h.delete())}Wt(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.Kt(i,e)}zt(t){const e=this.cursor({});return new ye((r,i)=>{e.onerror=o=>{const c=SP(o.target.error);i(c)},e.onsuccess=o=>{const c=o.target.result;c?t(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}Kt(t,e){const r=[];return new ye((i,o)=>{t.onerror=c=>{o(c.target.error)},t.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const g=new qK(h),v=e(h.primaryKey,h.value,g);if(v instanceof ye){const E=v.catch(D=>(g.done(),ye.reject(D)));r.push(E)}g.isDone?i():null===g.Lt?h.continue():h.continue(g.Lt)}}).next(()=>ye.waitFor(r))}options(t,e){let r;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.jt?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Jg(n){return new ye((t,e)=>{n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{const i=SP(r.target.error);e(i)}})}let A3=!1;function SP(n){const t=Cc.Vt((0,F.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return A3||(A3=!0,setTimeout(()=>{throw r},0)),r}}return n}class x3 extends S3{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function Hi(n,t){const e=it(n);return Cc.xt(e.Ht,t)}class AP{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&rK(o,t,r[i])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&wP(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&wP(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const r=t.get(e.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(kt.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Rn())}isEqual(t){return this.batchId===t.batchId&&zv(this.mutations,t.mutations,(e,r)=>QB(e,r))&&zv(this.baseMutations,t.baseMutations,(e,r)=>QB(e,r))}}class xP{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Lt(t.mutations.length===r.length);let i=lK;const o=t.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new xP(t,e,r,i)}}class MP{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Uf{constructor(t,e,r,i,o=kt.min(),c=kt.min(),h=Ci.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(t){return new Uf(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Uf(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Uf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class M3{constructor(t){this.Jt=t}}function k3(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:aA(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:MC(i=n.Jt,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:xC(i,o.version.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Xg(t.version)};else{if(!t.isUnknownDocument())return dt();r.unknownDocument={path:e.path.toArray(),version:Xg(t.version)}}var i,o;return r}function aA(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Xg(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function em(n){const t=new qr(n.seconds,n.nanoseconds);return kt.fromTimestamp(t)}function iy(n,t){const e=(t.baseMutations||[]).map(o=>TP(n.Jt,o));for(let o=0;o<t.mutations.length-1;++o){const c=t.mutations[o];o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform&&(c.updateTransforms=t.mutations[o+1].transform.fieldTransforms,t.mutations.splice(o+1,1),++o)}const r=t.mutations.map(o=>TP(n.Jt,o)),i=qr.fromMillis(t.localWriteTimeMs);return new AP(t.batchId,i,e,r)}function OC(n){const t=em(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?em(n.lastLimboFreeSnapshotVersion):kt.min();let r;var i;return void 0!==n.query.documents?(Lt(1===(i=n.query).documents.length),r=bl(Jv(h3(i.documents[0])))):r=bl(v3(n.query)),new Uf(r,n.targetId,0,n.lastListenSequenceNumber,t,e,Ci.fromBase64String(n.resumeToken))}function R3(n,t){const e=Xg(t.snapshotVersion),r=Xg(t.lastLimboFreeSnapshotVersion);let i;i=JS(t.target)?m3(n.Jt,t.target):_3(n.Jt,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:zg(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function kP(n){const t=v3({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?VB(t,t.limit,"L"):t}function RP(n,t){return new MP(t.largestBatchId,TP(n.Jt,t.overlayMutation))}function P3(n,t){const e=t.path.lastSegment();return[n,ho(t.path.popLast()),e]}class $K{getBundleMetadata(t,e){return O3(t).get(e).next(r=>{if(r)return{id:(i=r).bundleId,createTime:em(i.createTime),version:i.version};var i})}saveBundleMetadata(t,e){return O3(t).put({bundleId:(r=e).id,createTime:Xg(ji(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return N3(t).get(e).next(r=>{if(r)return{name:(i=r).name,query:kP(i.bundledQuery),readTime:em(i.readTime)};var i})}saveNamedQuery(t,e){return N3(t).put({name:(r=e).name,readTime:Xg(ji(r.readTime)),bundledQuery:r.bundledQuery});var r}}function O3(n){return Hi(n,"bundles")}function N3(n){return Hi(n,"namedQueries")}class PP{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new PP(t,e.uid||"")}getOverlay(t,e){return NC(t).get(P3(this.userId,e)).next(r=>r?RP(this.M,r):null)}saveOverlays(t,e,r){const i=[];return r.forEach((o,c)=>{const h=new MP(e,c);i.push(this.Xt(t,h))}),ye.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(c=>i.add(ho(c.getCollectionPath())));const o=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(NC(t).Qt("collectionPathOverlayIndex",h))}),ye.waitFor(o)}getOverlaysForCollection(t,e,r){const i=TC(),o=ho(e),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return NC(t).qt("collectionPathOverlayIndex",c).next(h=>{for(const g of h){const v=RP(this.M,g);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const o=TC();let c;const h=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return NC(t).Wt({index:"collectionGroupOverlayIndex",range:h},(g,v,E)=>{const D=RP(this.M,v);o.size()<i||D.largestBatchId===c?(o.set(D.getKey(),D),c=D.largestBatchId):E.done()}).next(()=>o)}Xt(t,e){return NC(t).put(function(r,i,o){const[c,h,g]=P3(i,o.mutation.key);return{userId:i,collectionPath:h,documentId:g,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:RC(r.Jt,o.mutation)}}(this.M,this.userId,e))}}function NC(n){return Hi(n,"documentOverlays")}class tm{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(Dr(t.integerValue));else if("doubleValue"in t){const r=Dr(t.doubleValue);isNaN(r)?this.ne(e,13):(this.ne(e,15),mC(r)?e.se(0):e.se(r))}else if("timestampValue"in t){const r=t.timestampValue;this.ne(e,20),"string"==typeof r?e.ie(r):(e.ie(`${r.seconds||""}`),e.se(r.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(qg(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ne(e,45),e.se(r.latitude||0),e.se(r.longitude||0)}else"mapValue"in t?DB(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):dt()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const r=t.fields||{};this.ne(e,55);for(const i of Object.keys(r))this.re(i,e),this.te(r[i],e)}he(t,e){const r=t.values||[];this.ne(e,50);for(const i of r)this.te(i,e)}ae(t,e){this.ne(e,37),Xe.fromName(t).path.forEach(r=>{this.ne(e,60),this.le(r,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function zK(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function F3(n){const t=64-function(e){let r=0;for(let i=0;i<8;++i){const o=zK(255&e[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(t/8)}tm.fe=new tm;class YK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this._e(r.value),r=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.ge(r.value),r=e.next();this.ye()}pe(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(e<"\ud800"||"\udbff"<e)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=e.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=e.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(t){const e=this.Ee(t),r=F3(e);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}Re(t){const e=this.Ee(t),r=F3(e);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(t),r=0!=(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}_e(t){const e=255&t;0===e?(this.Pe(0),this.Pe(255)):255===e?(this.Pe(255),this.Pe(0)):this.Pe(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class WK{constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.be()}}class KK{constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class FC{constructor(){this.De=new YK,this.Ce=new WK(this.De),this.xe=new KK(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class nm{constructor(t,e,r,i){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=i}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new nm(this.indexId,this.documentKey,this.arrayValue,r)}}function rm(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=L3(n.arrayValue,t.arrayValue),0!==e?e:(e=L3(n.directionalValue,t.directionalValue),0!==e?e:Xe.comparator(n.documentKey,t.documentKey)))}function L3(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(0!==r)return r}return n.length-t.length}class QK{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const r=e;r.S()?this.Fe=r:this.Oe.push(r)}}$e(t){const e=gP(t);if(void 0!==e&&!this.Be(e))return!1;const r=$g(t);let i=0,o=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[o++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(o>=this.Me.length||!this.Ue(this.Me[o++],c))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class JK{constructor(){this.qe=new OP}addToCollectionParentIndex(t,e){return this.qe.add(e),ye.resolve()}getCollectionParents(t,e){return ye.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return ye.resolve()}deleteFieldIndex(t,e){return ye.resolve()}getDocumentsMatchingTarget(t,e){return ye.resolve(null)}getIndexType(t,e){return ye.resolve(0)}getFieldIndexes(t,e){return ye.resolve([])}getNextCollectionGroupToUpdate(t){return ye.resolve(null)}getMinOffset(t,e){return ye.resolve(wc.min())}updateCollectionGroup(t,e,r){return ye.resolve()}updateIndexEntries(t,e){return ye.resolve()}}class OP{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new Wn(mn.comparator),o=!i.has(r);return this.index[e]=i.add(r),o}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Wn(mn.comparator)).toArray()}}const lA=new Uint8Array(0);class XK{constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new OP,this.Ge=new Lf(r=>zg(r),(r,i)=>wC(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const o={collectionId:r,parent:ho(i)};return U3(t).put(o)}return ye.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[_B(e),""],!1,!0);return U3(t).qt(i).next(o=>{for(const c of o){if(c.collectionId!==e)break;r.push(Su(c.parent))}return r})}addFieldIndex(t,e){const r=cA(t),i={indexId:(o=e).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var o;return delete i.indexId,r.add(i).next()}deleteFieldIndex(t,e){const r=cA(t),i=uA(t),o=LC(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const r=LC(t);let i=!0;const o=new Map;return ye.forEach(this.Qe(e),c=>this.je(t,c).next(h=>{i&&(i=!!h),o.set(c,h)})).next(()=>{if(i){let c=Rn();const h=[];return ye.forEach(o,(g,v)=>{var E;Ve("IndexedDbIndexManager",`Using index ${E=g,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(et=>`${et.fieldPath}:${et.kind}`).join(",")}`} to execute ${zg(e)}`);const D=function(et,$e){const xt=gP($e);if(void 0===xt)return null;for(const Rt of XS(et,xt.fieldPath))switch(Rt.op){case"array-contains-any":return Rt.value.arrayValue.values||[];case"array-contains":return[Rt.value]}return null}(v,g),k=function(et,$e){const xt=new Map;for(const Rt of $g($e))for(const cn of XS(et,Rt.fieldPath))switch(cn.op){case"==":case"in":xt.set(Rt.fieldPath.canonicalString(),cn.value);break;case"not-in":case"!=":return xt.set(Rt.fieldPath.canonicalString(),cn.value),Array.from(xt.values())}return null}(v,g),N=function(et,$e){const xt=[];let Rt=!0;for(const cn of $g($e)){const Gr=0===cn.kind?PB(et,cn.fieldPath,et.startAt):OB(et,cn.fieldPath,et.startAt);xt.push(Gr.value),Rt&&(Rt=Gr.inclusive)}return new Ff(xt,Rt)}(v,g),U=function(et,$e){const xt=[];let Rt=!0;for(const cn of $g($e)){const Gr=0===cn.kind?OB(et,cn.fieldPath,et.endAt):PB(et,cn.fieldPath,et.endAt);xt.push(Gr.value),Rt&&(Rt=Gr.inclusive)}return new Ff(xt,Rt)}(v,g),X=this.We(g,v,N),pe=this.We(g,v,U),Be=this.ze(g,v,k),We=this.He(g.indexId,D,X,N.inclusive,pe,U.inclusive,Be);return ye.forEach(We,et=>r.Gt(et,e.limit).next($e=>{$e.forEach(xt=>{const Rt=Xe.fromSegments(xt.documentKey);c.has(Rt)||(c=c.add(Rt),h.push(Rt))})}))}).next(()=>h)}return ye.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}He(t,e,r,i,o,c,h){const g=(null!=e?e.length:1)*Math.max(r.length,o.length),v=g/(null!=e?e.length:1),E=[];for(let D=0;D<g;++D){const k=e?this.Je(e[D/v]):lA,N=this.Ye(t,k,r[D%v],i),U=this.Xe(t,k,o[D%v],c),X=h.map(pe=>this.Ye(t,k,pe,!0));E.push(...this.createRange(N,U,X))}return E}Ye(t,e,r,i){const o=new nm(t,Xe.empty(),e,r);return i?o:o.ke()}Xe(t,e,r,i){const o=new nm(t,Xe.empty(),e,r);return i?o.ke():o}je(t,e){const r=new QK(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(o=>{let c=null;for(const h of o)r.$e(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(t,e){let r=2;return ye.forEach(this.Qe(e),i=>this.je(t,i).next(o=>{o?0!==r&&o.fields.length<function(c){let h=new Wn(wi.comparator),g=!1;for(const v of c.filters){const E=v;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?g=!0:h=h.add(E.field))}for(const v of c.orderBy)v.field.isKeyField()||(h=h.add(v.field));return h.size+(g?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(t,e){const r=new FC;for(const i of $g(t)){const o=e.data.field(i.fieldPath);if(null==o)return null;const c=r.Ne(i.kind);tm.fe.Zt(o,c)}return r.Se()}Je(t){const e=new FC;return tm.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const r=new FC;return tm.fe.Zt(Gg(this.databaseId,e),r.Ne(function(i){const o=$g(i);return 0===o.length?0:o[o.length-1].kind}(t))),r.Se()}ze(t,e,r){if(null===r)return[];let i=[];i.push(new FC);let o=0;for(const c of $g(t)){const h=r[o++];for(const g of i)if(this.en(e,c.fieldPath)&&vC(h))i=this.nn(i,c,h);else{const v=g.Ne(c.kind);tm.fe.Zt(h,v)}}return this.sn(i)}We(t,e,r){return this.ze(t,e,r.position)}sn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Se();return e}nn(t,e,r){const i=[...t],o=[];for(const c of r.arrayValue.values||[])for(const h of i){const g=new FC;g.seed(h.Se()),tm.fe.Zt(c,g.Ne(e.kind)),o.push(g)}return o}en(t,e){return!!t.filters.find(r=>r instanceof fs&&r.field.isEqual(e)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(t,e){const r=cA(t),i=uA(t);return(e?r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.qt()).next(o=>{const c=[];return ye.forEach(o,h=>i.get([h.indexId,this.uid]).next(g=>{c.push(function(v,E){const D=E?new bC(E.sequenceNumber,new wc(em(E.readTime),new Xe(Su(E.documentKey)),E.largestBatchId)):bC.empty(),k=v.fields.map(([N,U])=>new KS(wi.fromServerFormat(N),U));return new WS(v.indexId,v.collectionGroup,k,D)}(h,g))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:zt(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=cA(t),o=uA(t);return this.rn(t).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(h=>ye.forEach(h,g=>{return o.put({indexId:g.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Xg((k=r).readTime),documentKey:ho(k.documentKey.path),largestBatchId:k.largestBatchId});var k})))}updateIndexEntries(t,e){const r=new Map;return ye.forEach(e,(i,o)=>{const c=r.get(i.collectionGroup);return(c?ye.resolve(c):this.getFieldIndexes(t,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ye.forEach(h,g=>this.on(t,i,g).next(v=>{const E=this.un(o,g);return v.isEqual(E)?ye.resolve():this.an(t,o,g,v,E)}))))})}cn(t,e,r,i){return LC(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,e.key),documentKey:e.key.path.toArray()})}hn(t,e,r,i){return LC(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,e.key),e.key.path.toArray()])}on(t,e,r){const i=LC(t);let o=new Wn(rm);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,e)])},(c,h)=>{o=o.add(new nm(r.indexId,e,h.arrayValue,h.directionalValue))}).next(()=>o)}un(t,e){let r=new Wn(rm);const i=this.Ze(e,t);if(null==i)return r;const o=gP(e);if(null!=o){const c=t.data.field(o.fieldPath);if(vC(c))for(const h of c.arrayValue.values||[])r=r.add(new nm(e.indexId,t.key,this.Je(h),i))}else r=r.add(new nm(e.indexId,t.key,lA,i));return r}an(t,e,r,i,o){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(h,g,v,E,D){const k=h.getIterator(),N=g.getIterator();let U=Kv(k),X=Kv(N);for(;U||X;){let pe=!1,Be=!1;if(U&&X){const We=v(U,X);We<0?Be=!0:We>0&&(pe=!0)}else null!=U?Be=!0:pe=!0;pe?(E(X),X=Kv(N)):Be?(D(U),U=Kv(k)):(U=Kv(k),X=Kv(N))}}(i,o,rm,h=>{c.push(this.cn(t,e,r,h))},h=>{c.push(this.hn(t,e,r,h))}),ye.waitFor(c)}rn(t){let e=1;return uA(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((c,h)=>rm(c,h)).filter((c,h,g)=>!h||0!==rm(c,g[h-1]));const i=[];i.push(t);for(const c of r){const h=rm(c,t),g=rm(c,e);if(0===h)i[0]=t.ke();else if(h>0&&g<0)i.push(c),i.push(c.ke());else if(g>0)break}i.push(e);const o=[];for(let c=0;c<i.length;c+=2)o.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,lA,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,lA,[]]));return o}getMinOffset(t,e){let r;return ye.forEach(this.Qe(e),i=>this.je(t,i).next(o=>{o?(!r||MB(o.indexState.offset,r)<0)&&(r=o.indexState.offset):r=wc.min()})).next(()=>r)}}function U3(n){return Hi(n,"collectionParents")}function LC(n){return Hi(n,"indexEntries")}function cA(n){return Hi(n,"indexConfiguration")}function uA(n){return Hi(n,"indexState")}const V3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ko{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new Ko(t,Ko.DEFAULT_COLLECTION_PERCENTILE,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function B3(n,t,e){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],c=IDBKeyRange.only(e.batchId);let h=0;const g=r.Wt({range:c},(E,D,k)=>(h++,k.delete()));o.push(g.next(()=>{Lt(1===h)}));const v=[];for(const E of e.mutations){const D=E3(t,E.key.path,e.batchId);o.push(i.delete(D)),v.push(E.key)}return ye.waitFor(o).next(()=>v)}function dA(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw dt();t=n.noDocument}return JSON.stringify(t).length}Ko.DEFAULT_COLLECTION_PERCENTILE=10,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ko.DEFAULT=new Ko(41943040,Ko.DEFAULT_COLLECTION_PERCENTILE,Ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ko.DISABLED=new Ko(-1,0,0);class NP{constructor(t,e,r,i){this.userId=t,this.M=e,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(t,e,r,i){Lt(""!==t.uid);const o=t.isAuthenticated()?t.uid:"";return new NP(o,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vf(t).Wt({index:"userMutationsIndex",range:r},(i,o,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const o=sy(t),c=Vf(t);return c.add({}).next(h=>{Lt("number"==typeof h);const g=new AP(h,e,r,i),v=function(k,N,U){const X=U.baseMutations.map(Be=>RC(k.Jt,Be)),pe=U.mutations.map(Be=>RC(k.Jt,Be));return{userId:N,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:X,mutations:pe}}(this.M,this.userId,g),E=[];let D=new Wn((k,N)=>zt(k.canonicalString(),N.canonicalString()));for(const k of i){const N=E3(this.userId,k.key.path,h);D=D.add(k.key.path.popLast()),E.push(c.put(v)),E.push(o.put(N,TK))}return D.forEach(k=>{E.push(this.indexManager.addToCollectionParentIndex(t,k))}),t.addOnCommittedListener(()=>{this.ln[h]=g.keys()}),ye.waitFor(E).next(()=>g)})}lookupMutationBatch(t,e){return Vf(t).get(e).next(r=>r?(Lt(r.userId===this.userId),iy(this.M,r)):null)}fn(t,e){return this.ln[e]?ye.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.ln[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Vf(t).Wt({index:"userMutationsIndex",range:i},(c,h,g)=>{h.userId===this.userId&&(Lt(h.batchId>=r),o=iy(this.M,h)),g.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Vf(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vf(t).qt("userMutationsIndex",e).next(r=>r.map(i=>iy(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=sA(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return sy(t).Wt({range:i},(c,h,g)=>{const[v,E,D]=c,k=Su(E);if(v===this.userId&&e.path.isEqual(k))return Vf(t).get(D).next(N=>{if(!N)throw dt();Lt(N.userId===this.userId),o.push(iy(this.M,N))});g.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Wn(zt);const i=[];return e.forEach(o=>{const c=sA(this.userId,o.path),h=IDBKeyRange.lowerBound(c),g=sy(t).Wt({range:h},(v,E,D)=>{const[k,N,U]=v,X=Su(N);k===this.userId&&o.path.isEqual(X)?r=r.add(U):D.done()});i.push(g)}),ye.waitFor(i).next(()=>this.dn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,o=sA(this.userId,r),c=IDBKeyRange.lowerBound(o);let h=new Wn(zt);return sy(t).Wt({range:c},(g,v,E)=>{const[D,k,N]=g,U=Su(k);D===this.userId&&r.isPrefixOf(U)?U.length===i&&(h=h.add(N)):E.done()}).next(()=>this.dn(t,h))}dn(t,e){const r=[],i=[];return e.forEach(o=>{i.push(Vf(t).get(o).next(c=>{if(null===c)throw dt();Lt(c.userId===this.userId),r.push(iy(this.M,c))}))}),ye.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return B3(t.Ht,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),ye.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return ye.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return sy(t).Wt({range:r},(o,c,h)=>{if(o[0]===this.userId){const g=Su(o[1]);i.push(g)}else h.done()}).next(()=>{Lt(0===i.length)})})}containsKey(t,e){return j3(t,this.userId,e)}wn(t){return H3(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function j3(n,t,e){const r=sA(t,e.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return sy(n).Wt({range:o,jt:!0},(h,g,v)=>{const[E,D,k]=h;E===t&&D===i&&(c=!0),v.done()}).next(()=>c)}function Vf(n){return Hi(n,"mutations")}function sy(n){return Hi(n,"documentMutations")}function H3(n){return Hi(n,"mutationQueues")}class im{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new im(0)}static yn(){return new im(-1)}}class e9{constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const r=new im(e.highestTargetId);return e.highestTargetId=r.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>kt.fromTimestamp(new qr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.pn(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.In(t,i)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(r=>(r.targetCount+=1,this.En(e,r),this.In(t,r))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>oy(t).delete(e.targetId)).next(()=>this.pn(t)).next(r=>(Lt(r.targetCount>0),r.targetCount-=1,this.In(t,r)))}removeTargets(t,e,r){let i=0;const o=[];return oy(t).Wt((c,h)=>{const g=OC(h);g.sequenceNumber<=e&&null===r.get(g.targetId)&&(i++,o.push(this.removeTargetData(t,g)))}).next(()=>ye.waitFor(o)).next(()=>i)}forEachTarget(t,e){return oy(t).Wt((r,i)=>{const o=OC(i);e(o)})}pn(t){return q3(t).get("targetGlobalKey").next(e=>(Lt(null!==e),e))}In(t,e){return q3(t).put("targetGlobalKey",e)}Tn(t,e){return oy(t).put(R3(this.M,e))}En(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=zg(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return oy(t).Wt({range:i,index:"queryTargetsIndex"},(c,h,g)=>{const v=OC(h);wC(e,v.target)&&(o=v,g.done())}).next(()=>o)}addMatchingKeys(t,e,r){const i=[],o=Bf(t);return e.forEach(c=>{const h=ho(c.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(t,r,c))}),ye.waitFor(i)}removeMatchingKeys(t,e,r){const i=Bf(t);return ye.forEach(e,o=>{const c=ho(o.path);return ye.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(t,r,o)])})}removeMatchingKeysForTargetId(t,e){const r=Bf(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=Bf(t);let o=Rn();return i.Wt({range:r,jt:!0},(c,h,g)=>{const v=Su(c[1]),E=new Xe(v);o=o.add(E)}).next(()=>o)}containsKey(t,e){const r=ho(e.path),i=IDBKeyRange.bound([r],[_B(r)],!1,!0);let o=0;return Bf(t).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,h],g,v)=>{0!==c&&(o++,v.done())}).next(()=>o>0)}Et(t,e){return oy(t).get(e).next(r=>r?OC(r):null)}}function oy(n){return Hi(n,"targets")}function q3(n){return Hi(n,"targetGlobal")}function Bf(n){return Hi(n,"targetDocuments")}function sm(n){return FP.apply(this,arguments)}function FP(){return FP=(0,ve.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==T3)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),FP.apply(this,arguments)}function Z3([n,t],[e,r]){const i=zt(n,e);return 0===i?zt(t,r):i}class t9{constructor(t){this.An=t,this.buffer=new Wn(Z3),this.Rn=0}bn(){return++this.Rn}Pn(t){const e=[t,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();Z3(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class n9{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const r=this.Vn?3e5:6e4;Ve("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(i){Qg(i)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield sm(i)}yield e.Sn(t)}))}}class r9{constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(0===e)return ye.resolve(Pa.A);const r=new t9(e);return this.Dn.forEachTarget(t,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(t,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Dn.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(V3)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),V3):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let r,i,o,c,h,g,v;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,c=Date.now(),this.nthSequenceNumber(t,i))).next(D=>(r=D,h=Date.now(),this.removeTargets(t,r,e))).next(D=>(o=D,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(D=>(v=Date.now(),uP()<=wa.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-E}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${o} targets in `+(g-h)+`ms\n\tRemoved ${D} documents in `+(v-g)+`ms\nTotal Duration: ${v-E}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:D})))}}class i9{constructor(t,e){this.db=t,this.garbageCollector=new r9(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}kn(t){let e=0;return this.xn(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(r,i)=>e(i))}addReference(t,e,r){return hA(t,r)}removeReference(t,e,r){return hA(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return hA(t,e)}On(t,e){return function(r,i){let o=!1;return H3(r).zt(c=>j3(r,c,i).next(h=>(h&&(o=!0),ye.resolve(!h)))).next(()=>o)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Mn(t,(c,h)=>{if(h<=e){const g=this.On(t,c).next(v=>{if(!v)return o++,r.getEntry(t,c).next(()=>(r.removeEntry(c,kt.min()),Bf(t).delete([0,ho(c.path)])))});i.push(g)}}).next(()=>ye.waitFor(i)).next(()=>r.apply(t)).next(()=>o)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return hA(t,e)}Mn(t,e){const r=Bf(t);let i,o=Pa.A;return r.Wt({index:"documentTargetsIndex"},([c,h],{path:g,sequenceNumber:v})=>{0===c?(o!==Pa.A&&e(new Xe(Su(i)),o),o=v,i=g):o=Pa.A}).next(()=>{o!==Pa.A&&e(new Xe(Su(i)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function hA(n,t){return Bf(n).put((r=n.currentSequenceNumber,{targetId:0,path:ho(t.path),sequenceNumber:r}));var r}class G3{constructor(){this.changes=new Lf(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,tr.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?ye.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class s9{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return om(t).put(r)}removeEntry(t,e,r){return om(t).delete(function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],aA(o),c[c.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Fn(t,r)))}getEntry(t,e){let r=tr.newInvalidDocument(e);return om(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(UC(e))},(i,o)=>{r=this.$n(e,o)}).next(()=>r)}Bn(t,e){let r={size:0,document:tr.newInvalidDocument(e)};return om(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(UC(e))},(i,o)=>{r={document:this.$n(e,o),size:dA(o)}}).next(()=>r)}getEntries(t,e){let r=wl();return this.Ln(t,e,(i,o)=>{const c=this.$n(i,o);r=r.insert(i,c)}).next(()=>r)}Un(t,e){let r=wl(),i=new Zr(Xe.comparator);return this.Ln(t,e,(o,c)=>{const h=this.$n(o,c);r=r.insert(o,h),i=i.insert(o,dA(c))}).next(()=>({documents:r,qn:i}))}Ln(t,e,r){if(e.isEmpty())return ye.resolve();let i=new Wn(Y3);e.forEach(g=>i=i.add(g));const o=IDBKeyRange.bound(UC(i.first()),UC(i.last())),c=i.getIterator();let h=c.getNext();return om(t).Wt({index:"documentKeyIndex",range:o},(g,v,E)=>{const D=Xe.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&Y3(h,D)<0;)r(h,null),h=c.getNext();h&&h.isEqual(D)&&(r(h,v),h=c.hasNext()?c.getNext():null),h?E.Ut(UC(h)):E.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,r){const i=[e.popLast().toArray(),e.lastSegment(),aA(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return om(t).qt(IDBKeyRange.bound(i,o,!0)).next(c=>{let h=wl();for(const g of c){const v=this.$n(Xe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);h=h.insert(v.key,v)}return h})}getAllFromCollectionGroup(t,e,r,i){let o=wl();const c=z3(e,r),h=z3(e,wc.max());return om(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(g,v,E)=>{const D=this.$n(Xe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);o=o.insert(D.key,D),o.size===i&&E.done()}).next(()=>o)}newChangeBuffer(t){return new o9(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return $3(t).get("remoteDocumentGlobalKey").next(e=>(Lt(!!e),e))}Fn(t,e){return $3(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const r=function GK(n,t){let e;if(t.document)e=g3(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=Xe.fromSegments(t.noDocument.path),i=em(t.noDocument.readTime);e=tr.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return dt();{const r=Xe.fromSegments(t.unknownDocument.path),i=em(t.unknownDocument.version);e=tr.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(r){const i=new qr(r[0],r[1]);return kt.fromTimestamp(i)}(t.readTime)),e}(this.M,e);if(!r.isNoDocument()||!r.version.isEqual(kt.min()))return r}return tr.newInvalidDocument(t)}}class o9 extends G3{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new Lf(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new Wn((o,c)=>zt(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const h=this.Gn.get(o);if(e.push(this.Kn.removeEntry(t,o,h.readTime)),c.isValidDocument()){const g=k3(this.Kn.M,c);i=i.add(o.path.popLast()),r+=dA(g)-h.size,e.push(this.Kn.addEntry(t,o,g))}else if(r-=h.size,this.trackRemovals){const g=k3(this.Kn.M,c.convertToNoDocument(kt.min()));e.push(this.Kn.addEntry(t,o,g))}}),i.forEach(o=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,o))}),e.push(this.Kn.updateMetadata(t,r)),ye.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(r=>(this.Gn.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:r,qn:i})=>(i.forEach((o,c)=>{this.Gn.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function $3(n){return Hi(n,"remoteDocumentGlobal")}function om(n){return Hi(n,"remoteDocumentsV14")}function UC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function z3(n,t){const e=t.documentKey.path.toArray();return[n,aA(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function Y3(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<e.length-2&&o<r.length-2;++o)if(i=zt(e[o],r[o]),i)return i;return i=zt(e.length,r.length),i||(i=zt(e[e.length-2],r[r.length-2]),i||zt(e[e.length-1],r[r.length-1]))}class a9{constructor(t){this.M=t}kt(t,e,r,i){const o=new oA("createOrUpgrade",e);var h;r<1&&i>=1&&(t.createObjectStore("owner"),(h=t).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",C3,{unique:!0}),h.createObjectStore("documentMutations"),W3(t),function(h){h.createObjectStore("remoteDocuments")}(t));let c=ye.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(t),W3(t)),c=c.next(()=>function(h){const g=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:kt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(o))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,g){return g.store("mutations").qt().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",C3,{unique:!0});const E=g.store("mutations"),D=v.map(k=>E.put(k));return ye.waitFor(D)})}(t,o))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(o))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(t),this.jn(o)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(o))),r<8&&i>=8&&(c=c.next(()=>this.zn(t,o))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(t)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(o))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const g=h.createObjectStore("documentOverlays",{keyPath:UK});g.createIndex("collectionPathOverlayIndex",VK,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",BK,{unique:!1})}(t)})),r<13&&i>=13&&(c=c.next(()=>function(h){const g=h.createObjectStore("remoteDocumentsV14",{keyPath:SK});g.createIndex("documentKeyIndex",AK),g.createIndex("collectionGroupIndex",xK)}(t)).next(()=>this.Jn(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:OK}).createIndex("sequenceNumberIndex",NK,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:FK}).createIndex("documentKeyIndex",LK,{unique:!1})}(t)})),c}jn(t){let e=0;return t.store("remoteDocuments").Wt((r,i)=>{e+=dA(i)}).next(()=>{const r={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(t){const e=t.store("mutationQueues"),r=t.store("mutations");return e.qt().next(i=>ye.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(h=>ye.forEach(h,g=>{Lt(g.userId===o.userId);const v=iy(this.M,g);return B3(t,o.userId,v).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Wt((c,h)=>{const g=new mn(c),v=[0,ho(g)];o.push(e.get(v).next(E=>E?ye.resolve():e.put({targetId:0,path:ho(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ye.waitFor(o))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:PK});const r=e.store("collectionParents"),i=new OP,o=c=>{if(i.add(c)){const h=c.lastSegment(),g=c.popLast();return r.put({collectionId:h,parent:ho(g)})}};return e.store("remoteDocuments").Wt({jt:!0},(c,h)=>{const g=new mn(c);return o(g.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([c,h,g],v)=>{const E=Su(h);return o(E.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((r,i)=>{const o=OC(i),c=R3(this.M,o);return e.put(c)})}Jn(t,e){const r=e.store("remoteDocuments"),i=[];return r.Wt((o,c)=>{const h=e.store("remoteDocumentsV14"),g=(v=c,v.document?new Xe(mn.fromString(v.document.name).popFirst(5)):v.noDocument?Xe.fromSegments(v.noDocument.path):v.unknownDocument?Xe.fromSegments(v.unknownDocument.path):dt()).path.toArray();var v;const E={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(E))}).next(()=>ye.waitFor(i))}}function W3(n){n.createObjectStore("targetDocuments",{keyPath:kK}).createIndex("documentTargetsIndex",RK,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",MK,{unique:!0}),n.createObjectStore("targetGlobal")}const LP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class UP{constructor(t,e,r,i,o,c,h,g,v,E,D=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Yn=o,this.window=c,this.document=h,this.Xn=v,this.Zn=E,this.ts=D,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=k=>Promise.resolve(),!UP.vt())throw new Oe(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new i9(this,i),this.hs=e+"main",this.M=new M3(g),this.ls=new Cc(this.hs,this.ts,new a9(this.M)),this.fs=new e9(this.referenceDelegate,this.M),this.ds=new s9(this.M),this._s=new $K,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===E&&oi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(ge.FAILED_PRECONDITION,LP);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new Pa(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var r=(0,ve.Z)(function*(i){if(e.started)return t(i)});return function(i){return r.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,ve.Z)(function*(r){null===r.newVersion&&(yield t())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,ve.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>fA(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.bs(t).next(()=>!0))).catch(t=>{if(Qg(t))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return VC(t).get("owner").next(e=>ye.resolve(this.Ps(e)))}Vs(t){return fA(t).delete(this.clientId)}vs(){var t=this;return(0,ve.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Hi(r,"clientMetadata");return i.qt().next(o=>{const c=t.Ds(o,18e5),h=o.filter(g=>-1===c.indexOf(g));return ye.forEach(h,g=>i.delete(g.clientId)).next(()=>h)})}).catch(()=>[]);if(t.ws)for(const r of e)t.ws.removeItem(t.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?ye.resolve(!0):VC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.Ps(e)&&this.networkEnabled)return!0;if(!this.Ps(e)){if(!e.allowTabSynchronization)throw new Oe(ge.FAILED_PRECONDITION,LP);return!1}}return!(!this.networkEnabled||!this.inForeground)||fA(t).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Ve("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,ve.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new x3(e,Pa.A);return t.Rs(r).next(()=>t.Vs(r))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(r=>this.Ss(r.updateTimeMs,e)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>fA(t).qt().next(e=>this.Ds(e,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return NP.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new XK(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return PP.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,r){Ve("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",o=14===(c=this.ts)?HK:13===c?D3:12===c?jK:11===c?I3:void dt();var c;let h;return this.ls.runTransaction(t,i,o,g=>(h=new x3(g,this.es?this.es.next():Pa.A),"readwrite-primary"===e?this.Es(h).next(v=>!!v||this.As(h)).next(v=>{if(!v)throw oi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Oe(ge.FAILED_PRECONDITION,T3);return r(h)}).next(v=>this.bs(h).next(()=>v)):this.$s(h).next(()=>r(h)))).then(g=>(h.raiseOnCommittedEvent(),g))}$s(t){return VC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.Ps(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Oe(ge.FAILED_PRECONDITION,LP)})}bs(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return VC(t).put("owner",e)}static vt(){return Cc.vt()}Rs(t){const e=VC(t);return e.get("owner").next(r=>this.Ps(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):ye.resolve())}Ss(t,e){const r=Date.now();return!(t<r-e||t>r&&(oi(`Detected an update time that is in the future: ${t} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const r=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return Ve("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return oi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){oi("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function VC(n){return Hi(n,"owner")}function fA(n){return Hi(n,"clientMetadata")}function VP(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class l9{constructor(t,e,r){this.ds=t,this.Bs=e,this.indexManager=r}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(r=>this.Us(t,e,r))}Us(t,e,r){return this.ds.getEntry(t,e).next(i=>{for(const o of r)o.applyToLocalView(i);return i})}qs(t,e){t.forEach((r,i)=>{for(const o of e)o.applyToLocalView(i)})}Ks(t,e){return this.ds.getEntries(t,e).next(r=>this.Gs(t,r).next(()=>r))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(r=>this.qs(e,r))}Qs(t,e,r){return Xe.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(t,e.path):vP(e)?this.Ws(t,e,r):this.zs(t,e,r);var i}js(t,e){return this.Ls(t,new Xe(e)).next(r=>{let i=EP();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(t,e,r){const i=e.collectionGroup;let o=EP();return this.indexManager.getCollectionParents(t,i).next(c=>ye.forEach(c,h=>{const g=(v=e,E=h.child(i),new qd(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,E;return this.zs(t,g,r).next(v=>{v.forEach((E,D)=>{o=o.insert(E,D)})})}).next(()=>o))}zs(t,e,r){let i;return this.ds.getAllFromCollection(t,e.path,r).next(o=>(i=o,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(o=>{for(const c of o)for(const h of c.mutations){const g=h.key;let v=i.get(g);null==v&&(v=tr.newInvalidDocument(g),i=i.insert(g,v)),wP(h,v,c.localWriteTime),v.isFoundDocument()||(i=i.remove(g))}}).next(()=>(i.forEach((o,c)=>{bP(e,c)||(i=i.remove(o))}),i))}}class BP{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Hs=r,this.Js=i}static Ys(t,e){let r=Rn(),i=Rn();for(const o of e.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new BP(t,e.fromCache,r,i)}}class K3{constructor(){this.Xs=!1}initialize(t,e){this.Zs=t,this.indexManager=e,this.Xs=!0}Qs(t,e,r,i){return this.ti(t,e).next(o=>o||this.ei(t,e,i,r)).next(o=>o||this.ni(t,e))}ti(t,e){return ye.resolve(null)}ei(t,e,r,i){return function Q7(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(e)||i.isEqual(kt.min())?this.ni(t,e):this.Zs.Ks(t,r).next(o=>{const c=this.si(e,o);return this.ii(e,c,r,i)?this.ni(t,e):(uP()<=wa.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yP(e)),this.ri(t,c,e,xB(i,-1)))})}si(t,e){let r=new Wn(HB(t));return e.forEach((i,o)=>{bP(t,o)&&(r=r.add(o))}),r}ii(t,e,r,i){if(null===t.limit)return!1;if(r.size!==e.size)return!0;const o="F"===t.limitType?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ni(t,e){return uP()<=wa.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",yP(e)),this.Zs.Qs(t,e,wc.min())}ri(t,e,r,i){return this.Zs.Qs(t,r,i).next(o=>(e.forEach(c=>{o=o.insert(c.key,c)}),o))}}class c9{constructor(t,e,r,i){this.persistence=t,this.oi=e,this.M=i,this.ui=new Zr(zt),this.ai=new Lf(o=>zg(o),wC),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}li(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.fi=new l9(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ui))}}function Q3(n,t,e,r){return new c9(n,t,e,r)}function J3(n,t){return jP.apply(this,arguments)}function jP(){return jP=(0,ve.Z)(function*(n,t){const e=it(n);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.Bs.getAllMutationBatches(r).next(o=>(i=o,e.li(t),e.Bs.getAllMutationBatches(r))).next(o=>{const c=[],h=[];let g=Rn();for(const v of i){c.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}for(const v of o){h.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}return e.fi.Ks(r,g).next(v=>({di:v,removedBatchIds:c,addedBatchIds:h}))})})}),jP.apply(this,arguments)}function u9(n,t){const e=it(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),o=e.hi.newChangeBuffer({trackRemovals:!0});return function(c,h,g,v){const E=g.batch,D=E.keys();let k=ye.resolve();return D.forEach(N=>{k=k.next(()=>v.getEntry(h,N)).next(U=>{const X=g.docVersions.get(N);Lt(null!==X),U.version.compareTo(X)<0&&(E.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),v.addEntry(U)))})}),k.next(()=>c.Bs.removeMutationBatch(h,E))}(e,r,t,o).next(()=>o.apply(r)).next(()=>e.Bs.performConsistencyCheck(r)).next(()=>e.fi.Ks(r,i))})}function X3(n){const t=it(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function d9(n,t){const e=it(n),r=t.snapshotVersion;let i=e.ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=e.hi.newChangeBuffer({trackRemovals:!0});i=e.ui;const h=[];t.targetChanges.forEach((v,E)=>{const D=i.get(E);if(!D)return;h.push(e.fs.removeMatchingKeys(o,v.removedDocuments,E).next(()=>e.fs.addMatchingKeys(o,v.addedDocuments,E)));let k=D.withSequenceNumber(o.currentSequenceNumber);var N,U,X;t.targetMismatches.has(E)?k=k.withResumeToken(Ci.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):v.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(v.resumeToken,r)),i=i.insert(E,k),U=k,X=v,(0===(N=D).resumeToken.approximateByteSize()||U.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0)&&h.push(e.fs.updateTargetData(o,k))});let g=wl();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(e6(o,c,t.documentUpdates).next(v=>{g=v})),!r.isEqual(kt.min())){const v=e.fs.getLastRemoteSnapshotVersion(o).next(E=>e.fs.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(v)}return ye.waitFor(h).next(()=>c.apply(o)).next(()=>e.fi.Gs(o,g)).next(()=>g)}).then(o=>(e.ui=i,o))}function e6(n,t,e){let r=Rn();return e.forEach(i=>r=r.add(i)),t.getEntries(n,r).next(i=>{let o=wl();return e.forEach((c,h)=>{const g=i.get(c);h.isNoDocument()&&h.version.isEqual(kt.min())?(t.removeEntry(c,h.readTime),o=o.insert(c,h)):!g.isValidDocument()||h.version.compareTo(g.version)>0||0===h.version.compareTo(g.version)&&g.hasPendingWrites?(t.addEntry(h),o=o.insert(c,h)):Ve("LocalStore","Ignoring outdated watch update for ",c,". Current version:",g.version," Watch version:",h.version)}),o})}function h9(n,t){const e=it(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(r,t)))}function ay(n,t){const e=it(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.fs.getTargetData(r,t).next(o=>o?(i=o,ye.resolve(i)):e.fs.allocateTargetId(r).next(c=>(i=new Uf(t,c,0,r.currentSequenceNumber),e.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.ui=e.ui.insert(r.targetId,r),e.ai.set(t,r.targetId)),r})}function ly(n,t,e){return HP.apply(this,arguments)}function HP(){return HP=(0,ve.Z)(function*(n,t,e){const r=it(n),i=r.ui.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Qg(c))throw c;Ve("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}r.ui=r.ui.remove(t),r.ai.delete(i.target)}),HP.apply(this,arguments)}function pA(n,t,e){const r=it(n);let i=kt.min(),o=Rn();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,g,v){const E=it(h),D=E.ai.get(v);return void 0!==D?ye.resolve(E.ui.get(D)):E.fs.getTargetData(g,v)}(r,c,bl(t)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,h.targetId).next(g=>{o=g})}).next(()=>r.oi.Qs(c,t,e?i:kt.min(),e?o:Rn())).next(h=>(r6(r,jB(t),h),{documents:h,_i:o})))}function t6(n,t){const e=it(n),r=it(e.fs),i=e.ui.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,t).next(c=>c?c.target:null))}function n6(n,t){const e=it(n),r=e.ci.get(t)||kt.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.hi.getAllFromCollectionGroup(i,t,xB(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(r6(e,t,i),i))}function r6(n,t,e){let r=kt.min();e.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ci.set(t,r)}function qP(){return qP=(0,ve.Z)(function*(n,t,e,r){const i=it(n);let o=Rn(),c=wl();for(const v of e){const E=t.wi(v.metadata.name);v.document&&(o=o.add(E));const D=t.mi(v);D.setReadTime(t.gi(v.metadata.readTime)),c=c.insert(E,D)}const h=i.hi.newChangeBuffer({trackRemovals:!0}),g=yield ay(i,(v=r,bl(Jv(mn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>e6(v,h,c).next(E=>(h.apply(v),E)).next(E=>i.fs.removeMatchingKeysForTargetId(v,g.targetId).next(()=>i.fs.addMatchingKeys(v,o,g.targetId)).next(()=>i.fi.Gs(v,E)).next(()=>E)))}),qP.apply(this,arguments)}function p9(n,t){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,ve.Z)(function*(n,t,e=Rn()){const r=yield ay(n,bl(kP(t.bundledQuery))),i=it(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const c=ji(t.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(o,t);const h=r.withResumeToken(Ci.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(h.targetId,h),i.fs.updateTargetData(o,h).next(()=>i.fs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.fs.addMatchingKeys(o,e,r.targetId)).next(()=>i._s.saveNamedQuery(o,t))})}),ZP.apply(this,arguments)}class g9{constructor(t){this.M=t,this.yi=new Map,this.pi=new Map}getBundleMetadata(t,e){return ye.resolve(this.yi.get(e))}saveBundleMetadata(t,e){var r;return this.yi.set(e.id,{id:(r=e).id,version:r.version,createTime:ji(r.createTime)}),ye.resolve()}getNamedQuery(t,e){return ye.resolve(this.pi.get(e))}saveNamedQuery(t,e){return this.pi.set(e.name,{name:(r=e).name,query:kP(r.bundledQuery),readTime:ji(r.readTime)}),ye.resolve();var r}}class m9{constructor(){this.overlays=new Zr(Xe.comparator),this.Ii=new Map}getOverlay(t,e){return ye.resolve(this.overlays.get(e))}saveOverlays(t,e,r){return r.forEach((i,o)=>{this.Xt(t,e,o)}),ye.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ii.delete(r)),ye.resolve()}getOverlaysForCollection(t,e,r){const i=TC(),o=e.length+1,c=new Xe(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const g=h.getNext().value,v=g.getKey();if(!e.isPrefixOf(v.path))break;v.path.length===o&&g.largestBatchId>r&&i.set(g.getKey(),g)}return ye.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let o=new Zr((v,E)=>v-E);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===e&&v.largestBatchId>r){let E=o.get(v.largestBatchId);null===E&&(E=TC(),o=o.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const h=TC(),g=o.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,E)=>h.set(v,E)),!(h.size()>=i)););return ye.resolve(h)}Xt(t,e,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new MP(e,r));let o=this.Ii.get(e);void 0===o&&(o=Rn(),this.Ii.set(e,o)),this.Ii.set(e,o.add(r.key))}}class GP{constructor(){this.Ti=new Wn(qi.Ei),this.Ai=new Wn(qi.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(t,e){const r=new qi(t,e);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Pi(new qi(t,e))}Vi(t,e){t.forEach(r=>this.removeReference(r,e))}vi(t){const e=new Xe(new mn([])),r=new qi(e,t),i=new qi(e,t+1),o=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),o.push(c.key)}),o}Si(){this.Ti.forEach(t=>this.Pi(t))}Pi(t){this.Ti=this.Ti.delete(t),this.Ai=this.Ai.delete(t)}Di(t){const e=new Xe(new mn([])),r=new qi(e,t),i=new qi(e,t+1);let o=Rn();return this.Ai.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(t){const e=new qi(t,0),r=this.Ti.firstAfterOrEqual(e);return null!==r&&t.isEqual(r.key)}}class qi{constructor(t,e){this.key=t,this.Ci=e}static Ei(t,e){return Xe.comparator(t.key,e.key)||zt(t.Ci,e.Ci)}static Ri(t,e){return zt(t.Ci,e.Ci)||Xe.comparator(t.key,e.key)}}class _9{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.xi=1,this.Ni=new Wn(qi.Ei)}checkEmpty(t){return ye.resolve(0===this.Bs.length)}addMutationBatch(t,e,r,i){const o=this.xi;this.xi++;const c=new AP(o,e,r,i);this.Bs.push(c);for(const h of i)this.Ni=this.Ni.add(new qi(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return ye.resolve(c)}lookupMutationBatch(t,e){return ye.resolve(this.ki(e))}getNextMutationBatchAfterBatchId(t,e){const i=this.Mi(e+1),o=i<0?0:i;return ye.resolve(this.Bs.length>o?this.Bs[o]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(t){return ye.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new qi(e,0),i=new qi(e,Number.POSITIVE_INFINITY),o=[];return this.Ni.forEachInRange([r,i],c=>{const h=this.ki(c.Ci);o.push(h)}),ye.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Wn(zt);return e.forEach(i=>{const o=new qi(i,0),c=new qi(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([o,c],h=>{r=r.add(h.Ci)})}),ye.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let o=r;Xe.isDocumentKey(o)||(o=o.child(""));const c=new qi(new Xe(o),0);let h=new Wn(zt);return this.Ni.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(g.Ci)),!0)},c),ye.resolve(this.Oi(h))}Oi(t){const e=[];return t.forEach(r=>{const i=this.ki(r);null!==i&&e.push(i)}),e}removeMutationBatch(t,e){Lt(0===this.Fi(e.batchId,"removed")),this.Bs.shift();let r=this.Ni;return ye.forEach(e.mutations,i=>{const o=new qi(i.key,e.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Ni=r})}_n(t){}containsKey(t,e){const r=new qi(e,0),i=this.Ni.firstAfterOrEqual(r);return ye.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return ye.resolve()}Fi(t,e){return this.Mi(t)}Mi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}ki(t){const e=this.Mi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class v9{constructor(t){this.$i=t,this.docs=new Zr(Xe.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),o=i?i.size:0,c=this.$i(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return ye.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(e))}getEntries(t,e){let r=wl();return e.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tr.newInvalidDocument(i))}),ye.resolve(r)}getAllFromCollection(t,e,r){let i=wl();const o=new Xe(e.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:h,value:{document:g}}=c.getNext();if(!e.isPrefixOf(h.path))break;h.path.length>e.length+1||MB(B7(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return ye.resolve(i)}getAllFromCollectionGroup(t,e,r,i){dt()}Bi(t,e){return ye.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new y9(this)}getSize(t){return ye.resolve(this.size)}}class y9 extends G3{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Kn.addEntry(t,i)):this.Kn.removeEntry(r)}),ye.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class b9{constructor(t){this.persistence=t,this.Li=new Lf(e=>zg(e),wC),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new GP,this.targetCount=0,this.Ki=im.gn()}forEachTarget(t,e){return this.Li.forEach((r,i)=>e(i)),ye.resolve()}getLastRemoteSnapshotVersion(t){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ye.resolve(this.Ui)}allocateTargetId(t){return this.highestTargetId=this.Ki.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.Ui&&(this.Ui=e),ye.resolve()}Tn(t){this.Li.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ki=new im(e),this.highestTargetId=e),t.sequenceNumber>this.Ui&&(this.Ui=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,ye.resolve()}updateTargetData(t,e){return this.Tn(e),ye.resolve()}removeTargetData(t,e){return this.Li.delete(e.target),this.qi.vi(e.targetId),this.targetCount-=1,ye.resolve()}removeTargets(t,e,r){let i=0;const o=[];return this.Li.forEach((c,h)=>{h.sequenceNumber<=e&&null===r.get(h.targetId)&&(this.Li.delete(c),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),i++)}),ye.waitFor(o).next(()=>i)}getTargetCount(t){return ye.resolve(this.targetCount)}getTargetData(t,e){const r=this.Li.get(e)||null;return ye.resolve(r)}addMatchingKeys(t,e,r){return this.qi.bi(e,r),ye.resolve()}removeMatchingKeys(t,e,r){this.qi.Vi(e,r);const i=this.persistence.referenceDelegate,o=[];return i&&e.forEach(c=>{o.push(i.markPotentiallyOrphaned(t,c))}),ye.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.qi.vi(e),ye.resolve()}getMatchingKeysForTargetId(t,e){const r=this.qi.Di(e);return ye.resolve(r)}containsKey(t,e){return ye.resolve(this.qi.containsKey(e))}}class w9{constructor(t,e){this.Gi={},this.overlays={},this.es=new Pa(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new b9(this),this.indexManager=new JK,this.ds=new v9(r=>this.referenceDelegate.Qi(r)),this.M=new M3(e),this._s=new g9(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new m9,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Gi[t.toKey()];return r||(r=new _9(e,this.referenceDelegate),this.Gi[t.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,r){Ve("MemoryPersistence","Starting transaction:",t);const i=new C9(this.es.next());return this.referenceDelegate.ji(),r(i).next(o=>this.referenceDelegate.Wi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}zi(t,e){return ye.or(Object.values(this.Gi).map(r=>()=>r.containsKey(t,e)))}}class C9 extends S3{constructor(t){super(),this.currentSequenceNumber=t}}class $P{constructor(t){this.persistence=t,this.Hi=new GP,this.Ji=null}static Yi(t){return new $P(t)}get Xi(){if(this.Ji)return this.Ji;throw dt()}addReference(t,e,r){return this.Hi.addReference(r,e),this.Xi.delete(r.toString()),ye.resolve()}removeReference(t,e,r){return this.Hi.removeReference(r,e),this.Xi.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(t,e){return this.Xi.add(e.toString()),ye.resolve()}removeTarget(t,e){this.Hi.vi(e.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(o=>this.Xi.add(o.toString()))}).next(()=>r.removeTargetData(t,e))}ji(){this.Ji=new Set}Wi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.Xi,r=>{const i=Xe.fromPath(r);return this.Zi(t,i).next(o=>{o||e.removeEntry(i,kt.min())})}).next(()=>(this.Ji=null,e.apply(t)))}updateLimboDocument(t,e){return this.Zi(t,e).next(r=>{r?this.Xi.delete(e.toString()):this.Xi.add(e.toString())})}Qi(t){return 0}Zi(t,e){return ye.or([()=>ye.resolve(this.Hi.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.zi(t,e)])}}function s6(n,t){return`firestore_clients_${n}_${t}`}function o6(n,t,e){let r=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function zP(n,t){return`firestore_targets_${n}_${t}`}class gA{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static tr(t,e,r){const i=JSON.parse(r);let o,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(o=new Oe(i.error.code,i.error.message))),c?new gA(t,e,i.state,o):(oi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class BC{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static tr(t,e){const r=JSON.parse(e);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Oe(r.error.code,r.error.message))),o?new BC(t,r.state,i):(oi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class mA{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static tr(t,e){const r=JSON.parse(e);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=rA();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=wB(r.activeTargetIds[c]),o=o.add(r.activeTargetIds[c]);return i?new mA(t,o):(oi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class YP{constructor(t,e){this.clientId=t,this.onlineState=e}static tr(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new YP(e.clientId,e.onlineState):(oi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class WP{constructor(){this.activeTargetIds=rA()}nr(t){this.activeTargetIds=this.activeTargetIds.add(t)}sr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}er(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class KP{constructor(t,e,r,i,o){this.window=t,this.Yn=e,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Zr(zt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.hr=s6(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new WP),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,ve.Z)(function*(){const e=yield t.syncEngine.Fs();for(const i of e){if(i===t.ir)continue;const o=t.getItem(s6(t.persistenceKey,i));if(o){const c=mA.tr(i,o);c&&(t.ar=t.ar.insert(c.clientId,c))}}t.yr();const r=t.storage.getItem(t.mr);if(r){const i=t.pr(r);i&&t.Ir(i)}for(const i of t.cr)t.ur(i);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.lr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(t){let e=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Er(t,"pending")}updateMutationState(t,e,r){this.Er(t,e,r),this.Ar(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(zP(this.persistenceKey,t));if(r){const i=BC.tr(t,r);i&&(e=i.state)}}return this.Rr.nr(t),this.yr(),e}removeLocalQueryTarget(t){this.Rr.sr(t),this.yr()}isLocalQueryTarget(t){return this.Rr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(zP(this.persistenceKey,t))}updateQueryState(t,e,r){this.br(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Ar(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Pr(t)}notifyBundleLoaded(t){this.Vr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ve("SharedClientState","READ",t,e),e}setItem(t,e){Ve("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ve("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ur(t){var e=this;const r=t;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void oi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ve.Z)(function*(){if(e.started){if(null!==r.key)if(e.dr.test(r.key)){if(null==r.newValue){const i=e.vr(r.key);return e.Sr(i,null)}{const i=e.Dr(r.key,r.newValue);if(i)return e.Sr(i.clientId,i)}}else if(e._r.test(r.key)){if(null!==r.newValue){const i=e.Cr(r.key,r.newValue);if(i)return e.Nr(i)}}else if(e.wr.test(r.key)){if(null!==r.newValue){const i=e.kr(r.key,r.newValue);if(i)return e.Mr(i)}}else if(r.key===e.mr){if(null!==r.newValue){const i=e.pr(r.newValue);if(i)return e.Ir(i)}}else if(r.key===e.lr){const i=function(o){let c=Pa.A;if(null!=o)try{const h=JSON.parse(o);Lt("number"==typeof h),c=h}catch(h){oi("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Pa.A&&e.sequenceNumberHandler(i)}else if(r.key===e.gr){const i=e.Or(r.newValue);yield Promise.all(i.map(o=>e.syncEngine.Fr(o)))}}else e.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(t,e,r){const i=new gA(this.currentUser,t,e,r),o=o6(this.persistenceKey,this.currentUser,t);this.setItem(o,i.er())}Ar(t){const e=o6(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Pr(t){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:t}))}br(t,e,r){const i=zP(this.persistenceKey,t),o=new BC(t,e,r);this.setItem(i,o.er())}Vr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.gr,e)}vr(t){const e=this.dr.exec(t);return e?e[1]:null}Dr(t,e){const r=this.vr(t);return mA.tr(r,e)}Cr(t,e){const r=this._r.exec(t),i=Number(r[1]);return gA.tr(new ds(void 0!==r[2]?r[2]:null),i,e)}kr(t,e){const r=this.wr.exec(t),i=Number(r[1]);return BC.tr(i,e)}pr(t){return YP.tr(t)}Or(t){return JSON.parse(t)}Nr(t){var e=this;return(0,ve.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.$r(t.batchId,t.state,t.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Mr(t){return this.syncEngine.Br(t.targetId,t.state,t.error)}Sr(t,e){const r=e?this.ar.insert(t,e):this.ar.remove(t),i=this.Tr(this.ar),o=this.Tr(r),c=[],h=[];return o.forEach(g=>{i.has(g)||c.push(g)}),i.forEach(g=>{o.has(g)||h.push(g)}),this.syncEngine.Lr(c,h).then(()=>{this.ar=r})}Ir(t){this.ar.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Tr(t){let e=rA();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class a6{constructor(){this.Ur=new WP,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t){return this.Ur.nr(t),this.qr[t]||"not-current"}updateQueryState(t,e,r){this.qr[t]=e}removeLocalQueryTarget(t){this.Ur.sr(t)}isLocalQueryTarget(t){return this.Ur.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(t){return this.Ur.activeTargetIds.has(t)}start(){return this.Ur=new WP,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class E9{Kr(t){}shutdown(){}}class l6{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(t){this.zr.push(t)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.zr)t(0)}Wr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.zr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const I9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class D9{constructor(t){this.Jr=t.Jr,this.Yr=t.Yr}Xr(t){this.Zr=t}eo(t){this.no=t}onMessage(t){this.so=t}close(){this.Yr()}send(t){this.Jr(t)}io(){this.Zr()}ro(t){this.no(t)}oo(t){this.so(t)}}class T9 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.uo=(t.ssl?"https":"http")+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(t,e,r,i,o){const c=this.ho(t,e);Ve("RestConnection","Sending: ",c,r);const h={};return this.lo(h,i,o),this.fo(t,c,h,r).then(g=>(Ve("RestConnection","Received: ",g),g),g=>{throw hC("RestConnection",`${t} failed with error: `,g,"url: ",c,"request:",r),g})}_o(t,e,r,i,o){return this.co(t,e,r,i,o)}lo(t,e,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+$v,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,o)=>t[o]=i),r&&r.headers.forEach((i,o)=>t[o]=i)}ho(t,e){return`${this.uo}/v1/${e}:${I9[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,r,i){return new Promise((o,c)=>{const h=new I7;h.listenOnce(w7.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case cP.NO_ERROR:const v=h.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(v)),o(v);break;case cP.TIMEOUT:Ve("Connection",'RPC "'+t+'" timed out'),c(new Oe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case cP.HTTP_ERROR:const E=h.getStatus();if(Ve("Connection",'RPC "'+t+'" failed with status:',E,"response text:",h.getResponseText()),E>0){const D=h.getResponseJson().error;if(D&&D.status&&D.message){const k=function(N){const U=N.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(U)>=0?U:ge.UNKNOWN}(D.status);c(new Oe(k,D.message))}else c(new Oe(ge.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Oe(ge.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Ve("Connection",'RPC "'+t+'" completed.')}});const g=JSON.stringify(i);h.send(e,"POST",g,r,15)})}wo(t,e,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=y7(),c=b7(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new E7({})),this.lo(h.initMessageHeaders,e,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");Ve("Connection","Creating WebChannel: "+g,h);const v=o.createWebChannel(g,h);let E=!1,D=!1;const k=new D9({Jr:U=>{D?Ve("Connection","Not sending because WebChannel is closed:",U):(E||(Ve("Connection","Opening WebChannel transport."),v.open(),E=!0),Ve("Connection","WebChannel sending:",U),v.send(U))},Yr:()=>v.close()}),N=(U,X,pe)=>{U.listen(X,Be=>{try{pe(Be)}catch(We){setTimeout(()=>{throw We},0)}})};return N(v,$S.EventType.OPEN,()=>{D||Ve("Connection","WebChannel transport opened.")}),N(v,$S.EventType.CLOSE,()=>{D||(D=!0,Ve("Connection","WebChannel transport closed"),k.ro())}),N(v,$S.EventType.ERROR,U=>{D||(D=!0,hC("Connection","WebChannel transport errored:",U),k.ro(new Oe(ge.UNAVAILABLE,"The operation could not be completed")))}),N(v,$S.EventType.MESSAGE,U=>{var X;if(!D){const pe=U.data[0];Lt(!!pe);const Be=pe,We=Be.error||(null===(X=Be[0])||void 0===X?void 0:X.error);if(We){Ve("Connection","WebChannel received error:",We);const et=We.status;let $e=function(Rt){const cn=li[Rt];if(void 0!==cn)return r3(cn)}(et),xt=We.message;void 0===$e&&($e=ge.INTERNAL,xt="Unknown error status: "+et+" with message "+We.message),D=!0,k.ro(new Oe($e,xt)),v.close()}else Ve("Connection","WebChannel received:",pe),k.oo(pe)}}),N(c,C7.STAT_EVENT,U=>{U.stat===hB.PROXY?Ve("Connection","Detected buffering proxy"):U.stat===hB.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.io()},0),k}}function c6(){return"undefined"!=typeof window?window:null}function _A(){return"undefined"!=typeof document?document:null}function jC(n){return new pK(n,!0)}class QP{constructor(t,e,r=1e3,i=1.5,o=6e4){this.Yn=t,this.timerId=e,this.mo=r,this.yo=i,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,e-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class u6{constructor(t,e,r,i,o,c,h,g){this.Yn=t,this.Vo=r,this.vo=i,this.So=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new QP(t,e)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,ve.Z)(function*(){t.ko()&&(yield t.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(t){this.Uo(),this.stream.send(t)}Bo(){var t=this;return(0,ve.Z)(function*(){if(t.Mo())return t.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(t,e){var r=this;return(0,ve.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==t?r.No.reset():e&&e.code===ge.RESOURCE_EXHAUSTED?(oi(e.toString()),oi("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):e&&e.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=t,yield r.listener.eo(e)})()}Ko(){}auth(){this.state=1;const t=this.Go(this.Do),e=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===e&&this.Qo(r,i)},r=>{t(()=>{const i=new Oe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(t,e){const r=this.Go(this.Do);this.stream=this.Wo(t,e),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var t=this;this.state=5,this.No.Ro((0,ve.Z)(function*(){t.state=0,t.start()}))}jo(t){return Ve("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Go(t){return e=>{this.Yn.enqueueAndForget(()=>this.Do===t?e():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class S9 extends u6{constructor(t,e,r,i,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,c),this.M=o}Wo(t,e){return this.So.wo("Listen",t,e)}onMessage(t){this.No.reset();const e=function _K(n,t){let e;if("targetChange"in t){const r="NO_CHANGE"===(g=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:dt(),i=t.targetChange.targetIds||[],o=function(g,v){return g.N?(Lt(void 0===v||"string"==typeof v),Ci.fromBase64String(v||"")):(Lt(void 0===v||v instanceof Uint8Array),Ci.fromUint8Array(v||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(g){const v=void 0===g.code?ge.UNKNOWN:r3(g.code);return new Oe(v,g.message||"")}(c);e=new o3(r,i,o,h||null)}else if("documentChange"in t){const r=t.documentChange,i=Tu(n,r.document.name),o=ji(r.document.updateTime),c=new Os({mapValue:{fields:r.document.fields}}),h=tr.newFoundDocument(i,o,c);e=new iA(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){const r=t.documentDelete,i=Tu(n,r.document),o=r.readTime?ji(r.readTime):kt.min(),c=tr.newNoDocument(i,o);e=new iA([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const r=t.documentRemove,i=Tu(n,r.document);e=new iA([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return dt();{const r=t.filter,o=new sK(r.count||0);e=new s3(r.targetId,o)}}var g;return e}(this.M,t),r=function(i){if(!("targetChange"in i))return kt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?kt.min():o.readTime?ji(o.readTime):kt.min()}(t);return this.listener.zo(e,r)}Ho(t){const e={};e.database=kC(this.M),e.addTarget=function(i,o){let c;const h=o.target;return c=JS(h)?{documents:m3(i,h)}:{query:_3(i,h)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?c.resumeToken=u3(i,o.resumeToken):o.snapshotVersion.compareTo(kt.min())>0&&(c.readTime=xC(i,o.snapshotVersion.toTimestamp())),c}(this.M,t);const r=function yK(n,t){const e=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);r&&(e.labels=r),this.Lo(e)}Jo(t){const e={};e.database=kC(this.M),e.removeTarget=t,this.Lo(e)}}class A9 extends u6{constructor(t,e,r,i,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,c),this.M=o,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(t,e){return this.So.wo("Write",t,e)}onMessage(t){if(Lt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Yo){this.No.reset();const e=function vK(n,t){return n&&n.length>0?(Lt(void 0!==t),n.map(e=>function(r,i){let o=ji(r.updateTime?r.updateTime:i);return o.isEqual(kt.min())&&(o=ji(i)),new nK(o,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),r=ji(t.commitTime);return this.listener.tu(r,e)}return Lt(!t.writeResults||0===t.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const t={};t.database=kC(this.M),this.Lo(t)}Zo(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>RC(this.M,r))};this.Lo(e)}}class x9 extends class{}{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Oe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}co(t,e,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.So.co(t,e,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(ge.UNKNOWN,i.toString())})}_o(t,e,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.So._o(t,e,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(ge.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class M9{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(t){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.fu(),this.ru=0,"Online"===t&&(this.uu=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}hu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(oi(e),this.uu=!1):Ve("OnlineStateTracker",e)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class k9{constructor(t,e,r,i,o){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=o,this.gu.Kr(h=>{r.enqueueAndForget((0,ve.Z)(function*(){var g;jf(c)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,ve.Z)(function*(v){const E=it(v);E.wu.add(4),yield cy(E),E.yu.set("Unknown"),E.wu.delete(4),yield HC(E)}),function(v){return g.apply(this,arguments)})(c))}))}),this.yu=new M9(r,i)}}function HC(n){return JP.apply(this,arguments)}function JP(){return JP=(0,ve.Z)(function*(n){if(jf(n))for(const t of n.mu)yield t(!0)}),JP.apply(this,arguments)}function cy(n){return XP.apply(this,arguments)}function XP(){return XP=(0,ve.Z)(function*(n){for(const t of n.mu)yield t(!1)}),XP.apply(this,arguments)}function vA(n,t){const e=it(n);e._u.has(t.targetId)||(e._u.set(t.targetId,t),nO(e)?tO(e):dy(e).Mo()&&eO(e,t))}function qC(n,t){const e=it(n),r=dy(e);e._u.delete(t),r.Mo()&&d6(e,t),0===e._u.size&&(r.Mo()?r.$o():jf(e)&&e.yu.set("Unknown"))}function eO(n,t){n.pu.Z(t.targetId),dy(n).Ho(t)}function d6(n,t){n.pu.Z(t),dy(n).Jo(t)}function tO(n){n.pu=new dK({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n._u.get(t)||null}),dy(n).start(),n.yu.au()}function nO(n){return jf(n)&&!dy(n).ko()&&n._u.size>0}function jf(n){return 0===it(n).wu.size}function h6(n){n.pu=void 0}function R9(n){return rO.apply(this,arguments)}function rO(){return rO=(0,ve.Z)(function*(n){n._u.forEach((t,e)=>{eO(n,t)})}),rO.apply(this,arguments)}function P9(n,t){return iO.apply(this,arguments)}function iO(){return iO=(0,ve.Z)(function*(n,t){h6(n),nO(n)?(n.yu.lu(t),tO(n)):n.yu.set("Unknown")}),iO.apply(this,arguments)}function O9(n,t,e){return sO.apply(this,arguments)}function sO(){return sO=(0,ve.Z)(function*(n,t,e){if(n.yu.set("Online"),t instanceof o3&&2===t.state&&t.cause)try{yield(r=(0,ve.Z)(function*(i,o){const c=o.cause;for(const h of o.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i._u.delete(h),i.pu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(n,t)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield yA(n,r)}else if(t instanceof iA?n.pu.ut(t):t instanceof s3?n.pu._t(t):n.pu.ht(t),!e.isEqual(kt.min()))try{const r=yield X3(n.localStore);e.compareTo(r)>=0&&(yield function(i,o){const c=i.pu.yt(o);return c.targetChanges.forEach((h,g)=>{if(h.resumeToken.approximateByteSize()>0){const v=i._u.get(g);v&&i._u.set(g,v.withResumeToken(h.resumeToken,o))}}),c.targetMismatches.forEach(h=>{const g=i._u.get(h);if(!g)return;i._u.set(h,g.withResumeToken(Ci.EMPTY_BYTE_STRING,g.snapshotVersion)),d6(i,h);const v=new Uf(g.target,h,1,g.sequenceNumber);eO(i,v)}),i.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield yA(n,r)}var r}),sO.apply(this,arguments)}function yA(n,t,e){return oO.apply(this,arguments)}function oO(){return oO=(0,ve.Z)(function*(n,t,e){if(!Qg(t))throw t;n.wu.add(1),yield cy(n),n.yu.set("Offline"),e||(e=()=>X3(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield e(),n.wu.delete(1),yield HC(n)}))}),oO.apply(this,arguments)}function f6(n,t){return t().catch(e=>yA(n,e,t))}function uy(n){return aO.apply(this,arguments)}function aO(){return aO=(0,ve.Z)(function*(n){const t=it(n),e=Hf(t);let r=t.du.length>0?t.du[t.du.length-1].batchId:-1;for(;N9(t);)try{const i=yield h9(t.localStore,r);if(null===i){0===t.du.length&&e.$o();break}r=i.batchId,F9(t,i)}catch(i){yield yA(t,i)}p6(t)&&g6(t)}),aO.apply(this,arguments)}function N9(n){return jf(n)&&n.du.length<10}function F9(n,t){n.du.push(t);const e=Hf(n);e.Mo()&&e.Xo&&e.Zo(t.mutations)}function p6(n){return jf(n)&&!Hf(n).ko()&&n.du.length>0}function g6(n){Hf(n).start()}function L9(n){return lO.apply(this,arguments)}function lO(){return lO=(0,ve.Z)(function*(n){Hf(n).nu()}),lO.apply(this,arguments)}function U9(n){return cO.apply(this,arguments)}function cO(){return cO=(0,ve.Z)(function*(n){const t=Hf(n);for(const e of n.du)t.Zo(e.mutations)}),cO.apply(this,arguments)}function V9(n,t,e){return uO.apply(this,arguments)}function uO(){return uO=(0,ve.Z)(function*(n,t,e){const r=n.du.shift(),i=xP.from(r,t,e);yield f6(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield uy(n)}),uO.apply(this,arguments)}function B9(n,t){return dO.apply(this,arguments)}function dO(){return dO=(0,ve.Z)(function*(n,t){var e;t&&Hf(n).Xo&&(yield(e=(0,ve.Z)(function*(r,i){if(n3(o=i.code)&&o!==ge.ABORTED){const c=r.du.shift();Hf(r).Fo(),yield f6(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield uy(r)}var o}),function(r,i){return e.apply(this,arguments)})(n,t)),p6(n)&&g6(n)}),dO.apply(this,arguments)}function m6(n,t){return hO.apply(this,arguments)}function hO(){return hO=(0,ve.Z)(function*(n,t){const e=it(n);e.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=jf(e);e.wu.add(3),yield cy(e),r&&e.yu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.wu.delete(3),yield HC(e)}),hO.apply(this,arguments)}function fO(n,t){return pO.apply(this,arguments)}function pO(){return pO=(0,ve.Z)(function*(n,t){const e=it(n);t?(e.wu.delete(2),yield HC(e)):t||(e.wu.add(2),yield cy(e),e.yu.set("Unknown"))}),pO.apply(this,arguments)}function dy(n){return n.Iu||(n.Iu=function(t,e,r){const i=it(t);return i.iu(),new S9(e,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:R9.bind(null,n),eo:P9.bind(null,n),zo:O9.bind(null,n)}),n.mu.push(function(){var t=(0,ve.Z)(function*(e){e?(n.Iu.Fo(),nO(n)?tO(n):n.yu.set("Unknown")):(yield n.Iu.stop(),h6(n))});return function(e){return t.apply(this,arguments)}}())),n.Iu}function Hf(n){return n.Tu||(n.Tu=function(t,e,r){const i=it(t);return i.iu(),new A9(e,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:L9.bind(null,n),eo:B9.bind(null,n),eu:U9.bind(null,n),tu:V9.bind(null,n)}),n.mu.push(function(){var t=(0,ve.Z)(function*(e){e?(n.Tu.Fo(),yield uy(n)):(yield n.Tu.stop(),n.du.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(e){return t.apply(this,arguments)}}())),n.Tu}class gO{constructor(t,e,r,i,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,r,i,o){const c=Date.now()+r,h=new gO(t,e,c,i,o);return h.start(r),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(ge.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hy(n,t){if(oi("AsyncQueue",`${t}: ${n}`),Qg(n))return new Oe(ge.UNAVAILABLE,`${t}: ${n}`);throw n}class fy{constructor(t){this.comparator=t?(e,r)=>t(e,r)||Xe.comparator(e.key,r.key):(e,r)=>Xe.comparator(e.key,r.key),this.keyedMap=EP(),this.sortedSet=new Zr(this.comparator)}static emptySet(t){return new fy(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof fy)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const r=new fy;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class _6{constructor(){this.Eu=new Zr(Xe.comparator)}track(t){const e=t.doc.key,r=this.Eu.get(e);r?0!==t.type&&3===r.type?this.Eu=this.Eu.insert(e,t):3===t.type&&1!==r.type?this.Eu=this.Eu.insert(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.Eu=this.Eu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.Eu=this.Eu.remove(e):1===t.type&&2===r.type?this.Eu=this.Eu.insert(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):dt():this.Eu=this.Eu.insert(e,t)}Au(){const t=[];return this.Eu.inorderTraversal((e,r)=>{t.push(r)}),t}}class py{constructor(t,e,r,i,o,c,h,g){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=g}static fromInitialDocuments(t,e,r,i){const o=[];return e.forEach(c=>{o.push({type:0,doc:c})}),new py(t,e,fy.emptySet(e),o,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&CC(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}class j9{constructor(){this.Ru=void 0,this.listeners=[]}}class H9{constructor(){this.queries=new Lf(t=>BB(t),CC),this.onlineState="Unknown",this.bu=new Set}}function mO(n,t){return _O.apply(this,arguments)}function _O(){return _O=(0,ve.Z)(function*(n,t){const e=it(n),r=t.query;let i=!1,o=e.queries.get(r);if(o||(i=!0,o=new j9),i)try{o.Ru=yield e.onListen(r)}catch(c){const h=hy(c,`Initialization of query '${yP(t.query)}' failed`);return void t.onError(h)}e.queries.set(r,o),o.listeners.push(t),t.Pu(e.onlineState),o.Ru&&t.Vu(o.Ru)&&bO(e)}),_O.apply(this,arguments)}function vO(n,t){return yO.apply(this,arguments)}function yO(){return yO=(0,ve.Z)(function*(n,t){const e=it(n),r=t.query;let i=!1;const o=e.queries.get(r);if(o){const c=o.listeners.indexOf(t);c>=0&&(o.listeners.splice(c,1),i=0===o.listeners.length)}if(i)return e.queries.delete(r),e.onUnlisten(r)}),yO.apply(this,arguments)}function q9(n,t){const e=it(n);let r=!1;for(const i of t){const c=e.queries.get(i.query);if(c){for(const h of c.listeners)h.Vu(i)&&(r=!0);c.Ru=i}}r&&bO(e)}function Z9(n,t,e){const r=it(n),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(e);r.queries.delete(t)}function bO(n){n.bu.forEach(t=>{t.next()})}class wO{constructor(t,e,r){this.query=t,this.vu=e,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)3!==i.type&&r.push(i);t=new py(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.Su?this.Cu(t)&&(this.vu.next(t),e=!0):this.xu(t,this.onlineState)&&(this.Nu(t),e=!0),this.Du=t,e}onError(t){this.vu.error(t)}Pu(t){this.onlineState=t;let e=!1;return this.Du&&!this.Su&&this.xu(this.Du,t)&&(this.Nu(this.Du),e=!0),e}xu(t,e){return!t.fromCache||!(this.options.ku&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}Cu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(t){t=py.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Su=!0,this.vu.next(t)}}class G9{constructor(t,e){this.payload=t,this.byteLength=e}Mu(){return"metadata"in this.payload}}class v6{constructor(t){this.M=t}wi(t){return Tu(this.M,t)}mi(t){return t.metadata.exists?g3(this.M,t.document,!1):tr.newNoDocument(this.wi(t.metadata.name),this.gi(t.metadata.readTime))}gi(t){return ji(t)}}class $9{constructor(t,e,r){this.Ou=t,this.localStore=e,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=y6(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const r=mn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,r=new v6(this.M);for(const i of t)if(i.metadata.queries){const o=r.wi(i.metadata.name);for(const c of i.metadata.queries){const h=(e.get(c)||Rn()).add(o);e.set(c,h)}}return e}complete(){var t=this;return(0,ve.Z)(function*(){const e=yield function f9(n,t,e,r){return qP.apply(this,arguments)}(t.localStore,new v6(t.M),t.documents,t.Ou.id),r=t.$u(t.documents);for(const i of t.queries)yield p9(t.localStore,i,r.get(i.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function y6(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class b6{constructor(t){this.key=t}}class w6{constructor(t){this.key=t}}class C6{constructor(t,e){this.query=t,this.Uu=e,this.qu=null,this.current=!1,this.Ku=Rn(),this.mutatedKeys=Rn(),this.Gu=HB(t),this.Qu=new fy(this.Gu)}get ju(){return this.Uu}Wu(t,e){const r=e?e.zu:new _6,i=e?e.Qu:this.Qu;let o=e?e.mutatedKeys:this.mutatedKeys,c=i,h=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((E,D)=>{const k=i.get(E),N=bP(this.query,D)?D:null,U=!!k&&this.mutatedKeys.has(k.key),X=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let pe=!1;k&&N?k.data.isEqual(N.data)?U!==X&&(r.track({type:3,doc:N}),pe=!0):this.Hu(k,N)||(r.track({type:2,doc:N}),pe=!0,(g&&this.Gu(N,g)>0||v&&this.Gu(N,v)<0)&&(h=!0)):!k&&N?(r.track({type:0,doc:N}),pe=!0):k&&!N&&(r.track({type:1,doc:k}),pe=!0,(g||v)&&(h=!0)),pe&&(N?(c=c.add(N),o=X?o.add(E):o.delete(E)):(c=c.delete(E),o=o.delete(E)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const E="F"===this.query.limitType?c.last():c.first();c=c.delete(E.key),o=o.delete(E.key),r.track({type:1,doc:E})}return{Qu:c,zu:r,ii:h,mutatedKeys:o}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r){const i=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const o=t.zu.Au();o.sort((v,E)=>function(D,k){const N=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return N(D)-N(k)}(v.type,E.type)||this.Gu(v.doc,E.doc)),this.Ju(r);const c=e?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,g=h!==this.qu;return this.qu=h,0!==o.length||g?{snapshot:new py(this.query,t.Qu,i,o,t.mutatedKeys,0===h,g,!1),Xu:c}:{Xu:c}}Pu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new _6,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=Rn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const e=[];return t.forEach(r=>{this.Ku.has(r)||e.push(new w6(r))}),this.Ku.forEach(r=>{t.has(r)||e.push(new b6(r))}),e}ta(t){this.Uu=t._i,this.Ku=Rn();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ea(){return py.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class z9{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class Y9{constructor(t){this.key=t,this.na=!1}}class W9{constructor(t,e,r,i,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Lf(h=>BB(h),CC),this.ra=new Map,this.oa=new Set,this.ua=new Zr(Xe.comparator),this.aa=new Map,this.ca=new GP,this.ha={},this.la=new Map,this.fa=im.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function K9(n,t){return CO.apply(this,arguments)}function CO(){return CO=(0,ve.Z)(function*(n,t){const e=GO(n);let r,i;const o=e.ia.get(t);if(o)r=o.targetId,e.sharedClientState.addLocalQueryTarget(r),i=o.view.ea();else{const c=yield ay(e.localStore,bl(t));e.isPrimaryClient&&vA(e.remoteStore,c);const h=e.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield EO(e,t,r,"current"===h)}return i}),CO.apply(this,arguments)}function EO(n,t,e,r){return IO.apply(this,arguments)}function IO(){return IO=(0,ve.Z)(function*(n,t,e,r){n._a=(E,D,k)=>{return(N=(0,ve.Z)(function*(U,X,pe,Be){let We=X.view.Wu(pe);We.ii&&(We=yield pA(U.localStore,X.query,!1).then(({documents:xt})=>X.view.Wu(xt,We)));const et=Be&&Be.targetChanges.get(X.targetId),$e=X.view.applyChanges(We,U.isPrimaryClient,et);return OO(U,X.targetId,$e.Xu),$e.snapshot}),function(U,X,pe,Be){return N.apply(this,arguments)})(n,E,D,k);var N};const i=yield pA(n.localStore,t,!0),o=new C6(t,i._i),c=o.Wu(i.documents),h=AC.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==n.onlineState),g=o.applyChanges(c,n.isPrimaryClient,h);OO(n,e,g.Xu);const v=new z9(t,e,o);return n.ia.set(t,v),n.ra.has(e)?n.ra.get(e).push(t):n.ra.set(e,[t]),g.snapshot}),IO.apply(this,arguments)}function Q9(n,t){return DO.apply(this,arguments)}function DO(){return DO=(0,ve.Z)(function*(n,t){const e=it(n),r=e.ia.get(t),i=e.ra.get(r.targetId);if(i.length>1)return e.ra.set(r.targetId,i.filter(o=>!CC(o,t))),void e.ia.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ly(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),qC(e.remoteStore,r.targetId),gy(e,r.targetId)}).catch(sm))):(gy(e,r.targetId),yield ly(e.localStore,r.targetId,!0))}),DO.apply(this,arguments)}function TO(){return TO=(0,ve.Z)(function*(n,t,e){const r=$O(n);try{const i=yield function(o,c){const h=it(o),g=qr.now(),v=c.reduce((D,k)=>D.add(k.key),Rn());let E;return h.persistence.runTransaction("Locally write mutations","readwrite",D=>h.fi.Ks(D,v).next(k=>{E=k;const N=[];for(const U of c){const X=iK(U,E.get(U.key));null!=X&&N.push(new Kg(U.key,X,AB(X.value.mapValue),ai.exists(!0)))}return h.Bs.addMutationBatch(D,g,N,c)})).then(D=>(D.applyToLocalDocumentSet(E),{batchId:D.batchId,changes:E}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,h){let g=o.ha[o.currentUser.toKey()];g||(g=new Zr(zt)),g=g.insert(c,h),o.ha[o.currentUser.toKey()]=g}(r,i.batchId,e),yield Zd(r,i.changes),yield uy(r.remoteStore)}catch(i){const o=hy(i,"Failed to persist write");e.reject(o)}}),TO.apply(this,arguments)}function E6(n,t){return SO.apply(this,arguments)}function SO(){return SO=(0,ve.Z)(function*(n,t){const e=it(n);try{const r=yield d9(e.localStore,t);t.targetChanges.forEach((i,o)=>{const c=e.aa.get(o);c&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?Lt(c.na):i.removedDocuments.size>0&&(Lt(c.na),c.na=!1))}),yield Zd(e,r,t)}catch(r){yield sm(r)}}),SO.apply(this,arguments)}function I6(n,t,e){const r=it(n);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const i=[];r.ia.forEach((o,c)=>{const h=c.view.Pu(t);h.snapshot&&i.push(h.snapshot)}),function(o,c){const h=it(o);h.onlineState=c;let g=!1;h.queries.forEach((v,E)=>{for(const D of E.listeners)D.Pu(c)&&(g=!0)}),g&&bO(h)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function X9(n,t,e){return AO.apply(this,arguments)}function AO(){return AO=(0,ve.Z)(function*(n,t,e){const r=it(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.aa.get(t),o=i&&i.key;if(o){let c=new Zr(Xe.comparator);c=c.insert(o,tr.newNoDocument(o,kt.min()));const h=Rn().add(o),g=new SC(kt.min(),new Map,new Wn(zt),c,h);yield E6(r,g),r.ua=r.ua.remove(o),r.aa.delete(t),NO(r)}else yield ly(r.localStore,t,!1).then(()=>gy(r,t,e)).catch(sm)}),AO.apply(this,arguments)}function eQ(n,t){return xO.apply(this,arguments)}function xO(){return xO=(0,ve.Z)(function*(n,t){const e=it(n),r=t.batch.batchId;try{const i=yield u9(e.localStore,t);PO(e,r,null),RO(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield Zd(e,i)}catch(i){yield sm(i)}}),xO.apply(this,arguments)}function tQ(n,t,e){return MO.apply(this,arguments)}function MO(){return MO=(0,ve.Z)(function*(n,t,e){const r=it(n);try{const i=yield function(o,c){const h=it(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return h.Bs.lookupMutationBatch(g,c).next(E=>(Lt(null!==E),v=E.keys(),h.Bs.removeMutationBatch(g,E))).next(()=>h.Bs.performConsistencyCheck(g)).next(()=>h.fi.Ks(g,v))})}(r.localStore,t);PO(r,t,e),RO(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),yield Zd(r,i)}catch(i){yield sm(i)}}),MO.apply(this,arguments)}function kO(){return kO=(0,ve.Z)(function*(n,t){const e=it(n);jf(e.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const c=it(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.Bs.getHighestUnacknowledgedBatchId(h))}(e.localStore);if(-1===r)return void t.resolve();const i=e.la.get(r)||[];i.push(t),e.la.set(r,i)}catch(r){const i=hy(r,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}}),kO.apply(this,arguments)}function RO(n,t){(n.la.get(t)||[]).forEach(e=>{e.resolve()}),n.la.delete(t)}function PO(n,t,e){const r=it(n);let i=r.ha[r.currentUser.toKey()];if(i){const o=i.get(t);o&&(e?o.reject(e):o.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function gy(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.ra.get(t))n.ia.delete(r),e&&n.sa.wa(r,e);n.ra.delete(t),n.isPrimaryClient&&n.ca.vi(t).forEach(r=>{n.ca.containsKey(r)||D6(n,r)})}function D6(n,t){n.oa.delete(t.path.canonicalString());const e=n.ua.get(t);null!==e&&(qC(n.remoteStore,e),n.ua=n.ua.remove(t),n.aa.delete(e),NO(n))}function OO(n,t,e){for(const r of e)r instanceof b6?(n.ca.addReference(r.key,t),rQ(n,r)):r instanceof w6?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,t),n.ca.containsKey(r.key)||D6(n,r.key)):dt()}function rQ(n,t){const e=t.key,r=e.path.canonicalString();n.ua.get(e)||n.oa.has(r)||(Ve("SyncEngine","New document in limbo: "+e),n.oa.add(r),NO(n))}function NO(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const t=n.oa.values().next().value;n.oa.delete(t);const e=new Xe(mn.fromString(t)),r=n.fa.next();n.aa.set(r,new Y9(e)),n.ua=n.ua.insert(e,r),vA(n.remoteStore,new Uf(bl(Jv(e.path)),r,2,Pa.A))}}function Zd(n,t,e){return FO.apply(this,arguments)}function FO(){return FO=(0,ve.Z)(function*(n,t,e){const r=it(n),i=[],o=[],c=[];var h;r.ia.isEmpty()||(r.ia.forEach((h,g)=>{c.push(r._a(g,t,e).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,v.fromCache?"not-current":"current"),i.push(v);const E=BP.Ys(g.targetId,v);o.push(E)}}))}),yield Promise.all(c),r.sa.zo(i),yield(h=(0,ve.Z)(function*(g,v){const E=it(g);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ye.forEach(v,k=>ye.forEach(k.Hs,N=>E.persistence.referenceDelegate.addReference(D,k.targetId,N)).next(()=>ye.forEach(k.Js,N=>E.persistence.referenceDelegate.removeReference(D,k.targetId,N)))))}catch(D){if(!Qg(D))throw D;Ve("LocalStore","Failed to update sequence numbers: "+D)}for(const D of v){const k=D.targetId;if(!D.fromCache){const N=E.ui.get(k),X=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);E.ui=E.ui.insert(k,X)}}}),function(g,v){return h.apply(this,arguments)})(r.localStore,o))}),FO.apply(this,arguments)}function iQ(n,t){return LO.apply(this,arguments)}function LO(){return LO=(0,ve.Z)(function*(n,t){const e=it(n);if(!e.currentUser.isEqual(t)){Ve("SyncEngine","User change. New user:",t.toKey());const r=yield J3(e.localStore,t);e.currentUser=t,(i=e).la.forEach(c=>{c.forEach(h=>{h.reject(new Oe(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield Zd(e,r.di)}var i}),LO.apply(this,arguments)}function sQ(n,t){const e=it(n),r=e.aa.get(t);if(r&&r.na)return Rn().add(r.key);{let i=Rn();const o=e.ra.get(t);if(!o)return i;for(const c of o){const h=e.ia.get(c);i=i.unionWith(h.view.ju)}return i}}function oQ(n,t){return UO.apply(this,arguments)}function UO(){return UO=(0,ve.Z)(function*(n,t){const e=it(n),r=yield pA(e.localStore,t.query,!0),i=t.view.ta(r);return e.isPrimaryClient&&OO(e,t.targetId,i.Xu),i}),UO.apply(this,arguments)}function aQ(n,t){return VO.apply(this,arguments)}function VO(){return VO=(0,ve.Z)(function*(n,t){const e=it(n);return n6(e.localStore,t).then(r=>Zd(e,r))}),VO.apply(this,arguments)}function lQ(n,t,e,r){return BO.apply(this,arguments)}function BO(){return BO=(0,ve.Z)(function*(n,t,e,r){const i=it(n),o=yield function(c,h){const g=it(c),v=it(g.Bs);return g.persistence.runTransaction("Lookup mutation documents","readonly",E=>v.fn(E,h).next(D=>D?g.fi.Ks(E,D):ye.resolve(null)))}(i.localStore,t);var h;null!==o?("pending"===e?yield uy(i.remoteStore):"acknowledged"===e||"rejected"===e?(PO(i,t,r||null),RO(i,t),h=t,it(it(i.localStore).Bs)._n(h)):dt(),yield Zd(i,o)):Ve("SyncEngine","Cannot apply mutation batch with id: "+t)}),BO.apply(this,arguments)}function jO(){return jO=(0,ve.Z)(function*(n,t){const e=it(n);if(GO(e),$O(e),!0===t&&!0!==e.da){const r=e.sharedClientState.getAllActiveQueryTargets(),i=yield T6(e,r.toArray());e.da=!0,yield fO(e.remoteStore,!0);for(const o of i)vA(e.remoteStore,o)}else if(!1===t&&!1!==e.da){const r=[];let i=Promise.resolve();e.ra.forEach((o,c)=>{e.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(gy(e,c),ly(e.localStore,c,!0))),qC(e.remoteStore,c)}),yield i,yield T6(e,r),function(o){const c=it(o);c.aa.forEach((h,g)=>{qC(c.remoteStore,g)}),c.ca.Si(),c.aa=new Map,c.ua=new Zr(Xe.comparator)}(e),e.da=!1,yield fO(e.remoteStore,!1)}}),jO.apply(this,arguments)}function T6(n,t,e){return HO.apply(this,arguments)}function HO(){return HO=(0,ve.Z)(function*(n,t,e){const r=it(n),i=[],o=[];for(const c of t){let h;const g=r.ra.get(c);if(g&&0!==g.length){h=yield ay(r.localStore,bl(g[0]));for(const v of g){const E=r.ia.get(v),D=yield oQ(r,E);D.snapshot&&o.push(D.snapshot)}}else{const v=yield t6(r.localStore,c);h=yield ay(r.localStore,v),yield EO(r,S6(v),c,!1)}i.push(h)}return r.sa.zo(o),i}),HO.apply(this,arguments)}function S6(n){return UB(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function uQ(n){const t=it(n);return it(it(t.localStore).persistence).Fs()}function dQ(n,t,e,r){return qO.apply(this,arguments)}function qO(){return qO=(0,ve.Z)(function*(n,t,e,r){const i=it(n);if(i.da)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const o=i.ra.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{const c=yield n6(i.localStore,jB(o[0])),h=SC.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield Zd(i,c,h);break}case"rejected":yield ly(i.localStore,t,!0),gy(i,t,r);break;default:dt()}}),qO.apply(this,arguments)}function hQ(n,t,e){return ZO.apply(this,arguments)}function ZO(){return ZO=(0,ve.Z)(function*(n,t,e){const r=GO(n);if(r.da){for(const i of t){if(r.ra.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const o=yield t6(r.localStore,i),c=yield ay(r.localStore,o);yield EO(r,S6(o),c.targetId,!1),vA(r.remoteStore,c)}for(const i of e)r.ra.has(i)&&(yield ly(r.localStore,i,!1).then(()=>{qC(r.remoteStore,i),gy(r,i)}).catch(sm))}}),ZO.apply(this,arguments)}function GO(n){const t=it(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=E6.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sQ.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=X9.bind(null,t),t.sa.zo=q9.bind(null,t.eventManager),t.sa.wa=Z9.bind(null,t.eventManager),t}function $O(n){const t=it(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=eQ.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tQ.bind(null,t),t}class A6{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,ve.Z)(function*(){e.M=jC(t.databaseInfo.databaseId),e.sharedClientState=e.ga(t),e.persistence=e.ya(t),yield e.persistence.start(),e.gcScheduler=e.pa(t),e.localStore=e.Ia(t)})()}pa(t){return null}Ia(t){return Q3(this.persistence,new K3,t.initialUser,this.M)}ya(t){return new w9($P.Yi,this.M)}ga(t){return new a6}terminate(){var t=this;return(0,ve.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class x6 extends A6{constructor(t,e,r){super(),this.Ta=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield e().call(r,t),yield r.Ta.initialize(r,t),yield $O(r.Ta.syncEngine),yield uy(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(t){return Q3(this.persistence,new K3,t.initialUser,this.M)}pa(t){return new n9(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}ya(t){const e=VP(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ko.withCacheSize(this.cacheSizeBytes):Ko.DEFAULT;return new UP(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,c6(),_A(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(t){return new a6}}class pQ extends x6{constructor(t,e){super(t,e,!1),this.Ta=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield e().call(r,t);const i=r.Ta.syncEngine;r.sharedClientState instanceof KP&&(r.sharedClientState.syncEngine={$r:lQ.bind(null,i),Br:dQ.bind(null,i),Lr:hQ.bind(null,i),Fs:uQ.bind(null,i),Fr:aQ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var o=(0,ve.Z)(function*(c){yield function cQ(n,t){return jO.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return o.apply(this,arguments)}}())})()}ga(t){const e=c6();if(!KP.vt(e))throw new Oe(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=VP(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new KP(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class zO{initialize(t,e){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>I6(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=iQ.bind(null,r.syncEngine),yield fO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(t){return new H9}createDatastore(t){const e=jC(t.databaseInfo.databaseId),r=new T9(t.databaseInfo);return new x9(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return e=this.localStore,r=this.datastore,i=t.asyncQueue,o=h=>I6(this.syncEngine,h,0),c=l6.vt()?new l6:new E9,new k9(e,r,i,o,c);var e,r,i,o,c}createSyncEngine(t,e){return function(r,i,o,c,h,g,v){const E=new W9(r,i,o,c,h,g);return v&&(E.da=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,ve.Z)(function*(e){const r=it(e);Ve("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield cy(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function M6(n,t=10240){let e=0;return{read:()=>(0,ve.Z)(function*(){if(e<n.byteLength){const r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class bA{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ea(this.observer.next,t)}error(t){this.observer.error?this.Ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Aa(){this.muted=!0}Ea(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class gQ{constructor(t,e){this.Ra=t,this.M=e,this.metadata=new Bi,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var t=this;return(0,ve.Z)(function*(){return t.metadata.promise})()}ma(){var t=this;return(0,ve.Z)(function*(){return yield t.getMetadata(),t.Pa()})()}Pa(){var t=this;return(0,ve.Z)(function*(){const e=yield t.Va();if(null===e)return null;const r=t.ba.decode(e),i=Number(r);isNaN(i)&&t.va(`length string (${r}) is not valid number`);const o=yield t.Sa(i);return new G9(JSON.parse(o),e.length+i)})()}Da(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Va(){var t=this;return(0,ve.Z)(function*(){for(;t.Da()<0&&!(yield t.Ca()););if(0===t.buffer.length)return null;const e=t.Da();e<0&&t.va("Reached the end of bundle when a length string is expected.");const r=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),r})()}Sa(t){var e=this;return(0,ve.Z)(function*(){for(;e.buffer.length<t;)(yield e.Ca())&&e.va("Reached the end of bundle when more is expected.");const r=e.ba.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),r})()}va(t){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${t}`)}Ca(){var t=this;return(0,ve.Z)(function*(){const e=yield t.Ra.read();if(!e.done){const r=new Uint8Array(t.buffer.length+e.value.length);r.set(t.buffer),r.set(e.value,t.buffer.length),t.buffer=r}return e.done})()}}class mQ{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Oe(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(o,c){const h=it(o),g=kC(h.M)+"/documents",v={documents:c.map(N=>MC(h.M,N))},E=yield h._o("BatchGetDocuments",g,v),D=new Map;E.forEach(N=>{const U=function mK(n,t){return"found"in t?function(e,r){Lt(!!r.found);const i=Tu(e,r.found.name),o=ji(r.found.updateTime),c=new Os({mapValue:{fields:r.found.fields}});return tr.newFoundDocument(i,o,c)}(n,t):"missing"in t?function(e,r){Lt(!!r.missing),Lt(!!r.readTime);const i=Tu(e,r.missing),o=ji(r.readTime);return tr.newNoDocument(i,o)}(n,t):dt()}(h.M,N);D.set(U.key.toString(),U)});const k=[];return c.forEach(N=>{const U=D.get(N.toString());Lt(!!U),k.push(U)}),k}),function(o,c){return i.apply(this,arguments)})(e.datastore,t);var i;return r.forEach(i=>e.recordVersion(i)),r})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new DC(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var r;t.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,i)=>{const o=Xe.fromPath(i);t.mutations.push(new CP(o,t.precondition(o)))}),yield(r=(0,ve.Z)(function*(i,o){const c=it(i),h=kC(c.M)+"/documents",g={writes:o.map(v=>RC(c.M,v))};yield c.co("Commit",h,g)}),function(i,o){return r.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw dt();e=kt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new Oe(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ai.updateTime(e):ai.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(kt.min()))throw new Oe(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ai.updateTime(e)}return ai.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class _Q{constructor(t,e,r,i,o){this.asyncQueue=t,this.datastore=e,this.options=r,this.updateFunction=i,this.deferred=o,this.xa=r.maxAttempts,this.No=new QP(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var t=this;this.No.Ro((0,ve.Z)(function*(){const e=new mQ(t.datastore),r=t.ka(e);r&&r.then(i=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(i)}).catch(o=>{t.Ma(o)}))}).catch(i=>{t.Ma(i)})}))}ka(t){try{const e=this.updateFunction(t);return!gC(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ma(t){this.xa>0&&this.Oa(t)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(t)}Oa(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!n3(e)}return!1}}class vQ{constructor(t,e,r,i){var o=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=ds.UNAUTHENTICATED,this.clientId=mB.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ve.Z)(function*(h){Ve("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,ve.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=hy(r,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}function k6(n,t){return YO.apply(this,arguments)}function YO(){return YO=(0,ve.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(o){r.isEqual(o)||(yield J3(t.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),YO.apply(this,arguments)}function R6(n,t){return WO.apply(this,arguments)}function WO(){return WO=(0,ve.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield KO(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield t.initialize(e,r),n.setCredentialChangeListener(i=>m6(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>m6(t.remoteStore,o)),n.onlineComponents=t}),WO.apply(this,arguments)}function KO(n){return QO.apply(this,arguments)}function QO(){return QO=(0,ve.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield k6(n,new A6)),n.offlineComponents}),QO.apply(this,arguments)}function wA(n){return JO.apply(this,arguments)}function JO(){return JO=(0,ve.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield R6(n,new zO)),n.onlineComponents}),JO.apply(this,arguments)}function P6(n){return KO(n).then(t=>t.persistence)}function XO(n){return KO(n).then(t=>t.localStore)}function O6(n){return wA(n).then(t=>t.remoteStore)}function eN(n){return wA(n).then(t=>t.syncEngine)}function my(n){return tN.apply(this,arguments)}function tN(){return tN=(0,ve.Z)(function*(n){const t=yield wA(n),e=t.eventManager;return e.onListen=K9.bind(null,t.syncEngine),e.onUnlisten=Q9.bind(null,t.syncEngine),e}),tN.apply(this,arguments)}function N6(n,t,e={}){const r=new Bi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,o,c,h,g){const v=new bA({next:D=>{o.enqueueAndForget(()=>vO(i,E));const k=D.docs.has(c);!k&&D.fromCache?g.reject(new Oe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&D.fromCache&&h&&"server"===h.source?g.reject(new Oe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(D)},error:D=>g.reject(D)}),E=new wO(Jv(c.path),v,{includeMetadataChanges:!0,ku:!0});return mO(i,E)}(yield my(n),n.asyncQueue,t,e,r)})),r.promise}function F6(n,t,e={}){const r=new Bi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,o,c,h,g){const v=new bA({next:D=>{o.enqueueAndForget(()=>vO(i,E)),D.fromCache&&"server"===h.source?g.reject(new Oe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(D)},error:D=>g.reject(D)}),E=new wO(c,v,{includeMetadataChanges:!0,ku:!0});return mO(i,E)}(yield my(n),n.asyncQueue,t,e,r)})),r.promise}const L6=new Map;function nN(n,t,e){if(!e)throw new Oe(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function U6(n,t,e,r){if(!0===t&&!0===r)throw new Oe(ge.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function V6(n){if(!Xe.isDocumentKey(n))throw new Oe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function B6(n){if(Xe.isDocumentKey(n))throw new Oe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":dt()}function fn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Oe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=CA(n);throw new Oe(ge.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function j6(n,t){if(t<=0)throw new Oe(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class H6{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Oe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Oe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,U6("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ZC{constructor(t,e,r){this._authCredentials=e,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H6({}),this._settingsFrozen=!1,t instanceof Hd?this._databaseId=t:(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Oe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hd(i.options.projectId)}(t))}get app(){if(!this._app)throw new Oe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Oe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H6(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new S7;switch(e.type){case"gapi":const r=e.client;return Lt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new k7(r,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Oe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=L6.get(t);e&&(Ve("ComponentProvider","Removing Datastore"),L6.delete(t),e.terminate())}(this),Promise.resolve()}}class nr{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Au(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new nr(this.firestore,t,this._key)}}class Ns{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ns(this.firestore,t,this._query)}}class Au extends Ns{constructor(t,e,r){super(t,e,Jv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new nr(this.firestore,null,new Xe(t))}withConverter(t){return new Au(this.firestore,t,this._path)}}function q6(n,t,...e){if(n=(0,F.m9)(n),nN("collection","path",t),n instanceof ZC){const r=mn.fromString(t,...e);return B6(r),new Au(n,null,r)}{if(!(n instanceof nr||n instanceof Au))throw new Oe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(t,...e));return B6(r),new Au(n.firestore,null,r)}}function EA(n,t,...e){if(n=(0,F.m9)(n),1===arguments.length&&(t=mB.R()),nN("doc","path",t),n instanceof ZC){const r=mn.fromString(t,...e);return V6(r),new nr(n,null,new Xe(r))}{if(!(n instanceof nr||n instanceof Au))throw new Oe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mn.fromString(t,...e));return V6(r),new nr(n.firestore,n instanceof Au?n.converter:null,new Xe(r))}}function Z6(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),(n instanceof nr||n instanceof Au)&&(t instanceof nr||t instanceof Au)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function G6(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),n instanceof Ns&&t instanceof Ns&&n.firestore===t.firestore&&CC(n._query,t._query)&&n.converter===t.converter}class xQ{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new QP(this,"async_queue_retry"),this.Qa=()=>{const e=_A();e&&Ve("AsyncQueue","Visibility state changed to "+e.visibilityState),this.No.Po()};const t=_A();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ja(),this.Wa(t)}enterRestrictedMode(t){if(!this.Ba){this.Ba=!0,this.Ka=t||!1;const e=_A();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Qa)}}enqueue(t){if(this.ja(),this.Ba)return new Promise(()=>{});const e=new Bi;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.$a.push(t),this.za()))}za(){var t=this;return(0,ve.Z)(function*(){if(0!==t.$a.length){try{yield t.$a[0](),t.$a.shift(),t.No.reset()}catch(e){if(!Qg(e))throw e;Ve("AsyncQueue","Operation failed with retryable error: "+e)}t.$a.length>0&&t.No.Ro(()=>t.za())}})()}Wa(t){const e=this.Fa.then(()=>(this.qa=!0,t().catch(r=>{throw this.Ua=r,this.qa=!1,oi("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=e,e}enqueueAfterDelay(t,e,r){this.ja(),this.Ga.indexOf(t)>-1&&(e=0);const i=gO.createAndSchedule(this,t,e,r,o=>this.Ha(o));return this.La.push(i),i}ja(){this.Ua&&dt()}verifyOperationInProgress(){}Ja(){var t=this;return(0,ve.Z)(function*(){let e;do{e=t.Fa,yield e}while(e!==t.Fa)})()}Ya(t){for(const e of this.La)if(e.timerId===t)return!0;return!1}Xa(t){return this.Ja().then(()=>{this.La.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.La)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Ja()})}Za(t){this.Ga.push(t)}Ha(t){const e=this.La.indexOf(t);this.La.splice(e,1)}}function rN(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const r=t;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class MQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new Bi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class ar extends ZC{constructor(t,e,r){super(t,e,r),this.type="firestore",this._queue=new xQ,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||$6(this),this._firestoreClient.terminate()}}function ci(n){return n._firestoreClient||$6(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function $6(n){var t;const e=n._freezeSettings(),r=(o=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new L7(n._databaseId,o,n._persistenceKey,(h=e).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var o,h;n._firestoreClient=new vQ(n._authCredentials,n._appCheckCredentials,n._queue,r)}function z6(n,t,e){const r=new Bi;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield k6(n,e),yield R6(n,t),r.resolve()}catch(i){if(!("FirebaseError"===(o=i).name?o.code===ge.FAILED_PRECONDITION||o.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var o})).then(()=>r.promise)}function Y6(n){if(n._initialized||n._terminated)throw new Oe(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Gd{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Oe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class xu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new xu(Ci.fromBase64String(t))}catch(e){throw new Oe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new xu(Ci.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class am{constructor(t){this._methodName=t}}class IA{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Oe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Oe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return zt(this._lat,t._lat)||zt(this._long,t._long)}}const BQ=/^__.*__$/;class jQ{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return null!==this.fieldMask?new Kg(t,this.data,this.fieldMask,e,this.fieldTransforms):new IC(t,this.data,e,this.fieldTransforms)}}class W6{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new Kg(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function K6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class DA{constructor(t,e,r,i,o,c){this.settings=t,this.databaseId=e,this.M=r,this.ignoreUndefinedProperties=i,void 0===o&&this.tc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(t){return new DA(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.nc({path:r,ic:!1});return i.rc(t),i}oc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(t){return this.nc({path:void 0,ic:!0})}ac(t){return AA(t,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}tc(){if(this.path)for(let t=0;t<this.path.length;t++)this.rc(this.path.get(t))}rc(t){if(0===t.length)throw this.ac("Document fields must not be empty");if(K6(this.ec)&&BQ.test(t))throw this.ac('Document fields cannot begin and end with "__"')}}class HQ{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=r||jC(t)}lc(t,e,r,i=!1){return new DA({ec:t,methodName:e,hc:r,path:wi.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function lm(n){const t=n._freezeSettings(),e=jC(n._databaseId);return new HQ(n._databaseId,!!t.ignoreUndefinedProperties,e)}function TA(n,t,e,r,i,o={}){const c=n.lc(o.merge||o.mergeFields?2:0,t,e,i);aN("Data must be an object, but it was:",c,r);const h=X6(r,c);let g,v;if(o.merge)g=new Yv(c.fieldMask),v=c.fieldTransforms;else if(o.mergeFields){const E=[];for(const D of o.mergeFields){const k=lN(t,D,e);if(!c.contains(k))throw new Oe(ge.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);tj(E,k)||E.push(k)}g=new Yv(E),v=c.fieldTransforms.filter(D=>g.covers(D.field))}else g=null,v=c.fieldTransforms;return new jQ(new Os(h),g,v)}class GC extends am{_toFieldTransform(t){if(2!==t.ec)throw t.ac(1===t.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof GC}}function Q6(n,t,e){return new DA({ec:3,hc:t.settings.hc,methodName:n._methodName,ic:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class iN extends am{_toFieldTransform(t){return new EC(t.path,new ey)}isEqual(t){return t instanceof iN}}class qQ extends am{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=Q6(this,t,!0),r=this.fc.map(o=>cm(o,e)),i=new Yg(r);return new EC(t.path,i)}isEqual(t){return this===t}}class ZQ extends am{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=Q6(this,t,!0),r=this.fc.map(o=>cm(o,e)),i=new Wg(r);return new EC(t.path,i)}isEqual(t){return this===t}}class GQ extends am{constructor(t,e){super(t),this.dc=e}_toFieldTransform(t){const e=new ty(t.M,GB(t.M,this.dc));return new EC(t.path,e)}isEqual(t){return this===t}}function sN(n,t,e,r){const i=n.lc(1,t,e);aN("Data must be an object, but it was:",i,r);const o=[],c=Os.empty();Hg(r,(g,v)=>{const E=SA(t,g,e);v=(0,F.m9)(v);const D=i.oc(E);if(v instanceof GC)o.push(E);else{const k=cm(v,D);null!=k&&(o.push(E),c.set(E,k))}});const h=new Yv(o);return new W6(c,h,i.fieldTransforms)}function oN(n,t,e,r,i,o){const c=n.lc(1,t,e),h=[lN(t,r,e)],g=[i];if(o.length%2!=0)throw new Oe(ge.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<o.length;k+=2)h.push(lN(t,o[k])),g.push(o[k+1]);const v=[],E=Os.empty();for(let k=h.length-1;k>=0;--k)if(!tj(v,h[k])){const N=h[k];let U=g[k];U=(0,F.m9)(U);const X=c.oc(N);if(U instanceof GC)v.push(N);else{const pe=cm(U,X);null!=pe&&(v.push(N),E.set(N,pe))}}const D=new Yv(v);return new W6(E,D,c.fieldTransforms)}function J6(n,t,e,r=!1){return cm(e,n.lc(r?4:3,t))}function cm(n,t){if(ej(n=(0,F.m9)(n)))return aN("Unsupported field value:",t,n),X6(n,t);if(n instanceof am)return function(e,r){if(!K6(r.ec))throw r.ac(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${e._methodName}() is not currently supported inside arrays`);const i=e._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,r){const i=[];let o=0;for(const c of e){let h=cm(c,r.uc(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(n,t)}return function(e,r){if(null===(e=(0,F.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return GB(r.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const i=qr.fromDate(e);return{timestampValue:xC(r.M,i)}}if(e instanceof qr){const i=new qr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:xC(r.M,i)}}if(e instanceof IA)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof xu)return{bytesValue:u3(r.M,e._byteString)};if(e instanceof nr){const i=r.databaseId,o=e.firestore._databaseId;if(!o.isEqual(i))throw r.ac(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:IP(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.ac(`Unsupported field value: ${CA(e)}`)}(n,t)}function X6(n,t){const e={};return yB(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Hg(n,(r,i)=>{const o=cm(i,t.sc(r));null!=o&&(e[r]=o)}),{mapValue:{fields:e}}}function ej(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof qr||n instanceof IA||n instanceof xu||n instanceof nr||n instanceof am)}function aN(n,t,e){if(!ej(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=CA(e);throw t.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function lN(n,t,e){if((t=(0,F.m9)(t))instanceof Gd)return t._internalPath;if("string"==typeof t)return SA(n,t);throw AA("Field path arguments must be of type string or ",n,!1,void 0,e)}const $Q=new RegExp("[~\\*/\\[\\]]");function SA(n,t,e){if(t.search($Q)>=0)throw AA(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Gd(...t.split("."))._internalPath}catch(r){throw AA(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function AA(n,t,e,r,i){const o=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(o||c)&&(g+=" (found",o&&(g+=` in field ${r}`),c&&(g+=` in document ${i}`),g+=")"),new Oe(ge.INVALID_ARGUMENT,h+n+g)}function tj(n,t){return n.some(e=>e.isEqual(t))}class $C{constructor(t,e,r,i,o){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new zQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(xA("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class zQ extends $C{data(){return super.data()}}function xA(n,t){return"string"==typeof t?SA(n,t):t instanceof Gd?t._internalPath:t._delegate._internalPath}class um{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class $d extends $C{constructor(t,e,r,i,o,c){super(t,e,r,i,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new zC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(xA("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class zC extends $d{data(t={}){return super.data(t)}}class qf{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new um(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new zC(this._firestore,this._userDataWriter,r.key,r,new um(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Oe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new zC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new um(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new zC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new um(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,v=-1;return 0!==c.type&&(g=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),1!==c.type&&(o=o.add(c.doc),v=o.indexOf(c.doc.key)),{type:YQ(c.type),doc:h,oldIndex:g,newIndex:v}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function YQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function nj(n,t){return n instanceof $d&&t instanceof $d?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof qf&&t instanceof qf&&n._firestore===t._firestore&&G6(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function rj(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Oe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class YC{}function Zf(n,...t){for(const e of t)n=e._apply(n);return n}class WQ extends YC{constructor(t,e,r){super(),this._c=t,this.wc=e,this.mc=r,this.type="where"}_apply(t){const e=lm(t.firestore),r=function(i,o,c,h,g,v,E){let D;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Oe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){cj(E,v);const N=[];for(const U of E)N.push(lj(h,i,U));D={arrayValue:{values:N}}}else D=lj(h,i,E)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||cj(E,v),D=J6(c,"where",E,"in"===v||"not-in"===v);const k=fs.create(g,v,D);return function(N,U){if(U.S()){const pe=_P(N);if(null!==pe&&!pe.isEqual(U.field))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${pe.toString()}' and '${U.field.toString()}'`);const Be=mP(N);null!==Be&&uj(0,U.field,Be)}const X=function(pe,Be){for(const We of pe.filters)if(Be.indexOf(We.op)>=0)return We.op;return null}(N,function(pe){switch(pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==X)throw new Oe(ge.INVALID_ARGUMENT,X===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${X.toString()}' filters.`)}(i,k),k}(t._query,0,e,t.firestore._databaseId,this._c,this.wc,this.mc);return new Ns(t.firestore,t.converter,function(i,o){const c=i.filters.concat([o]);return new qd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}class QQ extends YC{constructor(t,e){super(),this._c=t,this.gc=e,this.type="orderBy"}_apply(t){const e=function(r,i,o){if(null!==r.startAt)throw new Oe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Qv(i,o);return function(h,g){if(null===mP(h)){const v=_P(h);null!==v&&uj(0,v,g.field)}}(r,c),c}(t._query,this._c,this.gc);return new Ns(t.firestore,t.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new qd(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class ij extends YC{constructor(t,e,r){super(),this.type=t,this.yc=e,this.Ic=r}_apply(t){return new Ns(t.firestore,t.converter,VB(t._query,this.yc,this.Ic))}}class sj extends YC{constructor(t,e,r){super(),this.type=t,this.Tc=e,this.Ec=r}_apply(t){const e=aj(t,this.type,this.Tc,this.Ec);return new Ns(t.firestore,t.converter,(i=e,new qd((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class oj extends YC{constructor(t,e,r){super(),this.type=t,this.Tc=e,this.Ec=r}_apply(t){const e=aj(t,this.type,this.Tc,this.Ec);return new Ns(t.firestore,t.converter,(i=e,new qd((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function aj(n,t,e,r){if(e[0]=(0,F.m9)(e[0]),e[0]instanceof $C)return function(i,o,c,h,g){if(!h)throw new Oe(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const v=[];for(const E of Xv(i))if(E.field.isKeyField())v.push(Gg(o,h.key));else{const D=h.data.field(E.field);if(hP(D))throw new Oe(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const k=E.field.canonicalString();throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}v.push(D)}return new Ff(v,g)}(n._query,n.firestore._databaseId,t,e[0]._document,r);{const i=lm(n.firestore);return function(o,c,h,g,v,E){const D=o.explicitOrderBy;if(v.length>D.length)throw new Oe(ge.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let N=0;N<v.length;N++){const U=v[N];if(D[N].field.isKeyField()){if("string"!=typeof U)throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof U}`);if(!vP(o)&&-1!==U.indexOf("/"))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${U}' contains a slash.`);const X=o.path.child(mn.fromString(U));if(!Xe.isDocumentKey(X))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${X}' is not because it contains an odd number of segments.`);const pe=new Xe(X);k.push(Gg(c,pe))}else{const X=J6(h,g,U);k.push(X)}}return new Ff(k,E)}(n._query,n.firestore._databaseId,i,t,e,r)}}function lj(n,t,e){if("string"==typeof(e=(0,F.m9)(e))){if(""===e)throw new Oe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vP(t)&&-1!==e.indexOf("/"))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(mn.fromString(e));if(!Xe.isDocumentKey(r))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gg(n,new Xe(r))}if(e instanceof nr)return Gg(n,e._key);throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${CA(e)}.`)}function cj(n,t){if(!Array.isArray(n)||0===n.length)throw new Oe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Oe(ge.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function uj(n,t,e){if(!e.isEqual(t))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const sJ={maxAttempts:5};class cN{convertValue(t,e="none"){switch(Zg(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Dr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(qg(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw dt()}}convertObject(t,e){const r={};return Hg(t.fields,(i,o)=>{r[i]=this.convertValue(o,e)}),r}convertGeoPoint(t){return new IA(Dr(t.latitude),Dr(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=bB(t);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(pC(t));default:return null}}convertTimestamp(t){const e=Pf(t);return new qr(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=mn.fromString(t);Lt(b3(r));const i=new Hd(r.get(1),r.get(3)),o=new Xe(r.popFirst(5));return i.isEqual(e)||oi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}function MA(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class oJ extends cN{constructor(t){super(),this.firestore=t}convertBytes(t){return new xu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new nr(this.firestore,null,e)}}class dj{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=lm(t)}set(t,e,r){this._verifyNotCommitted();const i=Gf(t,this._firestore),o=MA(i.converter,e,r),c=TA(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,ai.none())),this}update(t,e,r,...i){this._verifyNotCommitted();const o=Gf(t,this._firestore);let c;return c="string"==typeof(e=(0,F.m9)(e))||e instanceof Gd?oN(this._dataReader,"WriteBatch.update",o._key,e,r,i):sN(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(c.toMutation(o._key,ai.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Gf(t,this._firestore);return this._mutations=this._mutations.concat(new DC(e._key,ai.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gf(n,t){if((n=(0,F.m9)(n)).firestore!==t)throw new Oe(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class dm extends cN{constructor(t){super(),this.firestore=t}convertBytes(t){return new xu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new nr(this.firestore,null,e)}}function hj(n,t,e){n=fn(n,nr);const r=fn(n.firestore,ar),i=MA(n.converter,t,e);return _y(r,[TA(lm(r),"setDoc",n._key,i,null!==n.converter,e).toMutation(n._key,ai.none())])}function fj(n,t,e,...r){n=fn(n,nr);const i=fn(n.firestore,ar),o=lm(i);let c;return c="string"==typeof(t=(0,F.m9)(t))||t instanceof Gd?oN(o,"updateDoc",n._key,t,e,r):sN(o,"updateDoc",n._key,t),_y(i,[c.toMutation(n._key,ai.exists(!0))])}function pj(n,...t){var e,r,i;n=(0,F.m9)(n);let o={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||rN(t[c])||(o=t[c],c++);const h={includeMetadataChanges:o.includeMetadataChanges};if(rN(t[c])){const D=t[c];t[c]=null===(e=D.next)||void 0===e?void 0:e.bind(D),t[c+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),t[c+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let g,v,E;if(n instanceof nr)v=fn(n.firestore,ar),E=Jv(n._key.path),g={next:D=>{t[c]&&t[c](uN(v,n,D))},error:t[c+1],complete:t[c+2]};else{const D=fn(n,Ns);v=fn(D.firestore,ar),E=D._query;const k=new dm(v);g={next:N=>{t[c]&&t[c](new qf(v,k,D,N))},error:t[c+1],complete:t[c+2]},rj(n._query)}return function(D,k,N,U){const X=new bA(U),pe=new wO(k,X,N);return D.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return mO(yield my(D),pe)})),()=>{X.Aa(),D.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return vO(yield my(D),pe)}))}}(ci(v),E,h,g)}function _y(n,t){return function(e,r){const i=new Bi;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function J9(n,t,e){return TO.apply(this,arguments)}(yield eN(e),r,i)})),i.promise}(ci(n),t)}function uN(n,t,e){const r=e.docs.get(t._key),i=new dm(n);return new $d(n,i,t._key,r,new um(e.hasPendingWrites,e.fromCache),t.converter)}class mJ extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=lm(t)}get(t){const e=Gf(t,this._firestore),r=new oJ(this._firestore);return this._transaction.lookup([e._key]).then(i=>{if(!i||1!==i.length)return dt();const o=i[0];if(o.isFoundDocument())return new $C(this._firestore,r,o.key,o,e.converter);if(o.isNoDocument())return new $C(this._firestore,r,e._key,null,e.converter);throw dt()})}set(t,e,r){const i=Gf(t,this._firestore),o=MA(i.converter,e,r),c=TA(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(t,e,r,...i){const o=Gf(t,this._firestore);let c;return c="string"==typeof(e=(0,F.m9)(e))||e instanceof Gd?oN(this._dataReader,"Transaction.update",o._key,e,r,i):sN(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,c),this}delete(t){const e=Gf(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Gf(t,this._firestore),r=new dm(this._firestore);return super.get(t).then(i=>new $d(this._firestore,r,e._key,i._document,new um(!1,!1),e.converter))}}function dN(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function mj(){if("undefined"==typeof Uint8Array)throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function _j(){if(!function N7(){return"undefined"!=typeof atob}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){$v=yi.SDK_VERSION,(0,yi._registerComponent)(new ml.wA("firestore",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),o=new ar(i,new x7(e.getProvider("auth-internal")),new R7(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o},"PUBLIC")),(0,yi.registerVersion)(fB,"3.4.9",n),(0,yi.registerVersion)(fB,"3.4.9","esm2017")}();class WC{constructor(t){this._delegate=t}static fromBase64String(t){return _j(),new WC(xu.fromBase64String(t))}static fromUint8Array(t){return mj(),new WC(xu.fromUint8Array(t))}toBase64(){return _j(),this._delegate.toBase64()}toUint8Array(){return mj(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function hN(n){return function DJ(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(n,["next","error","complete"])}class TJ{enableIndexedDbPersistence(t,e){return function RQ(n,t){Y6(n=fn(n,ar));const e=ci(n),r=n._freezeSettings(),i=new zO;return z6(e,i,new x6(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function PQ(n){Y6(n=fn(n,ar));const t=ci(n),e=n._freezeSettings(),r=new zO;return z6(t,r,new pQ(r,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function OQ(n){if(n._initialized&&!n._terminated)throw new Oe(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Bi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(e=(0,ve.Z)(function*(r){if(!Cc.vt())return Promise.resolve();const i=r+"main";yield Cc.delete(i)}),function(r){return e.apply(this,arguments)})(VP(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class vj{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof Hd||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&hC("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,r={}){!function SQ(n,t,e,r={}){var i;const o=(n=fn(n,ZC))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&hC("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${t}:${e}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=ds.MOCK_USER;else{c=(0,F.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Oe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ds(g)}n._authCredentials=new A7(new pB(c,h))}}(this._delegate,t,e,r)}enableNetwork(){return function FQ(n){return function yQ(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const t=yield P6(n),e=yield O6(n);return t.setNetworkEnabled(!0),function(r){const i=it(r);return i.wu.delete(0),HC(i)}(e)}))}(ci(n=fn(n,ar)))}(this._delegate)}disableNetwork(){return function LQ(n){return function bQ(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const t=yield P6(n),e=yield O6(n);return t.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const o=it(i);o.wu.add(0),yield cy(o),o.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(e);var r}))}(ci(n=fn(n,ar)))}(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,U6("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function NQ(n){return function(t){const e=new Bi;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function nQ(n,t){return kO.apply(this,arguments)}(yield eN(t),e)})),e.promise}(ci(n=fn(n,ar)))}(this._delegate)}onSnapshotsInSync(t){return function gJ(n,t){return function EQ(n,t){const e=new bA(t);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield my(n),i=e,it(r).bu.add(i),void i.next();var r,i})),()=>{e.Aa(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield my(n),i=e,void it(r).bu.delete(i);var r,i}))}}(ci(n=fn(n,ar)),rN(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new vy(this,q6(this._delegate,t))}catch(e){throw fo(e,"collection()","Firestore.collection()")}}doc(t){try{return new Cl(this,EA(this._delegate,t))}catch(e){throw fo(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new po(this,function AQ(n,t){if(n=fn(n,ZC),nN("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Oe(ge.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ns(n,null,(e=t,new qd(mn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw fo(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function _J(n,t,e){n=fn(n,ar);const r=Object.assign(Object.assign({},sJ),e);return function(i){if(i.maxAttempts<1)throw new Oe(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function IQ(n,t,e){const r=new Bi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const i=yield(o=n,wA(o).then(c=>c.datastore));var o;new _Q(n.asyncQueue,i,e,t,r).run()})),r.promise}(ci(n),i=>t(new mJ(n,i)),r)}(this._delegate,e=>t(new yj(this,e)))}batch(){return ci(this._delegate),new bj(new dj(this._delegate,t=>_y(this._delegate,t)))}loadBundle(t){return function UQ(n,t){const e=ci(n=fn(n,ar)),r=new MQ;return function DQ(n,t,e,r){const i=function(o,c){let h;return h="string"==typeof o?(new TextEncoder).encode(o):o,g=function(g,v){if(g instanceof Uint8Array)return M6(g,v);if(g instanceof ArrayBuffer)return M6(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new gQ(g,c);var g}(e,jC(t));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function fQ(n,t,e){const r=it(n);var i;(i=(0,ve.Z)(function*(o,c,h){try{const g=yield c.getMetadata();if(yield function(k,N){const U=it(k),X=ji(N.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",pe=>U._s.getBundleMetadata(pe,N.id)).then(pe=>!!pe&&pe.createTime.compareTo(X)>=0)}(o.localStore,g))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(k=g).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);h._updateProgress(y6(g));const v=new $9(g,o.localStore,c.M);let E=yield c.ma();for(;E;){const k=yield v.Fu(E);k&&h._updateProgress(k),E=yield c.ma()}const D=yield v.complete();return yield Zd(o,D.Lu,void 0),yield function(k,N){const U=it(k);return U.persistence.runTransaction("Save bundle","readwrite",X=>U._s.saveBundleMetadata(X,N))}(o.localStore,g),h._completeWith(D.progress),Promise.resolve(D.Bu)}catch(g){return hC("SyncEngine",`Loading bundle failed with ${g}`),h._failWith(g),Promise.resolve(new Set)}var k}),function(o,c,h){return i.apply(this,arguments)})(r,t,e).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield eN(n),i,r)}))}(e,n._databaseId,t,r),r}(this._delegate,t)}namedQuery(t){return function VQ(n,t){return function TQ(n,t){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(e,r){const i=it(e);return i.persistence.runTransaction("Get named query","readonly",o=>i._s.getNamedQuery(o,r))}(yield XO(n),t)}))}(ci(n=fn(n,ar)),t).then(e=>e?new Ns(n,null,e.query):null)}(this._delegate,t).then(e=>e?new po(this,e):null)}}class kA extends cN{constructor(t){super(),this.firestore=t}convertBytes(t){return new WC(new xu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Cl.forKey(e,this.firestore,null)}}class yj{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new kA(t)}get(t){const e=fm(t);return this._delegate.get(e).then(r=>new KC(this._firestore,new $d(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const i=fm(t);return r?(dN("Transaction.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const o=fm(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,r,...i),this}delete(t){const e=fm(t);return this._delegate.delete(e),this}}class bj{constructor(t){this._delegate=t}set(t,e,r){const i=fm(t);return r?(dN("WriteBatch.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const o=fm(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,r,...i),this}delete(t){const e=fm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class hm{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new zC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new QC(this._firestore,r),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=hm.INSTANCES;let i=r.get(t);i||(i=new WeakMap,r.set(t,i));let o=i.get(e);return o||(o=new hm(t,new kA(t),e),i.set(e,o)),o}}hm.INSTANCES=new WeakMap;class Cl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kA(t)}static forPath(t,e,r){if(t.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Cl(e,new nr(e._delegate,r,new Xe(t)))}static forKey(t,e,r){return new Cl(e,new nr(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new vy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new vy(this.firestore,q6(this._delegate,t))}catch(e){throw fo(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,F.m9)(t))instanceof nr&&Z6(this._delegate,t)}set(t,e){e=dN("DocumentReference.set",e);try{return e?hj(this._delegate,t,e):hj(this._delegate,t)}catch(r){throw fo(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return 1===arguments.length?fj(this._delegate,t):fj(this._delegate,t,e,...r)}catch(i){throw fo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function fJ(n){return _y(fn(n.firestore,ar),[new DC(n._key,ai.none())])}(this._delegate)}onSnapshot(...t){const e=wj(t),r=Cj(t,i=>new KC(this.firestore,new $d(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return pj(this._delegate,e,r)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function lJ(n){n=fn(n,nr);const t=fn(n.firestore,ar),e=ci(t),r=new dm(t);return function wQ(n,t){const e=new Bi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,o,c){try{const h=yield function(g,v){const E=it(g);return E.persistence.runTransaction("read document","readonly",D=>E.fi.Ls(D,v))}(i,o);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Oe(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const g=hy(h,`Failed to get document '${o} from cache`);c.reject(g)}}),function(i,o,c){return r.apply(this,arguments)})(yield XO(n),t,e);var r})),e.promise}(e,n._key).then(i=>new $d(t,r,n._key,i,new um(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function cJ(n){n=fn(n,nr);const t=fn(n.firestore,ar);return N6(ci(t),n._key,{source:"server"}).then(e=>uN(t,n,e))}(this._delegate):function aJ(n){n=fn(n,nr);const t=fn(n.firestore,ar);return N6(ci(t),n._key).then(e=>uN(t,n,e))}(this._delegate),e.then(r=>new KC(this.firestore,new $d(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new Cl(this.firestore,this._delegate.withConverter(t?hm.getInstance(this.firestore,t):null))}}function fo(n,t,e){return n.message=n.message.replace(t,e),n}function wj(n){for(const t of n)if("object"==typeof t&&!hN(t))return t;return{}}function Cj(n,t){var e,r;let i;return i=hN(n[0])?n[0]:hN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(t(o))},error:null===(e=i.error)||void 0===e?void 0:e.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class KC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Cl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return nj(this._delegate,t._delegate)}}class QC extends KC{data(t){const e=this._delegate.data(t);return function T7(n,t){n||dt()}(void 0!==e),e}}class po{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kA(t)}where(t,e,r){try{return new po(this.firestore,Zf(this._delegate,function KQ(n,t,e){const r=t,i=xA("where",n);return new WQ(i,r,e)}(t,e,r)))}catch(i){throw fo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new po(this.firestore,Zf(this._delegate,function JQ(n,t="asc"){const e=t,r=xA("orderBy",n);return new QQ(r,e)}(t,e)))}catch(r){throw fo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new po(this.firestore,Zf(this._delegate,function XQ(n){return j6("limit",n),new ij("limit",n,"F")}(t)))}catch(e){throw fo(e,"limit()","Query.limit()")}}limitToLast(t){try{return new po(this.firestore,Zf(this._delegate,function eJ(n){return j6("limitToLast",n),new ij("limitToLast",n,"L")}(t)))}catch(e){throw fo(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new po(this.firestore,Zf(this._delegate,function tJ(...n){return new sj("startAt",n,!0)}(...t)))}catch(e){throw fo(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new po(this.firestore,Zf(this._delegate,function nJ(...n){return new sj("startAfter",n,!1)}(...t)))}catch(e){throw fo(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new po(this.firestore,Zf(this._delegate,function rJ(...n){return new oj("endBefore",n,!1)}(...t)))}catch(e){throw fo(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new po(this.firestore,Zf(this._delegate,function iJ(...n){return new oj("endAt",n,!0)}(...t)))}catch(e){throw fo(e,"endAt()","Query.endAt()")}}isEqual(t){return G6(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function dJ(n){n=fn(n,Ns);const t=fn(n.firestore,ar),e=ci(t),r=new dm(t);return function CQ(n,t){const e=new Bi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,o,c){try{const h=yield pA(i,o,!0),g=new C6(o,h._i),v=g.Wu(h.documents),E=g.applyChanges(v,!1);c.resolve(E.snapshot)}catch(h){const g=hy(h,`Failed to execute query '${o} against cache`);c.reject(g)}}),function(i,o,c){return r.apply(this,arguments)})(yield XO(n),t,e);var r})),e.promise}(e,n._query).then(i=>new qf(t,r,n,i))}(this._delegate):"server"===(null==t?void 0:t.source)?function hJ(n){n=fn(n,Ns);const t=fn(n.firestore,ar),e=ci(t),r=new dm(t);return F6(e,n._query,{source:"server"}).then(i=>new qf(t,r,n,i))}(this._delegate):function uJ(n){n=fn(n,Ns);const t=fn(n.firestore,ar),e=ci(t),r=new dm(t);return rj(n._query),F6(e,n._query).then(i=>new qf(t,r,n,i))}(this._delegate),e.then(r=>new fN(this.firestore,new qf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=wj(t),r=Cj(t,i=>new fN(this.firestore,new qf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return pj(this._delegate,e,r)}withConverter(t){return new po(this.firestore,this._delegate.withConverter(t?hm.getInstance(this.firestore,t):null))}}class AJ{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new QC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fN{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new po(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new QC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new AJ(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new QC(this._firestore,r))})}isEqual(t){return nj(this._delegate,t._delegate)}}class vy extends po{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Cl(this.firestore,t):null}doc(t){try{return new Cl(this.firestore,void 0===t?EA(this._delegate):EA(this._delegate,t))}catch(e){throw fo(e,"doc()","CollectionReference.doc()")}}add(t){return function pJ(n,t){const e=fn(n.firestore,ar),r=EA(n),i=MA(n.converter,t);return _y(e,[TA(lm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ai.exists(!1))]).then(()=>r)}(this._delegate,t).then(e=>new Cl(this.firestore,e))}isEqual(t){return Z6(this._delegate,t._delegate)}withConverter(t){return new vy(this.firestore,this._delegate.withConverter(t?hm.getInstance(this.firestore,t):null))}}function fm(n){return fn(n,nr)}class pN{constructor(...t){this._delegate=new Gd(...t)}static documentId(){return new pN(wi.keyField().canonicalString())}isEqual(t){return(t=(0,F.m9)(t))instanceof Gd&&this._delegate._internalPath.isEqual(t._internalPath)}}class pm{constructor(t){this._delegate=t}static serverTimestamp(){const t=function yJ(){return new iN("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new pm(t)}static delete(){const t=function vJ(){return new GC("deleteField")}();return t._methodName="FieldValue.delete",new pm(t)}static arrayUnion(...t){const e=function bJ(...n){return new qQ("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new pm(e)}static arrayRemove(...t){const e=function wJ(...n){return new ZQ("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new pm(e)}static increment(t){const e=function CJ(n){return new GQ("increment",n)}(t);return e._methodName="FieldValue.increment",new pm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const xJ={Firestore:vj,GeoPoint:IA,Timestamp:qr,Blob:WC,Transaction:yj,WriteBatch:bj,DocumentReference:Cl,DocumentSnapshot:KC,Query:po,QueryDocumentSnapshot:QC,QuerySnapshot:fN,CollectionReference:vy,FieldPath:pN,FieldValue:pm,setLogLevel:function SJ(n){!function D7(n){Rf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Ej(n,t){return function RJ(n,t=zp.z){return new Or.y(e=>{let r;return null!=t?t.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},e)}):r=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=r&&r()}})}(n,t)}function gN(n,t){return Ej(n,t).pipe((0,ut.U)(e=>({payload:e,type:"query"})))}function RA(n,t){return gN(n,t).pipe(Ss(void 0),vR(),(0,ut.U)(([e,r])=>{const i=r.payload.docChanges(),o=i.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const g=i.find(E=>E.doc.ref.isEqual(c.ref)),v=null==e?void 0:e.payload.docs.find(E=>E.ref.isEqual(c.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(c.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(c.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),o}))}function Ij(n,t,e){return RA(n,e).pipe(vi((r,i)=>function OJ(n,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(n=function NJ(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return mN(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return mN(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return mN(n,t.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),t),[]),Nb(),(0,ut.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function mN(n,t,e,...r){const i=n.slice();return i.splice(t,e,...r),i}function Dj(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function kJ(n){(function MJ(n,t){n.INTERNAL.registerComponent(new ml.wA("firestore-compat",e=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("firestore").getImmediate();return t(r,i)},"PUBLIC").setServiceProps(Object.assign({},xJ)))})(n,(t,e)=>new vj(t,e,new TJ)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(P_.Z);class Tj{constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=RA(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ut.U)(r=>r.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(Ss(void 0),vR(),Vr(([r,i])=>i.length>0||!r),(0,ut.U)(([r,i])=>i),gn.iC)}auditTrail(t){return this.stateChanges(t).pipe(vi((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=Dj(t);return Ij(this.query,e,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(t={}){return gN(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),gn.iC)}get(t){return(0,Tn.D)(this.query.get(t)).pipe(gn.iC)}add(t){return this.ref.add(t)}doc(t){return new Sj(this.ref.doc(t),this.afs)}}class Sj{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:i,query:o}=Mj(r,e);return new Tj(i,o,this.afs)}snapshotChanges(){return function PJ(n,t){return Ej(n,t).pipe(Ss(void 0),vR(),(0,ut.U)(([e,r])=>r.exists?(null==e?void 0:e.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ut.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Tn.D)(this.ref.get(t)).pipe(gn.iC)}}class FJ{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?RA(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),Vr(e=>e.length>0),gn.iC):RA(this.query,this.afs.schedulers.outsideAngular).pipe(gn.iC)}auditTrail(t){return this.stateChanges(t).pipe(vi((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=Dj(t);return Ij(this.query,e,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(t={}){return gN(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(r=>r.payload.docs.map(i=>t.idField?Object.assign({[t.idField]:i.id},i.data()):i.data())),gn.iC)}get(t){return(0,Tn.D)(this.query.get(t)).pipe(gn.iC)}}const Aj=new s.OlP("angularfire2.enableFirestorePersistence"),xj=new s.OlP("angularfire2.firestore.persistenceSettings"),LJ=new s.OlP("angularfire2.firestore.settings"),UJ=new s.OlP("angularfire2.firestore.use-emulator");function Mj(n,t=(e=>e)){return{query:t(n),ref:n}}let VJ=(()=>{class n{constructor(e,r,i,o,c,h,g,v,E,D,k,N,U,X,pe,Be,We){this.schedulers=g;const et=(0,Er.on)(e,h,r),$e=E;D&&nk(et,h,k,U,X,pe,N,Be),[this.firestore,this.persistenceEnabled$]=(0,Er.cc)(`${et.name}.firestore`,"AngularFirestore",et.name,()=>{const xt=h.runOutsideAngular(()=>et.firestore());if(o&&xt.settings(o),$e&&xt.useEmulator(...$e),i&&!ja(c)){const Rt=()=>{try{return(0,Tn.D)(xt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(cn){return"undefined"!=typeof console&&console.warn(cn),ze(!1)}};return[xt,h.runOutsideAngular(Rt)]}return[xt,ze(!1)]},[o,$e,i])}collection(e,r){let i;i="string"==typeof e?this.firestore.collection(e):e;const{ref:o,query:c}=Mj(i,r),h=this.schedulers.ngZone.run(()=>o);return new Tj(h,c,this)}collectionGroup(e,r){const i=r||(c=>c),o=this.firestore.collectionGroup(e);return new FJ(i(o),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const i=this.schedulers.ngZone.run(()=>r);return new Sj(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(s.LFG(Er.Dh),s.LFG(Er.xv,8),s.LFG(Aj,8),s.LFG(LJ,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(gn.HU),s.LFG(xj,8),s.LFG(UJ,8),s.LFG(OT,8),s.LFG(K1,8),s.LFG(Q1,8),s.LFG(J1,8),s.LFG(X1,8),s.LFG(ek,8),s.LFG(tk,8),s.LFG(Aw,8))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),BJ=(()=>{class n{constructor(){PT.Z.registerVersion("angularfire",gn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:Aj,useValue:!0},{provide:xj,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:[VJ]}),n})(),$J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[wu],wu]}),n})();h2(class{constructor(n,t,e,r){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=r}});let zJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[Al,Q2,$J,aS,x2]]}),n})(),YJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.oAB({type:n,bootstrap:[TY]}),n.\u0275inj=s.cJS({providers:[{provide:f2,useValue:"en-GB"}],imports:[[oa,EY,od,ti,md,pq,Er.hO.initializeApp(Qt_firebaseConfig),BJ,mW,Aq,oa,R4,Jz,H4,aS,x2,zJ]]}),n})();(0,s.G48)(),Fc().bootstrapModule(YJ).catch(n=>console.error(n))},5867:(st,Ce,L)=>{L.d(Ce,{C6:()=>s.getApps,Mq:()=>s.getApp});var s=L(9681);(0,s.registerVersion)("firebase","9.8.1","app")},127:(st,Ce,L)=>{L.d(Ce,{Z:()=>s.Z});var s=L(3942);s.Z.registerVersion("firebase","9.8.1","app-compat")},7092:(st,Ce,L)=>{L.r(Ce);var s=L(5861),ne=L(3942),V=L(2090),he=L(9681),ae=L(655),be=L(1877),oe=L(4859);const Fe=function Ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},He=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qe=new be.Yd("@firebase/auth");function nt(y,...p){Qe.logLevel<=be.in.ERROR&&Qe.error(`Auth (${he.SDK_VERSION}): ${y}`,...p)}function xe(y,...p){throw Ze(y,...p)}function Ie(y,...p){return Ze(y,...p)}function Te(y,p,_){const w=Object.assign(Object.assign({},He()),{[p]:_});return new V.LL("auth","Firebase",w).create(p,{appName:y.name})}function qe(y,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&xe(y,"argument-error"),Te(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(y,...p){if("string"!=typeof y){const _=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(_,...w)}return me.create(y,...p)}function $(y,p,..._){if(!y)throw Ze(p,..._)}function De(y){const p="INTERNAL ASSERTION FAILED: "+y;throw nt(p),new Error(p)}function J(y,p){y||De(p)}const le=new Map;function ie(y){J(y instanceof Function,"Expected a class definition");let p=le.get(y);return p?(J(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,le.set(y,p),p)}function Le(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function pt(){return"http:"===nn()||"https:"===nn()}function nn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class pn{constructor(p,_){this.shortDelay=p,this.longDelay=_,J(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function Gt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pt()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zn(y,p){J(y.emulator,"Emulator should always be set here");const{url:_}=y.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class vn{static initialize(p,_,w){this.fetchImpl=p,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void De("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void De("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void De("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const an={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},$r=new pn(3e4,6e4);function on(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function $t(y,p,_,w){return ps.apply(this,arguments)}function ps(){return(ps=(0,s.Z)(function*(y,p,_,w,x={}){return Ei(y,x,(0,s.Z)(function*(){let O={},Q={};w&&("GET"===p?Q=w:O={body:JSON.stringify(w)});const _e=(0,V.xO)(Object.assign({key:y.config.apiKey},Q)).slice(1),je=yield y._getAdditionalHeaders();return je["Content-Type"]="application/json",y.languageCode&&(je["X-Firebase-Locale"]=y.languageCode),vn.fetch()(mo(y,y.config.apiHost,_,_e),Object.assign({method:p,headers:je,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Ei(y,p,_){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,s.Z)(function*(y,p,_){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},an),p);try{const x=new ui(y),O=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const Q=yield O.json();if("needConfirmation"in Q)throw ms(y,"account-exists-with-different-credential",Q);if(O.ok&&!("errorMessage"in Q))return Q;{const _e=O.ok?Q.errorMessage:Q.error.message,[je,tt]=_e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw ms(y,"credential-already-in-use",Q);if("EMAIL_EXISTS"===je)throw ms(y,"email-already-in-use",Q);const bt=w[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(tt)throw Te(y,bt,tt);xe(y,bt)}}catch(x){if(x instanceof V.ZR)throw x;xe(y,"network-request-failed")}})).apply(this,arguments)}function zr(y,p,_,w){return gs.apply(this,arguments)}function gs(){return(gs=(0,s.Z)(function*(y,p,_,w,x={}){const O=yield $t(y,p,_,w,x);return"mfaPendingCredential"in O&&xe(y,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function mo(y,p,_,w){const x=`${p}${_}?${w}`;return y.config.emulator?Zn(y.config,x):`${y.config.apiScheme}://${x}`}class ui{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(Ie(this.auth,"network-request-failed")),$r.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ms(y,p,_){const w={appName:y.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const x=Ie(y,p,w);return x.customData._tokenResponse=_,x}function Ii(){return(Ii=(0,s.Z)(function*(y,p){return $t(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function jn(y,p){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,s.Z)(function*(y,p){return $t(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function _o(y,p){return di.apply(this,arguments)}function di(){return(di=(0,s.Z)(function*(y,p){return $t(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function lr(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Qo(){return(Qo=(0,s.Z)(function*(y,p=!1){const _=(0,V.m9)(y),w=yield _.getIdToken(p),x=ct(w);$(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,Q=null==O?void 0:O.sign_in_provider;return{claims:x,token:w,authTime:lr(rn(x.auth_time)),issuedAtTime:lr(rn(x.iat)),expirationTime:lr(rn(x.exp)),signInProvider:Q||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function rn(y){return 1e3*Number(y)}function ct(y){const[p,_,w]=y.split(".");if(void 0===p||void 0===_||void 0===w)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,V.tV)(_);return x?JSON.parse(x):(nt("Failed to decode base64 JWT payload"),null)}catch(x){return nt("Caught error parsing JWT payload as JSON",x),null}}function Sr(y,p){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,s.Z)(function*(y,p,_=!1){if(_)return p;try{return yield p}catch(w){throw w instanceof V.ZR&&Yt(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Yt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Jo{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,s.Z)(function*(){yield _.iteration()}),w)}iteration(){var p=this;return(0,s.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&p.schedule(!0))}p.schedule()})()}}class Ar{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=lr(this.lastLoginAt),this.creationTime=lr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xr(y){return H.apply(this,arguments)}function H(){return(H=(0,s.Z)(function*(y){var p;const _=y.auth,w=yield y.getIdToken(),x=yield Sr(y,_o(_,{idToken:w}));$(null==x?void 0:x.users.length,_,"internal-error");const O=x.users[0];y._notifyReloadListener(O);const Q=(null===(p=O.providerUserInfo)||void 0===p?void 0:p.length)?Y(O.providerUserInfo):[],_e=Ae(y.providerData,Q),bt=!!y.isAnonymous&&!(y.email&&O.passwordHash||(null==_e?void 0:_e.length)),gt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:_e,metadata:new Ar(O.createdAt,O.lastLoginAt),isAnonymous:bt};Object.assign(y,gt)})).apply(this,arguments)}function K(){return(K=(0,s.Z)(function*(y){const p=(0,V.m9)(y);yield xr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ae(y,p){return[...y.filter(w=>!p.some(x=>x.providerId===w.providerId)),...p]}function Y(y){return y.map(p=>{var{providerId:_}=p,w=(0,ae._T)(p,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Pe(){return(Pe=(0,s.Z)(function*(y,p){const _=yield Ei(y,{},(0,s.Z)(function*(){const w=(0,V.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:O}=y.config,Q=mo(y,x,"/v1/token",`key=${O}`),_e=yield y._getAdditionalHeaders();return _e["Content-Type"]="application/x-www-form-urlencoded",vn.fetch()(Q,{method:"POST",headers:_e,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ot{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){$(p.idToken,"internal-error"),$(void 0!==p.idToken,"internal-error"),$(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function Ct(y){const p=ct(y);return $(p,"internal-error"),$(void 0!==p.exp,"internal-error"),$(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var w=this;return(0,s.Z)(function*(){return $(!w.accessToken||w.refreshToken,p,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var w=this;return(0,s.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:Q}=yield function re(y,p){return Pe.apply(this,arguments)}(p,_);w.updateTokensAndExpiration(x,O,Number(Q))})()}updateTokensAndExpiration(p,_,w){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,_){const{refreshToken:w,accessToken:x,expirationTime:O}=_,Q=new ot;return w&&($("string"==typeof w,"internal-error",{appName:p}),Q.refreshToken=w),x&&($("string"==typeof x,"internal-error",{appName:p}),Q.accessToken=x),O&&($("number"==typeof O,"internal-error",{appName:p}),Q.expirationTime=O),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new ot,this.toJSON())}_performRefresh(){return De("not implemented")}}function mt(y,p){$("string"==typeof y||void 0===y,"internal-error",{appName:p})}class At{constructor(p){var{uid:_,auth:w,stsTokenManager:x}=p,O=(0,ae._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Ar(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,s.Z)(function*(){const w=yield Sr(_,_.stsTokenManager.getToken(_.auth,p));return $(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(p){return function Di(y){return Qo.apply(this,arguments)}(this,p)}reload(){return function W(y){return K.apply(this,arguments)}(this)}_assign(p){this!==p&&($(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new At(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var w=this;return(0,s.Z)(function*(){let x=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),x=!0),_&&(yield xr(w)),yield w.auth._persistUserIfCurrent(w),x&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,s.Z)(function*(){const _=yield p.getIdToken();return yield Sr(p,function yt(y,p){return Ii.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var w,x,O,Q,_e,je,tt,bt;const gt=null!==(w=_.displayName)&&void 0!==w?w:void 0,Jn=null!==(x=_.email)&&void 0!==x?x:void 0,Fi=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Jc=null!==(Q=_.photoURL)&&void 0!==Q?Q:void 0,Oy=null!==(_e=_.tenantId)&&void 0!==_e?_e:void 0,ll=null!==(je=_._redirectEventId)&&void 0!==je?je:void 0,xh=null!==(tt=_.createdAt)&&void 0!==tt?tt:void 0,Sp=null!==(bt=_.lastLoginAt)&&void 0!==bt?bt:void 0,{uid:Mh,emailVerified:Vt,isAnonymous:Jm,providerData:cl,stsTokenManager:Ap}=_;$(Mh&&Ap,p,"internal-error");const xp=ot.fromJSON(this.name,Ap);$("string"==typeof Mh,p,"internal-error"),mt(gt,p.name),mt(Jn,p.name),$("boolean"==typeof Vt,p,"internal-error"),$("boolean"==typeof Jm,p,"internal-error"),mt(Fi,p.name),mt(Jc,p.name),mt(Oy,p.name),mt(ll,p.name),mt(xh,p.name),mt(Sp,p.name);const Mp=new At({uid:Mh,auth:p,email:Jn,emailVerified:Vt,displayName:gt,isAnonymous:Jm,photoURL:Jc,phoneNumber:Fi,tenantId:Oy,stsTokenManager:xp,createdAt:xh,lastLoginAt:Sp});return cl&&Array.isArray(cl)&&(Mp.providerData=cl.map(Ny=>Object.assign({},Ny))),ll&&(Mp._redirectEventId=ll),Mp}static _fromIdTokenResponse(p,_,w=!1){return(0,s.Z)(function*(){const x=new ot;x.updateFromServerResponse(_);const O=new At({uid:_.localId,auth:p,stsTokenManager:x,isAnonymous:w});return yield xr(O),O})()}}const Tt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,s.Z)(function*(){return!0})()}_set(_,w){var x=this;return(0,s.Z)(function*(){x.storage[_]=w})()}_get(_){var w=this;return(0,s.Z)(function*(){const x=w.storage[_];return void 0===x?null:x})()}_remove(_){var w=this;return(0,s.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return y.type="NONE",y})();function rr(y,p,_){return`firebase:${y}:${p}:${_}`}class Yr{constructor(p,_,w){this.persistence=p,this.auth=_,this.userKey=w;const{config:x,name:O}=this.auth;this.fullUserKey=rr(this.userKey,x.apiKey,O),this.fullPersistenceKey=rr("persistence",x.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,s.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?At._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,s.Z)(function*(){if(_.persistence===p)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,w="authUser"){return(0,s.Z)(function*(){if(!_.length)return new Yr(ie(Tt),p,w);const x=(yield Promise.all(_.map(function(){var tt=(0,s.Z)(function*(bt){if(yield bt._isAvailable())return bt});return function(bt){return tt.apply(this,arguments)}}()))).filter(tt=>tt);let O=x[0]||ie(Tt);const Q=rr(w,p.config.apiKey,p.name);let _e=null;for(const tt of _)try{const bt=yield tt._get(Q);if(bt){const gt=At._fromJSON(p,bt);tt!==O&&(_e=gt),O=tt;break}}catch(bt){}const je=x.filter(tt=>tt._shouldAllowMigration);return O._shouldAllowMigration&&je.length?(O=je[0],_e&&(yield O._set(Q,_e.toJSON())),yield Promise.all(_.map(function(){var tt=(0,s.Z)(function*(bt){if(bt!==O)try{yield bt._remove(Q)}catch(gt){}});return function(bt){return tt.apply(this,arguments)}}())),new Yr(O,p,w)):new Yr(O,p,w)})()}}function Ec(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(ir(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(El(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Fs(p))return"Blackberry";if(sr(p))return"Webos";if(Ic(p))return"Safari";if((p.includes("chrome/")||Il(p))&&!p.includes("edge/"))return"Chrome";if(Wr(p))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function El(y=(0,V.z$)()){return/firefox\//i.test(y)}function Ic(y=(0,V.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Il(y=(0,V.z$)()){return/crios\//i.test(y)}function ir(y=(0,V.z$)()){return/iemobile/i.test(y)}function Wr(y=(0,V.z$)()){return/android/i.test(y)}function Fs(y=(0,V.z$)()){return/blackberry/i.test(y)}function sr(y=(0,V.z$)()){return/webos/i.test(y)}function hi(y=(0,V.z$)()){return/iphone|ipad|ipod/i.test(y)}function vo(y=(0,V.z$)()){return hi(y)||Wr(y)||sr(y)||Fs(y)||/windows phone/i.test(y)||ir(y)}function Fa(y,p=[]){let _;switch(y){case"Browser":_=Ec((0,V.z$)());break;case"Worker":_=`${Ec((0,V.z$)())}-${y}`;break;default:_=y}const w=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${he.SDK_VERSION}/${w}`}class fi{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const w=O=>new Promise((Q,_e)=>{try{Q(p(O))}catch(je){_e(je)}});w.onAbort=_,this.queue.push(w);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,s.Z)(function*(){if(_.auth.currentUser===p)return;const w=[];try{for(const x of _.queue)yield x(p),x.onAbort&&w.push(x.onAbort)}catch(x){w.reverse();for(const O of w)try{O()}catch(Q){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:x.message})}})()}}class Je{constructor(p,_,w){this.app=p,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yn(this),this.idTokenSubscription=new yn(this),this.beforeStateQueue=new fi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(p,_){var w=this;return _&&(this._popupRedirectResolver=ie(_)),this._initializationPromise=this.queue((0,s.Z)(function*(){var x,O;if(!w._deleted&&(w.persistenceManager=yield Yr.create(w,p),!w._deleted)){if(null===(x=w._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(Q){}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(O=w.currentUser)||void 0===O?void 0:O.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,s.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,s.Z)(function*(){var w;const x=yield _.assertedPersistence.getCurrentUser();let O=x,Q=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const _e=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,je=null==O?void 0:O._redirectEventId,tt=yield _.tryRedirectSignIn(p);(!_e||_e===je)&&(null==tt?void 0:tt.user)&&(O=tt.user,Q=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(Q)try{yield _.beforeStateQueue.runMiddleware(O)}catch(_e){O=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(_e))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return $(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var _=this;return(0,s.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(x){yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,s.Z)(function*(){try{yield xr(p)}catch(w){if("auth/network-request-failed"!==w.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function rt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,s.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,s.Z)(function*(){const w=p?(0,V.m9)(p):null;return w&&$(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(p,_=!1){var w=this;return(0,s.Z)(function*(){if(!w._deleted)return p&&$(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,s.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,s.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,s.Z)(function*(){yield _.assertedPersistence.setPersistence(ie(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new V.LL("auth","Firebase",p())}onAuthStateChanged(p,_,w){return this.registerStateListener(this.authStateSubscription,p,_,w)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,w){return this.registerStateListener(this.idTokenSubscription,p,_,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var w=this;return(0,s.Z)(function*(){const x=yield w.getOrInitRedirectPersistenceManager(_);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,s.Z)(function*(){if(!_.redirectPersistenceManager){const w=p&&ie(p)||_._popupRedirectResolver;$(w,_,"argument-error"),_.redirectPersistenceManager=yield Yr.create(_,[ie(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,s.Z)(function*(){var w,x;return _._isInitialized&&(yield _.queue((0,s.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===p?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,s.Z)(function*(){if(p===_.currentUser)return _.queue((0,s.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,w,x){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return $(Q,this,"internal-error"),Q.then(()=>O(this.currentUser)),"function"==typeof _?p.addObserver(_,w,x):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,s.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Fa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,s.Z)(function*(){var _;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(w["X-Firebase-Client"]=x),w})()}}function ft(y){return(0,V.m9)(y)}class yn{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _s(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function vs(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class Gi{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return De("not implemented")}_getIdTokenResponse(p){return De("not implemented")}_linkToIdToken(p,_){return De("not implemented")}_getReauthenticationResolver(p){return De("not implemented")}}function zn(y,p){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,s.Z)(function*(y,p){return $t(y,"POST","/v1/accounts:resetPassword",on(y,p))})).apply(this,arguments)}function La(y,p){return gr.apply(this,arguments)}function gr(){return(gr=(0,s.Z)(function*(y,p){return $t(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Dc(y,p){return yo.apply(this,arguments)}function yo(){return(yo=(0,s.Z)(function*(y,p){return $t(y,"POST","/v1/accounts:update",on(y,p))})).apply(this,arguments)}function ea(){return(ea=(0,s.Z)(function*(y,p){return zr(y,"POST","/v1/accounts:signInWithPassword",on(y,p))})).apply(this,arguments)}function bo(y,p){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,s.Z)(function*(y,p){return $t(y,"POST","/v1/accounts:sendOobCode",on(y,p))})).apply(this,arguments)}function En(y,p){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,s.Z)(function*(y,p){return bo(y,p)})).apply(this,arguments)}function Tl(y,p){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,s.Z)(function*(y,p){return bo(y,p)})).apply(this,arguments)}function Si(y,p){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,s.Z)(function*(y,p){return bo(y,p)})).apply(this,arguments)}function Wd(y,p){return ys.apply(this,arguments)}function ys(){return(ys=(0,s.Z)(function*(y,p){return bo(y,p)})).apply(this,arguments)}function ku(){return(ku=(0,s.Z)(function*(y,p){return zr(y,"POST","/v1/accounts:signInWithEmailLink",on(y,p))})).apply(this,arguments)}function Kd(){return(Kd=(0,s.Z)(function*(y,p){return zr(y,"POST","/v1/accounts:signInWithEmailLink",on(y,p))})).apply(this,arguments)}class kr extends Gi{constructor(p,_,w,x=null){super("password",w),this._email=p,this._password=_,this._tenantId=x}static _fromEmailAndPassword(p,_){return new kr(p,_,"password")}static _fromEmailAndCode(p,_,w=null){return new kr(p,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,s.Z)(function*(){switch(_.signInMethod){case"password":return function Xt(y,p){return ea.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function bs(y,p){return ku.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:xe(p,"internal-error")}})()}_linkToIdToken(p,_){var w=this;return(0,s.Z)(function*(){switch(w.signInMethod){case"password":return La(p,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function ym(y,p){return Kd.apply(this,arguments)}(p,{idToken:_,email:w._email,oobCode:w._password});default:xe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function wo(y,p){return Qd.apply(this,arguments)}function Qd(){return(Qd=(0,s.Z)(function*(y,p){return zr(y,"POST","/v1/accounts:signInWithIdp",on(y,p))})).apply(this,arguments)}class Ls extends Gi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Ls(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):xe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:x}=_,O=(0,ae._T)(_,["providerId","signInMethod"]);if(!w||!x)return null;const Q=new Ls(w,x);return Q.idToken=O.idToken||void 0,Q.accessToken=O.accessToken||void 0,Q.secret=O.secret,Q.nonce=O.nonce,Q.pendingToken=O.pendingToken||null,Q}_getIdTokenResponse(p){return wo(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,wo(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,wo(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,V.xO)(_)}return p}}function wm(y,p){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,s.Z)(function*(y,p){return $t(y,"POST","/v1/accounts:sendVerificationCode",on(y,p))})).apply(this,arguments)}function Co(){return(Co=(0,s.Z)(function*(y,p){return zr(y,"POST","/v1/accounts:signInWithPhoneNumber",on(y,p))})).apply(this,arguments)}function Xd(){return(Xd=(0,s.Z)(function*(y,p){const _=yield zr(y,"POST","/v1/accounts:signInWithPhoneNumber",on(y,p));if(_.temporaryProof)throw ms(y,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Em={USER_NOT_FOUND:"user-not-found"};function eh(){return(eh=(0,s.Z)(function*(y,p){return zr(y,"POST","/v1/accounts:signInWithPhoneNumber",on(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Em)})).apply(this,arguments)}class Ua extends Gi{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Ua({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Ua({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Ru(y,p){return Co.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Cm(y,p){return Xd.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Im(y,p){return eh.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:w,verificationCode:x}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:w,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:w,phoneNumber:x,temporaryProof:O}=p;return w||_||x||O?new Ua({verificationId:_,verificationCode:w,phoneNumber:x,temporaryProof:O}):null}}class Ac{constructor(p){var _,w,x,O,Q,_e;const je=(0,V.zd)((0,V.pd)(p)),tt=null!==(_=je.apiKey)&&void 0!==_?_:null,bt=null!==(w=je.oobCode)&&void 0!==w?w:null,gt=function Yf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=je.mode)&&void 0!==x?x:null);$(tt&&bt&&gt,"argument-error"),this.apiKey=tt,this.operation=gt,this.code=bt,this.continueUrl=null!==(O=je.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Q=je.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(_e=je.tenantId)&&void 0!==_e?_e:null}static parseLink(p){const _=function Sl(y){const p=(0,V.zd)((0,V.pd)(y)).link,_=p?(0,V.zd)((0,V.pd)(p)).deep_link_id:null,w=(0,V.zd)((0,V.pd)(y)).deep_link_id;return(w?(0,V.zd)((0,V.pd)(w)).link:null)||w||_||p||y}(p);try{return new Ac(_)}catch(w){return null}}}let nh=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(_,w){return kr._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const x=Ac.parseLink(w);return $(x,"argument-error"),kr._fromEmailAndCode(_,x.code,x.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Rr{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class ta extends Rr{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ws extends ta{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return $("providerId"in _&&"signInMethod"in _,"argument-error"),Ls._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return $(p.idToken||p.accessToken,"argument-error"),Ls._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ws.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ws.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:x,pendingToken:O,nonce:Q,providerId:_e}=p;if(!w&&!x&&!_&&!O||!_e)return null;try{return new ws(_e)._credential({idToken:_,accessToken:w,nonce:Q,pendingToken:O})}catch(je){return null}}}let Va=(()=>{class y extends ta{constructor(){super("facebook.com")}static credential(_){return Ls._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return y.credentialFromTaggedObject(_)}static credentialFromError(_){return y.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return y.credential(_.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),xc=(()=>{class y extends ta{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return Ls._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return y.credentialFromTaggedObject(_)}static credentialFromError(_){return y.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:x}=_;if(!w&&!x)return null;try{return y.credential(w,x)}catch(O){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Wf=(()=>{class y extends ta{constructor(){super("github.com")}static credential(_){return Ls._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return y.credentialFromTaggedObject(_)}static credentialFromError(_){return y.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return y.credential(_.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class na extends Gi{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return wo(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,wo(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,wo(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:x,pendingToken:O}=_;return w&&x&&O&&w===x?new na(w,O):null}static _create(p,_){return new na(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Kr extends Rr{constructor(p){$(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Kr.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Kr.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=na.fromJSON(p);return $(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:w}=p;if(!_||!w)return null;try{return na._create(w,_)}catch(x){return null}}}let rh=(()=>{class y extends ta{constructor(){super("twitter.com")}static credential(_,w){return Ls._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return y.credentialFromTaggedObject(_)}static credentialFromError(_){return y.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:x}=_;if(!w||!x)return null;try{return y.credential(w,x)}catch(O){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Pr(y,p){return ja.apply(this,arguments)}function ja(){return(ja=(0,s.Z)(function*(y,p){return zr(y,"POST","/v1/accounts:signUp",on(y,p))})).apply(this,arguments)}class Ai{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,w,x=!1){return(0,s.Z)(function*(){const O=yield At._fromIdTokenResponse(p,w,x),Q=Pu(w);return new Ai({user:O,providerId:Q,_tokenResponse:w,operationType:_})})()}static _forOperation(p,_,w){return(0,s.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const x=Pu(w);return new Ai({user:p,providerId:x,_tokenResponse:w,operationType:_})})()}}function Pu(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Ou(){return(Ou=(0,s.Z)(function*(y){var p;const _=ft(y);if(yield _._initializationPromise,null===(p=_.currentUser)||void 0===p?void 0:p.isAnonymous)return new Ai({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield Pr(_,{returnSecureToken:!0}),x=yield Ai._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Ha extends V.ZR{constructor(p,_,w,x){var O;super(_.code,_.message),this.operationType=w,this.user=x,Object.setPrototypeOf(this,Ha.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,_,w,x){return new Ha(p,_,w,x)}}function Nu(y,p,_,w){return("reauthenticate"===p?_._getReauthenticationResolver(y):_._getIdTokenResponse(y)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Ha._fromErrorAndOperation(y,O,p,w):O})}function Cs(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function bn(){return(bn=(0,s.Z)(function*(y,p){const _=(0,V.m9)(y);yield un(!0,_,p);const{providerUserInfo:w}=yield jn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),x=Cs(w||[]);return _.providerData=_.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function xl(y,p){return ra.apply(this,arguments)}function ra(){return(ra=(0,s.Z)(function*(y,p,_=!1){const w=yield Sr(y,p._linkToIdToken(y.auth,yield y.getIdToken()),_);return Ai._forOperation(y,"link",w)})).apply(this,arguments)}function un(y,p,_){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,s.Z)(function*(y,p,_){yield xr(p);const x=!1===y?"provider-already-linked":"no-such-provider";$(Cs(p.providerData).has(_)===y,p.auth,x)})).apply(this,arguments)}function Mc(y,p){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,s.Z)(function*(y,p,_=!1){const{auth:w}=y,x="reauthenticate";try{const O=yield Sr(y,Nu(w,x,p,y),_);$(O.idToken,w,"internal-error");const Q=ct(O.idToken);$(Q,w,"internal-error");const{sub:_e}=Q;return $(y.uid===_e,w,"user-mismatch"),Ai._forOperation(y,x,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&xe(w,"user-mismatch"),O}})).apply(this,arguments)}function mr(y,p){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,s.Z)(function*(y,p,_=!1){const w="signIn",x=yield Nu(y,w,p),O=yield Ai._fromIdTokenResponse(y,w,x);return _||(yield y._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Nn(y,p){return Es.apply(this,arguments)}function Es(){return(Es=(0,s.Z)(function*(y,p){return mr(ft(y),p)})).apply(this,arguments)}function _r(y,p){return ia.apply(this,arguments)}function ia(){return(ia=(0,s.Z)(function*(y,p){const _=(0,V.m9)(y);return yield un(!1,_,p.providerId),xl(_,p)})).apply(this,arguments)}function Us(y,p){return kl.apply(this,arguments)}function kl(){return(kl=(0,s.Z)(function*(y,p){return Mc((0,V.m9)(y),p)})).apply(this,arguments)}function $i(y,p){return Is.apply(this,arguments)}function Is(){return(Is=(0,s.Z)(function*(y,p){return zr(y,"POST","/v1/accounts:signInWithCustomToken",on(y,p))})).apply(this,arguments)}function _t(){return(_t=(0,s.Z)(function*(y,p){const _=ft(y),w=yield $i(_,{token:p,returnSecureToken:!0}),x=yield Ai._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Za{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?kc._fromServerResponse(p,_):xe(p,"internal-error")}}class kc extends Za{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new kc(_)}}function Rl(y,p,_){var w;$((null===(w=_.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),$(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&($(_.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&($(_.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Pl(){return(Pl=(0,s.Z)(function*(y,p,_){const w=(0,V.m9)(y),x={requestType:"PASSWORD_RESET",email:p};_&&Rl(w,x,_),yield Tl(w,x)})).apply(this,arguments)}function Vu(){return(Vu=(0,s.Z)(function*(y,p,_){yield zn((0,V.m9)(y),{oobCode:p,newPassword:_})})).apply(this,arguments)}function qt(){return(qt=(0,s.Z)(function*(y,p){yield Dc((0,V.m9)(y),{oobCode:p})})).apply(this,arguments)}function Rc(y,p){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,s.Z)(function*(y,p){const _=(0,V.m9)(y),w=yield zn(_,{oobCode:p}),x=w.requestType;switch($(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(w.mfaInfo,_,"internal-error");default:$(w.email,_,"internal-error")}let O=null;return w.mfaInfo&&(O=Za._fromServerResponse(ft(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function sa(){return(sa=(0,s.Z)(function*(y,p){const{data:_}=yield Rc((0,V.m9)(y),p);return _.email})).apply(this,arguments)}function Ol(){return(Ol=(0,s.Z)(function*(y,p,_){const w=ft(y),x=yield Pr(w,{returnSecureToken:!0,email:p,password:_}),O=yield Ai._fromIdTokenResponse(w,"signIn",x);return yield w._updateCurrentUser(O.user),O})).apply(this,arguments)}function Pc(){return(Pc=(0,s.Z)(function*(y,p,_){const w=(0,V.m9)(y),x={requestType:"EMAIL_SIGNIN",email:p};$(_.handleCodeInApp,w,"argument-error"),_&&Rl(w,x,_),yield Si(w,x)})).apply(this,arguments)}function Yn(){return(Yn=(0,s.Z)(function*(y,p,_){const w=(0,V.m9)(y),x=nh.credentialWithLink(p,_||Le());return $(x._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Nn(w,x)})).apply(this,arguments)}function Vs(y,p){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,s.Z)(function*(y,p){return $t(y,"POST","/v1/accounts:createAuthUri",on(y,p))})).apply(this,arguments)}function zi(){return(zi=(0,s.Z)(function*(y,p){const w={identifier:p,continueUri:pt()?Le():"http://localhost"},{signinMethods:x}=yield Vs((0,V.m9)(y),w);return x||[]})).apply(this,arguments)}function Nc(){return(Nc=(0,s.Z)(function*(y,p){const _=(0,V.m9)(y),x={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&Rl(_.auth,x,p);const{email:O}=yield En(_.auth,x);O!==y.email&&(yield y.reload())})).apply(this,arguments)}function Fc(){return(Fc=(0,s.Z)(function*(y,p,_){const w=(0,V.m9)(y),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};_&&Rl(w.auth,O,_);const{email:Q}=yield Wd(w.auth,O);Q!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ll(y,p){return oa.apply(this,arguments)}function oa(){return(oa=(0,s.Z)(function*(y,p){return $t(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ul(){return(Ul=(0,s.Z)(function*(y,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const w=(0,V.m9)(y),O={idToken:yield w.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Q=yield Sr(w,Ll(w.auth,O));w.displayName=Q.displayName||null,w.photoURL=Q.photoUrl||null;const _e=w.providerData.find(({providerId:je})=>"password"===je);_e&&(_e.displayName=w.displayName,_e.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Q)})).apply(this,arguments)}function $a(y,p,_){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,s.Z)(function*(y,p,_){const{auth:w}=y,O={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(O.email=p),_&&(O.password=_);const Q=yield Sr(y,La(w,O));yield y._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class za{constructor(p,_,w={}){this.isNewUser=p,this.providerId=_,this.profile=w}}class oh extends za{constructor(p,_,w,x){super(p,_,w),this.username=x}}class Ya extends za{constructor(p,_){super(p,"facebook.com",_)}}class Ds extends oh{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Qf extends za{constructor(p,_){super(p,"google.com",_)}}class cr extends oh{constructor(p,_,w){super(p,"twitter.com",_,w)}}function Ts(y){const{user:p,_tokenResponse:_}=y;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function sh(y){var p,_;if(!y)return null;const{providerId:w}=y,x=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},O=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const Q=null===(_=null===(p=ct(y.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Q)return new za(O,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!w)return null;switch(w){case"facebook.com":return new Ya(O,x);case"github.com":return new Ds(O,x);case"google.com":return new Qf(O,x);case"twitter.com":return new cr(O,x,y.screenName||null);case"custom":case"anonymous":return new za(O,null);default:return new za(O,w,x)}}(_)}class Bs{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new Bs("enroll",p)}static _fromMfaPendingCredential(p){return new Bs("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,w;if(null==p?void 0:p.multiFactorSession){if(null===(_=p.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Bs._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(w=p.multiFactorSession)||void 0===w?void 0:w.idToken)return Bs._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Wa{constructor(p,_,w){this.session=p,this.hints=_,this.signInResolver=w}static _fromError(p,_){const w=ft(p),x=_.customData._serverResponse,O=(x.mfaInfo||[]).map(_e=>Za._fromServerResponse(w,_e));$(x.mfaPendingCredential,w,"internal-error");const Q=Bs._fromMfaPendingCredential(x.mfaPendingCredential);return new Wa(Q,O,function(){var _e=(0,s.Z)(function*(je){const tt=yield je._process(w,Q);delete x.mfaInfo,delete x.mfaPendingCredential;const bt=Object.assign(Object.assign({},x),{idToken:tt.idToken,refreshToken:tt.refreshToken});switch(_.operationType){case"signIn":const gt=yield Ai._fromIdTokenResponse(w,_.operationType,bt);return yield w._updateCurrentUser(gt.user),gt;case"reauthenticate":return $(_.user,w,"internal-error"),Ai._forOperation(_.user,_.operationType,bt);default:xe(w,"internal-error")}});return function(je){return _e.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,s.Z)(function*(){return _.signInResolver(p)})()}}function Xf(y,p){return $t(y,"POST","/v2/accounts/mfaEnrollment:start",on(y,p))}class ch{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>Za._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new ch(p)}getSession(){var p=this;return(0,s.Z)(function*(){return Bs._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var w=this;return(0,s.Z)(function*(){const x=p,O=yield w.getSession(),Q=yield Sr(w.user,x._process(w.user.auth,O,_));return yield w.user._updateTokensIfNecessary(Q),w.user.reload()})()}unenroll(p){var _=this;return(0,s.Z)(function*(){const w="string"==typeof p?p:p.uid,x=yield _.user.getIdToken(),O=yield Sr(_.user,function Lc(y,p){return $t(y,"POST","/v2/accounts/mfaEnrollment:withdraw",on(y,p))}(_.user.auth,{idToken:x,mfaEnrollmentId:w}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Q})=>Q!==w),yield _.user._updateTokensIfNecessary(O);try{yield _.user.reload()}catch(Q){if("auth/user-token-expired"!==Q.code)throw Q}})()}}const Uc=new WeakMap,Do="__sak";class Gu{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Do,"1"),this.storage.removeItem(Do),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const jl=(()=>{class y extends Gu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Am(){const y=(0,V.z$)();return Ic(y)||hi(y)}()&&function pr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=vo(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const x=this.storage.getItem(w),O=this.localCache[w];x!==O&&_(w,O,x)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((_e,je,tt)=>{this.notifyListeners(_e,tt)});const x=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _e=this.storage.getItem(x);if(_.newValue!==_e)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!w)return}const O=()=>{const _e=this.storage.getItem(x);!w&&this.localCache[x]===_e||this.notifyListeners(x,_e)},Q=this.storage.getItem(x);!function Dl(){return(0,V.w1)()&&10===document.documentMode}()||Q===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,w){this.localCache[_]=w;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var x=()=>super._set,O=this;return(0,s.Z)(function*(){yield x().call(O,_,w),O.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,x=this;return(0,s.Z)(function*(){const O=yield w().call(x,_);return x.localCache[_]=JSON.stringify(O),O})()}_remove(_){var w=()=>super._remove,x=this;return(0,s.Z)(function*(){yield w().call(x,_),delete x.localCache[_]})()}}return y.type="LOCAL",y})(),Yi=(()=>{class y extends Gu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return y.type="SESSION",y})();let dh=(()=>{class y{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(O=>O.isListeningto(_));if(w)return w;const x=new y(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,s.Z)(function*(){const x=_,{eventId:O,eventType:Q,data:_e}=x.data,je=w.handlersMap[Q];if(!(null==je?void 0:je.size))return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:Q});const tt=Array.from(je).map(function(){var gt=(0,s.Z)(function*(Jn){return Jn(x.origin,_e)});return function(Jn){return gt.apply(this,arguments)}}()),bt=yield function Vc(y){return Promise.all(y.map(function(){var p=(0,s.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return p.apply(this,arguments)}}()))}(tt);x.ports[0].postMessage({status:"done",eventId:O,eventType:Q,response:bt})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function dr(y="",p=10){let _="";for(let w=0;w<p;w++)_+=Math.floor(10*Math.random());return y+_}class js{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,w=50){var x=this;return(0,s.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Q,_e;return new Promise((je,tt)=>{const bt=dr("",20);O.port1.start();const gt=setTimeout(()=>{tt(new Error("unsupported_event"))},w);_e={messageChannel:O,onMessage(Jn){const Fi=Jn;if(Fi.data.eventId===bt)switch(Fi.data.status){case"ack":clearTimeout(gt),Q=setTimeout(()=>{tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),je(Fi.data.response);break;default:clearTimeout(gt),clearTimeout(Q),tt(new Error("invalid_response"))}}},x.handlers.add(_e),O.port1.addEventListener("message",_e.onMessage),x.target.postMessage({eventType:p,eventId:bt,data:_},[O.port2])}).finally(()=>{_e&&x.removeMessageHandler(_e)})})()}}function Mt(){return window}function ca(){return void 0!==Mt().WorkerGlobalScope&&"function"==typeof Mt().importScripts}function Ka(){return(Ka=(0,s.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const zu="firebaseLocalStorageDb",vr="firebaseLocalStorage",Qa="fbase_key";class Hs{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Fr(y,p){return y.transaction([vr],p?"readwrite":"readonly").objectStore(vr)}function Hl(){const y=indexedDB.open(zu,1);return new Promise((p,_)=>{y.addEventListener("error",()=>{_(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(vr,{keyPath:Qa})}catch(x){_(x)}}),y.addEventListener("success",(0,s.Z)(function*(){const w=y.result;w.objectStoreNames.contains(vr)?p(w):(w.close(),yield function ph(){const y=indexedDB.deleteDatabase(zu);return new Hs(y).toPromise()}(),p(yield Hl()))}))})}function Qr(y,p,_){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,s.Z)(function*(y,p,_){const w=Fr(y,!0).put({[Qa]:p,value:_});return new Hs(w).toPromise()})).apply(this,arguments)}function Pn(){return(Pn=(0,s.Z)(function*(y,p){const _=Fr(y,!1).get(p),w=yield new Hs(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Wi(y,p){const _=Fr(y,!0).delete(p);return new Hs(_).toPromise()}const To=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,s.Z)(function*(){return _.db||(_.db=yield Hl()),_.db})()}_withRetries(_){var w=this;return(0,s.Z)(function*(){let x=0;for(;;)try{const O=yield w._openDb();return yield _(O)}catch(O){if(x++>3)throw O;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,s.Z)(function*(){return ca()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,s.Z)(function*(){_.receiver=dh._getInstance(function fh(){return ca()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,s.Z)(function*(x,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(x,O){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,s.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,s.Z)(function*(){var w,x;if(_.activeServiceWorker=yield function hh(){return Ka.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new js(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(w=O[0])||void 0===w?void 0:w.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,s.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function $u(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,s.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Hl();return yield Qr(_,Do,"1"),yield Wi(_,Do),!0}catch(_){}return!1})()}_withPendingWrite(_){var w=this;return(0,s.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var x=this;return(0,s.Z)(function*(){return x._withPendingWrite((0,s.Z)(function*(){return yield x._withRetries(O=>Qr(O,_,w)),x.localCache[_]=w,x.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,s.Z)(function*(){const x=yield w._withRetries(O=>function Bc(y,p){return Pn.apply(this,arguments)}(O,_));return w.localCache[_]=x,x})()}_remove(_){var w=this;return(0,s.Z)(function*(){return w._withPendingWrite((0,s.Z)(function*(){return yield w._withRetries(x=>Wi(x,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,s.Z)(function*(){const w=yield _._withRetries(Q=>{const _e=Fr(Q,!1).getAll();return new Hs(_e).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:Q,value:_e}of w)O.add(Q),JSON.stringify(_.localCache[Q])!==JSON.stringify(_e)&&(_.notifyListeners(Q,_e),x.push(Q));for(const Q of Object.keys(_.localCache))_.localCache[Q]&&!O.has(Q)&&(_.notifyListeners(Q,null),x.push(Q));return x})()}notifyListeners(_,w){this.localCache[_]=w;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,s.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function ql(y,p){return $t(y,"POST","/v2/accounts/mfaSignIn:start",on(y,p))}function Ja(){return(Ja=(0,s.Z)(function*(y){return(yield $t(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function So(y){return new Promise((p,_)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=p,w.onerror=x=>{const O=Ie("internal-error");O.customData=x,_(O)},w.type="text/javascript",w.charset="UTF-8",function Xa(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(w)})}function ki(y){return`__${y}${Math.floor(1e6*Math.random())}`}const el=1e12;class ha{constructor(p){this.auth=p,this.counter=el,this._widgets=new Map}render(p,_){const w=this.counter;return this._widgets.set(w,new xm(p,this.auth.name,_||{})),this.counter++,w}reset(p){var _;const w=p||el;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(p){var _;return(null===(_=this._widgets.get(p||el))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,s.Z)(function*(){var w;return null===(w=_._widgets.get(p||el))||void 0===w||w.execute(),""})()}}class xm{constructor(p,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;$(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function jc(y){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const kn=ki("rcb"),gh=new pn(3e4,6e4);class tp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Mt().grecaptcha}load(p,_=""){return $(function np(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Mt().grecaptcha):new Promise((w,x)=>{const O=Mt().setTimeout(()=>{x(Ie(p,"network-request-failed"))},gh.get());Mt()[kn]=()=>{Mt().clearTimeout(O),delete Mt()[kn];const _e=Mt().grecaptcha;if(!_e)return void x(Ie(p,"internal-error"));const je=_e.render;_e.render=(tt,bt)=>{const gt=je(tt,bt);return this.counter++,gt},this.hostLanguage=_,w(_e)},So(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:kn,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),x(Ie(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Mt().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mh{load(p){return(0,s.Z)(function*(){return new ha(p)})()}clearedOneInstance(){}}const Wu="recaptcha",_h={theme:"light",type:"image"};class Ao{constructor(p,_=Object.assign({},_h),w){this.parameters=_,this.type=Wu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ft(w),this.isInvisible="invisible"===this.parameters.size,$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;$(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mh:new tp,this.validateStartingState()}verify(){var p=this;return(0,s.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(_)||new Promise(O=>{const Q=_e=>{!_e||(p.tokenChangeListeners.delete(Q),O(_e))};p.tokenChangeListeners.add(Q),p.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof p)p(_);else if("string"==typeof p){const w=Mt()[p];"function"==typeof w&&w(_)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,s.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,s.Z)(function*(){$(pt()&&!ca(),p.auth,"internal-error"),yield function rp(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function Zl(y){return Ja.apply(this,arguments)}(p.auth);$(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fn{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Ua._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Lr(){return(Lr=(0,s.Z)(function*(y,p,_){const w=ft(y),x=yield Qi(w,p,(0,V.m9)(_));return new Fn(x,O=>Nn(w,O))})).apply(this,arguments)}function qc(){return(qc=(0,s.Z)(function*(y,p,_){const w=(0,V.m9)(y);yield un(!1,w,"phone");const x=yield Qi(w.auth,p,(0,V.m9)(_));return new Fn(x,O=>_r(w,O))})).apply(this,arguments)}function Ri(){return(Ri=(0,s.Z)(function*(y,p,_){const w=(0,V.m9)(y),x=yield Qi(w.auth,p,(0,V.m9)(_));return new Fn(x,O=>Us(w,O))})).apply(this,arguments)}function Qi(y,p,_){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,s.Z)(function*(y,p,_){var w;const x=yield _.verify();try{let O;if($("string"==typeof x,y,"argument-error"),$(_.type===Wu,y,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const Q=O.session;if("phoneNumber"in O)return $("enroll"===Q.type,y,"internal-error"),(yield Xf(y,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{$("signin"===Q.type,y,"internal-error");const _e=(null===(w=O.multiFactorHint)||void 0===w?void 0:w.uid)||O.multiFactorUid;return $(_e,y,"missing-multi-factor-info"),(yield ql(y,{mfaPendingCredential:Q.credential,mfaEnrollmentId:_e,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield wm(y,{phoneNumber:O.phoneNumber,recaptchaToken:x});return Q}}finally{_._reset()}})).apply(this,arguments)}function Zs(){return(Zs=(0,s.Z)(function*(y,p){yield xl((0,V.m9)(y),p)})).apply(this,arguments)}let fa=(()=>{class y{constructor(_){this.providerId=y.PROVIDER_ID,this.auth=ft(_)}verifyPhoneNumber(_,w){return Qi(this.auth,_,(0,V.m9)(w))}static credential(_,w){return Ua._fromVerification(_,w)}static credentialFromResult(_){return y.credentialFromTaggedObject(_)}static credentialFromError(_){return y.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:x}=_;return w&&x?Ua._fromTokenResponse(w,x):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ji(y,p){return p?ie(p):($(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Zc extends Gi{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return wo(p,this._buildIdpRequest())}_linkToIdToken(p,_){return wo(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return wo(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function ip(y){return mr(y.auth,new Zc(y),y.bypassAuthState)}function Ku(y){const{auth:p,user:_}=y;return $(_,p,"internal-error"),Mc(_,new Zc(y),y.bypassAuthState)}function Xi(y){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,s.Z)(function*(y){const{auth:p,user:_}=y;return $(_,p,"internal-error"),xl(_,new Zc(y),y.bypassAuthState)})).apply(this,arguments)}class $l{constructor(p,_,w,x,O=!1){this.auth=p,this.resolver=w,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,s.Z)(function*(w,x){p.pendingPromise={resolve:w,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(w,x){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,s.Z)(function*(){const{urlResponse:w,sessionId:x,postBody:O,tenantId:Q,error:_e,type:je}=p;if(_e)return void _.reject(_e);const tt={auth:_.auth,requestUri:w,sessionId:x,tenantId:Q||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(je)(tt))}catch(bt){_.reject(bt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return ip;case"linkViaPopup":case"linkViaRedirect":return Xi;case"reauthViaPopup":case"reauthViaRedirect":return Ku;default:xe(this.auth,"internal-error")}}resolve(p){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Cy=new pn(2e3,1e4);function Gs(){return(Gs=(0,s.Z)(function*(y,p,_){const w=ft(y);qe(y,p,Rr);const x=Ji(w,_);return new xo(w,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function Ju(){return(Ju=(0,s.Z)(function*(y,p,_){const w=(0,V.m9)(y);qe(w.auth,p,Rr);const x=Ji(w.auth,_);return new xo(w.auth,"reauthViaPopup",p,x,w).executeNotNull()})).apply(this,arguments)}function Pi(){return(Pi=(0,s.Z)(function*(y,p,_){const w=(0,V.m9)(y);qe(w.auth,p,Rr);const x=Ji(w.auth,_);return new xo(w.auth,"linkViaPopup",p,x,w).executeNotNull()})).apply(this,arguments)}let xo=(()=>{class y extends $l{constructor(_,w,x,O,Q){super(_,w,O,Q),this.provider=x,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var _=this;return(0,s.Z)(function*(){const w=yield _.execute();return $(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,s.Z)(function*(){J(1===_.filter.length,"Popup operations only handle one event");const w=dr();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Ie(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,x;this.pollId=(null===(x=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Cy.get())};_()}}return y.currentPopupAction=null,y})();const es=new Map;class Ey extends $l{constructor(p,_,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,s.Z)(function*(){let w=es.get(_.auth._key());if(!w){try{const O=(yield function Mo(y,p){return ko.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;w=()=>Promise.resolve(O)}catch(x){w=()=>Promise.reject(x)}es.set(_.auth._key(),w)}return _.bypassAuthState||es.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,w=this;return(0,s.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(w,p);if("unknown"!==p.type){if(p.eventId){const x=yield w.auth._redirectUserForId(p.eventId);if(x)return w.user=x,_().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,s.Z)(function*(){})()}cleanUp(){}}function ko(){return(ko=(0,s.Z)(function*(y,p){const _=j(p),w=P(y);if(!(yield w._isAvailable()))return!1;const x="true"===(yield w._get(_));return yield w._remove(_),x})).apply(this,arguments)}function tl(y,p){return bh.apply(this,arguments)}function bh(){return(bh=(0,s.Z)(function*(y,p){return P(y)._set(j(p),"true")})).apply(this,arguments)}function S(y,p){es.set(y._key(),p)}function P(y){return ie(y._redirectPersistence)}function j(y){return rr("pendingRedirect",y.config.apiKey,y.name)}function Ne(){return(Ne=(0,s.Z)(function*(y,p,_){const w=ft(y);qe(y,p,Rr);const x=Ji(w,_);return yield tl(x,w),x._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function It(){return(It=(0,s.Z)(function*(y,p,_){const w=(0,V.m9)(y);qe(w.auth,p,Rr);const x=Ji(w.auth,_);yield tl(x,w.auth);const O=yield ei(w);return x._openRedirect(w.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function yr(){return(yr=(0,s.Z)(function*(y,p,_){const w=(0,V.m9)(y);qe(w.auth,p,Rr);const x=Ji(w.auth,_);yield un(!1,w,p.providerId),yield tl(x,w.auth);const O=yield ei(w);return x._openRedirect(w.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function Ro(){return(Ro=(0,s.Z)(function*(y,p){return yield ft(y)._initializationPromise,_i(y,p,!1)})).apply(this,arguments)}function _i(y,p){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,s.Z)(function*(y,p,_=!1){const w=ft(y),x=Ji(w,p),Q=yield new Ey(w,x,_).execute();return Q&&!_&&(delete Q.user._redirectEventId,yield w._persistUserIfCurrent(Q.user),yield w._setRedirectUser(null,p)),Q})).apply(this,arguments)}function ei(y){return wr.apply(this,arguments)}function wr(){return(wr=(0,s.Z)(function*(y){const p=dr(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class Xu{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(_=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function op(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zl(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var w;if(p.error&&!zl(p)){const x=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(Ie(this.auth,x))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const w=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ed(p))}saveEventToCache(p){this.cachedEventUids.add(ed(p)),this.lastProcessedEventTime=Date.now()}}function ed(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function zl({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===(null==p?void 0:p.code)}function td(y){return nd.apply(this,arguments)}function nd(){return(nd=(0,s.Z)(function*(y,p={}){return $t(y,"GET","/v1/projects",p)})).apply(this,arguments)}const pa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gc=/^https?/;function ap(){return(ap=(0,s.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield td(y);for(const _ of p)try{if(lp(_))return}catch(w){}xe(y,"unauthorized-domain")})).apply(this,arguments)}function lp(y){const p=Le(),{protocol:_,hostname:w}=new URL(p);if(y.startsWith("chrome-extension://")){const Q=new URL(y);return""===Q.hostname&&""===w?"chrome-extension:"===_&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Q.hostname===w}if(!Gc.test(_))return!1;if(pa.test(y))return w===y;const x=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(w)}const cp=new pn(3e4,6e4);function up(){const y=Mt().___jsl;if(null==y?void 0:y.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let _=0;_<y.CP.length;_++)y.CP[_]=null}let rd=null;function Iy(y){return rd=rd||function Ch(y){return new Promise((p,_)=>{var w,x,O;function Q(){up(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{up(),_(Ie(y,"network-request-failed"))},timeout:cp.get()})}if(null===(x=null===(w=Mt().gapi)||void 0===w?void 0:w.iframes)||void 0===x?void 0:x.Iframe)p(gapi.iframes.getContext());else{if(!(null===(O=Mt().gapi)||void 0===O?void 0:O.load)){const _e=ki("iframefcb");return Mt()[_e]=()=>{gapi.load?Q():_(Ie(y,"network-request-failed"))},So(`https://apis.google.com/js/api.js?onload=${_e}`).catch(je=>_(je))}Q()}}).catch(p=>{throw rd=null,p})}(y),rd}const nl=new pn(5e3,15e3),eE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NA(y){const p=y.config;$(p.authDomain,y,"auth-domain-config-required");const _=p.emulator?Zn(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:y.name,v:he.SDK_VERSION},x=tE.get(y.config.apiHost);x&&(w.eid=x);const O=y._getFrameworks();return O.length&&(w.fw=O.join(",")),`${_}?${(0,V.xO)(w).slice(1)}`}function id(){return id=(0,s.Z)(function*(y){const p=yield Iy(y),_=Mt().gapi;return $(_,y,"internal-error"),p.open({where:document.body,url:NA(y),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eE,dontclear:!0},w=>new Promise(function(){var x=(0,s.Z)(function*(O,Q){yield w.restyle({setHideOnLeave:!1});const _e=Ie(y,"network-request-failed"),je=Mt().setTimeout(()=>{Q(_e)},nl.get());function tt(){Mt().clearTimeout(je),O(w)}w.ping(tt).then(tt,()=>{Q(_e)})});return function(O,Q){return x.apply(this,arguments)}}()))}),id.apply(this,arguments)}const hp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pm{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function sl(y,p,_,w,x,O){$(y.config.authDomain,y,"auth-domain-config-required"),$(y.config.apiKey,y,"invalid-api-key");const Q={apiKey:y.config.apiKey,appName:y.name,authType:_,redirectUrl:w,v:he.SDK_VERSION,eventId:x};if(p instanceof Rr){p.setDefaultLanguage(y.languageCode),Q.providerId=p.providerId||"",(0,V.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[je,tt]of Object.entries(O||{}))Q[je]=tt}if(p instanceof ta){const je=p.getScopes().filter(tt=>""!==tt);je.length>0&&(Q.scopes=je.join(","))}y.tenantId&&(Q.tid=y.tenantId);const _e=Q;for(const je of Object.keys(_e))void 0===_e[je]&&delete _e[je];return`${function pp({config:y}){return y.emulator?Zn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,V.xO)(_e).slice(1)}`}const gp="webStorageSupport";class Ih extends class Ty{constructor(p){this.factorId=p}_process(p,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,w);case"signin":return this._finalizeSignIn(p,_.credential);default:return De("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Ih(p)}_finalizeEnroll(p,_,w){return function aa(y,p){return $t(y,"POST","/v2/accounts/mfaEnrollment:finalize",on(y,p))}(p,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function ua(y,p){return $t(y,"POST","/v2/accounts/mfaSignIn:finalize",on(y,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fm=(()=>{class y{constructor(){}static assertion(_){return Ih._fromCredential(_)}}return y.FACTOR_ID="phone",y})();var $s="@firebase/auth";class mp{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,s.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(w=>{var x;p((null===(x=w)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zs(){return window}function ol(){return(ol=(0,s.Z)(function*(y,p,_){var w;const{BuildInfo:x}=zs();J(p.sessionId,"AuthEvent did not contain a session ID");const O=yield Bm(p.sessionId),Q={};return hi()?Q.ibi=x.packageName:Wr()?Q.apn=x.packageName:xe(y,"operation-not-supported-in-this-environment"),x.displayName&&(Q.appDisplayName=x.displayName),Q.sessionId=O,sl(y,_,p.type,void 0,null!==(w=p.eventId)&&void 0!==w?w:void 0,Q)})).apply(this,arguments)}function Wl(){return(Wl=(0,s.Z)(function*(y){const{BuildInfo:p}=zs(),_={};hi()?_.iosBundleId=p.packageName:Wr()?_.androidPackageName=p.packageName:xe(y,"operation-not-supported-in-this-environment"),yield td(y,_)})).apply(this,arguments)}function vp(){return(vp=(0,s.Z)(function*(y,p,_){const{cordova:w}=zs();let x=()=>{};try{yield new Promise((O,Q)=>{let _e=null;function je(){var gt;O();const Jn=null===(gt=w.plugins.browsertab)||void 0===gt?void 0:gt.close;"function"==typeof Jn&&Jn(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function tt(){_e||(_e=window.setTimeout(()=>{Q(Ie(y,"redirect-cancelled-by-user"))},2e3))}function bt(){"visible"===(null==document?void 0:document.visibilityState)&&tt()}p.addPassiveListener(je),document.addEventListener("resume",tt,!1),Wr()&&document.addEventListener("visibilitychange",bt,!1),x=()=>{p.removePassiveListener(je),document.removeEventListener("resume",tt,!1),document.removeEventListener("visibilitychange",bt,!1),_e&&window.clearTimeout(_e)}})}finally{x()}})).apply(this,arguments)}function Bm(y){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,s.Z)(function*(y){const p=Dh(y),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Dh(y){if(J(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),_=new Uint8Array(p);for(let w=0;w<y.length;w++)_[w]=y.charCodeAt(w);return _}!function Um(y){(0,he._registerComponent)(new oe.wA("auth",(p,{options:_})=>{const w=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:O,authDomain:Q}=w.options;return((_e,je)=>{$(O&&!O.includes(":"),"invalid-api-key",{appName:_e.name}),$(!(null==Q?void 0:Q.includes(":")),"argument-error",{appName:_e.name});const tt={apiKey:O,authDomain:Q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fa(y)},bt=new Je(_e,je,tt);return function de(y,p){const _=(null==p?void 0:p.persistence)||[],w=(Array.isArray(_)?_:[_]).map(ie);(null==p?void 0:p.errorMap)&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(w,null==p?void 0:p.popupRedirectResolver)}(bt,_),bt})(w,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,w)=>{p.getProvider("auth-internal").initialize()})),(0,he._registerComponent)(new oe.wA("auth-internal",p=>{const _=ft(p.getProvider("auth").getImmediate());return new mp(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,he.registerVersion)($s,"0.20.1",function Sy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,he.registerVersion)($s,"0.20.1","esm2017")}("Browser");class sE extends Xu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,s.Z)(function*(){yield p.initPromise})()}}function jm(y){return Th.apply(this,arguments)}function Th(){return(Th=(0,s.Z)(function*(y){const p=yield $c()._get(Sh(y));return p&&(yield $c()._remove(Sh(y))),p})).apply(this,arguments)}function bp(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const w=Math.floor(Math.random()*p.length);y.push(p.charAt(w))}return y.join("")}function $c(){return ie(jl)}function Sh(y){return rr("authEvent",y.config.apiKey,y.name)}function Ln(y){if(!(null==y?void 0:y.includes("?")))return{};const[p,..._]=y.split("?");return(0,V.zd)(_.join("?"))}function wp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}function Cp(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Zm(y=(0,V.z$)()){return!("file:"!==Cp()&&"ionic:"!==Cp()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gm(){try{const y=self.localStorage,p=dr();if(y)return y.setItem(p,"1"),y.removeItem(p),!function Xl(y=(0,V.z$)()){return function ti(){return(0,V.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ep(y=(0,V.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,V.hl)()}catch(y){return ze()&&(0,V.hl)()}return!1}function ze(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function en(){return(function FA(){return"http:"===Cp()||"https:"===Cp()}()||(0,V.ru)()||Zm())&&!function od(){return(0,V.b$)()||(0,V.UG)()}()&&Gm()&&!ze()}function Ur(){return Zm()&&"undefined"!=typeof document}function Ip(){return(Ip=(0,s.Z)(function*(){return!!Ur()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const ts={LOCAL:"local",NONE:"none",SESSION:"session"},ec=$,Ws="persistence";function Dp(y){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,s.Z)(function*(y){yield y._initializationPromise;const p=zm(),_=rr(Ws,y.config.apiKey,y.name);p&&p.setItem(_,y._getPersistence())})).apply(this,arguments)}function zm(){var y;try{return(null===(y=function $m(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(p){return null}}const Tp=$;class Ks{constructor(){this.browserResolver=ie(class Nm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yi,this._completeRedirectFn=_i,this._overrideRedirectResult=S}_openPopup(p,_,w,x){var O=this;return(0,s.Z)(function*(){var Q;J(null===(Q=O.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const _e=sl(p,_,w,Le(),x);return function Om(y,p,_,w=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),Q=Math.max((window.screen.availWidth-w)/2,0).toString();let _e="";const je=Object.assign(Object.assign({},hp),{width:w.toString(),height:x.toString(),top:O,left:Q}),tt=(0,V.z$)().toLowerCase();_&&(_e=Il(tt)?"_blank":_),El(tt)&&(p=p||"http://localhost",je.scrollbars="yes");const bt=Object.entries(je).reduce((Jn,[Fi,Jc])=>`${Jn}${Fi}=${Jc},`,"");if(function Xo(y=(0,V.z$)()){var p;return hi(y)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(tt)&&"_self"!==_e)return function Dy(y,p){const _=document.createElement("a");_.href=y,_.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(p||"",_e),new Pm(null);const gt=window.open(p||"",_e,bt);$(gt,y,"popup-blocked");try{gt.focus()}catch(Jn){}return new Pm(gt)}(p,_e,dr())})()}_openRedirect(p,_,w,x){var O=this;return(0,s.Z)(function*(){return yield O._originValidation(p),function ut(y){Mt().location.href=y}(sl(p,_,w,Le(),x)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:x,promise:O}=this.eventManagers[_];return x?Promise.resolve(x):(J(O,"If manager is not set, promise should be"),O)}const w=this.initAndGetManager(p);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(p){var _=this;return(0,s.Z)(function*(){const w=yield function dp(y){return id.apply(this,arguments)}(p),x=new Xu(p);return w.register("authEvent",O=>($(null==O?void 0:O.authEvent,p,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:x},_.iframes[p._key()]=w,x})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(gp,{type:gp},x=>{var O;const Q=null===(O=null==x?void 0:x[0])||void 0===O?void 0:O[gp];void 0!==Q&&_(!!Q),xe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function km(y){return ap.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return vo()||Ic()||hi()}}),this.cordovaResolver=ie(class ky{constructor(){this._redirectPersistence=Yi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_i,this._overrideRedirectResult=S}_initialize(p){var _=this;return(0,s.Z)(function*(){const w=p._key();let x=_.eventManagers.get(w);return x||(x=new sE(p),_.eventManagers.set(w,x),_.attachCallbackListeners(p,x)),x})()}_openPopup(p){xe(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,w,x){var O=this;return(0,s.Z)(function*(){!function iE(y){var p,_,w,x,O,Q,_e,je,tt,bt;const gt=zs();$("function"==typeof(null===(p=null==gt?void 0:gt.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(void 0!==(null===(_=null==gt?void 0:gt.BuildInfo)||void 0===_?void 0:_.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(O=null===(x=null===(w=null==gt?void 0:gt.cordova)||void 0===w?void 0:w.plugins)||void 0===x?void 0:x.browsertab)||void 0===O?void 0:O.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(je=null===(_e=null===(Q=null==gt?void 0:gt.cordova)||void 0===Q?void 0:Q.plugins)||void 0===_e?void 0:_e.browsertab)||void 0===je?void 0:je.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(bt=null===(tt=null==gt?void 0:gt.cordova)||void 0===tt?void 0:tt.InAppBrowser)||void 0===bt?void 0:bt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Q=yield O._initialize(p);yield Q.initialized(),Q.resetRedirect(),function T(){es.clear()}(),yield O._originValidation(p);const _e=function yp(y,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:bp(),postBody:null,tenantId:y.tenantId,error:Ie(y,"no-auth-event")}}(p,w,x);yield function Ql(y,p){return $c()._set(Sh(y),p)}(p,_e);const je=yield function Oo(y,p,_){return ol.apply(this,arguments)}(p,_e,_),tt=yield function _p(y){const{cordova:p}=zs();return new Promise(_=>{p.plugins.browsertab.isAvailable(w=>{let x=null;w?p.plugins.browsertab.openUrl(y):x=p.InAppBrowser.open(y,function Yd(y=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),_(x)})})}(je);return function rE(y,p,_){return vp.apply(this,arguments)}(p,Q,tt)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Vm(y){return Wl.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:w,handleOpenURL:x,BuildInfo:O}=zs(),Q=setTimeout((0,s.Z)(function*(){yield jm(p),_.onEvent(wp())}),500),_e=function(){var bt=(0,s.Z)(function*(gt){clearTimeout(Q);const Jn=yield jm(p);let Fi=null;Jn&&(null==gt?void 0:gt.url)&&(Fi=function My(y,p){var _,w;const x=function Hm(y){const p=Ln(y),_=p.link?decodeURIComponent(p.link):void 0,w=Ln(_).link,x=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Ln(x).link||x||w||_||y}(p);if(x.includes("/__/auth/callback")){const O=Ln(x),Q=O.firebaseError?function Ys(y){try{return JSON.parse(y)}catch(p){return null}}(decodeURIComponent(O.firebaseError)):null,_e=null===(w=null===(_=null==Q?void 0:Q.code)||void 0===_?void 0:_.split("auth/"))||void 0===w?void 0:w[1],je=_e?Ie(_e):null;return je?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:je,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:x,postBody:null}}return null}(Jn,gt.url)),_.onEvent(Fi||wp())});return function(Jn){return bt.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,_e);const je=x,tt=`${O.packageName.toLowerCase()}://`;zs().handleOpenURL=function(){var bt=(0,s.Z)(function*(gt){if(gt.toLowerCase().startsWith(tt)&&_e({url:gt}),"function"==typeof je)try{je(gt)}catch(Jn){console.error(Jn)}});return function(gt){return bt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Yi,this._completeRedirectFn=_i,this._overrideRedirectResult=S}_initialize(p){var _=this;return(0,s.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,w,x){var O=this;return(0,s.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(p,_,w,x)})()}_openRedirect(p,_,w,x){var O=this;return(0,s.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(p,_,w,x)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Ur()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Tp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,s.Z)(function*(){if(p.underlyingResolver)return;const _=yield function zc(){return Ip.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function al(y){return y.unwrap()}function Qn(y){return Wm(y)}function Wm(y){const{_tokenResponse:p}=y instanceof V.ZR?y.customData:y;if(!p)return null;if(!(y instanceof V.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return fa.credentialFromResult(y);const _=p.providerId;if(!_||"password"===_)return null;let w;switch(_){case"google.com":w=xc;break;case"facebook.com":w=Va;break;case"github.com":w=Wf;break;case"twitter.com":w=rh;break;default:const{oauthIdToken:x,oauthAccessToken:O,oauthTokenSecret:Q,pendingToken:_e,nonce:je}=p;return O||Q||x||_e?_e?_.startsWith("saml.")?na._create(_,_e):Ls._fromParams({providerId:_,signInMethod:_,pendingToken:_e,idToken:x,accessToken:O}):new ws(_).credential({idToken:x,accessToken:O,rawNonce:je}):null}return y instanceof V.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function dn(y,p){return p.catch(_=>{throw _ instanceof V.ZR&&function Ym(y,p){var _;const w=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new Km(y,function ur(y,p){var _;const w=(0,V.m9)(y),x=p;return $(p.customData.operationType,w,"argument-error"),$(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),Wa._fromError(w,x)}(y,p));else if(w){const x=Wm(p),O=p;x&&(O.credential=x,O.tenantId=w.tenantId||void 0,O.email=w.email||void 0,O.phoneNumber=w.phoneNumber||void 0)}}(y,_),_}).then(_=>{const x=_.user;return{operationType:_.operationType,credential:Qn(_),additionalUserInfo:Ts(_),user:vi.getOrCreate(x)}})}function Qs(y,p){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,s.Z)(function*(y,p){const _=yield p;return{verificationId:_.verificationId,confirm:w=>dn(y,_.confirm(w))}})).apply(this,arguments)}class Km{constructor(p,_){this.resolver=_,this.auth=function Ni(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return dn(al(this.auth),this.resolver.resolveSignIn(p))}}class vi{constructor(p){this._delegate=p,this.multiFactor=function la(y){const p=(0,V.m9)(y);return Uc.has(p)||Uc.set(p,ch._fromUser(p)),Uc.get(p)}(p)}static getOrCreate(p){return vi.USER_MAP.has(p)||vi.USER_MAP.set(p,new vi(p)),vi.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,s.Z)(function*(){return dn(_.auth,_r(_._delegate,p))})()}linkWithPhoneNumber(p,_){var w=this;return(0,s.Z)(function*(){return Qs(w.auth,function mi(y,p,_){return qc.apply(this,arguments)}(w._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,s.Z)(function*(){return dn(_.auth,function sp(y,p,_){return Pi.apply(this,arguments)}(_._delegate,p,Ks))})()}linkWithRedirect(p){var _=this;return(0,s.Z)(function*(){return yield Dp(ft(_.auth)),function Wt(y,p,_){return function Dt(y,p,_){return yr.apply(this,arguments)}(y,p,_)}(_._delegate,p,Ks)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,s.Z)(function*(){return dn(_.auth,Us(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return Qs(this.auth,function Ki(y,p,_){return Ri.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return dn(this.auth,function yh(y,p,_){return Ju.apply(this,arguments)}(this._delegate,p,Ks))}reauthenticateWithRedirect(p){var _=this;return(0,s.Z)(function*(){return yield Dp(ft(_.auth)),function Ge(y,p,_){return function Et(y,p,_){return It.apply(this,arguments)}(y,p,_)}(_._delegate,p,Ks)})()}sendEmailVerification(p){return function ju(y,p){return Nc.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,s.Z)(function*(){return yield function Kf(y,p){return bn.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function Tm(y,p){return $a((0,V.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function Zu(y,p){return $a((0,V.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function qs(y,p){return Zs.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function qu(y,p){return Ul.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function Hu(y,p,_){return Fc.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}vi.USER_MAP=new WeakMap;const Vr=$;let No=(()=>{class y{constructor(_,w){if(this.app=_,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=_.options;Vr(x,"invalid-api-key",{appName:_.name}),Vr(x,"invalid-api-key",{appName:_.name});const O="undefined"!=typeof window?Ks:void 0;this._delegate=w.initialize({options:{persistence:Qc(x,_.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Fe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?vi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,w){!function pi(y,p,_){const w=ft(y);$(w._canInitEmulator,w,"emulator-config-failed"),$(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const x=!!(null==_?void 0:_.disableWarnings),O=_s(p),{host:Q,port:_e}=function Kn(y){const p=_s(y),_=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(w);if(x){const O=x[1];return{host:O,port:vs(w.substr(O.length+1))}}{const[O,Q]=w.split(":");return{host:O,port:vs(Q)}}}(p);w.config.emulator={url:`${O}//${Q}${null===_e?"":`:${_e}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Q,port:_e,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function xn(){function y(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,_,w)}applyActionCode(_){return function Me(y,p){return qt.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return Rc(this._delegate,_)}confirmPasswordReset(_,w){return function Uu(y,p,_){return Vu.apply(this,arguments)}(this._delegate,_,w)}createUserWithEmailAndPassword(_,w){var x=this;return(0,s.Z)(function*(){return dn(x._delegate,function xi(y,p,_){return Ol.apply(this,arguments)}(x._delegate,_,w))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Io(y,p){return zi.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Nl(y,p){const _=Ac.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,s.Z)(function*(){Vr(en(),_._delegate,"operation-not-supported-in-this-environment");const w=yield function br(y,p){return Ro.apply(this,arguments)}(_._delegate,Ks);return w?dn(_._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Ah(y,p){ft(y)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,w,x){const{next:O,error:Q,complete:_e}=Cr(_,w,x);return this._delegate.onAuthStateChanged(O,Q,_e)}onIdTokenChanged(_,w,x){const{next:O,error:Q,complete:_e}=Cr(_,w,x);return this._delegate.onIdTokenChanged(O,Q,_e)}sendSignInLinkToEmail(_,w){return function Dm(y,p,_){return Pc.apply(this,arguments)}(this._delegate,_,w)}sendPasswordResetEmail(_,w){return function Lu(y,p,_){return Pl.apply(this,arguments)}(this._delegate,_,w||void 0)}setPersistence(_){var w=this;return(0,s.Z)(function*(){let x;switch(function Yc(y,p){ec(Object.values(ts).includes(p),y,"invalid-persistence-type"),(0,V.b$)()?ec(p!==ts.SESSION,y,"unsupported-persistence-type"):(0,V.UG)()?ec(p===ts.NONE,y,"unsupported-persistence-type"):ze()?ec(p===ts.NONE||p===ts.LOCAL&&(0,V.hl)(),y,"unsupported-persistence-type"):ec(p===ts.NONE||Gm(),y,"unsupported-persistence-type")}(w._delegate,_),_){case ts.SESSION:x=Yi;break;case ts.LOCAL:x=(yield ie(To)._isAvailable())?To:jl;break;case ts.NONE:x=Tt;break;default:return xe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return dn(this._delegate,function ih(y){return Ou.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return dn(this._delegate,Nn(this._delegate,_))}signInWithCustomToken(_){return dn(this._delegate,function qa(y,p){return _t.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,w){return dn(this._delegate,function Bu(y,p,_){return Nn((0,V.m9)(y),nh.credential(p,_))}(this._delegate,_,w))}signInWithEmailLink(_,w){return dn(this._delegate,function Oc(y,p,_){return Yn.apply(this,arguments)}(this._delegate,_,w))}signInWithPhoneNumber(_,w){return Qs(this._delegate,function Hc(y,p,_){return Lr.apply(this,arguments)}(this._delegate,_,w))}signInWithPopup(_){var w=this;return(0,s.Z)(function*(){return Vr(en(),w._delegate,"operation-not-supported-in-this-environment"),dn(w._delegate,function vh(y,p,_){return Gs.apply(this,arguments)}(w._delegate,_,Ks))})()}signInWithRedirect(_){var w=this;return(0,s.Z)(function*(){return Vr(en(),w._delegate,"operation-not-supported-in-this-environment"),yield Dp(w._delegate),function ee(y,p,_){return function ce(y,p,_){return Ne.apply(this,arguments)}(y,p,_)}(w._delegate,_,Ks)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Ga(y,p){return sa.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ts,y})();function Cr(y,p,_){let w=y;"function"!=typeof y&&({next:w,error:p,complete:_}=y);const x=w;return{next:Q=>x(Q&&vi.getOrCreate(Q)),error:p,complete:_}}function Qc(y,p){const _=function Kc(y,p){const _=zm();if(!_)return[];const w=rr(Ws,y,p);switch(_.getItem(w)){case ts.NONE:return[Tt];case ts.LOCAL:return[To,Yi];case ts.SESSION:return[Yi];default:return[]}}(y,p);if("undefined"!=typeof self&&!_.includes(To)&&_.push(To),"undefined"!=typeof window)for(const w of[jl,Yi])_.includes(w)||_.push(w);return _.includes(Tt)||_.push(Tt),_}class ad{constructor(){this.providerId="phone",this._delegate=new fa(al(ne.Z.auth()))}static credential(p,_){return fa.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}ad.PHONE_SIGN_IN_METHOD=fa.PHONE_SIGN_IN_METHOD,ad.PROVIDER_ID=fa.PROVIDER_ID;const Qm=$;class Py{constructor(p,_,w=ne.Z.app()){var x;Qm(null===(x=w.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Ao(p,_,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Fo(y){y.INTERNAL.registerComponent(new oe.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),w=p.getProvider("auth");return new No(_,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:nh,FacebookAuthProvider:Va,GithubAuthProvider:Wf,GoogleAuthProvider:xc,OAuthProvider:ws,SAMLAuthProvider:Kr,PhoneAuthProvider:ad,PhoneMultiFactorGenerator:Fm,RecaptchaVerifier:Py,TwitterAuthProvider:rh,Auth:No,AuthCredential:Gi,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.14")}(ne.Z)},8306:(st,Ce,L)=>{L.d(Ce,{y:()=>z});var s=L(930),ne=L(727),V=L(8822),he=L(4671);var oe=L(2416),ue=L(576),fe=L(2806);let z=(()=>{class Re{constructor(He){He&&(this._subscribe=He)}lift(He){const me=new Re;return me.source=this,me.operator=He,me}subscribe(He,me,Se){const Qe=function Ke(Re){return Re&&Re instanceof s.Lv||function se(Re){return Re&&(0,ue.m)(Re.next)&&(0,ue.m)(Re.error)&&(0,ue.m)(Re.complete)}(Re)&&(0,ne.Nn)(Re)}(He)?He:new s.Hp(He,me,Se);return(0,fe.x)(()=>{const{operator:nt,source:xe}=this;Qe.add(nt?nt.call(Qe,xe):xe?this._subscribe(Qe):this._trySubscribe(Qe))}),Qe}_trySubscribe(He){try{return this._subscribe(He)}catch(me){He.error(me)}}forEach(He,me){return new(me=G(me))((Se,Qe)=>{const nt=new s.Hp({next:xe=>{try{He(xe)}catch(Ie){Qe(Ie),nt.unsubscribe()}},error:Qe,complete:Se});this.subscribe(nt)})}_subscribe(He){var me;return null===(me=this.source)||void 0===me?void 0:me.subscribe(He)}[V.L](){return this}pipe(...He){return function be(Re){return 0===Re.length?he.y:1===Re.length?Re[0]:function(He){return Re.reduce((me,Se)=>Se(me),He)}}(He)(this)}toPromise(He){return new(He=G(He))((me,Se)=>{let Qe;this.subscribe(nt=>Qe=nt,nt=>Se(nt),()=>me(Qe))})}}return Re.create=Fe=>new Re(Fe),Re})();function G(Re){var Fe;return null!==(Fe=null!=Re?Re:oe.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(st,Ce,L)=>{L.d(Ce,{x:()=>oe});var s=L(8306),ne=L(727);const he=(0,L(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=L(8737),be=L(2806);let oe=(()=>{class fe extends s.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const se=new ue(this,this);return se.operator=G,se}_throwIfClosed(){if(this.closed)throw new he}next(G){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const se of this.currentObservers)se.next(G)}})}error(G){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:se}=this;for(;se.length;)se.shift().error(G)}})}complete(){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:se,isStopped:Ke,observers:Re}=this;return se||Ke?ne.Lc:(this.currentObservers=null,Re.push(G),new ne.w0(()=>{this.currentObservers=null,(0,ae.P)(Re,G)}))}_checkFinalizedStatuses(G){const{hasError:se,thrownError:Ke,isStopped:Re}=this;se?G.error(Ke):Re&&G.complete()}asObservable(){const G=new s.y;return G.source=this,G}}return fe.create=(z,G)=>new ue(z,G),fe})();class ue extends oe{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,se;null===(se=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===se||se.call(G,z)}error(z){var G,se;null===(se=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===se||se.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,se;return null!==(se=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==se?se:ne.Lc}}},930:(st,Ce,L)=>{L.d(Ce,{Hp:()=>He,Lv:()=>se});var s=L(576),ne=L(727),V=L(2416),he=L(7849),ae=L(5032);const be=fe("C",void 0,void 0);function fe(xe,Ie,Te){return{kind:xe,value:Ie,error:Te}}var z=L(3410),G=L(2806);class se extends ne.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,ne.Nn)(Ie)&&Ie.add(this)):this.destination=nt}static create(Ie,Te,qe){return new He(Ie,Te,qe)}next(Ie){this.isStopped?Qe(function ue(xe){return fe("N",xe,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?Qe(function oe(xe){return fe("E",void 0,xe)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?Qe(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function Re(xe,Ie){return Ke.call(xe,Ie)}class Fe{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:Te}=this;if(Te.next)try{Te.next(Ie)}catch(qe){me(qe)}}error(Ie){const{partialObserver:Te}=this;if(Te.error)try{Te.error(Ie)}catch(qe){me(qe)}else me(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(Te){me(Te)}}}class He extends se{constructor(Ie,Te,qe){let Ze;if(super(),(0,s.m)(Ie)||!Ie)Ze={next:null!=Ie?Ie:void 0,error:null!=Te?Te:void 0,complete:null!=qe?qe:void 0};else{let $;this&&V.v.useDeprecatedNextContext?($=Object.create(Ie),$.unsubscribe=()=>this.unsubscribe(),Ze={next:Ie.next&&Re(Ie.next,$),error:Ie.error&&Re(Ie.error,$),complete:Ie.complete&&Re(Ie.complete,$)}):Ze=Ie}this.destination=new Fe(Ze)}}function me(xe){V.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(xe):(0,he.h)(xe)}function Qe(xe,Ie){const{onStoppedNotification:Te}=V.v;Te&&z.z.setTimeout(()=>Te(xe,Ie))}const nt={closed:!0,next:ae.Z,error:function Se(xe){throw xe},complete:ae.Z}},727:(st,Ce,L)=>{L.d(Ce,{Lc:()=>be,w0:()=>ae,Nn:()=>oe});var s=L(576);const V=(0,L(3888).d)(fe=>function(G){fe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((se,Ke)=>`${Ke+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var he=L(8737);class ae{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Re of G)Re.remove(this);else G.remove(this);const{initialTeardown:se}=this;if((0,s.m)(se))try{se()}catch(Re){z=Re instanceof V?Re.errors:[Re]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const Re of Ke)try{ue(Re)}catch(Fe){z=null!=z?z:[],Fe instanceof V?z=[...z,...Fe.errors]:z.push(Fe)}}if(z)throw new V(z)}}add(z){var G;if(z&&z!==this)if(this.closed)ue(z);else{if(z instanceof ae){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,he.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,he.P)(G,z),z instanceof ae&&z._removeParent(this)}}ae.EMPTY=(()=>{const fe=new ae;return fe.closed=!0,fe})();const be=ae.EMPTY;function oe(fe){return fe instanceof ae||fe&&"closed"in fe&&(0,s.m)(fe.remove)&&(0,s.m)(fe.add)&&(0,s.m)(fe.unsubscribe)}function ue(fe){(0,s.m)(fe)?fe():fe.unsubscribe()}},2416:(st,Ce,L)=>{L.d(Ce,{v:()=>s});const s={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(st,Ce,L)=>{L.d(Ce,{E:()=>ne});const ne=new(L(8306).y)(ae=>ae.complete())},8996:(st,Ce,L)=>{L.d(Ce,{D:()=>Ie});var s=L(8421),ne=L(5363),V=L(9468),be=L(8306),ue=L(2202),fe=L(576),z=L(9672);function se(Te,qe){if(!Te)throw new Error("Iterable cannot be null");return new be.y(Ze=>{(0,z.f)(Ze,qe,()=>{const $=Te[Symbol.asyncIterator]();(0,z.f)(Ze,qe,()=>{$.next().then(De=>{De.done?Ze.complete():Ze.next(De.value)})},0,!0)})})}var Ke=L(3670),Re=L(8239),Fe=L(1144),He=L(6495),me=L(2206),Se=L(4532),Qe=L(3260);function Ie(Te,qe){return qe?function xe(Te,qe){if(null!=Te){if((0,Ke.c)(Te))return function he(Te,qe){return(0,s.Xf)(Te).pipe((0,V.R)(qe),(0,ne.Q)(qe))}(Te,qe);if((0,Fe.z)(Te))return function oe(Te,qe){return new be.y(Ze=>{let $=0;return qe.schedule(function(){$===Te.length?Ze.complete():(Ze.next(Te[$++]),Ze.closed||this.schedule())})})}(Te,qe);if((0,Re.t)(Te))return function ae(Te,qe){return(0,s.Xf)(Te).pipe((0,V.R)(qe),(0,ne.Q)(qe))}(Te,qe);if((0,me.D)(Te))return se(Te,qe);if((0,He.T)(Te))return function G(Te,qe){return new be.y(Ze=>{let $;return(0,z.f)(Ze,qe,()=>{$=Te[ue.h](),(0,z.f)(Ze,qe,()=>{let De,J;try{({value:De,done:J}=$.next())}catch(le){return void Ze.error(le)}J?Ze.complete():Ze.next(De)},0,!0)}),()=>(0,fe.m)(null==$?void 0:$.return)&&$.return()})}(Te,qe);if((0,Qe.L)(Te))return function nt(Te,qe){return se((0,Qe.Q)(Te),qe)}(Te,qe)}throw(0,Se.z)(Te)}(Te,qe):(0,s.Xf)(Te)}},8421:(st,Ce,L)=>{L.d(Ce,{Xf:()=>Ke});var s=L(655),ne=L(1144),V=L(8239),he=L(8306),ae=L(3670),be=L(2206),oe=L(4532),ue=L(6495),fe=L(3260),z=L(576),G=L(7849),se=L(8822);function Ke(xe){if(xe instanceof he.y)return xe;if(null!=xe){if((0,ae.c)(xe))return function Re(xe){return new he.y(Ie=>{const Te=xe[se.L]();if((0,z.m)(Te.subscribe))return Te.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,ne.z)(xe))return function Fe(xe){return new he.y(Ie=>{for(let Te=0;Te<xe.length&&!Ie.closed;Te++)Ie.next(xe[Te]);Ie.complete()})}(xe);if((0,V.t)(xe))return function He(xe){return new he.y(Ie=>{xe.then(Te=>{Ie.closed||(Ie.next(Te),Ie.complete())},Te=>Ie.error(Te)).then(null,G.h)})}(xe);if((0,be.D)(xe))return Se(xe);if((0,ue.T)(xe))return function me(xe){return new he.y(Ie=>{for(const Te of xe)if(Ie.next(Te),Ie.closed)return;Ie.complete()})}(xe);if((0,fe.L)(xe))return function Qe(xe){return Se((0,fe.Q)(xe))}(xe)}throw(0,oe.z)(xe)}function Se(xe){return new he.y(Ie=>{(function nt(xe,Ie){var Te,qe,Ze,$;return(0,s.mG)(this,void 0,void 0,function*(){try{for(Te=(0,s.KL)(xe);!(qe=yield Te.next()).done;)if(Ie.next(qe.value),Ie.closed)return}catch(De){Ze={error:De}}finally{try{qe&&!qe.done&&($=Te.return)&&(yield $.call(Te))}finally{if(Ze)throw Ze.error}}Ie.complete()})})(xe,Ie).catch(Te=>Ie.error(Te))})}},6451:(st,Ce,L)=>{L.d(Ce,{T:()=>be});var s=L(8189),ne=L(8421),V=L(515),he=L(3269),ae=L(8996);function be(...oe){const ue=(0,he.yG)(oe),fe=(0,he._6)(oe,1/0),z=oe;return z.length?1===z.length?(0,ne.Xf)(z[0]):(0,s.J)(fe)((0,ae.D)(z,ue)):V.E}},5403:(st,Ce,L)=>{L.d(Ce,{x:()=>ne});var s=L(930);function ne(he,ae,be,oe,ue){return new V(he,ae,be,oe,ue)}class V extends s.Lv{constructor(ae,be,oe,ue,fe,z){super(ae),this.onFinalize=fe,this.shouldUnsubscribe=z,this._next=be?function(G){try{be(G)}catch(se){ae.error(se)}}:super._next,this._error=ue?function(G){try{ue(G)}catch(se){ae.error(se)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(G){ae.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:be}=this;super.unsubscribe(),!be&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(st,Ce,L)=>{L.d(Ce,{U:()=>V});var s=L(4482),ne=L(5403);function V(he,ae){return(0,s.e)((be,oe)=>{let ue=0;be.subscribe((0,ne.x)(oe,fe=>{oe.next(he.call(ae,fe,ue++))}))})}},8189:(st,Ce,L)=>{L.d(Ce,{J:()=>V});var s=L(5577),ne=L(4671);function V(he=1/0){return(0,s.z)(ne.y,he)}},5577:(st,Ce,L)=>{L.d(Ce,{z:()=>ue});var s=L(4004),ne=L(8421),V=L(4482),he=L(9672),ae=L(5403),oe=L(576);function ue(fe,z,G=1/0){return(0,oe.m)(z)?ue((se,Ke)=>(0,s.U)((Re,Fe)=>z(se,Re,Ke,Fe))((0,ne.Xf)(fe(se,Ke))),G):("number"==typeof z&&(G=z),(0,V.e)((se,Ke)=>function be(fe,z,G,se,Ke,Re,Fe,He){const me=[];let Se=0,Qe=0,nt=!1;const xe=()=>{nt&&!me.length&&!Se&&z.complete()},Ie=qe=>Se<se?Te(qe):me.push(qe),Te=qe=>{Re&&z.next(qe),Se++;let Ze=!1;(0,ne.Xf)(G(qe,Qe++)).subscribe((0,ae.x)(z,$=>{null==Ke||Ke($),Re?Ie($):z.next($)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(Se--;me.length&&Se<se;){const $=me.shift();Fe?(0,he.f)(z,Fe,()=>Te($)):Te($)}xe()}catch($){z.error($)}}))};return fe.subscribe((0,ae.x)(z,Ie,()=>{nt=!0,xe()})),()=>{null==He||He()}}(se,Ke,fe,G)))}},5363:(st,Ce,L)=>{L.d(Ce,{Q:()=>he});var s=L(9672),ne=L(4482),V=L(5403);function he(ae,be=0){return(0,ne.e)((oe,ue)=>{oe.subscribe((0,V.x)(ue,fe=>(0,s.f)(ue,ae,()=>ue.next(fe),be),()=>(0,s.f)(ue,ae,()=>ue.complete(),be),fe=>(0,s.f)(ue,ae,()=>ue.error(fe),be)))})}},3099:(st,Ce,L)=>{L.d(Ce,{B:()=>be});var s=L(8996),ne=L(5698),V=L(7579),he=L(930),ae=L(4482);function be(ue={}){const{connector:fe=(()=>new V.x),resetOnError:z=!0,resetOnComplete:G=!0,resetOnRefCountZero:se=!0}=ue;return Ke=>{let Re=null,Fe=null,He=null,me=0,Se=!1,Qe=!1;const nt=()=>{null==Fe||Fe.unsubscribe(),Fe=null},xe=()=>{nt(),Re=He=null,Se=Qe=!1},Ie=()=>{const Te=Re;xe(),null==Te||Te.unsubscribe()};return(0,ae.e)((Te,qe)=>{me++,!Qe&&!Se&&nt();const Ze=He=null!=He?He:fe();qe.add(()=>{me--,0===me&&!Qe&&!Se&&(Fe=oe(Ie,se))}),Ze.subscribe(qe),Re||(Re=new he.Hp({next:$=>Ze.next($),error:$=>{Qe=!0,nt(),Fe=oe(xe,z,$),Ze.error($)},complete:()=>{Se=!0,nt(),Fe=oe(xe,G),Ze.complete()}}),(0,s.D)(Te).subscribe(Re))})(Ke)}}function oe(ue,fe,...z){return!0===fe?(ue(),null):!1===fe?null:fe(...z).pipe((0,ne.q)(1)).subscribe(()=>ue())}},9468:(st,Ce,L)=>{L.d(Ce,{R:()=>ne});var s=L(4482);function ne(V,he=0){return(0,s.e)((ae,be)=>{be.add(V.schedule(()=>ae.subscribe(be),he))})}},5698:(st,Ce,L)=>{L.d(Ce,{q:()=>he});var s=L(515),ne=L(4482),V=L(5403);function he(ae){return ae<=0?()=>s.E:(0,ne.e)((be,oe)=>{let ue=0;be.subscribe((0,V.x)(oe,fe=>{++ue<=ae&&(oe.next(fe),ae<=ue&&oe.complete())}))})}},8505:(st,Ce,L)=>{L.d(Ce,{b:()=>ae});var s=L(576),ne=L(4482),V=L(5403),he=L(4671);function ae(be,oe,ue){const fe=(0,s.m)(be)||oe||ue?{next:be,error:oe,complete:ue}:be;return fe?(0,ne.e)((z,G)=>{var se;null===(se=fe.subscribe)||void 0===se||se.call(fe);let Ke=!0;z.subscribe((0,V.x)(G,Re=>{var Fe;null===(Fe=fe.next)||void 0===Fe||Fe.call(fe,Re),G.next(Re)},()=>{var Re;Ke=!1,null===(Re=fe.complete)||void 0===Re||Re.call(fe),G.complete()},Re=>{var Fe;Ke=!1,null===(Fe=fe.error)||void 0===Fe||Fe.call(fe,Re),G.error(Re)},()=>{var Re,Fe;Ke&&(null===(Re=fe.unsubscribe)||void 0===Re||Re.call(fe)),null===(Fe=fe.finalize)||void 0===Fe||Fe.call(fe)}))}):he.y}},4408:(st,Ce,L)=>{L.d(Ce,{o:()=>ae});var s=L(727);class ne extends s.w0{constructor(oe,ue){super()}schedule(oe,ue=0){return this}}const V={setInterval(be,oe,...ue){const{delegate:fe}=V;return(null==fe?void 0:fe.setInterval)?fe.setInterval(be,oe,...ue):setInterval(be,oe,...ue)},clearInterval(be){const{delegate:oe}=V;return((null==oe?void 0:oe.clearInterval)||clearInterval)(be)},delegate:void 0};var he=L(8737);class ae extends ne{constructor(oe,ue){super(oe,ue),this.scheduler=oe,this.work=ue,this.pending=!1}schedule(oe,ue=0){if(this.closed)return this;this.state=oe;const fe=this.id,z=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(z,fe,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(z,this.id,ue),this}requestAsyncId(oe,ue,fe=0){return V.setInterval(oe.flush.bind(oe,this),fe)}recycleAsyncId(oe,ue,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return ue;V.clearInterval(ue)}execute(oe,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(oe,ue);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ue){let z,fe=!1;try{this.work(oe)}catch(G){fe=!0,z=G||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ue}=this,{actions:fe}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(fe,this),null!=oe&&(this.id=this.recycleAsyncId(ue,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(st,Ce,L)=>{L.d(Ce,{v:()=>V});var s=L(6063);class ne{constructor(ae,be=ne.now){this.schedulerActionCtor=ae,this.now=be}schedule(ae,be=0,oe){return new this.schedulerActionCtor(this,ae).schedule(oe,be)}}ne.now=s.l.now;class V extends ne{constructor(ae,be=ne.now){super(ae,be),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ae){const{actions:be}=this;if(this._active)return void be.push(ae);let oe;this._active=!0;do{if(oe=ae.execute(ae.state,ae.delay))break}while(ae=be.shift());if(this._active=!1,oe){for(;ae=be.shift();)ae.unsubscribe();throw oe}}}},4986:(st,Ce,L)=>{L.d(Ce,{P:()=>he,z:()=>V});var s=L(4408);const V=new(L(7565).v)(s.o),he=V},6063:(st,Ce,L)=>{L.d(Ce,{l:()=>s});const s={now:()=>(s.delegate||Date).now(),delegate:void 0}},3410:(st,Ce,L)=>{L.d(Ce,{z:()=>s});const s={setTimeout(ne,V,...he){const{delegate:ae}=s;return(null==ae?void 0:ae.setTimeout)?ae.setTimeout(ne,V,...he):setTimeout(ne,V,...he)},clearTimeout(ne){const{delegate:V}=s;return((null==V?void 0:V.clearTimeout)||clearTimeout)(ne)},delegate:void 0}},2202:(st,Ce,L)=>{L.d(Ce,{h:()=>ne});const ne=function s(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(st,Ce,L)=>{L.d(Ce,{L:()=>s});const s="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(st,Ce,L)=>{L.d(Ce,{_6:()=>be,jO:()=>he,yG:()=>ae});var s=L(576),ne=L(3532);function V(oe){return oe[oe.length-1]}function he(oe){return(0,s.m)(V(oe))?oe.pop():void 0}function ae(oe){return(0,ne.K)(V(oe))?oe.pop():void 0}function be(oe,ue){return"number"==typeof V(oe)?oe.pop():ue}},8737:(st,Ce,L)=>{function s(ne,V){if(ne){const he=ne.indexOf(V);0<=he&&ne.splice(he,1)}}L.d(Ce,{P:()=>s})},3888:(st,Ce,L)=>{function s(ne){const he=ne(ae=>{Error.call(ae),ae.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}L.d(Ce,{d:()=>s})},2806:(st,Ce,L)=>{L.d(Ce,{O:()=>he,x:()=>V});var s=L(2416);let ne=null;function V(ae){if(s.v.useDeprecatedSynchronousErrorHandling){const be=!ne;if(be&&(ne={errorThrown:!1,error:null}),ae(),be){const{errorThrown:oe,error:ue}=ne;if(ne=null,oe)throw ue}}else ae()}function he(ae){s.v.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=ae)}},9672:(st,Ce,L)=>{function s(ne,V,he,ae=0,be=!1){const oe=V.schedule(function(){he(),be?ne.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(ne.add(oe),!be)return oe}L.d(Ce,{f:()=>s})},4671:(st,Ce,L)=>{function s(ne){return ne}L.d(Ce,{y:()=>s})},1144:(st,Ce,L)=>{L.d(Ce,{z:()=>s});const s=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},2206:(st,Ce,L)=>{L.d(Ce,{D:()=>ne});var s=L(576);function ne(V){return Symbol.asyncIterator&&(0,s.m)(null==V?void 0:V[Symbol.asyncIterator])}},576:(st,Ce,L)=>{function s(ne){return"function"==typeof ne}L.d(Ce,{m:()=>s})},3670:(st,Ce,L)=>{L.d(Ce,{c:()=>V});var s=L(8822),ne=L(576);function V(he){return(0,ne.m)(he[s.L])}},6495:(st,Ce,L)=>{L.d(Ce,{T:()=>V});var s=L(2202),ne=L(576);function V(he){return(0,ne.m)(null==he?void 0:he[s.h])}},8239:(st,Ce,L)=>{L.d(Ce,{t:()=>ne});var s=L(576);function ne(V){return(0,s.m)(null==V?void 0:V.then)}},3260:(st,Ce,L)=>{L.d(Ce,{L:()=>he,Q:()=>V});var s=L(655),ne=L(576);function V(ae){return(0,s.FC)(this,arguments,function*(){const oe=ae.getReader();try{for(;;){const{value:ue,done:fe}=yield(0,s.qq)(oe.read());if(fe)return yield(0,s.qq)(void 0);yield yield(0,s.qq)(ue)}}finally{oe.releaseLock()}})}function he(ae){return(0,ne.m)(null==ae?void 0:ae.getReader)}},3532:(st,Ce,L)=>{L.d(Ce,{K:()=>ne});var s=L(576);function ne(V){return V&&(0,s.m)(V.schedule)}},4482:(st,Ce,L)=>{L.d(Ce,{A:()=>ne,e:()=>V});var s=L(576);function ne(he){return(0,s.m)(null==he?void 0:he.lift)}function V(he){return ae=>{if(ne(ae))return ae.lift(function(be){try{return he(be,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(st,Ce,L)=>{function s(){}L.d(Ce,{Z:()=>s})},7849:(st,Ce,L)=>{L.d(Ce,{h:()=>V});var s=L(2416),ne=L(3410);function V(he){ne.z.setTimeout(()=>{const{onUnhandledError:ae}=s.v;if(!ae)throw he;ae(he)})}},4532:(st,Ce,L)=>{function s(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Ce,{z:()=>s})},655:(st,Ce,L)=>{function he(J,le){var ie={};for(var we in J)Object.prototype.hasOwnProperty.call(J,we)&&le.indexOf(we)<0&&(ie[we]=J[we]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var de=0;for(we=Object.getOwnPropertySymbols(J);de<we.length;de++)le.indexOf(we[de])<0&&Object.prototype.propertyIsEnumerable.call(J,we[de])&&(ie[we[de]]=J[we[de]])}return ie}function ue(J,le,ie,we){return new(ie||(ie=Promise))(function(Le,pt){function nn(pn){try{rt(we.next(pn))}catch(Zn){pt(Zn)}}function Gt(pn){try{rt(we.throw(pn))}catch(Zn){pt(Zn)}}function rt(pn){pn.done?Le(pn.value):function de(Le){return Le instanceof ie?Le:new ie(function(pt){pt(Le)})}(pn.value).then(nn,Gt)}rt((we=we.apply(J,le||[])).next())})}function me(J){return this instanceof me?(this.v=J,this):new me(J)}function Se(J,le,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,we=ie.apply(J,le||[]),Le=[];return de={},pt("next"),pt("throw"),pt("return"),de[Symbol.asyncIterator]=function(){return this},de;function pt(vn){we[vn]&&(de[vn]=function(an){return new Promise(function($r,on){Le.push([vn,an,$r,on])>1||nn(vn,an)})})}function nn(vn,an){try{!function Gt(vn){vn.value instanceof me?Promise.resolve(vn.value.v).then(rt,pn):Zn(Le[0][2],vn)}(we[vn](an))}catch($r){Zn(Le[0][3],$r)}}function rt(vn){nn("next",vn)}function pn(vn){nn("throw",vn)}function Zn(vn,an){vn(an),Le.shift(),Le.length&&nn(Le[0][0],Le[0][1])}}function nt(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,le=J[Symbol.asyncIterator];return le?le.call(J):(J=function se(J){var le="function"==typeof Symbol&&Symbol.iterator,ie=le&&J[le],we=0;if(ie)return ie.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&we>=J.length&&(J=void 0),{value:J&&J[we++],done:!J}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ie={},we("next"),we("throw"),we("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function we(Le){ie[Le]=J[Le]&&function(pt){return new Promise(function(nn,Gt){!function de(Le,pt,nn,Gt){Promise.resolve(Gt).then(function(rt){Le({value:rt,done:nn})},pt)}(nn,Gt,(pt=J[Le](pt)).done,pt.value)})}}}L.d(Ce,{FC:()=>Se,KL:()=>nt,_T:()=>he,mG:()=>ue,qq:()=>me})},5e3:(st,Ce,L)=>{L.d(Ce,{$8M:()=>Xa,$Z:()=>EI,AFp:()=>_g,ALo:()=>gf,AaK:()=>ue,BQk:()=>M_,CHM:()=>Rc,CRH:()=>zD,CZH:()=>fv,CqO:()=>SI,Dn7:()=>sv,EJc:()=>K0,EiD:()=>Sh,EpF:()=>DI,F$t:()=>kI,F4k:()=>TI,FYo:()=>_0,FiY:()=>Xr,G48:()=>gT,Gf:()=>P0,GfV:()=>xD,Gpc:()=>G,Hsn:()=>RI,Ikx:()=>Kb,JOm:()=>x,JVY:()=>gp,L6k:()=>Nm,LAX:()=>Ty,LFG:()=>Ge,LSH:()=>Jl,Lbi:()=>u1,MAs:()=>hI,MGl:()=>k_,NdJ:()=>kb,O4$:()=>yy,OlP:()=>kn,Oqu:()=>Bb,PXZ:()=>nw,Q6J:()=>Sb,QGY:()=>Mb,Qsj:()=>AD,R0b:()=>to,RDi:()=>Nu,Rgc:()=>mf,SBq:()=>df,Sil:()=>aT,Suo:()=>O0,TTD:()=>ws,TgZ:()=>S_,Udp:()=>ve,VLi:()=>_v,WFA:()=>Rb,WLB:()=>nv,X6Q:()=>Ig,XFs:()=>yt,Xpm:()=>mt,Y36:()=>$p,YKP:()=>OD,YNc:()=>dI,Yjl:()=>Il,Yz7:()=>an,ZZ4:()=>Ef,_Bn:()=>TD,_UZ:()=>xb,_Vd:()=>hc,_c5:()=>hF,_uU:()=>bi,aQg:()=>ks,c2e:()=>d1,cJS:()=>on,cg1:()=>Xb,d8E:()=>B_,dDg:()=>dT,deG:()=>gh,dqk:()=>Yt,eBb:()=>Eh,eFA:()=>Cf,ekj:()=>yi,f3M:()=>It,g9A:()=>pv,h0i:()=>fc,hGG:()=>M1,hij:()=>vd,iGM:()=>av,ifc:()=>rn,ip1:()=>W0,kL8:()=>tD,kcU:()=>by,lG2:()=>Ic,mCW:()=>zs,n5z:()=>Zl,oAB:()=>Yr,oxw:()=>MI,pB0:()=>Ih,q3G:()=>Ln,q4F:()=>X_,qLn:()=>Qn,qOj:()=>rI,qZA:()=>A_,qzn:()=>sl,s9C:()=>Ob,sBO:()=>wv,sIi:()=>Hh,s_b:()=>Sd,soG:()=>bg,tBr:()=>_i,tb:()=>vf,tp0:()=>wr,uIk:()=>Qt,vHH:()=>Fe,vpe:()=>Da,wAp:()=>wt,xp6:()=>Zy,yhl:()=>pp,ynx:()=>x_,z2F:()=>ow,z3N:()=>Po,zSh:()=>lb,zs3:()=>fl});var s=L(7579),ne=L(727),V=L(8306),he=L(6451),ae=L(3099);function be(a){for(let l in a)if(a[l]===be)return l;throw Error("Could not find renamed property on target object.")}function oe(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function ue(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(ue).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function fe(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const z=be({__forward_ref__:be});function G(a){return a.__forward_ref__=G,a.toString=function(){return ue(this())},a}function se(a){return Ke(a)?a():a}function Ke(a){return"function"==typeof a&&a.hasOwnProperty(z)&&a.__forward_ref__===G}class Fe extends Error{constructor(l,u){super(function He(a,l){return`NG0${Math.abs(a)}${l?": "+l:""}`}(l,u)),this.code=l}}function me(a){return"string"==typeof a?a:null==a?"":String(a)}function Se(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():me(a)}function Ie(a,l){const u=l?` in ${l}`:"";throw new Fe(-201,`No provider for ${Se(a)} found${u}`)}function Gt(a,l){null==a&&function rt(a,l,u,d){throw new Error(`ASSERTION ERROR: ${a}`+(null==d?"":` [Expected=> ${u} ${d} ${l} <=Actual]`))}(l,a,null,"!=")}function an(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function on(a){return{providers:a.providers||[],imports:a.imports||[]}}function $t(a){return ps(a,gs)||ps(a,ui)}function ps(a,l){return a.hasOwnProperty(l)?a[l]:null}function zr(a){return a&&(a.hasOwnProperty(mo)||a.hasOwnProperty(ms))?a[mo]:null}const gs=be({\u0275prov:be}),mo=be({\u0275inj:be}),ui=be({ngInjectableDef:be}),ms=be({ngInjectorDef:be});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let Ii;function Gn(a){const l=Ii;return Ii=a,l}function _o(a,l,u){const d=$t(a);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&yt.Optional?null:void 0!==l?l:void Ie(ue(a),"Injector")}function lr(a){return{toString:a}.toString()}var $n=(()=>(($n=$n||{})[$n.OnPush=0]="OnPush",$n[$n.Default=1]="Default",$n))(),rn=(()=>{return(a=rn||(rn={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",rn;var a})();const ct="undefined"!=typeof globalThis&&globalThis,Ct="undefined"!=typeof window&&window,Sr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Yt=ct||"undefined"!=typeof global&&global||Ct||Sr,xr={},H=[],W=be({\u0275cmp:be}),K=be({\u0275dir:be}),Ae=be({\u0275pipe:be}),Y=be({\u0275mod:be}),re=be({\u0275fac:be}),Pe=be({__NG_ELEMENT_ID__:be});let ot=0;function mt(a){return lr(()=>{const u={},d={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===$n.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||H,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||rn.Emulated,id:"c",styles:a.styles||H,_:null,setInput:null,schemas:a.schemas||null,tView:null},f=a.directives,m=a.features,b=a.pipes;return d.id+=ot++,d.inputs=El(a.inputs,u),d.outputs=El(a.outputs),m&&m.forEach(C=>C(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(An):null,d.pipeDefs=b?()=>("function"==typeof b?b():b).map(Tt):null,d})}function An(a){return ir(a)||function Wr(a){return a[K]||null}(a)}function Tt(a){return function Fs(a){return a[Ae]||null}(a)}const rr={};function Yr(a){return lr(()=>{const l={type:a.type,bootstrap:a.bootstrap||H,declarations:a.declarations||H,imports:a.imports||H,exports:a.exports||H,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(rr[a.id]=a.type),l})}function El(a,l){if(null==a)return xr;const u={};for(const d in a)if(a.hasOwnProperty(d)){let f=a[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),u[f]=d,l&&(l[f]=m)}return u}const Ic=mt;function Il(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,onDestroy:a.type.prototype.ngOnDestroy||null}}function ir(a){return a[W]||null}function sr(a,l){const u=a[Y]||null;if(!u&&!0===l)throw new Error(`Type ${ue(a)} does not have '\u0275mod' property.`);return u}function Mr(a){return Array.isArray(a)&&"object"==typeof a[1]}function Si(a){return Array.isArray(a)&&!0===a[1]}function Sc(a){return 0!=(8&a.flags)}function Wd(a){return 2==(2&a.flags)}function ys(a){return 1==(1&a.flags)}function bs(a){return null!==a.template}function ku(a){return 0!=(512&a[2])}function Rr(a,l){return a.hasOwnProperty(re)?a[re]:null}class ta{constructor(l,u,d){this.previousValue=l,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function ws(){return Va}function Va(a){return a.type.prototype.ngOnChanges&&(a.setInput=Wf),xc}function xc(){const a=na(this),l=null==a?void 0:a.current;if(l){const u=a.previous;if(u===xr)a.previous=l;else for(let d in l)u[d]=l[d];a.current=null,this.ngOnChanges(l)}}function Wf(a,l,u,d){const f=na(a)||function Ba(a,l){return a[Al]=l}(a,{previous:xr,current:null}),m=f.current||(f.current={}),b=f.previous,C=this.declaredInputs[u],I=b[C];m[C]=new ta(I&&I.currentValue,l,b===xr),a[d]=l}ws.ngInherit=!0;const Al="__ngSimpleChanges__";function na(a){return a[Al]||null}let Ha;function Nu(a){Ha=a}function bn(a){return!!a.listen}const xl={createRenderer:(a,l)=>function Cs(){return void 0!==Ha?Ha:"undefined"!=typeof document?document:void 0}()};function un(a){for(;Array.isArray(a);)a=a[0];return a}function Eo(a,l){return un(l[a])}function mr(a,l){return un(l[a.index])}function Nn(a,l){return a.data[l]}function Es(a,l){return a[l]}function _r(a,l){const u=l[a];return Mr(u)?u:u[0]}function ia(a){return 4==(4&a[2])}function Us(a){return 128==(128&a[2])}function $i(a,l){return null==l?null:a[l]}function Is(a){a[18]=0}function qa(a,l){a[5]+=l;let u=a,d=a[3];for(;null!==d&&(1===l&&1===u[5]||-1===l&&0===u[5]);)d[5]+=l,u=d,d=d[3]}const _t={lFrame:sh(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Pl(){return _t.bindingsEnabled}function Me(){return _t.lFrame.lView}function qt(){return _t.lFrame.tView}function Rc(a){return _t.lFrame.contextLView=a,a[8]}function Mn(){let a=Ga();for(;null!==a&&64===a.type;)a=a.parent;return a}function Ga(){return _t.lFrame.currentTNode}function xi(a,l){const u=_t.lFrame;u.currentTNode=a,u.isParent=l}function Ol(){return _t.lFrame.isParent}function Bu(){_t.lFrame.isParent=!1}function Nl(){return _t.isInCheckNoChangesMode}function Oc(a){_t.isInCheckNoChangesMode=a}function Yn(){const a=_t.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Io(){return _t.lFrame.bindingIndex++}function Hu(a,l){const u=_t.lFrame;u.bindingIndex=u.bindingRootIndex=a,Ll(l)}function Ll(a){_t.lFrame.currentDirectiveIndex=a}function oa(a){const l=_t.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function qu(){return _t.lFrame.currentQueryIndex}function Ul(a){_t.lFrame.currentQueryIndex=a}function Tm(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function Zu(a,l,u){if(u&yt.SkipSelf){let f=l,m=a;for(;!(f=f.parent,null!==f||u&yt.Host||(f=Tm(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;l=f,a=m}const d=_t.lFrame=Vl();return d.currentTNode=l,d.lView=a,!0}function $a(a){const l=Vl(),u=a[1];_t.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function Vl(){const a=_t.lFrame,l=null===a?null:a.child;return null===l?sh(a):l}function sh(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function za(){const a=_t.lFrame;return _t.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const oh=za;function Ya(){const a=za();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function cr(){return _t.lFrame.selectedIndex}function Ts(a){_t.lFrame.selectedIndex=a}function Hn(){const a=_t.lFrame;return Nn(a.tView,a.selectedIndex)}function yy(){_t.lFrame.currentNamespace="svg"}function by(){!function wy(){_t.lFrame.currentNamespace=null}()}function lh(a,l){for(let u=l.directiveStart,d=l.directiveEnd;u<d;u++){const m=a.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:M,ngOnDestroy:R}=m;b&&(a.contentHooks||(a.contentHooks=[])).push(-u,b),C&&((a.contentHooks||(a.contentHooks=[])).push(u,C),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,C)),I&&(a.viewHooks||(a.viewHooks=[])).push(-u,I),M&&((a.viewHooks||(a.viewHooks=[])).push(u,M),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,M)),null!=R&&(a.destroyHooks||(a.destroyHooks=[])).push(u,R)}}function Bl(a,l,u){ur(a,l,3,u)}function Bs(a,l,u,d){(3&a[2])===u&&ur(a,l,u,d)}function Wa(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function ur(a,l,u,d){const m=null!=d?d:-1,b=l.length-1;let C=0;for(let I=void 0!==d?65535&a[18]:0;I<b;I++)if("number"==typeof l[I+1]){if(C=l[I],null!=d&&C>=d)break}else l[I]<0&&(a[18]+=65536),(C<m||-1==m)&&(Xf(a,u,l,I),a[18]=(4294901760&a[18])+I+2),I++}function Xf(a,l,u,d){const f=u[d]<0,m=u[d+1],C=a[f?-u[d]:u[d]];if(f){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class Lc{constructor(l,u,d){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function Nr(a,l,u){const d=bn(a);let f=0;for(;f<u.length;){const m=u[f];if("number"==typeof m){if(0!==m)break;f++;const b=u[f++],C=u[f++],I=u[f++];d?a.setAttribute(l,C,I,b):l.setAttributeNS(b,C,I)}else{const b=m,C=u[++f];uh(b)?d&&a.setProperty(l,b,C):d?a.setAttribute(l,b,C):l.setAttribute(b,C),f++}}return f}function jl(a){return 3===a||4===a||6===a}function uh(a){return 64===a.charCodeAt(0)}function Yi(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let d=0;d<l.length;d++){const f=l[d];"number"==typeof f?u=f:0===u||Vc(a,u,f,null,-1===u||2===u?l[++d]:null)}}return a}function Vc(a,l,u,d,f){let m=0,b=a.length;if(-1===l)b=-1;else for(;m<a.length;){const C=a[m++];if("number"==typeof C){if(C===l){b=-1;break}if(C>l){b=m-1;break}}}for(;m<a.length;){const C=a[m];if("number"==typeof C)break;if(C===u){if(null===d)return void(null!==f&&(a[m+1]=f));if(d===a[m+1])return void(a[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==b&&(a.splice(b,0,l),m=b+1),a.splice(m++,0,u),null!==d&&a.splice(m++,0,d),null!==f&&a.splice(m++,0,f)}function dh(a){return-1!==a}function dr(a){return 32767&a}function Mt(a,l){let u=function js(a){return a>>16}(a),d=l;for(;u>0;)d=d[15],u--;return d}let ut=!0;function ca(a){const l=ut;return ut=a,l}let fh=0;function gi(a,l){const u=Qa(a,l);if(-1!==u)return u;const d=l[1];d.firstCreatePass&&(a.injectorIndex=l.length,vr(d.data,a),vr(l,null),vr(d.blueprint,null));const f=Hs(a,l),m=a.injectorIndex;if(dh(f)){const b=dr(f),C=Mt(f,l),I=C[1].data;for(let M=0;M<8;M++)l[m+M]=C[b+M]|I[b+M]}return l[m+8]=f,m}function vr(a,l){a.push(0,0,0,0,0,0,0,0,l)}function Qa(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function Hs(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,d=null,f=l;for(;null!==f;){const m=f[1],b=m.type;if(d=2===b?m.declTNode:1===b?f[6]:null,null===d)return-1;if(u++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function Fr(a,l,u){!function zu(a,l,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(Pe)&&(d=u[Pe]),null==d&&(d=u[Pe]=fh++);const f=255&d;l.data[a+(f>>5)]|=1<<f}(a,l,u)}function Hl(a,l,u){if(u&yt.Optional)return a;Ie(l,"NodeInjector")}function Qr(a,l,u,d){if(u&yt.Optional&&void 0===d&&(d=null),0==(u&(yt.Self|yt.Host))){const f=a[9],m=Gn(void 0);try{return f?f.get(l,d,u&yt.Optional):_o(l,d,u&yt.Optional)}finally{Gn(m)}}return Hl(d,l,u)}function Mi(a,l,u,d=yt.Default,f){if(null!==a){const m=function ep(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(Pe)?a[Pe]:void 0;return"number"==typeof l?l>=0?255&l:Pn:l}(u);if("function"==typeof m){if(!Zu(l,a,d))return d&yt.Host?Hl(f,u,d):Qr(l,u,d,f);try{const b=m(d);if(null!=b||d&yt.Optional)return b;Ie(u)}finally{oh()}}else if("number"==typeof m){let b=null,C=Qa(a,l),I=-1,M=d&yt.Host?l[16][6]:null;for((-1===C||d&yt.SkipSelf)&&(I=-1===C?Hs(a,l):l[C+8],-1!==I&&ql(d,!1)?(b=l[1],C=dr(I),l=Mt(I,l)):C=-1);-1!==C;){const R=l[1];if(To(m,C,R.data)){const B=Wi(C,l,u,b,d,M);if(B!==Bc)return B}I=l[C+8],-1!==I&&ql(d,l[1].data[C+8]===M)&&To(m,C,l)?(b=R,C=dr(I),l=Mt(I,l)):C=-1}}}return Qr(l,u,d,f)}const Bc={};function Pn(){return new ua(Mn(),Me())}function Wi(a,l,u,d,f,m){const b=l[1],C=b.data[a+8],R=Yu(C,b,u,null==d?Wd(C)&&ut:d!=b&&0!=(3&C.type),f&yt.Host&&m===C);return null!==R?Zt(l,b,R,C):Bc}function Yu(a,l,u,d,f){const m=a.providerIndexes,b=l.data,C=1048575&m,I=a.directiveStart,R=m>>20,q=f?C+R:a.directiveEnd;for(let te=d?C:C+R;te<q;te++){const Ee=b[te];if(te<I&&u===Ee||te>=I&&Ee.type===u)return te}if(f){const te=b[I];if(te&&bs(te)&&te.type===u)return I}return null}function Zt(a,l,u,d){let f=a[u];const m=l.data;if(function ch(a){return a instanceof Lc}(f)){const b=f;b.resolving&&function Qe(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${a}${u}`)}(Se(m[u]));const C=ca(b.canSeeViewProviders);b.resolving=!0;const I=b.injectImpl?Gn(b.injectImpl):null;Zu(a,d,yt.Default);try{f=a[u]=b.factory(void 0,m,a,d),l.firstCreatePass&&u>=d.directiveStart&&function Sm(a,l,u){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=l.type.prototype;if(d){const b=Va(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,b)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,f),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,m))}(u,m[u],l)}finally{null!==I&&Gn(I),ca(C),b.resolving=!1,oh()}}return f}function To(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function ql(a,l){return!(a&yt.Self||a&yt.Host&&l)}class ua{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,d){return Mi(this._tNode,this._lView,l,d,u)}}function Zl(a){return lr(()=>{const l=a.prototype.constructor,u=l[re]||Ja(l),d=Object.prototype;let f=Object.getPrototypeOf(a.prototype).constructor;for(;f&&f!==d;){const m=f[re]||Ja(f);if(m&&m!==u)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Ja(a){return Ke(a)?()=>{const l=Ja(se(a));return l&&l()}:Rr(a)}function Xa(a){return function ph(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const d=u.length;let f=0;for(;f<d;){const m=u[f];if(jl(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof u[f];)f++;else{if(m===l)return u[f+1];f+=2}}}return null}(Mn(),a)}const ki="__parameters__";function ha(a,l,u){return lr(()=>{const d=function el(a){return function(...u){if(a){const d=a(...u);for(const f in d)this[f]=d[f]}}}(l);function f(...m){if(this instanceof f)return d.apply(this,m),this;const b=new f(...m);return C.annotation=b,C;function C(I,M,R){const B=I.hasOwnProperty(ki)?I[ki]:Object.defineProperty(I,ki,{value:[]})[ki];for(;B.length<=R;)B.push(null);return(B[R]=B[R]||[]).push(b),I}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=a,f.annotationCls=f,f})}class kn{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=an({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const gh=new kn("AnalyzeForEntryComponents");function Ki(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let d=a[u];Array.isArray(d)?(l===a&&(l=a.slice(0,u)),Ki(d,l)):l!==a&&l.push(d)}return l}function Ri(a,l){a.forEach(u=>Array.isArray(u)?Ri(u,l):l(u))}function Qi(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function Jr(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function qs(a,l){const u=[];for(let d=0;d<a;d++)u.push(l);return u}function Xi(a,l,u){let d=$l(a,l);return d>=0?a[1|d]=u:(d=~d,function Ji(a,l,u,d){let f=a.length;if(f==l)a.push(u,d);else if(1===f)a.push(d,a[0]),a[0]=u;else{for(f--,a.push(a[f-1],a[f]);f>l;)a[f]=a[f-2],f--;a[l]=u,a[l+1]=d}}(a,d,l,u)),d}function Qu(a,l){const u=$l(a,l);if(u>=0)return a[1|u]}function $l(a,l){return function vh(a,l,u){let d=0,f=a.length>>u;for(;f!==d;){const m=d+(f-d>>1),b=a[m<<u];if(l===b)return m<<u;b>l?f=m:d=m+1}return~(f<<u)}(a,l,1)}const Mo={},ko="__NG_DI_FLAG__",tl="ngTempTokenPath",T=/\n/gm,P="__source",j=be({provide:String,useValue:be});let ee;function ce(a){const l=ee;return ee=a,l}function Ne(a,l=yt.Default){if(void 0===ee)throw new Fe(203,"");return null===ee?_o(a,void 0,l):ee.get(a,l&yt.Optional?null:void 0,l)}function Ge(a,l=yt.Default){return(function jn(){return Ii}()||Ne)(se(a),l)}const It=Ge;function Wt(a){const l=[];for(let u=0;u<a.length;u++){const d=se(a[u]);if(Array.isArray(d)){if(0===d.length)throw new Fe(900,"");let f,m=yt.Default;for(let b=0;b<d.length;b++){const C=d[b],I=yr(C);"number"==typeof I?-1===I?f=C.token:m|=I:f=C}l.push(Ge(f,m))}else l.push(Ge(d))}return l}function Dt(a,l){return a[ko]=l,a.prototype[ko]=l,a}function yr(a){return a[ko]}const _i=Dt(ha("Inject",a=>({token:a})),-1),Xr=Dt(ha("Optional"),8),wr=Dt(ha("SkipSelf"),4);let nl;function Yl(a){var l;return(null===(l=function rl(){if(void 0===nl&&(nl=null,Yt.trustedTypes))try{nl=Yt.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch(a){}return nl}())||void 0===l?void 0:l.createHTML(a))||a}class il{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ga extends il{getTypeName(){return"HTML"}}class Pm extends il{getTypeName(){return"Style"}}class Om extends il{getTypeName(){return"Script"}}class Dy extends il{getTypeName(){return"URL"}}class nE extends il{getTypeName(){return"ResourceURL"}}function Po(a){return a instanceof il?a.changingThisBreaksApplicationSecurity:a}function sl(a,l){const u=pp(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}function pp(a){return a instanceof il&&a.getTypeName()||null}function gp(a){return new ga(a)}function Nm(a){return new Pm(a)}function Eh(a){return new Om(a)}function Ty(a){return new Dy(a)}function Ih(a){return new nE(a)}class $s{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(Yl(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class Lm{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const d=this.inertDocument.createElement("body");u.appendChild(d)}}getInertBodyElement(l){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Yl(l),u;const d=this.inertDocument.createElement("body");return d.innerHTML=Yl(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(l){const u=l.attributes;for(let f=u.length-1;0<f;f--){const b=u.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&l.removeAttribute(b)}let d=l.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Sy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ay=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function zs(a){return(a=String(a)).match(Sy)||a.match(Ay)?a:"unsafe:"+a}function Oo(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function ol(...a){const l={};for(const u of a)for(const d in u)u.hasOwnProperty(d)&&(l[d]=!0);return l}const Vm=Oo("area,br,col,hr,img,wbr"),Wl=Oo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_p=Oo("rp,rt"),Bm=ol(Vm,ol(Wl,Oo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ol(_p,Oo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ol(_p,Wl)),Kl=Oo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Dh=Oo("srcset"),yp=ol(Kl,Dh,Oo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Oo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ql=Oo("script,style,template");class jm{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,d=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?d=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,d&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!Bm.hasOwnProperty(u))return this.sanitizedSomething=!0,!Ql.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const d=l.attributes;for(let f=0;f<d.length;f++){const m=d.item(f),b=m.name,C=b.toLowerCase();if(!yp.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let I=m.value;Kl[C]&&(I=zs(I)),Dh[C]&&(a=I,I=(a=String(a)).split(",").map(l=>zs(l.trim())).join(", ")),this.buf.push(" ",b,'="',bp(I),'"')}var a;return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();Bm.hasOwnProperty(u)&&!Vm.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(bp(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const Th=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,My=/([^\#-~ |!])/g;function bp(a){return a.replace(/&/g,"&amp;").replace(Th,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(My,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $c;function Sh(a,l){let u=null;try{$c=$c||function Fm(a){const l=new Lm(a);return function mp(){try{return!!(new window.DOMParser).parseFromString(Yl(""),"text/html")}catch(a){return!1}}()?new $s(l):l}(a);let d=l?String(l):"";u=$c.getInertBodyElement(d);let f=5,m=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=m,m=u.innerHTML,u=$c.getInertBodyElement(d)}while(d!==m);return Yl((new jm).sanitizeChildren(Ys(u)||u))}finally{if(u){const d=Ys(u)||u;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Ys(a){return"content"in a&&function Hm(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var Ln=(()=>((Ln=Ln||{})[Ln.NONE=0]="NONE",Ln[Ln.HTML=1]="HTML",Ln[Ln.STYLE=2]="STYLE",Ln[Ln.SCRIPT=3]="SCRIPT",Ln[Ln.URL=4]="URL",Ln[Ln.RESOURCE_URL=5]="RESOURCE_URL",Ln))();function Jl(a){const l=function od(){const a=Me();return a&&a[12]}();return l?l.sanitize(Ln.URL,a)||"":sl(a,"URL")?Po(a):zs(me(a))}const Gm="__ngContext__";function ze(a,l){a[Gm]=l}function Ur(a){const l=function en(a){return a[Gm]||null}(a);return l?Array.isArray(l)?l:l.lView:null}function Ks(a){return a.ngOriginalError}function Ni(a,...l){a.error(...l)}class Qn{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l),d=function al(a){return a&&a.ngErrorLogger||Ni}(l);d(this._console,"ERROR",l),u&&d(this._console,"ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&Ks(l);for(;u&&Ks(u);)u=Ks(u);return u||null}}const Qc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Yt))();function Fo(a){return a instanceof Function?a():a}var x=(()=>((x=x||{})[x.Important=1]="Important",x[x.DashCase=2]="DashCase",x))();function Q(a,l){return undefined(a,l)}function tt(a){const l=a[3];return Si(l)?l[3]:l}function Jn(a){return Jc(a[13])}function Fi(a){return Jc(a[4])}function Jc(a){for(;null!==a&&!Si(a);)a=a[4];return a}function ll(a,l,u,d,f){if(null!=d){let m,b=!1;Si(d)?m=d:Mr(d)&&(b=!0,d=d[0]);const C=un(d);0===a&&null!==u?null==f?cE(l,u,C):ld(l,u,C,f||null,!0):1===a&&null!==u?ld(l,u,C,f||null,!0):2===a?function pE(a,l,u){const d=e_(a,l);d&&function uE(a,l,u,d){bn(a)?a.removeChild(l,u,d):l.removeChild(u)}(a,d,l,u)}(l,C,b):3===a&&l.destroyNode(C),null!=m&&function Rp(a,l,u,d,f){const m=u[7];m!==un(u)&&ll(l,a,d,m,f);for(let C=10;C<u.length;C++){const I=u[C];Rh(I[1],I,a,l,d,m)}}(l,a,m,u,f)}}function Vt(a,l,u){if(bn(a))return a.createElement(l,u);{const d=null!==u?function Ou(a){const l=a.toLowerCase();return"svg"===l?"http://www.w3.org/2000/svg":"math"===l?"http://www.w3.org/1998/MathML/":null}(u):null;return null===d?a.createElement(l):a.createElementNS(d,l)}}function aE(a,l){const u=a[9],d=u.indexOf(l),f=l[3];1024&l[2]&&(l[2]&=-1025,qa(f,-1)),u.splice(d,1)}function Lo(a,l){if(a.length<=10)return;const u=10+l,d=a[u];if(d){const f=d[17];null!==f&&f!==a&&aE(f,d),l>0&&(a[u-1][4]=d[4]);const m=Jr(a,10+l);!function Jm(a,l){Rh(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(d[1],d);const b=m[19];null!==b&&b.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function Fy(a,l){if(!(256&l[2])){const u=l[11];bn(u)&&u.destroyNode&&Rh(a,l,u,3,null,null),function xp(a){let l=a[13];if(!l)return Xm(a[1],a);for(;l;){let u=null;if(Mr(l))u=l[13];else{const d=l[10];d&&(u=d)}if(!u){for(;l&&!l[4]&&l!==a;)Mr(l)&&Xm(l[1],l),l=l[3];null===l&&(l=a),Mr(l)&&Xm(l[1],l),u=l&&l[4]}l=u}}(l)}}function Xm(a,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function yN(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let d=0;d<u.length;d+=2){const f=l[u[d]];if(!(f instanceof Lc)){const m=u[d+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const C=f[m[b]],I=m[b+1];try{I.call(C)}finally{}}else try{m.call(f)}finally{}}}}(a,l),function lE(a,l){const u=a.cleanup,d=l[7];let f=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const b=u[m+1],C="function"==typeof b?b(l):un(l[b]),I=d[f=u[m+2]],M=u[m+3];"boolean"==typeof M?C.removeEventListener(u[m],I,M):M>=0?d[f=M]():d[f=-M].unsubscribe(),m+=2}else{const b=d[f=u[m+1]];u[m].call(b)}if(null!==d){for(let m=f+1;m<d.length;m++)d[m]();l[7]=null}}(a,l),1===l[1].type&&bn(l[11])&&l[11].destroy();const u=l[17];if(null!==u&&Si(l[3])){u!==l[3]&&aE(u,l);const d=l[19];null!==d&&d.detachView(a)}}}function ni(a,l,u){return function _a(a,l,u){let d=l;for(;null!==d&&40&d.type;)d=(l=d).parent;if(null===d)return u[0];if(2&d.flags){const f=a.data[d.directiveStart].encapsulation;if(f===rn.None||f===rn.Emulated)return null}return mr(d,u)}(a,l.parent,u)}function ld(a,l,u,d,f){bn(a)?a.insertBefore(l,u,d,f):l.insertBefore(u,d,f)}function cE(a,l,u){bn(a)?a.appendChild(l,u):l.appendChild(u)}function Ly(a,l,u,d,f){null!==d?ld(a,l,u,d,f):cE(a,l,u)}function e_(a,l){return bn(a)?a.parentNode(l):l.parentNode}function hE(a,l,u){return Vy(a,l,u)}let Vy=function Uy(a,l,u){return 40&a.type?mr(a,u):null};function Kt(a,l,u,d){const f=ni(a,d,l),m=l[11],C=hE(d.parent||l[6],d,l);if(null!=f)if(Array.isArray(u))for(let I=0;I<u.length;I++)Ly(m,f,u[I],C,!1);else Ly(m,f,u,C,!1)}function eu(a,l){if(null!==l){const u=l.type;if(3&u)return mr(l,a);if(4&u)return nc(-1,a[l.index]);if(8&u){const d=l.child;if(null!==d)return eu(a,d);{const f=a[l.index];return Si(f)?nc(-1,f):un(f)}}if(32&u)return Q(l,a)()||un(a[l.index]);{const d=fE(a,l);return null!==d?Array.isArray(d)?d[0]:eu(tt(a[16]),d):eu(a,l.next)}}return null}function fE(a,l){return null!==l?a[16][6].projection[l.projection]:null}function nc(a,l){const u=10+a+1;if(u<l.length){const d=l[u],f=d[1].firstChild;if(null!==f)return eu(d,f)}return l[7]}function t_(a,l,u,d,f,m,b){for(;null!=u;){const C=d[u.index],I=u.type;if(b&&0===l&&(C&&ze(un(C),d),u.flags|=4),64!=(64&u.flags))if(8&I)t_(a,l,u.child,d,f,m,!1),ll(l,a,f,C,m);else if(32&I){const M=Q(u,d);let R;for(;R=M();)ll(l,a,f,R,m);ll(l,a,f,C,m)}else 16&I?kp(a,l,d,u,f,m):ll(l,a,f,C,m);u=b?u.projectionNext:u.next}}function Rh(a,l,u,d,f,m){t_(u,d,a.firstChild,l,f,m,!1)}function kp(a,l,u,d,f,m){const b=u[16],I=b[6].projection[d.projection];if(Array.isArray(I))for(let M=0;M<I.length;M++)ll(l,a,f,I[M],m);else t_(a,l,I,b[3],f,m,!0)}function Pp(a,l,u){bn(a)?a.setAttribute(l,"style",u):l.style.cssText=u}function By(a,l,u){bn(a)?""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u):l.className=u}function n_(a,l,u){let d=a.length;for(;;){const f=a.indexOf(l,u);if(-1===f)return f;if(0===f||a.charCodeAt(f-1)<=32){const m=l.length;if(f+m===d||a.charCodeAt(f+m)<=32)return f}u=f+1}}const Hy="ng-template";function mE(a,l,u){let d=0;for(;d<a.length;){let f=a[d++];if(u&&"class"===f){if(f=a[d],-1!==n_(f.toLowerCase(),l,0))return!0}else if(1===f){for(;d<a.length&&"string"==typeof(f=a[d++]);)if(f.toLowerCase()===l)return!0;return!1}}return!1}function _E(a){return 4===a.type&&a.value!==Hy}function UA(a,l,u){return l===(4!==a.type||u?a.value:Hy)}function VA(a,l,u){let d=4;const f=a.attrs||[],m=function HA(a){for(let l=0;l<a.length;l++)if(jl(a[l]))return l;return a.length}(f);let b=!1;for(let C=0;C<l.length;C++){const I=l[C];if("number"!=typeof I){if(!b)if(4&d){if(d=2|1&d,""!==I&&!UA(a,I,u)||""===I&&1===l.length){if(As(d))return!1;b=!0}}else{const M=8&d?I:l[++C];if(8&d&&null!==a.attrs){if(!mE(a.attrs,M,u)){if(As(d))return!1;b=!0}continue}const B=BA(8&d?"class":I,f,_E(a),u);if(-1===B){if(As(d))return!1;b=!0;continue}if(""!==M){let q;q=B>m?"":f[B+1].toLowerCase();const te=8&d?q:null;if(te&&-1!==n_(te,M,0)||2&d&&M!==q){if(As(d))return!1;b=!0}}}}else{if(!b&&!As(d)&&!As(I))return!1;if(b&&As(I))continue;b=!1,d=I|1&d}}return As(d)||b}function As(a){return 0==(1&a)}function BA(a,l,u,d){if(null===l)return-1;let f=0;if(d||!u){let m=!1;for(;f<l.length;){const b=l[f];if(b===a)return f;if(3===b||6===b)m=!0;else{if(1===b||2===b){let C=l[++f];for(;"string"==typeof C;)C=l[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=m?1:2}return-1}return function qA(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const d=a[u];if("number"==typeof d)return-1;if(d===l)return u;u++}return-1}(l,a)}function vE(a,l,u=!1){for(let d=0;d<l.length;d++)if(VA(a,l[d],u))return!0;return!1}function yE(a,l){e:for(let u=0;u<l.length;u++){const d=l[u];if(a.length===d.length){for(let f=0;f<a.length;f++)if(a[f]!==d[f])continue e;return!0}}return!1}function r_(a,l){return a?":not("+l.trim()+")":l}function qy(a){let l=a[0],u=1,d=2,f="",m=!1;for(;u<a.length;){let b=a[u];if("string"==typeof b)if(2&d){const C=a[++u];f+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+b:4&d&&(f+=" "+b);else""!==f&&!As(b)&&(l+=r_(m,f),f=""),d=b,m=m||!As(d);u++}return""!==f&&(l+=r_(m,f)),l}const Ft={};function Zy(a){bE(qt(),Me(),cr()+a,Nl())}function bE(a,l,u,d){if(!d)if(3==(3&l[2])){const m=a.preOrderCheckHooks;null!==m&&Bl(l,m,u)}else{const m=a.preOrderHooks;null!==m&&Bs(l,m,0,u)}Ts(u)}function Op(a,l){return a<<17|l<<2}function va(a){return a>>17&32767}function Fp(a){return 2|a}function ul(a){return(131068&a)>>2}function Lp(a,l){return-131069&a|l<<2}function Gy(a){return 1|a}function Yy(a,l){const u=a.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const f=u[d],m=u[d+1];if(-1!==m){const b=a.data[m];Ul(f),b.contentQueries(2,l[m],m)}}}function nu(a,l,u,d,f,m,b,C,I,M){const R=l.blueprint.slice();return R[0]=f,R[2]=140|d,Is(R),R[3]=R[15]=a,R[8]=u,R[10]=b||a&&a[10],R[11]=C||a&&a[11],R[12]=I||a&&a[12]||null,R[9]=M||a&&a[9]||null,R[6]=m,R[16]=2==l.type?a[16]:R,R}function Nh(a,l,u,d,f){let m=a.data[l];if(null===m)m=function Wy(a,l,u,d,f){const m=Ga(),b=Ol(),I=a.data[l]=function QA(a,l,u,d,f,m){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,u,l,d,f);return null===a.firstChild&&(a.firstChild=I),null!==m&&(b?null==m.child&&null!==I.parent&&(m.child=I):null===m.next&&(m.next=I)),I}(a,l,u,d,f),function ju(){return _t.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=d,m.attrs=f;const b=function sa(){const a=_t.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();m.injectorIndex=null===b?-1:b.injectorIndex}return xi(m,!0),m}function Fh(a,l,u,d){if(0===u)return-1;const f=l.length;for(let m=0;m<u;m++)l.push(d),a.blueprint.push(d),a.data.push(null);return f}function jp(a,l,u){$a(l);try{const d=a.viewQuery;null!==d&&ib(1,d,u);const f=a.template;null!==f&&Ky(a,l,f,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&Yy(a,l),a.staticViewQueries&&ib(2,a.viewQuery,u);const m=a.components;null!==m&&function h_(a,l){for(let u=0;u<l.length;u++)ux(a,l[u])}(l,m)}catch(d){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),d}finally{l[2]&=-5,Ya()}}function oc(a,l,u,d){const f=l[2];if(256==(256&f))return;$a(l);const m=Nl();try{Is(l),function Fl(a){return _t.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&Ky(a,l,u,2,d);const b=3==(3&f);if(!m)if(b){const M=a.preOrderCheckHooks;null!==M&&Bl(l,M,null)}else{const M=a.preOrderHooks;null!==M&&Bs(l,M,0,null),Wa(l,0)}if(function lx(a){for(let l=Jn(a);null!==l;l=Fi(l)){if(!l[2])continue;const u=l[9];for(let d=0;d<u.length;d++){const f=u[d],m=f[3];0==(1024&f[2])&&qa(m,1),f[2]|=1024}}}(l),function HE(a){for(let l=Jn(a);null!==l;l=Fi(l))for(let u=10;u<l.length;u++){const d=l[u],f=d[1];Us(d)&&oc(f,d,f.template,d[8])}}(l),null!==a.contentQueries&&Yy(a,l),!m)if(b){const M=a.contentCheckHooks;null!==M&&Bl(l,M)}else{const M=a.contentHooks;null!==M&&Bs(l,M,1),Wa(l,1)}!function Uo(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const f=u[d];if(f<0)Ts(~f);else{const m=f,b=u[++d],C=u[++d];Hu(b,m),C(2,l[m])}}}finally{Ts(-1)}}(a,l);const C=a.components;null!==C&&function ME(a,l){for(let u=0;u<l.length;u++)cx(a,l[u])}(l,C);const I=a.viewQuery;if(null!==I&&ib(2,I,d),!m)if(b){const M=a.viewCheckHooks;null!==M&&Bl(l,M)}else{const M=a.viewHooks;null!==M&&Bs(l,M,2),Wa(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),m||(l[2]&=-73),1024&l[2]&&(l[2]&=-1025,qa(l[3],-1))}finally{Ya()}}function kE(a,l,u,d){const f=l[10],m=!Nl(),b=ia(l);try{m&&!b&&f.begin&&f.begin(),b&&jp(a,l,d),oc(a,l,u,d)}finally{m&&!b&&f.end&&f.end()}}function Ky(a,l,u,d,f){const m=cr(),b=2&d;try{Ts(-1),b&&l.length>20&&bE(a,l,20,Nl()),u(d,f)}finally{Ts(m)}}function Hp(a,l,u){if(Sc(l)){const f=l.directiveEnd;for(let m=l.directiveStart;m<f;m++){const b=a.data[m];b.contentQueries&&b.contentQueries(1,u[m],m)}}}function f_(a,l,u){!Pl()||(function nx(a,l,u,d){const f=u.directiveStart,m=u.directiveEnd;a.firstCreatePass||gi(u,l),ze(d,l);const b=u.initialInputs;for(let C=f;C<m;C++){const I=a.data[C],M=bs(I);M&&ox(l,u,I);const R=Zt(l,a,C,u);ze(R,l),null!==b&&kN(0,C-f,R,I,0,b),M&&(_r(u.index,l)[8]=R)}}(a,l,u,mr(u,l)),128==(128&u.flags)&&function rx(a,l,u){const d=u.directiveStart,f=u.directiveEnd,b=u.index,C=function Fc(){return _t.lFrame.currentDirectiveIndex}();try{Ts(b);for(let I=d;I<f;I++){const M=a.data[I],R=l[I];Ll(I),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&FE(M,R)}}finally{Ts(-1),Ll(C)}}(a,l,u))}function pd(a,l,u=mr){const d=l.localNames;if(null!==d){let f=l.index+1;for(let m=0;m<d.length;m+=2){const b=d[m+1],C=-1===b?u(l,a):a[b];a[f++]=C}}}function Qy(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=p_(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function p_(a,l,u,d,f,m,b,C,I,M){const R=20+d,B=R+f,q=function KA(a,l){const u=[];for(let d=0;d<l;d++)u.push(d<a?null:Ft);return u}(R,B),te="function"==typeof M?M():M;return q[1]={type:a,blueprint:q,template:u,queries:null,viewQuery:C,declTNode:l,data:q.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:I,consts:te,incompleteFirstPass:!1}}function g_(a,l,u,d){const f=sb(l);null===u?f.push(d):(f.push(u),a.firstCreatePass&&GE(a).push(d,f.length-1))}function Jy(a,l,u){for(let d in a)if(a.hasOwnProperty(d)){const f=a[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(l,f):u[d]=[l,f]}return u}function Js(a,l,u,d,f,m,b,C){const I=mr(l,u);let R,M=l.inputs;!C&&null!=M&&(R=M[d])?(zE(a,u,R,d,f),Wd(l)&&function __(a,l){const u=_r(l,a);16&u[2]||(u[2]|=64)}(u,l.index)):3&l.type&&(d=function JA(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(d),f=null!=b?b(f,l.value||"",d):f,bn(m)?m.setProperty(I,d,f):uh(d)||(I.setProperty?I.setProperty(d,f):I[d]=f))}function Xy(a,l,u,d){let f=!1;if(Pl()){const m=function ix(a,l,u){const d=a.directiveRegistry;let f=null;if(d)for(let m=0;m<d.length;m++){const b=d[m];vE(u,b.selectors,!1)&&(f||(f=[]),Fr(gi(u,l),a,b.type),bs(b)?(LE(a,u),f.unshift(b)):f.push(b))}return f}(a,l,u),b=null===d?null:{"":-1};if(null!==m){f=!0,VE(u,a.data.length,m.length);for(let R=0;R<m.length;R++){const B=m[R];B.providersResolver&&B.providersResolver(B)}let C=!1,I=!1,M=Fh(a,l,m.length,null);for(let R=0;R<m.length;R++){const B=m[R];u.mergedAttrs=Yi(u.mergedAttrs,B.hostAttrs),BE(a,u,l,M,B),sx(M,B,b),null!==B.contentQueries&&(u.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(u.flags|=128);const q=B.type.prototype;!C&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),C=!0),!I&&(q.ngOnChanges||q.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),I=!0),M++}!function m_(a,l){const d=l.directiveEnd,f=a.data,m=l.attrs,b=[];let C=null,I=null;for(let M=l.directiveStart;M<d;M++){const R=f[M],B=R.inputs,q=null===m||_E(l)?null:jE(B,m);b.push(q),C=Jy(B,M,C),I=Jy(R.outputs,M,I)}null!==C&&(C.hasOwnProperty("class")&&(l.flags|=16),C.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=b,l.inputs=C,l.outputs=I}(a,u)}b&&function UE(a,l,u){if(l){const d=a.localNames=[];for(let f=0;f<l.length;f+=2){const m=u[l[f+1]];if(null==m)throw new Fe(-301,!1);d.push(l[f],m)}}}(u,d,b)}return u.mergedAttrs=Yi(u.mergedAttrs,u.attrs),f}function NE(a,l,u,d,f,m){const b=m.hostBindings;if(b){let C=a.hostBindingOpCodes;null===C&&(C=a.hostBindingOpCodes=[]);const I=~l.index;(function tx(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(C)!=I&&C.push(I),C.push(d,f,b)}}function FE(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function LE(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function sx(a,l,u){if(u){if(l.exportAs)for(let d=0;d<l.exportAs.length;d++)u[l.exportAs[d]]=a;bs(l)&&(u[""]=a)}}function VE(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function BE(a,l,u,d,f){a.data[d]=f;const m=f.factory||(f.factory=Rr(f.type)),b=new Lc(m,bs(f),null);a.blueprint[d]=b,u[d]=b,NE(a,l,0,d,Fh(a,u,f.hostVars,Ft),f)}function ox(a,l,u){const d=mr(l,a),f=Qy(u),m=a[10],b=w_(a,nu(a,f,null,u.onPush?64:16,d,l,m,m.createRenderer(d,u),null,null));a[l.index]=b}function dl(a,l,u,d,f,m){const b=mr(a,l);!function b_(a,l,u,d,f,m,b){if(null==m)bn(a)?a.removeAttribute(l,f,u):l.removeAttribute(f);else{const C=null==b?me(m):b(m,d||"",f);bn(a)?a.setAttribute(l,f,C,u):u?l.setAttributeNS(u,f,C):l.setAttribute(f,C)}}(l[11],b,m,a.value,u,d,f)}function kN(a,l,u,d,f,m){const b=m[l];if(null!==b){const C=d.setInput;for(let I=0;I<b.length;){const M=b[I++],R=b[I++],B=b[I++];null!==C?d.setInput(u,B,M,R):u[R]=B}}}function jE(a,l){let u=null,d=0;for(;d<l.length;){const f=l[d];if(0!==f)if(5!==f){if("number"==typeof f)break;a.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,a[f],l[d+1])),d+=2}else d+=2;else d+=4}return u}function eb(a,l,u,d){return new Array(a,!0,!1,l,null,0,d,u,null,null)}function cx(a,l){const u=_r(l,a);if(Us(u)){const d=u[1];80&u[2]?oc(d,u,d.template,u[8]):u[5]>0&&tb(u)}}function tb(a){for(let d=Jn(a);null!==d;d=Fi(d))for(let f=10;f<d.length;f++){const m=d[f];if(1024&m[2]){const b=m[1];oc(b,m,b.template,m[8])}else m[5]>0&&tb(m)}const u=a[1].components;if(null!==u)for(let d=0;d<u.length;d++){const f=_r(u[d],a);Us(f)&&f[5]>0&&tb(f)}}function ux(a,l){const u=_r(l,a),d=u[1];(function qE(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(d,u),jp(d,u,u[8])}function w_(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function qp(a){for(;a;){a[2]|=64;const l=tt(a);if(ku(a)&&!l)return a;a=l}return null}function rb(a,l,u){const d=l[10];d.begin&&d.begin();try{oc(a,l,a.template,u)}catch(f){throw Sn(l,f),f}finally{d.end&&d.end()}}function C_(a){!function nb(a){for(let l=0;l<a.components.length;l++){const u=a.components[l],d=Ur(u),f=d[1];kE(f,d,f.template,u)}}(a[8])}function ib(a,l,u){Ul(0),l(a,u)}const fx=(()=>Promise.resolve(null))();function sb(a){return a[7]||(a[7]=[])}function GE(a){return a.cleanup||(a.cleanup=[])}function $E(a,l,u){return(null===a||bs(a))&&(u=function Ml(a){for(;Array.isArray(a);){if("object"==typeof a[1])return a;a=a[0]}return null}(u[l.index])),u[11]}function Sn(a,l){const u=a[9],d=u?u.get(Qn,null):null;d&&d.handleError(l)}function zE(a,l,u,d,f){for(let m=0;m<u.length;){const b=u[m++],C=u[m++],I=l[b],M=a.data[b];null!==M.setInput?M.setInput(I,f,d,C):I[C]=f}}function hl(a,l,u){const d=Eo(l,a);!function Sp(a,l,u){bn(a)?a.setValue(l,u):l.textContent=u}(a[11],d,u)}function xs(a,l,u){let d=u?a.styles:null,f=u?a.classes:null,m=0;if(null!==l)for(let b=0;b<l.length;b++){const C=l[b];"number"==typeof C?m=C:1==m?f=fe(f,C):2==m&&(d=fe(d,C+": "+l[++b]+";"))}u?a.styles=d:a.stylesWithoutHost=d,u?a.classes=f:a.classesWithoutHost=f}const ob=new kn("INJECTOR",-1);class ab{get(l,u=Mo){if(u===Mo){const d=new Error(`NullInjectorError: No provider for ${ue(l)}!`);throw d.name="NullInjectorError",d}return u}}const lb=new kn("Set Injector scope."),Uh={},YE={};let Zp;function px(){return void 0===Zp&&(Zp=new ab),Zp}function ru(a,l=null,u=null,d){const f=cb(a,l,u,d);return f._resolveInjectorDefTypes(),f}function cb(a,l=null,u=null,d){return new gx(a,u,l||px(),d)}class gx{constructor(l,u,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&Ri(u,C=>this.processProvider(C,l,u)),Ri([l],C=>this.processInjectorType(C,[],m)),this.records.set(ob,Vh(void 0,this));const b=this.records.get(lb);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof l?null:ue(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,u=Mo,d=yt.Default){this.assertNotDestroyed();const f=ce(this),m=Gn(void 0);try{if(!(d&yt.SkipSelf)){let C=this.records.get(l);if(void 0===C){const I=function QE(a){return"function"==typeof a||"object"==typeof a&&a instanceof kn}(l)&&$t(l);C=I&&this.injectableDefInScope(I)?Vh(ub(l),Uh):null,this.records.set(l,C)}if(null!=C)return this.hydrate(l,C)}return(d&yt.Self?px():this.parent).get(l,u=d&yt.Optional&&u===Mo?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[tl]=b[tl]||[]).unshift(ue(l)),f)throw b;return function br(a,l,u,d){const f=a[tl];throw l[P]&&f.unshift(l[P]),a.message=function Ro(a,l,u,d=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let f=ue(l);if(Array.isArray(l))f=l.map(ue).join(" -> ");else if("object"==typeof l){let m=[];for(let b in l)if(l.hasOwnProperty(b)){let C=l[b];m.push(b+":"+("string"==typeof C?JSON.stringify(C):ue(C)))}f=`{${m.join(", ")}}`}return`${u}${d?"("+d+")":""}[${f}]: ${a.replace(T,"\n  ")}`}("\n"+a.message,f,u,d),a.ngTokenPath=f,a[tl]=null,a}(b,l,"R3InjectorError",this.source)}throw b}finally{Gn(m),ce(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((d,f)=>l.push(ue(f))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processInjectorType(l,u,d){if(!(l=se(l)))return!1;let f=zr(l);const m=null==f&&l.ngModule||void 0,b=void 0===m?l:m,C=-1!==d.indexOf(b);if(void 0!==m&&(f=zr(m)),null==f)return!1;if(null!=f.imports&&!C){let R;d.push(b);try{Ri(f.imports,B=>{this.processInjectorType(B,u,d)&&(void 0===R&&(R=[]),R.push(B))})}finally{}if(void 0!==R)for(let B=0;B<R.length;B++){const{ngModule:q,providers:te}=R[B];Ri(te,Ee=>this.processProvider(Ee,q,te||H))}}this.injectorDefTypes.add(b);const I=Rr(b)||(()=>new b);this.records.set(b,Vh(I,Uh));const M=f.providers;if(null!=M&&!C){const R=l;Ri(M,B=>this.processProvider(B,R,M))}return void 0!==m&&void 0!==l.providers}processProvider(l,u,d){let f=Bh(l=se(l))?l:se(l&&l.provide);const m=function mx(a,l,u){return db(a)?Vh(void 0,a.useValue):Vh(KE(a),Uh)}(l);if(Bh(l)||!0!==l.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=Vh(void 0,Uh,!0),b.factory=()=>Wt(b.multi),this.records.set(f,b)),f=l,b.multi.push(l)}this.records.set(f,m)}hydrate(l,u){return u.value===Uh&&(u.value=YE,u.value=u.factory()),"object"==typeof u.value&&u.value&&function bx(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=se(l.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function ub(a){const l=$t(a),u=null!==l?l.factory:Rr(a);if(null!==u)return u;if(a instanceof kn)throw new Fe(204,!1);if(a instanceof Function)return function WE(a){const l=a.length;if(l>0)throw qs(l,"?"),new Fe(204,!1);const u=function Ei(a){const l=a&&(a[gs]||a[ui]);if(l){const u=function Tr(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new Fe(204,!1)}function KE(a,l,u){let d;if(Bh(a)){const f=se(a);return Rr(f)||ub(f)}if(db(a))d=()=>se(a.useValue);else if(function vx(a){return!(!a||!a.useFactory)}(a))d=()=>a.useFactory(...Wt(a.deps||[]));else if(function _x(a){return!(!a||!a.useExisting)}(a))d=()=>Ge(se(a.useExisting));else{const f=se(a&&(a.useClass||a.provide));if(!function yx(a){return!!a.deps}(a))return Rr(f)||ub(f);d=()=>new f(...Wt(a.deps))}return d}function Vh(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function db(a){return null!==a&&"object"==typeof a&&j in a}function Bh(a){return"function"==typeof a}let fl=(()=>{class a{static create(u,d){var f;if(Array.isArray(u))return ru({name:""},d,u,"");{const m=null!==(f=u.name)&&void 0!==f?f:"";return ru({name:m},u.parent,u.providers,m)}}}return a.THROW_IF_NOT_FOUND=Mo,a.NULL=new ab,a.\u0275prov=an({token:a,providedIn:"any",factory:()=>Ge(ob)}),a.__NG_ELEMENT_ID__=-1,a})();function nI(a,l){lh(Ur(a)[1],Mn())}function rI(a){let l=function kx(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const d=[a];for(;l;){let f;if(bs(a))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Fe(903,"");f=l.\u0275dir}if(f){if(u){d.push(f);const b=a;b.inputs=iI(a.inputs),b.declaredInputs=iI(a.declaredInputs),b.outputs=iI(a.outputs);const C=f.hostBindings;C&&UN(a,C);const I=f.viewQuery,M=f.contentQueries;if(I&&FN(a,I),M&&LN(a,M),oe(a.inputs,f.inputs),oe(a.declaredInputs,f.declaredInputs),oe(a.outputs,f.outputs),bs(f)&&f.data.animation){const R=a.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let b=0;b<m.length;b++){const C=m[b];C&&C.ngInherit&&C(a),C===rI&&(u=!1)}}l=Object.getPrototypeOf(l)}!function NN(a){let l=0,u=null;for(let d=a.length-1;d>=0;d--){const f=a[d];f.hostVars=l+=f.hostVars,f.hostAttrs=Yi(f.hostAttrs,u=Yi(u,f.hostAttrs))}}(d)}function iI(a){return a===xr?{}:a===H?[]:a}function FN(a,l){const u=a.viewQuery;a.viewQuery=u?(d,f)=>{l(d,f),u(d,f)}:l}function LN(a,l){const u=a.contentQueries;a.contentQueries=u?(d,f,m)=>{l(d,f,m),u(d,f,m)}:l}function UN(a,l){const u=a.hostBindings;a.hostBindings=u?(d,f)=>{l(d,f),u(d,f)}:l}let Gp=null;function iu(){if(!Gp){const a=Yt.Symbol;if(a&&a.iterator)Gp=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const d=l[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Gp=d)}}}return Gp}function Hh(a){return!!bb(a)&&(Array.isArray(a)||!(a instanceof Map)&&iu()in a)}function bb(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function ac(a,l,u){return a[l]=u}function Li(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function md(a,l,u,d){const f=Li(a,l,u);return Li(a,l+1,d)||f}function Qt(a,l,u,d){const f=Me();return Li(f,Io(),l)&&(qt(),dl(Hn(),f,a,l,u,d)),Qt}function On(a,l,u,d){return Li(a,Io(),u)?l+me(u)+d:Ft}function dI(a,l,u,d,f,m,b,C){const I=Me(),M=qt(),R=a+20,B=M.firstCreatePass?function Nx(a,l,u,d,f,m,b,C,I){const M=l.consts,R=Nh(l,a,4,b||null,$i(M,C));Xy(l,u,R,$i(M,I)),lh(l,R);const B=R.tViews=p_(2,R,d,f,m,l.directiveRegistry,l.pipeRegistry,null,l.schemas,M);return null!==l.queries&&(l.queries.template(l,R),B.queries=l.queries.embeddedTView(R)),R}(R,M,I,l,u,d,f,m,b):M.data[R];xi(B,!1);const q=I[11].createComment("");Kt(M,I,q,B),ze(q,I),w_(I,I[R]=eb(q,I,q,B)),ys(B)&&f_(M,I,B),null!=b&&pd(I,B,C)}function hI(a){return Es(function Pc(){return _t.lFrame.contextLView}(),20+a)}function $p(a,l=yt.Default){const u=Me();return null===u?Ge(a,l):Mi(Mn(),u,se(a),l)}function EI(){throw new Error("invalid")}function Sb(a,l,u){const d=Me();return Li(d,Io(),l)&&Js(qt(),Hn(),d,a,l,d[11],u,!1),Sb}function Ab(a,l,u,d,f){const b=f?"class":"style";zE(a,u,l.inputs[b],b,d)}function S_(a,l,u,d){const f=Me(),m=qt(),b=20+a,C=f[11],I=f[b]=Vt(C,l,function ah(){return _t.lFrame.currentNamespace}()),M=m.firstCreatePass?function Xx(a,l,u,d,f,m,b){const C=l.consts,M=Nh(l,a,2,f,$i(C,m));return Xy(l,u,M,$i(C,b)),null!==M.attrs&&xs(M,M.attrs,!1),null!==M.mergedAttrs&&xs(M,M.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,M),M}(b,m,f,0,l,u,d):m.data[b];xi(M,!0);const R=M.mergedAttrs;null!==R&&Nr(C,I,R);const B=M.classes;null!==B&&By(C,I,B);const q=M.styles;return null!==q&&Pp(C,I,q),64!=(64&M.flags)&&Kt(m,f,I,M),0===function kc(){return _t.lFrame.elementDepthCount}()&&ze(I,f),function Rl(){_t.lFrame.elementDepthCount++}(),ys(M)&&(f_(m,f,M),Hp(m,M,f)),null!==d&&pd(f,M),S_}function A_(){let a=Mn();Ol()?Bu():(a=a.parent,xi(a,!1));const l=a;!function Lu(){_t.lFrame.elementDepthCount--}();const u=qt();return u.firstCreatePass&&(lh(u,a),Sc(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Gu(a){return 0!=(16&a.flags)}(l)&&Ab(u,l,Me(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Am(a){return 0!=(32&a.flags)}(l)&&Ab(u,l,Me(),l.stylesWithoutHost,!1),A_}function xb(a,l,u,d){return S_(a,l,u,d),A_(),xb}function x_(a,l,u){const d=Me(),f=qt(),m=a+20,b=f.firstCreatePass?function eM(a,l,u,d,f){const m=l.consts,b=$i(m,d),C=Nh(l,a,8,"ng-container",b);return null!==b&&xs(C,b,!0),Xy(l,u,C,$i(m,f)),null!==l.queries&&l.queries.elementStart(l,C),C}(m,f,d,l,u):f.data[m];xi(b,!0);const C=d[m]=d[11].createComment("");return Kt(f,d,C,b),ze(C,d),ys(b)&&(f_(f,d,b),Hp(f,b,d)),null!=u&&pd(d,b),x_}function M_(){let a=Mn();const l=qt();return Ol()?Bu():(a=a.parent,xi(a,!1)),l.firstCreatePass&&(lh(l,a),Sc(a)&&l.queries.elementEnd(a)),M_}function DI(){return Me()}function Mb(a){return!!a&&"function"==typeof a.then}function TI(a){return!!a&&"function"==typeof a.subscribe}const SI=TI;function kb(a,l,u,d){const f=Me(),m=qt(),b=Mn();return AI(m,f,f[11],b,a,l,!!u,d),kb}function Rb(a,l){const u=Mn(),d=Me(),f=qt();return AI(f,d,$E(oa(f.data),u,d),u,a,l,!1),Rb}function AI(a,l,u,d,f,m,b,C){const I=ys(d),R=a.firstCreatePass&&GE(a),B=l[8],q=sb(l);let te=!0;if(3&d.type||C){const Ye=mr(d,l),at=C?C(Ye):Ye,ke=q.length,vt=C?sn=>C(un(sn[d.index])):d.index;if(bn(u)){let sn=null;if(!C&&I&&(sn=function tM(a,l,u,d){const f=a.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const b=f[m];if(b===u&&f[m+1]===d){const C=l[7],I=f[m+2];return C.length>I?C[I]:null}"string"==typeof b&&(m+=2)}return null}(a,l,f,d.index)),null!==sn)(sn.__ngLastListenerFn__||sn).__ngNextListenerFn__=m,sn.__ngLastListenerFn__=m,te=!1;else{m=Pb(d,l,B,m,!1);const Dn=u.listen(at,f,m);q.push(m,Dn),R&&R.push(f,vt,ke,ke+1)}}else m=Pb(d,l,B,m,!0),at.addEventListener(f,m,b),q.push(m),R&&R.push(f,vt,ke,b)}else m=Pb(d,l,B,m,!1);const Ee=d.outputs;let Ue;if(te&&null!==Ee&&(Ue=Ee[f])){const Ye=Ue.length;if(Ye)for(let at=0;at<Ye;at+=2){const no=l[Ue[at]][Ue[at+1]].subscribe(m),Od=q.length;q.push(m,no),R&&R.push(f,d.index,Od,-(Od+1))}}}function xI(a,l,u,d){try{return!1!==u(d)}catch(f){return Sn(a,f),!1}}function Pb(a,l,u,d,f){return function m(b){if(b===Function)return d;const C=2&a.flags?_r(a.index,l):l;0==(32&l[2])&&qp(C);let I=xI(l,0,d,b),M=m.__ngNextListenerFn__;for(;M;)I=xI(l,0,M,b)&&I,M=M.__ngNextListenerFn__;return f&&!1===I&&(b.preventDefault(),b.returnValue=!1),I}}function MI(a=1){return function Ds(a){return(_t.lFrame.contextLView=function Qf(a,l){for(;a>0;)l=l[15],a--;return l}(a,_t.lFrame.contextLView))[8]}(a)}function nM(a,l){let u=null;const d=function jA(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(0==(1&u))return l[u+1]}return null}(a);for(let f=0;f<l.length;f++){const m=l[f];if("*"!==m){if(null===d?vE(a,m,!0):yE(d,m))return f}else u=f}return u}function kI(a){const l=Me()[16][6];if(!l.projection){const d=l.projection=qs(a?a.length:1,null),f=d.slice();let m=l.child;for(;null!==m;){const b=a?nM(m,a):0;null!==b&&(f[b]?f[b].projectionNext=m:d[b]=m,f[b]=m),m=m.next}}}function RI(a,l=0,u){const d=Me(),f=qt(),m=Nh(f,20+a,16,null,u||null);null===m.projection&&(m.projection=l),Bu(),64!=(64&m.flags)&&function LA(a,l,u){kp(l[11],0,l,u,ni(a,u,l),hE(u.parent||l[6],u,l))}(f,d,m)}function Ob(a,l,u){return k_(a,"",l,"",u),Ob}function k_(a,l,u,d,f){const m=Me(),b=On(m,l,u,d);return b!==Ft&&Js(qt(),Hn(),m,a,b,m[11],f,!1),k_}function jI(a,l,u,d,f){const m=a[u+1],b=null===l;let C=d?va(m):ul(m),I=!1;for(;0!==C&&(!1===I||b);){const R=a[C+1];sM(a[C],l)&&(I=!0,a[C+1]=d?Gy(R):Fp(R)),C=d?va(R):ul(R)}I&&(a[u+1]=d?Fp(m):Gy(m))}function sM(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&$l(a,l)>=0}function ve(a,l,u){return eo(a,l,u,!1),ve}function yi(a,l){return eo(a,l,null,!0),yi}function eo(a,l,u,d){const f=Me(),m=qt(),b=function zi(a){const l=_t.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}(2);m.firstUpdatePass&&function $I(a,l,u,d){const f=a.data;if(null===f[u+1]){const m=f[cr()],b=function GI(a,l){return l>=a.expandoStartIndex}(a,u);(function Ea(a,l){return 0!=(a.flags&(l?16:32))})(m,d)&&null===l&&!b&&(l=!1),l=function zI(a,l,u,d){const f=oa(a);let m=d?l.residualClasses:l.residualStyles;if(null===f)0===(d?l.classBindings:l.styleBindings)&&(u=ef(u=O_(null,a,l,u,d),l.attrs,d),m=null);else{const b=l.directiveStylingLast;if(-1===b||a[b]!==f)if(u=O_(f,a,l,u,d),null===m){let I=function _d(a,l,u){const d=u?l.classBindings:l.styleBindings;if(0!==ul(d))return a[va(d)]}(a,l,d);void 0!==I&&Array.isArray(I)&&(I=O_(null,a,l,I[1],d),I=ef(I,l.attrs,d),function Lb(a,l,u,d){a[va(u?l.classBindings:l.styleBindings)]=d}(a,l,d,I))}else m=function Xh(a,l,u){let d;const f=l.directiveEnd;for(let m=1+l.directiveStylingLast;m<f;m++)d=ef(d,a[m].hostAttrs,u);return ef(d,l.attrs,u)}(a,l,d)}return void 0!==m&&(d?l.residualClasses=m:l.residualStyles=m),u}(f,m,l,d),function rM(a,l,u,d,f,m){let b=m?l.classBindings:l.styleBindings,C=va(b),I=ul(b);a[d]=u;let R,M=!1;if(Array.isArray(u)){const B=u;R=B[1],(null===R||$l(B,R)>0)&&(M=!0)}else R=u;if(f)if(0!==I){const q=va(a[C+1]);a[d+1]=Op(q,C),0!==q&&(a[q+1]=Lp(a[q+1],d)),a[C+1]=function wE(a,l){return 131071&a|l<<17}(a[C+1],d)}else a[d+1]=Op(C,0),0!==C&&(a[C+1]=Lp(a[C+1],d)),C=d;else a[d+1]=Op(I,0),0===C?C=d:a[I+1]=Lp(a[I+1],d),I=d;M&&(a[d+1]=Fp(a[d+1])),jI(a,R,d,!0),jI(a,R,d,!1),function iM(a,l,u,d,f){const m=f?a.residualClasses:a.residualStyles;null!=m&&"string"==typeof l&&$l(m,l)>=0&&(u[d+1]=Gy(u[d+1]))}(l,R,a,d,m),b=Op(C,I),m?l.classBindings=b:l.styleBindings=b}(f,m,l,u,b,d)}}(m,a,b,d),l!==Ft&&Li(f,b,l)&&function Ub(a,l,u,d,f,m,b,C){if(!(3&l.type))return;const I=a.data,M=I[C+1];cu(function i_(a){return 1==(1&a)}(M)?Hr(I,l,u,f,ul(M),b):void 0)||(cu(m)||function Np(a){return 2==(2&a)}(M)&&(m=Hr(I,null,u,f,C,b)),function gE(a,l,u,d,f){const m=bn(a);if(l)f?m?a.addClass(u,d):u.classList.add(d):m?a.removeClass(u,d):u.classList.remove(d);else{let b=-1===d.indexOf("-")?void 0:x.DashCase;if(null==f)m?a.removeStyle(u,d,b):u.style.removeProperty(d);else{const C="string"==typeof f&&f.endsWith("!important");C&&(f=f.slice(0,-10),b|=x.Important),m?a.setStyle(u,d,f,b):u.style.setProperty(d,f,C?"important":"")}}}(d,b,Eo(cr(),u),f,m))}(m,m.data[cr()],f,f[11],a,f[b+1]=function Vb(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=ue(Po(a)))),a}(l,u),d,b)}function O_(a,l,u,d,f){let m=null;const b=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<b&&(m=l[C],d=ef(d,m.hostAttrs,f),m!==a);)C++;return null!==a&&(u.directiveStylingLast=C),d}function ef(a,l,u){const d=u?1:2;let f=-1;if(null!==l)for(let m=0;m<l.length;m++){const b=l[m];"number"==typeof b?f=b:f===d&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Xi(a,b,!!u||l[++m]))}return void 0===a?null:a}function Hr(a,l,u,d,f,m){const b=null===l;let C;for(;f>0;){const I=a[f],M=Array.isArray(I),R=M?I[1]:I,B=null===R;let q=u[f+1];q===Ft&&(q=B?H:void 0);let te=B?Qu(q,d):R===d?q:void 0;if(M&&!cu(te)&&(te=Qu(I,d)),cu(te)&&(C=te,b))return C;const Ee=a[f+1];f=b?va(Ee):ul(Ee)}if(null!==l){let I=m?l.residualClasses:l.residualStyles;null!=I&&(C=Qu(I,d))}return C}function cu(a){return void 0!==a}function bi(a,l=""){const u=Me(),d=qt(),f=a+20,m=d.firstCreatePass?Nh(d,f,1,l,null):d.data[f],b=u[f]=function xh(a,l){return bn(a)?a.createText(l):a.createTextNode(l)}(u[11],l);Kt(d,u,b,m),xi(m,!1)}function Bb(a){return vd("",a,""),Bb}function vd(a,l,u){const d=Me(),f=On(d,a,l,u);return f!==Ft&&hl(d,cr(),f),vd}function Kb(a,l,u){const d=Me();return Li(d,Io(),l)&&Js(qt(),Hn(),d,a,l,d[11],u,!0),Kb}function B_(a,l,u){const d=Me();if(Li(d,Io(),l)){const m=qt(),b=Hn();Js(m,b,d,a,l,$E(oa(m.data),b,d),u,!0)}return B_}const yd=void 0;var Jb=["en",[["a","p"],["AM","PM"],yd],[["AM","PM"],yd,yd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yd,"{1} 'at' {0}",yd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Qb(a){const u=Math.floor(Math.abs(a)),d=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let du={};function Xb(a){const l=function rD(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=nD(l);if(u)return u;const d=l.split("-")[0];if(u=nD(d),u)return u;if("en"===d)return Jb;throw new Error(`Missing locale data for the locale "${a}".`)}function tD(a){return Xb(a)[wt.PluralCase]}function nD(a){return a in du||(du[a]=Yt.ng&&Yt.ng.common&&Yt.ng.common.locales&&Yt.ng.common.locales[a]),du[a]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const j_="en-US";let sD=j_;function f0(a,l,u,d,f){if(a=se(a),Array.isArray(a))for(let m=0;m<a.length;m++)f0(a[m],l,u,d,f);else{const m=qt(),b=Me();let C=Bh(a)?a:se(a.provide),I=KE(a);const M=Mn(),R=1048575&M.providerIndexes,B=M.directiveStart,q=M.providerIndexes>>20;if(Bh(a)||!a.multi){const te=new Lc(I,f,$p),Ee=eg(C,l,f?R:R+q,B);-1===Ee?(Fr(gi(M,b),m,C),p0(m,a,l.length),l.push(C),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),u.push(te),b.push(te)):(u[Ee]=te,b[Ee]=te)}else{const te=eg(C,l,R+q,B),Ee=eg(C,l,R,R+q),Ue=te>=0&&u[te],Ye=Ee>=0&&u[Ee];if(f&&!Ye||!f&&!Ue){Fr(gi(M,b),m,C);const at=function jt(a,l,u,d,f){const m=new Lc(a,u,$p);return m.multi=[],m.index=l,m.componentProviders=0,Xp(m,f,d&&!u),m}(f?dc:uf,u.length,f,d,I);!f&&Ye&&(u[Ee].providerFactory=at),p0(m,a,l.length,0),l.push(C),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),u.push(at),b.push(at)}else p0(m,a,te>-1?te:Ee,Xp(u[f?Ee:te],I,!f&&d));!f&&d&&Ye&&u[Ee].componentProviders++}}}function p0(a,l,u,d){const f=Bh(l),m=function hb(a){return!!a.useClass}(l);if(f||m){const I=(m?se(l.useClass):l).prototype.ngOnDestroy;if(I){const M=a.destroyHooks||(a.destroyHooks=[]);if(!f&&l.multi){const R=M.indexOf(u);-1===R?M.push(u,[d,I]):M[R+1].push(d,I)}else M.push(u,I)}}}function Xp(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function eg(a,l,u,d){for(let f=u;f<d;f++)if(l[f]===a)return f;return-1}function uf(a,l,u,d){return Cd(this.multi,[])}function dc(a,l,u,d){const f=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=Zt(u,u[1],this.providerFactory.index,d);m=C.slice(0,b),Cd(f,m);for(let I=b;I<C.length;I++)m.push(C[I])}else m=[],Cd(f,m);return m}function Cd(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function TD(a,l=[]){return u=>{u.providersResolver=(d,f)=>function Vn(a,l,u){const d=qt();if(d.firstCreatePass){const f=bs(a);f0(u,d.data,d.blueprint,f,!0),f0(l,d.data,d.blueprint,f,!1)}}(d,f?f(a):a,l)}}class SD{}class g0{resolveComponentFactory(l){throw function er(a){const l=Error(`No component factory found for ${ue(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let hc=(()=>{class a{}return a.NULL=new g0,a})();function m0(){return Ed(Mn(),Me())}function Ed(a,l){return new df(mr(a,l))}let df=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=m0,a})();function NM(a){return a instanceof df?a.nativeElement:a}class _0{}let AD=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function ng(){const a=Me(),u=_r(Mn().index,a);return function hf(a){return a[11]}(Mr(u)?u:a)}(),a})(),rg=(()=>{class a{}return a.\u0275prov=an({token:a,providedIn:"root",factory:()=>null}),a})();class xD{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const X_=new xD("13.3.4"),Id={};function ev(a,l,u,d,f=!1){for(;null!==u;){const m=l[u.index];if(null!==m&&d.push(un(m)),Si(m))for(let C=10;C<m.length;C++){const I=m[C],M=I[1].firstChild;null!==M&&ev(I[1],I,M,d)}const b=u.type;if(8&b)ev(a,l,u.child,d);else if(32&b){const C=Q(u,l);let I;for(;I=C();)d.push(I)}else if(16&b){const C=fE(l,u);if(Array.isArray(C))d.push(...C);else{const I=tt(l[16]);ev(I[1],I,C,d,!0)}}u=f?u.projectionNext:u.next}return d}class fu{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return ev(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(Si(l)){const u=l[8],d=u?u.indexOf(this):-1;d>-1&&(Lo(l,d),Jr(u,d))}this._attachedToViewContainer=!1}Fy(this._lView[1],this._lView)}onDestroy(l){g_(this._lView[1],this._lView,null,l)}markForCheck(){qp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){rb(this._lView[1],this._lView,this.context)}checkNoChanges(){!function ZE(a,l,u){Oc(!0);try{rb(a,l,u)}finally{Oc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ap(a,l){Rh(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=l}}class LM extends fu{constructor(l){super(l),this._view=l}detectChanges(){C_(this._view)}checkNoChanges(){!function hx(a){Oc(!0);try{C_(a)}finally{Oc(!1)}}(this._view)}get context(){return null}}class MD extends hc{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=ir(l);return new ig(u,this.ngModule)}}function kD(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class ig extends SD{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function rc(a){return a.map(qy).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return kD(this.componentDef.inputs)}get outputs(){return kD(this.componentDef.outputs)}create(l,u,d,f){const m=(f=f||this.ngModule)?function UM(a,l){return{get:(u,d,f)=>{const m=a.get(u,Id,f);return m!==Id||d===Id?m:l.get(u,d,f)}}}(l,f.injector):l,b=m.get(_0,xl),C=m.get(rg,null),I=b.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",R=d?function PE(a,l,u){if(bn(a))return a.selectRootElement(l,u===rn.ShadowDom);let d="string"==typeof l?a.querySelector(l):l;return d.textContent="",d}(I,d,this.componentDef.encapsulation):Vt(b.createRenderer(null,this.componentDef),M,function v0(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(M)),B=this.componentDef.onPush?576:528,q=function _b(a,l){return{components:[],scheduler:a||Qc,clean:fx,playerHandler:l||null,flags:0}}(),te=p_(0,null,null,1,0,null,null,null,null,null),Ee=nu(null,te,q,B,null,null,b,I,C,m);let Ue,Ye;$a(Ee);try{const at=function I_(a,l,u,d,f,m){const b=u[1];u[20]=a;const I=Nh(b,20,2,"#host",null),M=I.mergedAttrs=l.hostAttrs;null!==M&&(xs(I,M,!0),null!==a&&(Nr(f,a,M),null!==I.classes&&By(f,a,I.classes),null!==I.styles&&Pp(f,a,I.styles)));const R=d.createRenderer(a,l),B=nu(u,Qy(l),null,l.onPush?64:16,u[20],I,d,R,m||null,null);return b.firstCreatePass&&(Fr(gi(I,u),b,l.type),LE(b,I),VE(I,u.length,1)),w_(u,B),u[20]=B}(R,this.componentDef,Ee,b,I);if(R)if(d)Nr(I,R,["ng-version",X_.full]);else{const{attrs:ke,classes:vt}=function Ph(a){const l=[],u=[];let d=1,f=2;for(;d<a.length;){let m=a[d];if("string"==typeof m)2===f?""!==m&&l.push(m,a[++d]):8===f&&u.push(m);else{if(!As(f))break;f=m}d++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);ke&&Nr(I,R,ke),vt&&vt.length>0&&By(I,R,vt.join(" "))}if(Ye=Nn(te,20),void 0!==u){const ke=Ye.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const sn=u[vt];ke.push(null!=sn?Array.from(sn):null)}}Ue=function pl(a,l,u,d,f){const m=u[1],b=function ex(a,l,u){const d=Mn();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),BE(a,d,l,Fh(a,l,1,null),u));const f=Zt(l,a,d.directiveStart,d);ze(f,l);const m=mr(d,l);return m&&ze(m,l),f}(m,u,l);if(d.components.push(b),a[8]=b,f&&f.forEach(I=>I(b,l)),l.contentQueries){const I=Mn();l.contentQueries(1,b,I.directiveStart)}const C=Mn();return!m.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(Ts(C.index),NE(u[1],C,0,C.directiveStart,C.directiveEnd,l),FE(l,b)),b}(at,this.componentDef,Ee,q,[nI]),jp(te,Ee,null)}finally{Ya()}return new RD(this.componentType,Ue,Ed(Ye,Ee),Ee,Ye)}}class RD extends class tg{}{constructor(l,u,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new LM(f),this.componentType=l}get injector(){return new ua(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}class fc{}class OD{}const pc=new Map;class FD extends fc{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new MD(this);const d=sr(l);this._bootstrapComponents=Fo(d.bootstrap),this._r3Injector=cb(l,u,[{provide:fc,useValue:this},{provide:hc,useValue:this.componentFactoryResolver}],ue(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,u=fl.THROW_IF_NOT_FOUND,d=yt.Default){return l===fl||l===fc||l===ob?this:this._r3Injector.get(l,u,d)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class w0 extends OD{constructor(l){super(),this.moduleType=l,null!==sr(l)&&function b0(a){const l=new Set;!function u(d){const f=sr(d,!0),m=f.id;null!==m&&(function tv(a,l,u){if(l&&l!==u)throw new Error(`Duplicate module registered for ${a} - ${ue(l)} vs ${ue(l.name)}`)}(m,pc.get(m),d),pc.set(m,d));const b=Fo(f.imports);for(const C of b)l.has(C)||(l.add(C),u(C))}(a)}(l)}create(l){return new FD(this.moduleType,l)}}function nv(a,l,u,d,f){return function pf(a,l,u,d,f,m,b){const C=l+u;return md(a,C,f,m)?ac(a,C+2,b?d.call(b,f,m):d(f,m)):ag(a,C+2)}(Me(),Yn(),a,l,u,d,f)}function ag(a,l){const u=a[l];return u===Ft?void 0:u}function UD(a,l,u,d,f,m,b,C){const I=l+u;return function wb(a,l,u,d,f){const m=md(a,l,u,d);return Li(a,l+2,f)||m}(a,I,f,m,b)?ac(a,I+3,C?d.call(C,f,m,b):d(f,m,b)):ag(a,I+3)}function gf(a,l){const u=qt();let d;const f=a+20;u.firstCreatePass?(d=function BD(a,l){if(l)for(let u=l.length-1;u>=0;u--){const d=l[u];if(a===d.name)return d}}(l,u.pipeRegistry),u.data[f]=d,d.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(f,d.onDestroy)):d=u.data[f];const m=d.factory||(d.factory=Rr(d.type)),b=Gn($p);try{const C=ca(!1),I=m();return ca(C),function Fx(a,l,u,d){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),l[u]=d}(u,Me(),f,I),I}finally{Gn(b)}}function sv(a,l,u,d,f){const m=a+20,b=Me(),C=Es(b,m);return function rs(a,l){return a[1].data[l].pure}(b,m)?UD(b,Yn(),l,C.transform,u,d,f,C):C.transform(u,d,f)}function ug(a){return l=>{setTimeout(a,void 0,l)}}const Da=class cg extends s.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,d){var f,m,b;let C=l,I=u||(()=>null),M=d;if(l&&"object"==typeof l){const B=l;C=null===(f=B.next)||void 0===f?void 0:f.bind(B),I=null===(m=B.error)||void 0===m?void 0:m.bind(B),M=null===(b=B.complete)||void 0===b?void 0:b.bind(B)}this.__isAsync&&(I=ug(I),C&&(C=ug(C)),M&&(M=ug(M)));const R=super.subscribe({next:C,error:I,complete:M});return l instanceof ne.w0&&l.add(R),R}};function I0(){return this._results[iu()]()}class gc{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=iu(),d=gc.prototype;d[u]||(d[u]=I0)}get changes(){return this._changes||(this._changes=new Da)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const d=this;d.dirty=!1;const f=Ki(l);(this._changesDetected=!function qc(a,l,u){if(a.length!==l.length)return!1;for(let d=0;d<a.length;d++){let f=a[d],m=l[d];if(u&&(f=u(f),m=u(m)),m!==f)return!1}return!0}(d._results,f,u))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let mf=(()=>{class a{}return a.__NG_ELEMENT_ID__=_f,a})();const gu=mf,D0=class extends gu{constructor(l,u,d){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(l){const u=this._declarationTContainer.tViews,d=nu(this._declarationLView,u,l,16,null,u.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(u)),jp(u,d,l),new fu(d)}};function _f(){return dg(Mn(),Me())}function dg(a,l){return 4&a.type?new D0(l,a,Ed(a,l)):null}let Sd=(()=>{class a{}return a.__NG_ELEMENT_ID__=qM,a})();function qM(){return qD(Mn(),Me())}const ZM=Sd,jD=class extends ZM{constructor(l,u,d){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=d}get element(){return Ed(this._hostTNode,this._hostLView)}get injector(){return new ua(this._hostTNode,this._hostLView)}get parentInjector(){const l=Hs(this._hostTNode,this._hostLView);if(dh(l)){const u=Mt(l,this._hostLView),d=dr(l);return new ua(u[1].data[d+8],u)}return new ua(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=HD(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,d){const f=l.createEmbeddedView(u||{});return this.insert(f,d),f}createComponent(l,u,d,f,m){const b=l&&!function Lr(a){return"function"==typeof a}(l);let C;if(b)C=u;else{const B=u||{};C=B.index,d=B.injector,f=B.projectableNodes,m=B.ngModuleRef}const I=b?l:new ig(ir(l)),M=d||this.parentInjector;if(!m&&null==I.ngModule){const q=(b?M:this.parentInjector).get(fc,null);q&&(m=q)}const R=I.create(M,f,void 0,m);return this.insert(R.hostView,C),R}insert(l,u){const d=l._lView,f=d[1];if(function kl(a){return Si(a[3])}(d)){const R=this.indexOf(l);if(-1!==R)this.detach(R);else{const B=d[3],q=new jD(B,B[6],B[3]);q.detach(q.indexOf(l))}}const m=this._adjustIndex(u),b=this._lContainer;!function Mp(a,l,u,d){const f=10+d,m=u.length;d>0&&(u[f-1][4]=l),d<m-10?(l[4]=u[f],Qi(u,10+d,l)):(u.push(l),l[4]=null),l[3]=u;const b=l[17];null!==b&&u!==b&&function Ny(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(b,l);const C=l[19];null!==C&&C.insertView(a),l[2]|=128}(f,d,b,m);const C=nc(m,b),I=d[11],M=e_(I,b[7]);return null!==M&&function cl(a,l,u,d,f,m){d[0]=f,d[6]=l,Rh(a,d,u,1,f,m)}(f,b[6],I,d,M,C),l.attachToViewContainerRef(),Qi(T0(b),m,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=HD(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),d=Lo(this._lContainer,u);d&&(Jr(T0(this._lContainer),u),Fy(d[1],d))}detach(l){const u=this._adjustIndex(l,-1),d=Lo(this._lContainer,u);return d&&null!=Jr(T0(this._lContainer),u)?new fu(d):null}_adjustIndex(l,u=0){return null==l?this.length+u:l}};function HD(a){return a[8]}function T0(a){return a[8]||(a[8]=[])}function qD(a,l){let u;const d=l[a.index];if(Si(d))u=d;else{let f;if(8&a.type)f=un(d);else{const m=l[11];f=m.createComment("");const b=mr(a,l);ld(m,e_(m,b),f,function dE(a,l){return bn(a)?a.nextSibling(l):l.nextSibling}(m,b),!1)}l[a.index]=u=eb(d,l,f,a),w_(l,u)}return new jD(u,a,l)}class S0{constructor(l){this.queryList=l,this.matches=null}clone(){return new S0(this.queryList)}setDirty(){this.queryList.setDirty()}}class A0{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const d=null!==l.contentQueries?l.contentQueries[0]:u.length,f=[];for(let m=0;m<d;m++){const b=u.getByIndex(m);f.push(this.queries[b.indexInDeclarationView].clone())}return new A0(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==YD(l,u).matches&&this.queries[u].setDirty()}}class GD{constructor(l,u,d=null){this.predicate=l,this.flags=u,this.read=d}}class x0{constructor(l=[]){this.queries=l}elementStart(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let d=0;d<this.length;d++){const f=null!==u?u.length:0,m=this.getByIndex(d).embeddedTView(l,f);m&&(m.indexInDeclarationView=d,null!==u?u.push(m):u=[m])}return null!==u?new x0(u):null}template(l,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class M0{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new M0(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=l.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(l,u,zM(u,m)),this.matchTNodeWithReadOption(l,u,Yu(u,l,m,!1,!1))}else d===mf?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,Yu(u,l,d,!1,!1))}matchTNodeWithReadOption(l,u,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===df||f===Sd||f===mf&&4&u.type)this.addMatch(u.index,-2);else{const m=Yu(u,l,f,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,d)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function zM(a,l){const u=a.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===l)return u[d+1];return null}function k0(a,l,u,d){return-1===u?function ov(a,l){return 11&a.type?Ed(a,l):4&a.type?dg(a,l):null}(l,a):-2===u?function $D(a,l,u){return u===df?Ed(l,a):u===mf?dg(l,a):u===Sd?qD(l,a):void 0}(a,l,d):Zt(a,a[1],u,l)}function hg(a,l,u,d){const f=l[19].queries[d];if(null===f.matches){const m=a.data,b=u.matches,C=[];for(let I=0;I<b.length;I+=2){const M=b[I];C.push(M<0?null:k0(l,m[M],b[I+1],u.metadata.read))}f.matches=C}return f.matches}function R0(a,l,u,d){const f=a.queries.getByIndex(u),m=f.matches;if(null!==m){const b=hg(a,l,f,u);for(let C=0;C<m.length;C+=2){const I=m[C];if(I>0)d.push(b[C/2]);else{const M=m[C+1],R=l[-I];for(let B=10;B<R.length;B++){const q=R[B];q[17]===q[3]&&R0(q[1],q,M,d)}if(null!==R[9]){const B=R[9];for(let q=0;q<B.length;q++){const te=B[q];R0(te[1],te,M,d)}}}}}return d}function av(a){const l=Me(),u=qt(),d=qu();Ul(d+1);const f=YD(u,d);if(a.dirty&&ia(l)===(2==(2&f.metadata.flags))){if(null===f.matches)a.reset([]);else{const m=f.crossesNgTemplate?R0(u,l,d,[]):hg(u,l,f,d);a.reset(m,NM),a.notifyOnChanges()}return!0}return!1}function P0(a,l,u){const d=qt();d.firstCreatePass&&(lv(d,new GD(a,l,u),-1),2==(2&l)&&(d.staticViewQueries=!0)),N0(d,Me(),l)}function O0(a,l,u,d){const f=qt();if(f.firstCreatePass){const m=Mn();lv(f,new GD(l,u,d),m.index),function WM(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(f,a),2==(2&u)&&(f.staticContentQueries=!0)}N0(f,Me(),u)}function zD(){return function YM(a,l){return a[19].queries[l].queryList}(Me(),qu())}function N0(a,l,u){const d=new gc(4==(4&u));g_(a,l,d,d.destroy),null===l[19]&&(l[19]=new A0),l[19].queries.push(new S0(d))}function lv(a,l,u){null===a.queries&&(a.queries=new x0),a.queries.track(new M0(l,u))}function YD(a,l){return a.queries.getByIndex(l)}function mc(...a){}const W0=new kn("Application Initializer");let fv=(()=>{class a{constructor(u){this.appInits=u,this.resolve=mc,this.reject=mc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(Mb(m))u.push(m);else if(SI(m)){const b=new Promise((C,I)=>{m.subscribe({complete:C,error:I})});u.push(b)}}Promise.all(u).then(()=>{d()}).catch(f=>{this.reject(f)}),0===u.length&&d(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(Ge(W0,8))},a.\u0275prov=an({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const _g=new kn("AppId",{providedIn:"root",factory:function vg(){return`${yg()}${yg()}${yg()}`}});function yg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pv=new kn("Platform Initializer"),u1=new kn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vf=new kn("appBootstrapListener");let d1=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=an({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const bg=new kn("LocaleId",{providedIn:"root",factory:()=>It(bg,yt.Optional|yt.SkipSelf)||function h1(){return"undefined"!=typeof $localize&&$localize.locale||j_}()}),K0=new kn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class p1{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let aT=(()=>{class a{compileModuleSync(u){return new w0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),m=Fo(sr(u).declarations).reduce((b,C)=>{const I=ir(C);return I&&b.push(new ig(I)),b},[]);return new p1(d,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=an({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const J0=(()=>Promise.resolve(0))();function yf(a){"undefined"==typeof Zone?J0.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class to{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Da(!1),this.onMicrotaskEmpty=new Da(!1),this.onStable=new Da(!1),this.onError=new Da(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&u,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Md(){let a=Yt.requestAnimationFrame,l=Yt.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function uT(a){const l=()=>{!function gv(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Yt,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,ew(a),a.isCheckStableRunning=!0,X0(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),ew(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,f,m,b,C)=>{try{return bf(a),u.invokeTask(f,m,b,C)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||a.shouldCoalesceRunChangeDetection)&&l(),mv(a)}},onInvoke:(u,d,f,m,b,C,I)=>{try{return bf(a),u.invoke(f,m,b,C,I)}finally{a.shouldCoalesceRunChangeDetection&&l(),mv(a)}},onHasTask:(u,d,f,m)=>{u.hasTask(f,m),d===f&&("microTask"==m.change?(a._hasPendingMicrotasks=m.microTask,ew(a),X0(a)):"macroTask"==m.change&&(a.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,d,f,m)=>(u.handleError(f,m),a.runOutsideAngular(()=>a.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!to.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(to.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,u,d){return this._inner.run(l,u,d)}runTask(l,u,d,f){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+f,l,cT,mc,mc);try{return m.runTask(b,u,d)}finally{m.cancelTask(b)}}runGuarded(l,u,d){return this._inner.runGuarded(l,u,d)}runOutsideAngular(l){return this._outer.run(l)}}const cT={};function X0(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function ew(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function bf(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function mv(a){a._nesting--,X0(a)}class g1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Da,this.onMicrotaskEmpty=new Da,this.onStable=new Da,this.onError=new Da}run(l,u,d){return l.apply(u,d)}runGuarded(l,u,d){return l.apply(u,d)}runOutsideAngular(l){return l()}runTask(l,u,d,f){return l.apply(u,d)}}let dT=(()=>{class a{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{to.assertNotInAngularZone(),yf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yf(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:f})}whenStable(u,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,d,f){return[]}}return a.\u0275fac=function(u){return new(u||a)(Ge(to))},a.\u0275prov=an({token:a,factory:a.\u0275fac}),a})(),m1=(()=>{class a{constructor(){this._applications=new Map,vv.addToWindow(this)}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return vv.findTestabilityInTree(this,u,d)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=an({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();class tw{addToWindow(l){}findTestabilityInTree(l,u,d){return null}}function _v(a){vv=a}let vv=new tw,kd=null;const wf=new kn("AllowMultipleToken"),Ta=new kn("PlatformOnDestroy");class nw{constructor(l,u){this.name=l,this.token=u}}function Cf(a,l,u=[]){const d=`Platform: ${l}`,f=new kn(d);return(m=[])=>{let b=rw();if(!b||b.injector.get(wf,!1)){const C=[...u,...m,{provide:f,useValue:!0}];a?a(C):function Cg(a){if(kd&&!kd.get(wf,!1))throw new Fe(400,"");kd=a;const l=a.get(Eg),u=a.get(pv,null);u&&u.forEach(d=>d())}(function Go(a=[],l){return fl.create({name:l,providers:[{provide:lb,useValue:"platform"},{provide:Ta,useValue:()=>kd=null},...a]})}(C,d))}return function _1(a){const l=rw();if(!l)throw new Fe(401,"");return l}()}}function rw(){var a;return null!==(a=null==kd?void 0:kd.get(Eg))&&void 0!==a?a:null}let Eg=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const C=function iw(a,l){let u;return u="noop"===a?new g1:("zone.js"===a?void 0:a)||new to({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),u}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),I=[{provide:to,useValue:C}];return C.run(()=>{const M=fl.create({providers:I,parent:this.injector,name:u.moduleType.name}),R=u.create(M),B=R.injector.get(Qn,null);if(!B)throw new Fe(402,"");return C.runOutsideAngular(()=>{const q=C.onError.subscribe({next:te=>{B.handleError(te)}});R.onDestroy(()=>{yv(this._modules,R),q.unsubscribe()})}),function $o(a,l,u){try{const d=u();return Mb(d)?d.catch(f=>{throw l.runOutsideAngular(()=>a.handleError(f)),f}):d}catch(d){throw l.runOutsideAngular(()=>a.handleError(d)),d}}(B,C,()=>{const q=R.injector.get(fv);return q.runInitializers(),q.donePromise.then(()=>(function vM(a){Gt(a,"Expected localeId to be defined"),"string"==typeof a&&(sD=a.toLowerCase().replace(/_/g,"-"))}(R.injector.get(bg,j_)||j_),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,d=[]){const f=sw({},d);return function wg(a,l,u){const d=new w0(u);return Promise.resolve(d)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(u){const d=u.injector.get(ow);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Fe(403,"");u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(Ta,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(Ge(fl))},a.\u0275prov=an({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function sw(a,l){return Array.isArray(l)?l.reduce(sw,a):Object.assign(Object.assign({},a),l)}let ow=(()=>{class a{constructor(u,d,f,m){this._zone=u,this._injector=d,this._exceptionHandler=f,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new V.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),C=new V.y(I=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{to.assertNotInAngularZone(),yf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{to.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{M.unsubscribe(),R.unsubscribe()}});this.isStable=(0,he.T)(b,C.pipe((0,ae.B)()))}bootstrap(u,d){if(!this._initStatus.done)throw new Fe(405,"");let f;f=u instanceof SD?u:this._injector.get(hc).resolveComponentFactory(u),this.componentTypes.push(f.componentType);const m=function hT(a){return a.isBoundToModule}(f)?void 0:this._injector.get(fc),C=f.create(fl.NULL,[],d||f.selector,m),I=C.location.nativeElement,M=C.injector.get(dT,null),R=M&&C.injector.get(m1);return M&&R&&R.registerApplication(I,M),C.onDestroy(()=>{this.detachView(C.hostView),yv(this.components,C),R&&R.unregisterApplication(I)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;yv(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(vf,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(u){return new(u||a)(Ge(to),Ge(fl),Ge(Qn),Ge(fv))},a.\u0275prov=an({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function yv(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}let pT=!0,aw=!1;function Ig(){return aw=!0,pT}function gT(){if(aw)throw new Error("Cannot enable prod mode after platform setup.");pT=!1}let wv=(()=>{class a{}return a.__NG_ELEMENT_ID__=w1,a})();function w1(a){return function lw(a,l,u){if(Wd(a)&&!u){const d=_r(a.index,l);return new fu(d,d)}return 47&a.type?new fu(l[16],l):null}(Mn(),Me(),16==(16&a))}class Dv{constructor(){}supports(l){return Hh(l)}create(l){return new S1(l)}}const fw=(a,l)=>l;class S1{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||fw}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,d=this._removalsHead,f=0,m=null;for(;u||d;){const b=!d||u&&u.currentIndex<gw(d,f,m)?u:d,C=gw(b,f,m),I=b.currentIndex;if(b===d)f--,d=d._nextRemoved;else if(u=u._next,null==b.previousIndex)f++;else{m||(m=[]);const M=C-f,R=I-f;if(M!=R){for(let q=0;q<M;q++){const te=q<m.length?m[q]:m[q]=0,Ee=te+q;R<=Ee&&Ee<M&&(m[q]=te+1)}m[b.previousIndex]=R-M}}C!==I&&l(b,C,I)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Hh(l))throw new Fe(900,"");return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,m,b,u=this._itHead,d=!1;if(Array.isArray(l)){this.length=l.length;for(let C=0;C<this.length;C++)m=l[C],b=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,b)?(d&&(u=this._verifyReinsertion(u,m,b,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,b,C),d=!0),u=u._next}else f=0,function yb(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[iu()]();let d;for(;!(d=u.next()).done;)l(d.value)}}(l,C=>{b=this._trackByFn(f,C),null!==u&&Object.is(u.trackById,b)?(d&&(u=this._verifyReinsertion(u,C,b,f)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,b,f),d=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,d,f){let m;return null===l?m=this._itTail:(m=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,m,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,m,f)):l=this._addAfter(new A1(u,d),m,f),l}_verifyReinsertion(l,u,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?l=this._reinsertAfter(m,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,m=l._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(l,u,d),this._addToMoves(l,d),l}_moveAfter(l,u,d){return this._unlink(l),this._insertAfter(l,u,d),this._addToMoves(l,d),l}_addAfter(l,u,d){return this._insertAfter(l,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,d){const f=null===u?this._itHead:u._next;return l._next=f,l._prev=u,null===f?this._itTail=l:f._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new vT),this._linkedRecords.put(l),l.currentIndex=d,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,d=l._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vT),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class A1{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pw{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,l))return d;return null}remove(l){const u=l._prevDup,d=l._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class vT{constructor(){this.map=new Map}put(l){const u=l.trackById;let d=this.map.get(u);d||(d=new pw,this.map.set(u,d)),d.add(l)}get(l,u){const f=this.map.get(l);return f?f.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gw(a,l,u){const d=a.previousIndex;if(null===d)return d;let f=0;return u&&d<u.length&&(f=u[d]),d+l+f}class mw{constructor(){}supports(l){return l instanceof Map||bb(l)}create(){return new yT}}class yT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||bb(l)))throw new Fe(900,"")}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(d,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(f,d);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const d=l._prev;return u._next=l,u._prev=d,l._prev=u,d&&(d._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,u);const m=f._prev,b=f._next;return m&&(m._next=b),b&&(b._prev=m),f._next=null,f._prev=null,f}const d=new bT(l);return this._records.set(l,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(d=>u(l[d],d))}}class bT{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ss(){return new Ef([new Dv])}let Ef=(()=>{class a{constructor(u){this.factories=u}static create(u,d){if(null!=d){const f=d.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:d=>a.create(u,d||ss()),deps:[[a,new wr,new Xr]]}}find(u){const d=this.factories.find(f=>f.supports(u));if(null!=d)return d;throw new Fe(901,"")}}return a.\u0275prov=an({token:a,providedIn:"root",factory:ss}),a})();function Tg(){return new ks([new mw])}let ks=(()=>{class a{constructor(u){this.factories=u}static create(u,d){if(d){const f=d.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:d=>a.create(u,d||Tg()),deps:[[a,new wr,new Xr]]}}find(u){const d=this.factories.find(m=>m.supports(u));if(d)return d;throw new Fe(901,"")}}return a.\u0275prov=an({token:a,providedIn:"root",factory:Tg}),a})();const hF=Cf(null,"core",[]);let M1=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(Ge(ow))},a.\u0275mod=Yr({type:a}),a.\u0275inj=on({}),a})()},3942:(st,Ce,L)=>{L.d(Ce,{Z:()=>Fe});var s=L(2090),ne=L(4859),V=L(9681),he=L(1877);class ae{constructor(me,Se){this._delegate=me,this.firebase=Se,(0,V._addComponent)(me,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(me,Se=V._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(me);return!nt.isInitialized()&&"EXPLICIT"===(null===(Qe=nt.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:Se})}_removeServiceInstance(me,Se=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(Se)}_addComponent(me){(0,V._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,V._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new s.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function fe(){const He=function ue(He){const me={},Se={__esModule:!0,initializeApp:function xe(Ze,$={}){const De=V.initializeApp(Ze,$);if((0,s.r3)(me,De.name))return me[De.name];const J=new He(De,Se);return me[De.name]=J,J},app:nt,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function Te(Ze){const $=Ze.name,De=$.replace("-compat","");if(V._registerComponent(Ze)&&"PUBLIC"===Ze.type){const J=(le=nt())=>{if("function"!=typeof le[De])throw oe.create("invalid-app-argument",{appName:$});return le[De]()};void 0!==Ze.serviceProps&&(0,s.ZB)(J,Ze.serviceProps),Se[De]=J,He.prototype[De]=function(...le){return this._getService.bind(this,$).apply(this,Ze.multipleInstances?le:[])}}return"PUBLIC"===Ze.type?Se[De]:null},removeApp:function Qe(Ze){delete me[Ze]},useAsService:function qe(Ze,$){return"serverAuth"===$?null:$},modularAPIs:V}};function nt(Ze){if(!(0,s.r3)(me,Ze=Ze||V._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:Ze});return me[Ze]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function Ie(){return Object.keys(me).map(Ze=>me[Ze])}}),nt.App=He,Se}(ae);return He.INTERNAL=Object.assign(Object.assign({},He.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function me(Se){(0,s.ZB)(He,Se)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),He}(),G=new he.Yd("@firebase/app-compat");if((0,s.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=z;!function Re(He){(0,V.registerVersion)("@firebase/app-compat","0.1.25",He)}()},9681:(st,Ce,L)=>{L.r(Ce),L.d(Ce,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>gs,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>vn,_addOrOverwriteComponent:()=>an,_apps:()=>pn,_clearComponents:()=>ps,_components:()=>Zn,_getProvider:()=>on,_registerComponent:()=>$r,_removeServiceInstance:()=>$t,deleteApp:()=>yt,getApp:()=>ui,getApps:()=>ms,initializeApp:()=>mo,onLog:()=>Gn,registerVersion:()=>jn,setLogLevel:()=>_o});var s=L(5861),ne=L(4859),V=L(1877),he=L(2090),ae=L(8766);class be{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(Pe=>{if(function oe(Y){const re=Y.getComponent();return"VERSION"===(null==re?void 0:re.type)}(Pe)){const ot=Pe.getImmediate();return`${ot.library}/${ot.version}`}return null}).filter(Pe=>Pe).join(" ")}}const ue="@firebase/app",z=new V.Yd("@firebase/app"),Gt="[DEFAULT]",rt={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pn=new Map,Zn=new Map;function vn(Y,re){try{Y.container.addComponent(re)}catch(Pe){z.debug(`Component ${re.name} failed to register with FirebaseApp ${Y.name}`,Pe)}}function an(Y,re){Y.container.addOrOverwriteComponent(re)}function $r(Y){const re=Y.name;if(Zn.has(re))return z.debug(`There were multiple attempts to register component ${re}.`),!1;Zn.set(re,Y);for(const Pe of pn.values())vn(Pe,Y);return!0}function on(Y,re){const Pe=Y.container.getProvider("heartbeat").getImmediate({optional:!0});return Pe&&Pe.triggerHeartbeat(),Y.container.getProvider(re)}function $t(Y,re,Pe=Gt){on(Y,re).clearInstance(Pe)}function ps(){Zn.clear()}const Tr=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class zr{constructor(re,Pe,ot){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},Pe),this._name=Pe.name,this._automaticDataCollectionEnabled=Pe.automaticDataCollectionEnabled,this._container=ot,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const gs="9.8.1";function mo(Y,re={}){"object"!=typeof re&&(re={name:re});const Pe=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},re),ot=Pe.name;if("string"!=typeof ot||!ot)throw Tr.create("bad-app-name",{appName:String(ot)});const mt=pn.get(ot);if(mt){if((0,he.vZ)(Y,mt.options)&&(0,he.vZ)(Pe,mt.config))return mt;throw Tr.create("duplicate-app",{appName:ot})}const At=new ne.H0(ot);for(const Tt of Zn.values())At.addComponent(Tt);const An=new zr(Y,Pe,At);return pn.set(ot,An),An}function ui(Y=Gt){const re=pn.get(Y);if(!re)throw Tr.create("no-app",{appName:Y});return re}function ms(){return Array.from(pn.values())}function yt(Y){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,s.Z)(function*(Y){const re=Y.name;pn.has(re)&&(pn.delete(re),yield Promise.all(Y.container.getProviders().map(Pe=>Pe.delete())),Y.isDeleted=!0)})).apply(this,arguments)}function jn(Y,re,Pe){var ot;let mt=null!==(ot=rt[Y])&&void 0!==ot?ot:Y;Pe&&(mt+=`-${Pe}`);const At=mt.match(/\s|\//),An=re.match(/\s|\//);if(At||An){const Tt=[`Unable to register library "${mt}" with version "${re}":`];return At&&Tt.push(`library name "${mt}" contains illegal characters (whitespace or "/")`),At&&An&&Tt.push("and"),An&&Tt.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void z.warn(Tt.join(" "))}$r(new ne.wA(`${mt}-version`,()=>({library:mt,version:re}),"VERSION"))}function Gn(Y,re){if(null!==Y&&"function"!=typeof Y)throw Tr.create("invalid-log-argument");(0,V.Am)(Y,re)}function _o(Y){(0,V.Ub)(Y)}const $n="firebase-heartbeat-store";let Di=null;function Qo(){return Di||(Di=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(Y,re)=>{0===re&&Y.createObjectStore($n)}}).catch(Y=>{throw Tr.create("storage-open",{originalErrorMessage:Y.message})})),Di}function ct(){return(ct=(0,s.Z)(function*(Y){try{return(yield Qo()).transaction($n).objectStore($n).get(Ti(Y))}catch(re){throw Tr.create("storage-get",{originalErrorMessage:re.message})}})).apply(this,arguments)}function Ct(Y,re){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,s.Z)(function*(Y,re){try{const ot=(yield Qo()).transaction($n,"readwrite");return yield ot.objectStore($n).put(re,Ti(Y)),ot.done}catch(Pe){throw Tr.create("storage-set",{originalErrorMessage:Pe.message})}})).apply(this,arguments)}function Ti(Y){return`${Y.name}!${Y.options.appId}`}class Ar{constructor(re){this.container=re,this._heartbeatsCache=null;const Pe=this.container.getProvider("app").getImmediate();this._storage=new W(Pe),this._heartbeatsCachePromise=this._storage.read().then(ot=>(this._heartbeatsCache=ot,ot))}triggerHeartbeat(){var re=this;return(0,s.Z)(function*(){const ot=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mt=xr();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==mt&&!re._heartbeatsCache.heartbeats.some(At=>At.date===mt))return re._heartbeatsCache.heartbeats.push({date:mt,agent:ot}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(At=>{const An=new Date(At.date).valueOf();return Date.now()-An<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,s.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const Pe=xr(),{heartbeatsToSend:ot,unsentEntries:mt}=function H(Y,re=1024){const Pe=[];let ot=Y.slice();for(const mt of Y){const At=Pe.find(An=>An.agent===mt.agent);if(At){if(At.dates.push(mt.date),K(Pe)>re){At.dates.pop();break}}else if(Pe.push({agent:mt.agent,dates:[mt.date]}),K(Pe)>re){Pe.pop();break}ot=ot.slice(1)}return{heartbeatsToSend:Pe,unsentEntries:ot}}(re._heartbeatsCache.heartbeats),At=(0,he.L)(JSON.stringify({version:2,heartbeats:ot}));return re._heartbeatsCache.lastSentHeartbeatDate=Pe,mt.length>0?(re._heartbeatsCache.heartbeats=mt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),At})()}}function xr(){return(new Date).toISOString().substring(0,10)}class W{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,s.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,s.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function rn(Y){return ct.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var Pe=this;return(0,s.Z)(function*(){var ot;if(yield Pe._canUseIndexedDBPromise){const At=yield Pe.read();return Ct(Pe.app,{lastSentHeartbeatDate:null!==(ot=re.lastSentHeartbeatDate)&&void 0!==ot?ot:At.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var Pe=this;return(0,s.Z)(function*(){var ot;if(yield Pe._canUseIndexedDBPromise){const At=yield Pe.read();return Ct(Pe.app,{lastSentHeartbeatDate:null!==(ot=re.lastSentHeartbeatDate)&&void 0!==ot?ot:At.lastSentHeartbeatDate,heartbeats:[...At.heartbeats,...re.heartbeats]})}})()}}function K(Y){return(0,he.L)(JSON.stringify({version:2,heartbeats:Y})).length}!function Ae(Y){$r(new ne.wA("platform-logger",re=>new be(re),"PRIVATE")),$r(new ne.wA("heartbeat",re=>new Ar(re),"PRIVATE")),jn(ue,"0.7.24",Y),jn(ue,"0.7.24","esm2017"),jn("fire-js","")}("")},4859:(st,Ce,L)=>{L.d(Ce,{H0:()=>ue,wA:()=>V,zt:()=>ae});var s=L(5861),ne=L(2090);class V{constructor(z,G,se){this.name=z,this.instanceFactory=G,this.type=se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const he="[DEFAULT]";class ae{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const se=new ne.BH;if(this.instancesDeferred.set(G,se),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:G});Ke&&se.resolve(Ke)}catch(Ke){}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const se=this.normalizeInstanceIdentifier(null==z?void 0:z.identifier),Ke=null!==(G=null==z?void 0:z.optional)&&void 0!==G&&G;if(!this.isInitialized(se)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:se})}catch(Re){if(Ke)return null;throw Re}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function oe(fe){return"EAGER"===fe.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:he})}catch(G){}for(const[G,se]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(G);try{const Re=this.getOrInitializeService({instanceIdentifier:Ke});se.resolve(Re)}catch(Re){}}}}clearInstance(z=he){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,s.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(se=>"INTERNAL"in se).map(se=>se.INTERNAL.delete()),...G.filter(se=>"_delete"in se).map(se=>se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=he){return this.instances.has(z)}getOptions(z=he){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,se=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(se))throw Error(`${this.name}(${se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:se,options:G});for(const[Re,Fe]of this.instancesDeferred.entries())se===this.normalizeInstanceIdentifier(Re)&&Fe.resolve(Ke);return Ke}onInit(z,G){var se;const Ke=this.normalizeInstanceIdentifier(G),Re=null!==(se=this.onInitCallbacks.get(Ke))&&void 0!==se?se:new Set;Re.add(z),this.onInitCallbacks.set(Ke,Re);const Fe=this.instances.get(Ke);return Fe&&z(Fe,Ke),()=>{Re.delete(z)}}invokeOnInitCallbacks(z,G){const se=this.onInitCallbacks.get(G);if(se)for(const Ke of se)try{Ke(z,G)}catch(Re){}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let se=this.instances.get(z);if(!se&&this.component&&(se=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=z,fe===he?void 0:fe),options:G}),this.instances.set(z,se),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(se,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,se)}catch(Ke){}var fe;return se||null}normalizeInstanceIdentifier(z=he){return this.component?this.component.multipleInstances?z:he:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new ae(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(st,Ce,L)=>{L.d(Ce,{Am:()=>fe,Ub:()=>ue,Yd:()=>oe,in:()=>ne});const s=[];var ne=(()=>{return(z=ne||(ne={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",ne;var z})();const V={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},he=ne.INFO,ae={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},be=(z,G,...se)=>{if(G<z.logLevel)return;const Ke=(new Date).toISOString(),Re=ae[G];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Re](`[${Ke}]  ${z.name}:`,...se)};class oe{constructor(G){this.name=G,this._logLevel=he,this._logHandler=be,this._userLogHandler=null,s.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in ne))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?V[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...G),this._logHandler(this,ne.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...G),this._logHandler(this,ne.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...G),this._logHandler(this,ne.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...G),this._logHandler(this,ne.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...G),this._logHandler(this,ne.ERROR,...G)}}function ue(z){s.forEach(G=>{G.setLogLevel(z)})}function fe(z,G){for(const se of s){let Ke=null;G&&G.level&&(Ke=V[G.level]),se.userLogHandler=null===z?null:(Re,Fe,...He)=>{const me=He.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch(Qe){return null}}).filter(Se=>Se).join(" ");Fe>=(null!=Ke?Ke:Re.logLevel)&&z({level:ne[Fe].toLowerCase(),message:me,args:He,type:Re.name})}}}},8766:(st,Ce,L)=>{L.d(Ce,{Lj:()=>xe,X3:()=>nt});var s=L(5861);let V,he;const oe=new WeakMap,ue=new WeakMap,fe=new WeakMap,z=new WeakMap,G=new WeakMap;let Re={get($,De,J){if($ instanceof IDBTransaction){if("done"===De)return ue.get($);if("objectStoreNames"===De)return $.objectStoreNames||fe.get($);if("store"===De)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return Se($[De])},set:($,De,J)=>($[De]=J,!0),has:($,De)=>$ instanceof IDBTransaction&&("done"===De||"store"===De)||De in $};function me($){return"function"==typeof $?function He($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function be(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...De){return $.apply(Qe(this),De),Se(oe.get(this))}:function(...De){return Se($.apply(Qe(this),De))}:function(De,...J){const le=$.call(Qe(this),De,...J);return fe.set(le,De.sort?De.sort():[De]),Se(le)}}($):($ instanceof IDBTransaction&&function Ke($){if(ue.has($))return;const De=new Promise((J,le)=>{const ie=()=>{$.removeEventListener("complete",we),$.removeEventListener("error",de),$.removeEventListener("abort",de)},we=()=>{J(),ie()},de=()=>{le($.error||new DOMException("AbortError","AbortError")),ie()};$.addEventListener("complete",we),$.addEventListener("error",de),$.addEventListener("abort",de)});ue.set($,De)}($),(($,De)=>De.some(J=>$ instanceof J))($,function ae(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,Re):$)}function Se($){if($ instanceof IDBRequest)return function se($){const De=new Promise((J,le)=>{const ie=()=>{$.removeEventListener("success",we),$.removeEventListener("error",de)},we=()=>{J(Se($.result)),ie()},de=()=>{le($.error),ie()};$.addEventListener("success",we),$.addEventListener("error",de)});return De.then(J=>{J instanceof IDBCursor&&oe.set(J,$)}).catch(()=>{}),G.set(De,$),De}($);if(z.has($))return z.get($);const De=me($);return De!==$&&(z.set($,De),G.set(De,$)),De}const Qe=$=>G.get($);function nt($,De,{blocked:J,upgrade:le,blocking:ie,terminated:we}={}){const de=indexedDB.open($,De),Le=Se(de);return le&&de.addEventListener("upgradeneeded",pt=>{le(Se(de.result),pt.oldVersion,pt.newVersion,Se(de.transaction))}),J&&de.addEventListener("blocked",()=>J()),Le.then(pt=>{we&&pt.addEventListener("close",()=>we()),ie&&pt.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Le}function xe($,{blocked:De}={}){const J=indexedDB.deleteDatabase($);return De&&J.addEventListener("blocked",()=>De()),Se(J).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],qe=new Map;function Ze($,De){if(!($ instanceof IDBDatabase)||De in $||"string"!=typeof De)return;if(qe.get(De))return qe.get(De);const J=De.replace(/FromIndex$/,""),le=De!==J,ie=Te.includes(J);if(!(J in(le?IDBIndex:IDBObjectStore).prototype)||!ie&&!Ie.includes(J))return;const we=function(){var de=(0,s.Z)(function*(Le,...pt){const nn=this.transaction(Le,ie?"readwrite":"readonly");let Gt=nn.store;return le&&(Gt=Gt.index(pt.shift())),(yield Promise.all([Gt[J](...pt),ie&&nn.done]))[0]});return function(pt){return de.apply(this,arguments)}}();return qe.set(De,we),we}!function Fe($){Re=$(Re)}($=>Hj(jj({},$),{get:(De,J,le)=>Ze(De,J)||$.get(De,J,le),has:(De,J)=>!!Ze(De,J)||$.has(De,J)}))},5861:(st,Ce,L)=>{function s(V,he,ae,be,oe,ue,fe){try{var z=V[ue](fe),G=z.value}catch(se){return void ae(se)}z.done?he(G):Promise.resolve(G).then(be,oe)}function ne(V){return function(){var he=this,ae=arguments;return new Promise(function(be,oe){var ue=V.apply(he,ae);function fe(G){s(ue,be,oe,fe,z,"next",G)}function z(G){s(ue,be,oe,fe,z,"throw",G)}fe(void 0)})}}L.d(Ce,{Z:()=>ne})}},st=>{st(st.s=8461)}]);